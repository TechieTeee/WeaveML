var warp=(()=>{var L6=Object.create;var Ds=Object.defineProperty;var D6=Object.getOwnPropertyDescriptor;var U6=Object.getOwnPropertyNames;var q6=Object.getPrototypeOf,j6=Object.prototype.hasOwnProperty;var W6=(r,e,t)=>e in r?Ds(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var X=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),$6=(r,e)=>{for(var t in e)Ds(r,t,{get:e[t],enumerable:!0})},Dp=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of U6(e))!j6.call(r,i)&&i!==t&&Ds(r,i,{get:()=>e[i],enumerable:!(n=D6(e,i))||n.enumerable});return r};var ct=(r,e,t)=>(t=r!=null?L6(q6(r)):{},Dp(e||!r||!r.__esModule?Ds(t,"default",{value:r,enumerable:!0}):t,r)),H6=r=>Dp(Ds({},"__esModule",{value:!0}),r);var Us=(r,e,t)=>(W6(r,typeof e!="symbol"?e+"":e,t),t);var jp=X(qp=>{"use strict";qp.supports=function(...e){let t=e.reduce((n,i)=>Object.assign(n,i),{});return Object.assign(t,{snapshots:t.snapshots||!1,permanence:t.permanence||!1,seek:t.seek||!1,clear:t.clear||!1,getMany:t.getMany||!1,keyIterator:t.keyIterator||!1,valueIterator:t.valueIterator||!1,iteratorNextv:t.iteratorNextv||!1,iteratorAll:t.iteratorAll||!1,status:t.status||!1,createIfMissing:t.createIfMissing||!1,errorIfExists:t.errorIfExists||!1,deferredOpen:t.deferredOpen||!1,promises:t.promises||!1,streams:t.streams||!1,encodings:Object.assign({},t.encodings),events:Object.assign({},t.events),additionalMethods:Object.assign({},t.additionalMethods)})}});var or=X((pT,Wp)=>{"use strict";Wp.exports=class extends Error{constructor(e,t){super(e||""),typeof t=="object"&&t!==null&&(t.code&&(this.code=String(t.code)),t.expected&&(this.expected=!0),t.transient&&(this.transient=!0),t.cause&&(this.cause=t.cause)),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}});var _f=X(xf=>{"use strict";xf.byteLength=z6;xf.toByteArray=V6;xf.fromByteArray=Y6;var Nr=[],sr=[],K6=typeof Uint8Array<"u"?Uint8Array:Array,Vu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Si=0,$p=Vu.length;Si<$p;++Si)Nr[Si]=Vu[Si],sr[Vu.charCodeAt(Si)]=Si;var Si,$p;sr["-".charCodeAt(0)]=62;sr["_".charCodeAt(0)]=63;function Hp(r){var e=r.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=r.indexOf("=");t===-1&&(t=e);var n=t===e?0:4-t%4;return[t,n]}function z6(r){var e=Hp(r),t=e[0],n=e[1];return(t+n)*3/4-n}function G6(r,e,t){return(e+t)*3/4-t}function V6(r){var e,t=Hp(r),n=t[0],i=t[1],o=new K6(G6(r,n,i)),s=0,f=i>0?n-4:n,h;for(h=0;h<f;h+=4)e=sr[r.charCodeAt(h)]<<18|sr[r.charCodeAt(h+1)]<<12|sr[r.charCodeAt(h+2)]<<6|sr[r.charCodeAt(h+3)],o[s++]=e>>16&255,o[s++]=e>>8&255,o[s++]=e&255;return i===2&&(e=sr[r.charCodeAt(h)]<<2|sr[r.charCodeAt(h+1)]>>4,o[s++]=e&255),i===1&&(e=sr[r.charCodeAt(h)]<<10|sr[r.charCodeAt(h+1)]<<4|sr[r.charCodeAt(h+2)]>>2,o[s++]=e>>8&255,o[s++]=e&255),o}function X6(r){return Nr[r>>18&63]+Nr[r>>12&63]+Nr[r>>6&63]+Nr[r&63]}function J6(r,e,t){for(var n,i=[],o=e;o<t;o+=3)n=(r[o]<<16&16711680)+(r[o+1]<<8&65280)+(r[o+2]&255),i.push(X6(n));return i.join("")}function Y6(r){for(var e,t=r.length,n=t%3,i=[],o=16383,s=0,f=t-n;s<f;s+=o)i.push(J6(r,s,s+o>f?f:s+o));return n===1?(e=r[t-1],i.push(Nr[e>>2]+Nr[e<<4&63]+"==")):n===2&&(e=(r[t-2]<<8)+r[t-1],i.push(Nr[e>>10]+Nr[e>>4&63]+Nr[e<<2&63]+"=")),i.join("")}});var Kp=X(Xu=>{Xu.read=function(r,e,t,n,i){var o,s,f=i*8-n-1,h=(1<<f)-1,g=h>>1,x=-7,T=t?i-1:0,I=t?-1:1,A=r[e+T];for(T+=I,o=A&(1<<-x)-1,A>>=-x,x+=f;x>0;o=o*256+r[e+T],T+=I,x-=8);for(s=o&(1<<-x)-1,o>>=-x,x+=n;x>0;s=s*256+r[e+T],T+=I,x-=8);if(o===0)o=1-g;else{if(o===h)return s?NaN:(A?-1:1)*(1/0);s=s+Math.pow(2,n),o=o-g}return(A?-1:1)*s*Math.pow(2,o-n)};Xu.write=function(r,e,t,n,i,o){var s,f,h,g=o*8-i-1,x=(1<<g)-1,T=x>>1,I=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,A=n?0:o-1,C=n?1:-1,j=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(f=isNaN(e)?1:0,s=x):(s=Math.floor(Math.log(e)/Math.LN2),e*(h=Math.pow(2,-s))<1&&(s--,h*=2),s+T>=1?e+=I/h:e+=I*Math.pow(2,1-T),e*h>=2&&(s++,h/=2),s+T>=x?(f=0,s=x):s+T>=1?(f=(e*h-1)*Math.pow(2,i),s=s+T):(f=e*Math.pow(2,T-1)*Math.pow(2,i),s=0));i>=8;r[t+A]=f&255,A+=C,f/=256,i-=8);for(s=s<<i|f,g+=i;g>0;r[t+A]=s&255,A+=C,s/=256,g-=8);r[t+A-C]|=j*128}});var Tn=X(Fo=>{"use strict";var Ju=_f(),Eo=Kp(),zp=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Fo.Buffer=oe;Fo.SlowBuffer=n3;Fo.INSPECT_MAX_BYTES=50;var Sf=2147483647;Fo.kMaxLength=Sf;oe.TYPED_ARRAY_SUPPORT=Q6();!oe.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function Q6(){try{let r=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(r,e),r.foo()===42}catch{return!1}}Object.defineProperty(oe.prototype,"parent",{enumerable:!0,get:function(){if(!!oe.isBuffer(this))return this.buffer}});Object.defineProperty(oe.prototype,"offset",{enumerable:!0,get:function(){if(!!oe.isBuffer(this))return this.byteOffset}});function tn(r){if(r>Sf)throw new RangeError('The value "'+r+'" is invalid for option "size"');let e=new Uint8Array(r);return Object.setPrototypeOf(e,oe.prototype),e}function oe(r,e,t){if(typeof r=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return el(r)}return Jp(r,e,t)}oe.poolSize=8192;function Jp(r,e,t){if(typeof r=="string")return e3(r,e);if(ArrayBuffer.isView(r))return t3(r);if(r==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r);if(kr(r,ArrayBuffer)||r&&kr(r.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(kr(r,SharedArrayBuffer)||r&&kr(r.buffer,SharedArrayBuffer)))return Qu(r,e,t);if(typeof r=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let n=r.valueOf&&r.valueOf();if(n!=null&&n!==r)return oe.from(n,e,t);let i=r3(r);if(i)return i;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof r[Symbol.toPrimitive]=="function")return oe.from(r[Symbol.toPrimitive]("string"),e,t);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r)}oe.from=function(r,e,t){return Jp(r,e,t)};Object.setPrototypeOf(oe.prototype,Uint8Array.prototype);Object.setPrototypeOf(oe,Uint8Array);function Yp(r){if(typeof r!="number")throw new TypeError('"size" argument must be of type number');if(r<0)throw new RangeError('The value "'+r+'" is invalid for option "size"')}function Z6(r,e,t){return Yp(r),r<=0?tn(r):e!==void 0?typeof t=="string"?tn(r).fill(e,t):tn(r).fill(e):tn(r)}oe.alloc=function(r,e,t){return Z6(r,e,t)};function el(r){return Yp(r),tn(r<0?0:tl(r)|0)}oe.allocUnsafe=function(r){return el(r)};oe.allocUnsafeSlow=function(r){return el(r)};function e3(r,e){if((typeof e!="string"||e==="")&&(e="utf8"),!oe.isEncoding(e))throw new TypeError("Unknown encoding: "+e);let t=Qp(r,e)|0,n=tn(t),i=n.write(r,e);return i!==t&&(n=n.slice(0,i)),n}function Yu(r){let e=r.length<0?0:tl(r.length)|0,t=tn(e);for(let n=0;n<e;n+=1)t[n]=r[n]&255;return t}function t3(r){if(kr(r,Uint8Array)){let e=new Uint8Array(r);return Qu(e.buffer,e.byteOffset,e.byteLength)}return Yu(r)}function Qu(r,e,t){if(e<0||r.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(r.byteLength<e+(t||0))throw new RangeError('"length" is outside of buffer bounds');let n;return e===void 0&&t===void 0?n=new Uint8Array(r):t===void 0?n=new Uint8Array(r,e):n=new Uint8Array(r,e,t),Object.setPrototypeOf(n,oe.prototype),n}function r3(r){if(oe.isBuffer(r)){let e=tl(r.length)|0,t=tn(e);return t.length===0||r.copy(t,0,0,e),t}if(r.length!==void 0)return typeof r.length!="number"||nl(r.length)?tn(0):Yu(r);if(r.type==="Buffer"&&Array.isArray(r.data))return Yu(r.data)}function tl(r){if(r>=Sf)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Sf.toString(16)+" bytes");return r|0}function n3(r){return+r!=r&&(r=0),oe.alloc(+r)}oe.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==oe.prototype};oe.compare=function(e,t){if(kr(e,Uint8Array)&&(e=oe.from(e,e.offset,e.byteLength)),kr(t,Uint8Array)&&(t=oe.from(t,t.offset,t.byteLength)),!oe.isBuffer(e)||!oe.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,i=t.length;for(let o=0,s=Math.min(n,i);o<s;++o)if(e[o]!==t[o]){n=e[o],i=t[o];break}return n<i?-1:i<n?1:0};oe.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};oe.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return oe.alloc(0);let n;if(t===void 0)for(t=0,n=0;n<e.length;++n)t+=e[n].length;let i=oe.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){let s=e[n];if(kr(s,Uint8Array))o+s.length>i.length?(oe.isBuffer(s)||(s=oe.from(s)),s.copy(i,o)):Uint8Array.prototype.set.call(i,s,o);else if(oe.isBuffer(s))s.copy(i,o);else throw new TypeError('"list" argument must be an Array of Buffers');o+=s.length}return i};function Qp(r,e){if(oe.isBuffer(r))return r.length;if(ArrayBuffer.isView(r)||kr(r,ArrayBuffer))return r.byteLength;if(typeof r!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof r);let t=r.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&t===0)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":return Zu(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t*2;case"hex":return t>>>1;case"base64":return ag(r).length;default:if(i)return n?-1:Zu(r).length;e=(""+e).toLowerCase(),i=!0}}oe.byteLength=Qp;function i3(r,e,t){let n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0,e>>>=0,t<=e))return"";for(r||(r="utf8");;)switch(r){case"hex":return p3(this,e,t);case"utf8":case"utf-8":return eg(this,e,t);case"ascii":return h3(this,e,t);case"latin1":case"binary":return d3(this,e,t);case"base64":return u3(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return g3(this,e,t);default:if(n)throw new TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),n=!0}}oe.prototype._isBuffer=!0;function Ei(r,e,t){let n=r[e];r[e]=r[t],r[t]=n}oe.prototype.swap16=function(){let e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)Ei(this,t,t+1);return this};oe.prototype.swap32=function(){let e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)Ei(this,t,t+3),Ei(this,t+1,t+2);return this};oe.prototype.swap64=function(){let e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)Ei(this,t,t+7),Ei(this,t+1,t+6),Ei(this,t+2,t+5),Ei(this,t+3,t+4);return this};oe.prototype.toString=function(){let e=this.length;return e===0?"":arguments.length===0?eg(this,0,e):i3.apply(this,arguments)};oe.prototype.toLocaleString=oe.prototype.toString;oe.prototype.equals=function(e){if(!oe.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:oe.compare(this,e)===0};oe.prototype.inspect=function(){let e="",t=Fo.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"};zp&&(oe.prototype[zp]=oe.prototype.inspect);oe.prototype.compare=function(e,t,n,i,o){if(kr(e,Uint8Array)&&(e=oe.from(e,e.offset,e.byteLength)),!oe.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(t===void 0&&(t=0),n===void 0&&(n=e?e.length:0),i===void 0&&(i=0),o===void 0&&(o=this.length),t<0||n>e.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&t>=n)return 0;if(i>=o)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,i>>>=0,o>>>=0,this===e)return 0;let s=o-i,f=n-t,h=Math.min(s,f),g=this.slice(i,o),x=e.slice(t,n);for(let T=0;T<h;++T)if(g[T]!==x[T]){s=g[T],f=x[T];break}return s<f?-1:f<s?1:0};function Zp(r,e,t,n,i){if(r.length===0)return-1;if(typeof t=="string"?(n=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,nl(t)&&(t=i?0:r.length-1),t<0&&(t=r.length+t),t>=r.length){if(i)return-1;t=r.length-1}else if(t<0)if(i)t=0;else return-1;if(typeof e=="string"&&(e=oe.from(e,n)),oe.isBuffer(e))return e.length===0?-1:Gp(r,e,t,n,i);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(r,e,t):Uint8Array.prototype.lastIndexOf.call(r,e,t):Gp(r,[e],t,n,i);throw new TypeError("val must be string, number or Buffer")}function Gp(r,e,t,n,i){let o=1,s=r.length,f=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(r.length<2||e.length<2)return-1;o=2,s/=2,f/=2,t/=2}function h(x,T){return o===1?x[T]:x.readUInt16BE(T*o)}let g;if(i){let x=-1;for(g=t;g<s;g++)if(h(r,g)===h(e,x===-1?0:g-x)){if(x===-1&&(x=g),g-x+1===f)return x*o}else x!==-1&&(g-=g-x),x=-1}else for(t+f>s&&(t=s-f),g=t;g>=0;g--){let x=!0;for(let T=0;T<f;T++)if(h(r,g+T)!==h(e,T)){x=!1;break}if(x)return g}return-1}oe.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1};oe.prototype.indexOf=function(e,t,n){return Zp(this,e,t,n,!0)};oe.prototype.lastIndexOf=function(e,t,n){return Zp(this,e,t,n,!1)};function o3(r,e,t,n){t=Number(t)||0;let i=r.length-t;n?(n=Number(n),n>i&&(n=i)):n=i;let o=e.length;n>o/2&&(n=o/2);let s;for(s=0;s<n;++s){let f=parseInt(e.substr(s*2,2),16);if(nl(f))return s;r[t+s]=f}return s}function s3(r,e,t,n){return Ef(Zu(e,r.length-t),r,t,n)}function a3(r,e,t,n){return Ef(v3(e),r,t,n)}function f3(r,e,t,n){return Ef(ag(e),r,t,n)}function c3(r,e,t,n){return Ef(w3(e,r.length-t),r,t,n)}oe.prototype.write=function(e,t,n,i){if(t===void 0)i="utf8",n=this.length,t=0;else if(n===void 0&&typeof t=="string")i=t,n=this.length,t=0;else if(isFinite(t))t=t>>>0,isFinite(n)?(n=n>>>0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let o=this.length-t;if((n===void 0||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let s=!1;for(;;)switch(i){case"hex":return o3(this,e,t,n);case"utf8":case"utf-8":return s3(this,e,t,n);case"ascii":case"latin1":case"binary":return a3(this,e,t,n);case"base64":return f3(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return c3(this,e,t,n);default:if(s)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),s=!0}};oe.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function u3(r,e,t){return e===0&&t===r.length?Ju.fromByteArray(r):Ju.fromByteArray(r.slice(e,t))}function eg(r,e,t){t=Math.min(r.length,t);let n=[],i=e;for(;i<t;){let o=r[i],s=null,f=o>239?4:o>223?3:o>191?2:1;if(i+f<=t){let h,g,x,T;switch(f){case 1:o<128&&(s=o);break;case 2:h=r[i+1],(h&192)===128&&(T=(o&31)<<6|h&63,T>127&&(s=T));break;case 3:h=r[i+1],g=r[i+2],(h&192)===128&&(g&192)===128&&(T=(o&15)<<12|(h&63)<<6|g&63,T>2047&&(T<55296||T>57343)&&(s=T));break;case 4:h=r[i+1],g=r[i+2],x=r[i+3],(h&192)===128&&(g&192)===128&&(x&192)===128&&(T=(o&15)<<18|(h&63)<<12|(g&63)<<6|x&63,T>65535&&T<1114112&&(s=T))}}s===null?(s=65533,f=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|s&1023),n.push(s),i+=f}return l3(n)}var Vp=4096;function l3(r){let e=r.length;if(e<=Vp)return String.fromCharCode.apply(String,r);let t="",n=0;for(;n<e;)t+=String.fromCharCode.apply(String,r.slice(n,n+=Vp));return t}function h3(r,e,t){let n="";t=Math.min(r.length,t);for(let i=e;i<t;++i)n+=String.fromCharCode(r[i]&127);return n}function d3(r,e,t){let n="";t=Math.min(r.length,t);for(let i=e;i<t;++i)n+=String.fromCharCode(r[i]);return n}function p3(r,e,t){let n=r.length;(!e||e<0)&&(e=0),(!t||t<0||t>n)&&(t=n);let i="";for(let o=e;o<t;++o)i+=x3[r[o]];return i}function g3(r,e,t){let n=r.slice(e,t),i="";for(let o=0;o<n.length-1;o+=2)i+=String.fromCharCode(n[o]+n[o+1]*256);return i}oe.prototype.slice=function(e,t){let n=this.length;e=~~e,t=t===void 0?n:~~t,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),t<e&&(t=e);let i=this.subarray(e,t);return Object.setPrototypeOf(i,oe.prototype),i};function yt(r,e,t){if(r%1!==0||r<0)throw new RangeError("offset is not uint");if(r+e>t)throw new RangeError("Trying to access beyond buffer length")}oe.prototype.readUintLE=oe.prototype.readUIntLE=function(e,t,n){e=e>>>0,t=t>>>0,n||yt(e,t,this.length);let i=this[e],o=1,s=0;for(;++s<t&&(o*=256);)i+=this[e+s]*o;return i};oe.prototype.readUintBE=oe.prototype.readUIntBE=function(e,t,n){e=e>>>0,t=t>>>0,n||yt(e,t,this.length);let i=this[e+--t],o=1;for(;t>0&&(o*=256);)i+=this[e+--t]*o;return i};oe.prototype.readUint8=oe.prototype.readUInt8=function(e,t){return e=e>>>0,t||yt(e,1,this.length),this[e]};oe.prototype.readUint16LE=oe.prototype.readUInt16LE=function(e,t){return e=e>>>0,t||yt(e,2,this.length),this[e]|this[e+1]<<8};oe.prototype.readUint16BE=oe.prototype.readUInt16BE=function(e,t){return e=e>>>0,t||yt(e,2,this.length),this[e]<<8|this[e+1]};oe.prototype.readUint32LE=oe.prototype.readUInt32LE=function(e,t){return e=e>>>0,t||yt(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};oe.prototype.readUint32BE=oe.prototype.readUInt32BE=function(e,t){return e=e>>>0,t||yt(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};oe.prototype.readBigUInt64LE=Fn(function(e){e=e>>>0,Ao(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&Ws(e,this.length-8);let i=t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,o=this[++e]+this[++e]*2**8+this[++e]*2**16+n*2**24;return BigInt(i)+(BigInt(o)<<BigInt(32))});oe.prototype.readBigUInt64BE=Fn(function(e){e=e>>>0,Ao(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&Ws(e,this.length-8);let i=t*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],o=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n;return(BigInt(i)<<BigInt(32))+BigInt(o)});oe.prototype.readIntLE=function(e,t,n){e=e>>>0,t=t>>>0,n||yt(e,t,this.length);let i=this[e],o=1,s=0;for(;++s<t&&(o*=256);)i+=this[e+s]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*t)),i};oe.prototype.readIntBE=function(e,t,n){e=e>>>0,t=t>>>0,n||yt(e,t,this.length);let i=t,o=1,s=this[e+--i];for(;i>0&&(o*=256);)s+=this[e+--i]*o;return o*=128,s>=o&&(s-=Math.pow(2,8*t)),s};oe.prototype.readInt8=function(e,t){return e=e>>>0,t||yt(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};oe.prototype.readInt16LE=function(e,t){e=e>>>0,t||yt(e,2,this.length);let n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};oe.prototype.readInt16BE=function(e,t){e=e>>>0,t||yt(e,2,this.length);let n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};oe.prototype.readInt32LE=function(e,t){return e=e>>>0,t||yt(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};oe.prototype.readInt32BE=function(e,t){return e=e>>>0,t||yt(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};oe.prototype.readBigInt64LE=Fn(function(e){e=e>>>0,Ao(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&Ws(e,this.length-8);let i=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(n<<24);return(BigInt(i)<<BigInt(32))+BigInt(t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)});oe.prototype.readBigInt64BE=Fn(function(e){e=e>>>0,Ao(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&Ws(e,this.length-8);let i=(t<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(i)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n)});oe.prototype.readFloatLE=function(e,t){return e=e>>>0,t||yt(e,4,this.length),Eo.read(this,e,!0,23,4)};oe.prototype.readFloatBE=function(e,t){return e=e>>>0,t||yt(e,4,this.length),Eo.read(this,e,!1,23,4)};oe.prototype.readDoubleLE=function(e,t){return e=e>>>0,t||yt(e,8,this.length),Eo.read(this,e,!0,52,8)};oe.prototype.readDoubleBE=function(e,t){return e=e>>>0,t||yt(e,8,this.length),Eo.read(this,e,!1,52,8)};function Lt(r,e,t,n,i,o){if(!oe.isBuffer(r))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(t+n>r.length)throw new RangeError("Index out of range")}oe.prototype.writeUintLE=oe.prototype.writeUIntLE=function(e,t,n,i){if(e=+e,t=t>>>0,n=n>>>0,!i){let f=Math.pow(2,8*n)-1;Lt(this,e,t,n,f,0)}let o=1,s=0;for(this[t]=e&255;++s<n&&(o*=256);)this[t+s]=e/o&255;return t+n};oe.prototype.writeUintBE=oe.prototype.writeUIntBE=function(e,t,n,i){if(e=+e,t=t>>>0,n=n>>>0,!i){let f=Math.pow(2,8*n)-1;Lt(this,e,t,n,f,0)}let o=n-1,s=1;for(this[t+o]=e&255;--o>=0&&(s*=256);)this[t+o]=e/s&255;return t+n};oe.prototype.writeUint8=oe.prototype.writeUInt8=function(e,t,n){return e=+e,t=t>>>0,n||Lt(this,e,t,1,255,0),this[t]=e&255,t+1};oe.prototype.writeUint16LE=oe.prototype.writeUInt16LE=function(e,t,n){return e=+e,t=t>>>0,n||Lt(this,e,t,2,65535,0),this[t]=e&255,this[t+1]=e>>>8,t+2};oe.prototype.writeUint16BE=oe.prototype.writeUInt16BE=function(e,t,n){return e=+e,t=t>>>0,n||Lt(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=e&255,t+2};oe.prototype.writeUint32LE=oe.prototype.writeUInt32LE=function(e,t,n){return e=+e,t=t>>>0,n||Lt(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255,t+4};oe.prototype.writeUint32BE=oe.prototype.writeUInt32BE=function(e,t,n){return e=+e,t=t>>>0,n||Lt(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};function tg(r,e,t,n,i){sg(e,n,i,r,t,7);let o=Number(e&BigInt(4294967295));r[t++]=o,o=o>>8,r[t++]=o,o=o>>8,r[t++]=o,o=o>>8,r[t++]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return r[t++]=s,s=s>>8,r[t++]=s,s=s>>8,r[t++]=s,s=s>>8,r[t++]=s,t}function rg(r,e,t,n,i){sg(e,n,i,r,t,7);let o=Number(e&BigInt(4294967295));r[t+7]=o,o=o>>8,r[t+6]=o,o=o>>8,r[t+5]=o,o=o>>8,r[t+4]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return r[t+3]=s,s=s>>8,r[t+2]=s,s=s>>8,r[t+1]=s,s=s>>8,r[t]=s,t+8}oe.prototype.writeBigUInt64LE=Fn(function(e,t=0){return tg(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))});oe.prototype.writeBigUInt64BE=Fn(function(e,t=0){return rg(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))});oe.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t=t>>>0,!i){let h=Math.pow(2,8*n-1);Lt(this,e,t,n,h-1,-h)}let o=0,s=1,f=0;for(this[t]=e&255;++o<n&&(s*=256);)e<0&&f===0&&this[t+o-1]!==0&&(f=1),this[t+o]=(e/s>>0)-f&255;return t+n};oe.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t=t>>>0,!i){let h=Math.pow(2,8*n-1);Lt(this,e,t,n,h-1,-h)}let o=n-1,s=1,f=0;for(this[t+o]=e&255;--o>=0&&(s*=256);)e<0&&f===0&&this[t+o+1]!==0&&(f=1),this[t+o]=(e/s>>0)-f&255;return t+n};oe.prototype.writeInt8=function(e,t,n){return e=+e,t=t>>>0,n||Lt(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=e&255,t+1};oe.prototype.writeInt16LE=function(e,t,n){return e=+e,t=t>>>0,n||Lt(this,e,t,2,32767,-32768),this[t]=e&255,this[t+1]=e>>>8,t+2};oe.prototype.writeInt16BE=function(e,t,n){return e=+e,t=t>>>0,n||Lt(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=e&255,t+2};oe.prototype.writeInt32LE=function(e,t,n){return e=+e,t=t>>>0,n||Lt(this,e,t,4,2147483647,-2147483648),this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4};oe.prototype.writeInt32BE=function(e,t,n){return e=+e,t=t>>>0,n||Lt(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};oe.prototype.writeBigInt64LE=Fn(function(e,t=0){return tg(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});oe.prototype.writeBigInt64BE=Fn(function(e,t=0){return rg(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ng(r,e,t,n,i,o){if(t+n>r.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function ig(r,e,t,n,i){return e=+e,t=t>>>0,i||ng(r,e,t,4,34028234663852886e22,-34028234663852886e22),Eo.write(r,e,t,n,23,4),t+4}oe.prototype.writeFloatLE=function(e,t,n){return ig(this,e,t,!0,n)};oe.prototype.writeFloatBE=function(e,t,n){return ig(this,e,t,!1,n)};function og(r,e,t,n,i){return e=+e,t=t>>>0,i||ng(r,e,t,8,17976931348623157e292,-17976931348623157e292),Eo.write(r,e,t,n,52,8),t+8}oe.prototype.writeDoubleLE=function(e,t,n){return og(this,e,t,!0,n)};oe.prototype.writeDoubleBE=function(e,t,n){return og(this,e,t,!1,n)};oe.prototype.copy=function(e,t,n,i){if(!oe.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),!i&&i!==0&&(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<n&&(i=n),i===n||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);let o=i-n;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(t,n,i):Uint8Array.prototype.set.call(e,this.subarray(n,i),t),o};oe.prototype.fill=function(e,t,n,i){if(typeof e=="string"){if(typeof t=="string"?(i=t,t=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!oe.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(e.length===1){let s=e.charCodeAt(0);(i==="utf8"&&s<128||i==="latin1")&&(e=s)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t=t>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);let o;if(typeof e=="number")for(o=t;o<n;++o)this[o]=e;else{let s=oe.isBuffer(e)?e:oe.from(e,i),f=s.length;if(f===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=s[o%f]}return this};var So={};function rl(r,e,t){So[r]=class extends t{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${r}]`,this.stack,delete this.name}get code(){return r}set code(i){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:i,writable:!0})}toString(){return`${this.name} [${r}]: ${this.message}`}}}rl("ERR_BUFFER_OUT_OF_BOUNDS",function(r){return r?`${r} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);rl("ERR_INVALID_ARG_TYPE",function(r,e){return`The "${r}" argument must be of type number. Received type ${typeof e}`},TypeError);rl("ERR_OUT_OF_RANGE",function(r,e,t){let n=`The value of "${r}" is out of range.`,i=t;return Number.isInteger(t)&&Math.abs(t)>2**32?i=Xp(String(t)):typeof t=="bigint"&&(i=String(t),(t>BigInt(2)**BigInt(32)||t<-(BigInt(2)**BigInt(32)))&&(i=Xp(i)),i+="n"),n+=` It must be ${e}. Received ${i}`,n},RangeError);function Xp(r){let e="",t=r.length,n=r[0]==="-"?1:0;for(;t>=n+4;t-=3)e=`_${r.slice(t-3,t)}${e}`;return`${r.slice(0,t)}${e}`}function m3(r,e,t){Ao(e,"offset"),(r[e]===void 0||r[e+t]===void 0)&&Ws(e,r.length-(t+1))}function sg(r,e,t,n,i,o){if(r>t||r<e){let s=typeof e=="bigint"?"n":"",f;throw o>3?e===0||e===BigInt(0)?f=`>= 0${s} and < 2${s} ** ${(o+1)*8}${s}`:f=`>= -(2${s} ** ${(o+1)*8-1}${s}) and < 2 ** ${(o+1)*8-1}${s}`:f=`>= ${e}${s} and <= ${t}${s}`,new So.ERR_OUT_OF_RANGE("value",f,r)}m3(n,i,o)}function Ao(r,e){if(typeof r!="number")throw new So.ERR_INVALID_ARG_TYPE(e,"number",r)}function Ws(r,e,t){throw Math.floor(r)!==r?(Ao(r,t),new So.ERR_OUT_OF_RANGE(t||"offset","an integer",r)):e<0?new So.ERR_BUFFER_OUT_OF_BOUNDS:new So.ERR_OUT_OF_RANGE(t||"offset",`>= ${t?1:0} and <= ${e}`,r)}var y3=/[^+/0-9A-Za-z-_]/g;function b3(r){if(r=r.split("=")[0],r=r.trim().replace(y3,""),r.length<2)return"";for(;r.length%4!==0;)r=r+"=";return r}function Zu(r,e){e=e||1/0;let t,n=r.length,i=null,o=[];for(let s=0;s<n;++s){if(t=r.charCodeAt(s),t>55295&&t<57344){if(!i){if(t>56319){(e-=3)>-1&&o.push(239,191,189);continue}else if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=t;continue}if(t<56320){(e-=3)>-1&&o.push(239,191,189),i=t;continue}t=(i-55296<<10|t-56320)+65536}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,t<128){if((e-=1)<0)break;o.push(t)}else if(t<2048){if((e-=2)<0)break;o.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;o.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;o.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return o}function v3(r){let e=[];for(let t=0;t<r.length;++t)e.push(r.charCodeAt(t)&255);return e}function w3(r,e){let t,n,i,o=[];for(let s=0;s<r.length&&!((e-=2)<0);++s)t=r.charCodeAt(s),n=t>>8,i=t%256,o.push(i),o.push(n);return o}function ag(r){return Ju.toByteArray(b3(r))}function Ef(r,e,t,n){let i;for(i=0;i<n&&!(i+t>=e.length||i>=r.length);++i)e[i+t]=r[i];return i}function kr(r,e){return r instanceof e||r!=null&&r.constructor!=null&&r.constructor.name!=null&&r.constructor.name===e.name}function nl(r){return r!==r}var x3=function(){let r="0123456789abcdef",e=new Array(256);for(let t=0;t<16;++t){let n=t*16;for(let i=0;i<16;++i)e[n+i]=r[t]+r[i]}return e}();function Fn(r){return typeof BigInt>"u"?_3:r}function _3(){throw new Error("BigInt not supported")}});var ol=X((vT,fg)=>{"use strict";var il=null;fg.exports=function(){return il===null&&(il={textEncoder:new TextEncoder,textDecoder:new TextDecoder}),il}});var fl=X(cg=>{"use strict";var sl=or(),S3=new Set(["buffer","view","utf8"]),al=class{constructor(e){if(this.encode=e.encode||this.encode,this.decode=e.decode||this.decode,this.name=e.name||this.name,this.format=e.format||this.format,typeof this.encode!="function")throw new TypeError("The 'encode' property must be a function");if(typeof this.decode!="function")throw new TypeError("The 'decode' property must be a function");if(this.encode=this.encode.bind(this),this.decode=this.decode.bind(this),typeof this.name!="string"||this.name==="")throw new TypeError("The 'name' property must be a string");if(typeof this.format!="string"||!S3.has(this.format))throw new TypeError("The 'format' property must be one of 'buffer', 'view', 'utf8'");e.createViewTranscoder&&(this.createViewTranscoder=e.createViewTranscoder),e.createBufferTranscoder&&(this.createBufferTranscoder=e.createBufferTranscoder),e.createUTF8Transcoder&&(this.createUTF8Transcoder=e.createUTF8Transcoder)}get commonName(){return this.name.split("+")[0]}createBufferTranscoder(){throw new sl(`Encoding '${this.name}' cannot be transcoded to 'buffer'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createViewTranscoder(){throw new sl(`Encoding '${this.name}' cannot be transcoded to 'view'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createUTF8Transcoder(){throw new sl(`Encoding '${this.name}' cannot be transcoded to 'utf8'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}};cg.Encoding=al});var hl=X(Af=>{"use strict";var{Buffer:ul}=Tn()||{},{Encoding:ll}=fl(),E3=ol(),$s=class extends ll{constructor(e){super({...e,format:"buffer"})}createViewTranscoder(){return new Hs({encode:this.encode,decode:e=>this.decode(ul.from(e.buffer,e.byteOffset,e.byteLength)),name:`${this.name}+view`})}createBufferTranscoder(){return this}},Hs=class extends ll{constructor(e){super({...e,format:"view"})}createBufferTranscoder(){return new $s({encode:e=>{let t=this.encode(e);return ul.from(t.buffer,t.byteOffset,t.byteLength)},decode:this.decode,name:`${this.name}+buffer`})}createViewTranscoder(){return this}},cl=class extends ll{constructor(e){super({...e,format:"utf8"})}createBufferTranscoder(){return new $s({encode:e=>ul.from(this.encode(e),"utf8"),decode:e=>this.decode(e.toString("utf8")),name:`${this.name}+buffer`})}createViewTranscoder(){let{textEncoder:e,textDecoder:t}=E3();return new Hs({encode:n=>e.encode(this.encode(n)),decode:n=>this.decode(t.decode(n)),name:`${this.name}+view`})}createUTF8Transcoder(){return this}};Af.BufferFormat=$s;Af.ViewFormat=Hs;Af.UTF8Format=cl});var dg=X(Ai=>{"use strict";var{Buffer:It}=Tn()||{Buffer:{isBuffer:()=>!1}},{textEncoder:lg,textDecoder:ug}=ol()(),{BufferFormat:Ks,ViewFormat:dl,UTF8Format:hg}=hl(),Ff=r=>r;Ai.utf8=new hg({encode:function(r){return It.isBuffer(r)?r.toString("utf8"):ArrayBuffer.isView(r)?ug.decode(r):String(r)},decode:Ff,name:"utf8",createViewTranscoder(){return new dl({encode:function(r){return ArrayBuffer.isView(r)?r:lg.encode(r)},decode:function(r){return ug.decode(r)},name:`${this.name}+view`})},createBufferTranscoder(){return new Ks({encode:function(r){return It.isBuffer(r)?r:ArrayBuffer.isView(r)?It.from(r.buffer,r.byteOffset,r.byteLength):It.from(String(r),"utf8")},decode:function(r){return r.toString("utf8")},name:`${this.name}+buffer`})}});Ai.json=new hg({encode:JSON.stringify,decode:JSON.parse,name:"json"});Ai.buffer=new Ks({encode:function(r){return It.isBuffer(r)?r:ArrayBuffer.isView(r)?It.from(r.buffer,r.byteOffset,r.byteLength):It.from(String(r),"utf8")},decode:Ff,name:"buffer",createViewTranscoder(){return new dl({encode:function(r){return ArrayBuffer.isView(r)?r:It.from(String(r),"utf8")},decode:function(r){return It.from(r.buffer,r.byteOffset,r.byteLength)},name:`${this.name}+view`})}});Ai.view=new dl({encode:function(r){return ArrayBuffer.isView(r)?r:lg.encode(r)},decode:Ff,name:"view",createBufferTranscoder(){return new Ks({encode:function(r){return It.isBuffer(r)?r:ArrayBuffer.isView(r)?It.from(r.buffer,r.byteOffset,r.byteLength):It.from(String(r),"utf8")},decode:Ff,name:`${this.name}+buffer`})}});Ai.hex=new Ks({encode:function(r){return It.isBuffer(r)?r:It.from(String(r),"hex")},decode:function(r){return r.toString("hex")},name:"hex"});Ai.base64=new Ks({encode:function(r){return It.isBuffer(r)?r:It.from(String(r),"base64")},decode:function(r){return r.toString("base64")},name:"base64"})});var mg=X(gg=>{"use strict";var pg=or(),Mf=dg(),{Encoding:A3}=fl(),{BufferFormat:F3,ViewFormat:T3,UTF8Format:M3}=hl(),zs=Symbol("formats"),Tf=Symbol("encodings"),I3=new Set(["buffer","view","utf8"]),pl=class{constructor(e){if(Array.isArray(e)){if(!e.every(t=>I3.has(t)))throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}else throw new TypeError("The first argument 'formats' must be an array");this[Tf]=new Map,this[zs]=new Set(e);for(let t in Mf)try{this.encoding(t)}catch(n){if(n.code!=="LEVEL_ENCODING_NOT_SUPPORTED")throw n}}encodings(){return Array.from(new Set(this[Tf].values()))}encoding(e){let t=this[Tf].get(e);if(t===void 0){if(typeof e=="string"&&e!==""){if(t=R3[e],!t)throw new pg(`Encoding '${e}' is not found`,{code:"LEVEL_ENCODING_NOT_FOUND"})}else{if(typeof e!="object"||e===null)throw new TypeError("First argument 'encoding' must be a string or object");t=C3(e)}let{name:n,format:i}=t;if(!this[zs].has(i))if(this[zs].has("view"))t=t.createViewTranscoder();else if(this[zs].has("buffer"))t=t.createBufferTranscoder();else if(this[zs].has("utf8"))t=t.createUTF8Transcoder();else throw new pg(`Encoding '${n}' cannot be transcoded`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"});for(let o of[e,n,t.name,t.commonName])this[Tf].set(o,t)}return t}};gg.Transcoder=pl;function C3(r){if(r instanceof A3)return r;let e="type"in r&&typeof r.type=="string"?r.type:void 0,t=r.name||e||`anonymous-${P3++}`;switch(B3(r)){case"view":return new T3({...r,name:t});case"utf8":return new M3({...r,name:t});case"buffer":return new F3({...r,name:t});default:throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}}function B3(r){return"format"in r&&r.format!==void 0?r.format:"buffer"in r&&typeof r.buffer=="boolean"?r.buffer?"buffer":"utf8":"code"in r&&Number.isInteger(r.code)?"view":"buffer"}var O3={binary:Mf.buffer,"utf-8":Mf.utf8},R3={...Mf,...O3},P3=0});var Tg=X((ET,gl)=>{"use strict";var To=typeof Reflect=="object"?Reflect:null,yg=To&&typeof To.apply=="function"?To.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)},If;To&&typeof To.ownKeys=="function"?If=To.ownKeys:Object.getOwnPropertySymbols?If=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:If=function(e){return Object.getOwnPropertyNames(e)};function N3(r){console&&console.warn&&console.warn(r)}var vg=Number.isNaN||function(e){return e!==e};function Ye(){Ye.init.call(this)}gl.exports=Ye;gl.exports.once=U3;Ye.EventEmitter=Ye;Ye.prototype._events=void 0;Ye.prototype._eventsCount=0;Ye.prototype._maxListeners=void 0;var bg=10;function Cf(r){if(typeof r!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r)}Object.defineProperty(Ye,"defaultMaxListeners",{enumerable:!0,get:function(){return bg},set:function(r){if(typeof r!="number"||r<0||vg(r))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+r+".");bg=r}});Ye.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Ye.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||vg(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function wg(r){return r._maxListeners===void 0?Ye.defaultMaxListeners:r._maxListeners}Ye.prototype.getMaxListeners=function(){return wg(this)};Ye.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i=e==="error",o=this._events;if(o!==void 0)i=i&&o.error===void 0;else if(!i)return!1;if(i){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var f=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw f.context=s,f}var h=o[e];if(h===void 0)return!1;if(typeof h=="function")yg(h,this,t);else for(var g=h.length,x=Ag(h,g),n=0;n<g;++n)yg(x[n],this,t);return!0};function xg(r,e,t,n){var i,o,s;if(Cf(t),o=r._events,o===void 0?(o=r._events=Object.create(null),r._eventsCount=0):(o.newListener!==void 0&&(r.emit("newListener",e,t.listener?t.listener:t),o=r._events),s=o[e]),s===void 0)s=o[e]=t,++r._eventsCount;else if(typeof s=="function"?s=o[e]=n?[t,s]:[s,t]:n?s.unshift(t):s.push(t),i=wg(r),i>0&&s.length>i&&!s.warned){s.warned=!0;var f=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");f.name="MaxListenersExceededWarning",f.emitter=r,f.type=e,f.count=s.length,N3(f)}return r}Ye.prototype.addListener=function(e,t){return xg(this,e,t,!1)};Ye.prototype.on=Ye.prototype.addListener;Ye.prototype.prependListener=function(e,t){return xg(this,e,t,!0)};function k3(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _g(r,e,t){var n={fired:!1,wrapFn:void 0,target:r,type:e,listener:t},i=k3.bind(n);return i.listener=t,n.wrapFn=i,i}Ye.prototype.once=function(e,t){return Cf(t),this.on(e,_g(this,e,t)),this};Ye.prototype.prependOnceListener=function(e,t){return Cf(t),this.prependListener(e,_g(this,e,t)),this};Ye.prototype.removeListener=function(e,t){var n,i,o,s,f;if(Cf(t),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===t||n.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if(typeof n!="function"){for(o=-1,s=n.length-1;s>=0;s--)if(n[s]===t||n[s].listener===t){f=n[s].listener,o=s;break}if(o<0)return this;o===0?n.shift():L3(n,o),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,f||t)}return this};Ye.prototype.off=Ye.prototype.removeListener;Ye.prototype.removeAllListeners=function(e){var t,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var o=Object.keys(n),s;for(i=0;i<o.length;++i)s=o[i],s!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=n[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this};function Sg(r,e,t){var n=r._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?t?[i.listener||i]:[i]:t?D3(i):Ag(i,i.length)}Ye.prototype.listeners=function(e){return Sg(this,e,!0)};Ye.prototype.rawListeners=function(e){return Sg(this,e,!1)};Ye.listenerCount=function(r,e){return typeof r.listenerCount=="function"?r.listenerCount(e):Eg.call(r,e)};Ye.prototype.listenerCount=Eg;function Eg(r){var e=this._events;if(e!==void 0){var t=e[r];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}Ye.prototype.eventNames=function(){return this._eventsCount>0?If(this._events):[]};function Ag(r,e){for(var t=new Array(e),n=0;n<e;++n)t[n]=r[n];return t}function L3(r,e){for(;e+1<r.length;e++)r[e]=r[e+1];r.pop()}function D3(r){for(var e=new Array(r.length),t=0;t<e.length;++t)e[t]=r[t].listener||r[t];return e}function U3(r,e){return new Promise(function(t,n){function i(s){r.removeListener(e,o),n(s)}function o(){typeof r.removeListener=="function"&&r.removeListener("error",i),t([].slice.call(arguments))}Fg(r,e,o,{once:!0}),e!=="error"&&q3(r,i,{once:!0})})}function q3(r,e,t){typeof r.on=="function"&&Fg(r,"error",e,t)}function Fg(r,e,t,n){if(typeof r.on=="function")n.once?r.once(e,t):r.on(e,t);else if(typeof r.addEventListener=="function")r.addEventListener(e,function i(o){n.once&&r.removeEventListener(e,i),t(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof r)}});var Ig=X((AT,Mg)=>{Mg.exports=typeof queueMicrotask=="function"?queueMicrotask:r=>Promise.resolve().then(r)});var Gs=X(ml=>{"use strict";var Cg=Ig();ml.fromCallback=function(r,e){if(r===void 0){var t=new Promise(function(n,i){r=function(o,s){o?i(o):n(s)}});r[e!==void 0?e:"promise"]=t}else if(typeof r!="function")throw new TypeError("Callback must be a function");return r};ml.fromPromise=function(r,e){if(e===void 0)return r;r.then(function(t){Cg(()=>e(null,t))}).catch(function(t){Cg(()=>e(t))})}});var Bf=X(yl=>{"use strict";yl.getCallback=function(r,e){return typeof r=="function"?r:e};yl.getOptions=function(r,e){return typeof r=="object"&&r!==null?r:e!==void 0?e:{}}});var Rn=X(Nf=>{"use strict";var{fromCallback:bl}=Gs(),Kt=or(),{getOptions:vl,getCallback:Bg}=Bf(),Fi=Symbol("promise"),Mo=Symbol("callback"),Lr=Symbol("working"),Ti=Symbol("handleOne"),rn=Symbol("handleMany"),wl=Symbol("autoClose"),Bn=Symbol("finishWork"),Dr=Symbol("returnMany"),Mn=Symbol("closing"),Vs=Symbol("handleClose"),Of=Symbol("closed"),Xs=Symbol("closeCallbacks"),Cn=Symbol("keyEncoding"),Mi=Symbol("valueEncoding"),xl=Symbol("abortOnClose"),Rf=Symbol("legacy"),_l=Symbol("keys"),Sl=Symbol("values"),In=Symbol("limit"),ar=Symbol("count"),Pf=Object.freeze({}),j3=()=>{},Og=!1,Js=class{constructor(e,t,n){if(typeof e!="object"||e===null){let i=e===null?"null":typeof e;throw new TypeError(`The first argument must be an abstract-level database, received ${i}`)}if(typeof t!="object"||t===null)throw new TypeError("The second argument must be an options object");this[Of]=!1,this[Xs]=[],this[Lr]=!1,this[Mn]=!1,this[wl]=!1,this[Mo]=null,this[Ti]=this[Ti].bind(this),this[rn]=this[rn].bind(this),this[Vs]=this[Vs].bind(this),this[Cn]=t[Cn],this[Mi]=t[Mi],this[Rf]=n,this[In]=Number.isInteger(t.limit)&&t.limit>=0?t.limit:1/0,this[ar]=0,this[xl]=!!t.abortOnClose,this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get count(){return this[ar]}get limit(){return this[In]}next(e){let t;if(e===void 0)t=new Promise((n,i)=>{e=(o,s,f)=>{o?i(o):this[Rf]?s===void 0&&f===void 0?n():n([s,f]):n(s)}});else if(typeof e!="function")throw new TypeError("Callback must be a function");return this[Mn]?this.nextTick(e,new Kt("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[Lr]?this.nextTick(e,new Kt("Iterator is busy: cannot call next() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[Lr]=!0,this[Mo]=e,this[ar]>=this[In]?this.nextTick(this[Ti],null):this._next(this[Ti])),t}_next(e){this.nextTick(e)}nextv(e,t,n){return n=Bg(t,n),n=bl(n,Fi),t=vl(t,Pf),Number.isInteger(e)?(this[Mn]?this.nextTick(n,new Kt("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[Lr]?this.nextTick(n,new Kt("Iterator is busy: cannot call nextv() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(e<1&&(e=1),this[In]<1/0&&(e=Math.min(e,this[In]-this[ar])),this[Lr]=!0,this[Mo]=n,e<=0?this.nextTick(this[rn],null,[]):this._nextv(e,t,this[rn])),n[Fi]):(this.nextTick(n,new TypeError("The first argument 'size' must be an integer")),n[Fi])}_nextv(e,t,n){let i=[],o=(s,f,h)=>{if(s)return n(s);if(this[Rf]?f===void 0&&h===void 0:f===void 0)return n(null,i);i.push(this[Rf]?[f,h]:f),i.length===e?n(null,i):this._next(o)};this._next(o)}all(e,t){return t=Bg(e,t),t=bl(t,Fi),e=vl(e,Pf),this[Mn]?this.nextTick(t,new Kt("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[Lr]?this.nextTick(t,new Kt("Iterator is busy: cannot call all() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[Lr]=!0,this[Mo]=t,this[wl]=!0,this[ar]>=this[In]?this.nextTick(this[rn],null,[]):this._all(e,this[rn])),t[Fi]}_all(e,t){let n=this[ar],i=[],o=()=>{let f=this[In]<1/0?Math.min(1e3,this[In]-n):1e3;f<=0?this.nextTick(t,null,i):this._nextv(f,Pf,s)},s=(f,h)=>{f?t(f):h.length===0?t(null,i):(i.push.apply(i,h),n+=h.length,o())};o()}[Bn](){let e=this[Mo];return this[xl]&&e===null?j3:(this[Lr]=!1,this[Mo]=null,this[Mn]&&this._close(this[Vs]),e)}[Dr](e,t,n){this[wl]?this.close(e.bind(null,t,n)):e(t,n)}seek(e,t){if(t=vl(t,Pf),!this[Mn]){if(this[Lr])throw new Kt("Iterator is busy: cannot call seek() until next() has completed",{code:"LEVEL_ITERATOR_BUSY"});{let n=this.db.keyEncoding(t.keyEncoding||this[Cn]),i=n.format;t.keyEncoding!==i&&(t={...t,keyEncoding:i});let o=this.db.prefixKey(n.encode(e),i);this._seek(o,t)}}}_seek(e,t){throw new Kt("Iterator does not support seek()",{code:"LEVEL_NOT_SUPPORTED"})}close(e){return e=bl(e,Fi),this[Of]?this.nextTick(e):this[Mn]?this[Xs].push(e):(this[Mn]=!0,this[Xs].push(e),this[Lr]?this[xl]&&this[Bn]()(new Kt("Aborted on iterator close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this._close(this[Vs])),e[Fi]}_close(e){this.nextTick(e)}[Vs](){this[Of]=!0,this.db.detachResource(this);let e=this[Xs];this[Xs]=[];for(let t of e)t()}async*[Symbol.asyncIterator](){try{let e;for(;(e=await this.next())!==void 0;)yield e}finally{this[Of]||await this.close()}}},Io=class extends Js{constructor(e,t){super(e,t,!0),this[_l]=t.keys!==!1,this[Sl]=t.values!==!1}[Ti](e,t,n){let i=this[Bn]();if(e)return i(e);try{t=this[_l]&&t!==void 0?this[Cn].decode(t):void 0,n=this[Sl]&&n!==void 0?this[Mi].decode(n):void 0}catch(o){return i(new On("entry",o))}t===void 0&&n===void 0||this[ar]++,i(null,t,n)}[rn](e,t){let n=this[Bn]();if(e)return this[Dr](n,e);try{for(let i of t){let o=i[0],s=i[1];i[0]=this[_l]&&o!==void 0?this[Cn].decode(o):void 0,i[1]=this[Sl]&&s!==void 0?this[Mi].decode(s):void 0}}catch(i){return this[Dr](n,new On("entries",i))}this[ar]+=t.length,this[Dr](n,null,t)}end(e){return!Og&&typeof console<"u"&&(Og=!0,console.warn(new Kt("The iterator.end() method was renamed to close() and end() is an alias that will be removed in a future version",{code:"LEVEL_LEGACY"}))),this.close(e)}},El=class extends Js{constructor(e,t){super(e,t,!1)}[Ti](e,t){let n=this[Bn]();if(e)return n(e);try{t=t!==void 0?this[Cn].decode(t):void 0}catch(i){return n(new On("key",i))}t!==void 0&&this[ar]++,n(null,t)}[rn](e,t){let n=this[Bn]();if(e)return this[Dr](n,e);try{for(let i=0;i<t.length;i++){let o=t[i];t[i]=o!==void 0?this[Cn].decode(o):void 0}}catch(i){return this[Dr](n,new On("keys",i))}this[ar]+=t.length,this[Dr](n,null,t)}},Al=class extends Js{constructor(e,t){super(e,t,!1)}[Ti](e,t){let n=this[Bn]();if(e)return n(e);try{t=t!==void 0?this[Mi].decode(t):void 0}catch(i){return n(new On("value",i))}t!==void 0&&this[ar]++,n(null,t)}[rn](e,t){let n=this[Bn]();if(e)return this[Dr](n,e);try{for(let i=0;i<t.length;i++){let o=t[i];t[i]=o!==void 0?this[Mi].decode(o):void 0}}catch(i){return this[Dr](n,new On("values",i))}this[ar]+=t.length,this[Dr](n,null,t)}},On=class extends Kt{constructor(e,t){super(`Iterator could not decode ${e}`,{code:"LEVEL_DECODE_ERROR",cause:t})}};for(let r of["_ended property","_nexting property","_end method"])Object.defineProperty(Io.prototype,r.split(" ")[0],{get(){throw new Kt(`The ${r} has been removed`,{code:"LEVEL_LEGACY"})},set(){throw new Kt(`The ${r} has been removed`,{code:"LEVEL_LEGACY"})}});Io.keyEncoding=Cn;Io.valueEncoding=Mi;Nf.AbstractIterator=Io;Nf.AbstractKeyIterator=El;Nf.AbstractValueIterator=Al});var Rg=X(Fl=>{"use strict";var{AbstractKeyIterator:W3,AbstractValueIterator:$3}=Rn(),Ii=Symbol("iterator"),Ys=Symbol("callback"),Co=Symbol("handleOne"),Ci=Symbol("handleMany"),Qs=class extends W3{constructor(e,t){super(e,t),this[Ii]=e.iterator({...t,keys:!0,values:!1}),this[Co]=this[Co].bind(this),this[Ci]=this[Ci].bind(this)}},kf=class extends $3{constructor(e,t){super(e,t),this[Ii]=e.iterator({...t,keys:!1,values:!0}),this[Co]=this[Co].bind(this),this[Ci]=this[Ci].bind(this)}};for(let r of[Qs,kf]){let e=r===Qs,t=e?n=>n[0]:n=>n[1];r.prototype._next=function(n){this[Ys]=n,this[Ii].next(this[Co])},r.prototype[Co]=function(n,i,o){let s=this[Ys];n?s(n):s(null,e?i:o)},r.prototype._nextv=function(n,i,o){this[Ys]=o,this[Ii].nextv(n,i,this[Ci])},r.prototype._all=function(n,i){this[Ys]=i,this[Ii].all(n,this[Ci])},r.prototype[Ci]=function(n,i){let o=this[Ys];n?o(n):o(null,i.map(t))},r.prototype._seek=function(n,i){this[Ii].seek(n,i)},r.prototype._close=function(n){this[Ii].close(n)}}Fl.DefaultKeyIterator=Qs;Fl.DefaultValueIterator=kf});var Pg=X(Wf=>{"use strict";var{AbstractIterator:H3,AbstractKeyIterator:K3,AbstractValueIterator:z3}=Rn(),Tl=or(),Dt=Symbol("nut"),qf=Symbol("undefer"),jf=Symbol("factory"),Lf=class extends H3{constructor(e,t){super(e,t),this[Dt]=null,this[jf]=()=>e.iterator(t),this.db.defer(()=>this[qf]())}},Df=class extends K3{constructor(e,t){super(e,t),this[Dt]=null,this[jf]=()=>e.keys(t),this.db.defer(()=>this[qf]())}},Uf=class extends z3{constructor(e,t){super(e,t),this[Dt]=null,this[jf]=()=>e.values(t),this.db.defer(()=>this[qf]())}};for(let r of[Lf,Df,Uf])r.prototype[qf]=function(){this.db.status==="open"&&(this[Dt]=this[jf]())},r.prototype._next=function(e){this[Dt]!==null?this[Dt].next(e):this.db.status==="opening"?this.db.defer(()=>this._next(e)):this.nextTick(e,new Tl("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},r.prototype._nextv=function(e,t,n){this[Dt]!==null?this[Dt].nextv(e,t,n):this.db.status==="opening"?this.db.defer(()=>this._nextv(e,t,n)):this.nextTick(n,new Tl("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},r.prototype._all=function(e,t){this[Dt]!==null?this[Dt].all(t):this.db.status==="opening"?this.db.defer(()=>this._all(e,t)):this.nextTick(t,new Tl("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},r.prototype._seek=function(e,t){this[Dt]!==null?this[Dt]._seek(e,t):this.db.status==="opening"&&this.db.defer(()=>this._seek(e,t))},r.prototype._close=function(e){this[Dt]!==null?this[Dt].close(e):this.db.status==="opening"?this.db.defer(()=>this._close(e)):this.nextTick(e)};Wf.DeferredIterator=Lf;Wf.DeferredKeyIterator=Df;Wf.DeferredValueIterator=Uf});var Il=X(kg=>{"use strict";var{fromCallback:Ng}=Gs(),$f=or(),{getCallback:G3,getOptions:V3}=Bf(),Hf=Symbol("promise"),fr=Symbol("status"),Bo=Symbol("operations"),Zs=Symbol("finishClose"),Oo=Symbol("closeCallbacks"),Ml=class{constructor(e){if(typeof e!="object"||e===null){let t=e===null?"null":typeof e;throw new TypeError(`The first argument must be an abstract-level database, received ${t}`)}this[Bo]=[],this[Oo]=[],this[fr]="open",this[Zs]=this[Zs].bind(this),this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get length(){return this[Bo].length}put(e,t,n){if(this[fr]!=="open")throw new $f("Batch is not open: cannot call put() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});let i=this.db._checkKey(e)||this.db._checkValue(t);if(i)throw i;let o=n&&n.sublevel!=null?n.sublevel:this.db,s=n,f=o.keyEncoding(n&&n.keyEncoding),h=o.valueEncoding(n&&n.valueEncoding),g=f.format;n={...n,keyEncoding:g,valueEncoding:h.format},o!==this.db&&(n.sublevel=null);let x=o.prefixKey(f.encode(e),g),T=h.encode(t);return this._put(x,T,n),this[Bo].push({...s,type:"put",key:e,value:t}),this}_put(e,t,n){}del(e,t){if(this[fr]!=="open")throw new $f("Batch is not open: cannot call del() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});let n=this.db._checkKey(e);if(n)throw n;let i=t&&t.sublevel!=null?t.sublevel:this.db,o=t,s=i.keyEncoding(t&&t.keyEncoding),f=s.format;return t={...t,keyEncoding:f},i!==this.db&&(t.sublevel=null),this._del(i.prefixKey(s.encode(e),f),t),this[Bo].push({...o,type:"del",key:e}),this}_del(e,t){}clear(){if(this[fr]!=="open")throw new $f("Batch is not open: cannot call clear() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});return this._clear(),this[Bo]=[],this}_clear(){}write(e,t){return t=G3(e,t),t=Ng(t,Hf),e=V3(e),this[fr]!=="open"?this.nextTick(t,new $f("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"})):this.length===0?this.close(t):(this[fr]="writing",this._write(e,n=>{this[fr]="closing",this[Oo].push(()=>t(n)),n||this.db.emit("batch",this[Bo]),this._close(this[Zs])})),t[Hf]}_write(e,t){}close(e){return e=Ng(e,Hf),this[fr]==="closing"?this[Oo].push(e):this[fr]==="closed"?this.nextTick(e):(this[Oo].push(e),this[fr]!=="writing"&&(this[fr]="closing",this._close(this[Zs]))),e[Hf]}_close(e){this.nextTick(e)}[Zs](){this[fr]="closed",this.db.detachResource(this);let e=this[Oo];this[Oo]=[];for(let t of e)t()}};kg.AbstractChainedBatch=Ml});var Dg=X(Lg=>{"use strict";var{AbstractChainedBatch:X3}=Il(),J3=or(),Ro=Symbol("encoded"),Cl=class extends X3{constructor(e){super(e),this[Ro]=[]}_put(e,t,n){this[Ro].push({...n,type:"put",key:e,value:t})}_del(e,t){this[Ro].push({...t,type:"del",key:e})}_clear(){this[Ro]=[]}_write(e,t){this.db.status==="opening"?this.db.defer(()=>this._write(e,t)):this.db.status==="open"?this[Ro].length===0?this.nextTick(t):this.db._batch(this[Ro],e,t):this.nextTick(t,new J3("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"}))}};Lg.DefaultChainedBatch=Cl});var jg=X((RT,qg)=>{"use strict";var Ug=or(),Y3=Object.prototype.hasOwnProperty,Q3=new Set(["lt","lte","gt","gte"]);qg.exports=function(r,e){let t={};for(let n in r)if(!!Y3.call(r,n)&&!(n==="keyEncoding"||n==="valueEncoding")){if(n==="start"||n==="end")throw new Ug(`The legacy range option '${n}' has been removed`,{code:"LEVEL_LEGACY"});if(n==="encoding")throw new Ug("The levelup-style 'encoding' alias has been removed, use 'valueEncoding' instead",{code:"LEVEL_LEGACY"});Q3.has(n)?t[n]=e.encode(r[n]):t[n]=r[n]}return t.reverse=!!t.reverse,t.limit=Number.isInteger(t.limit)&&t.limit>=0?t.limit:-1,t}});var Bl=X((PT,$g)=>{var Wg;$g.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:global):r=>(Wg||(Wg=Promise.resolve())).then(r).catch(e=>setTimeout(()=>{throw e},0))});var zg=X((NT,Kg)=>{"use strict";var Hg=Bl();Kg.exports=function(r,...e){e.length===0?Hg(r):Hg(()=>r(...e))}});var Gg=X(Kf=>{"use strict";var{AbstractIterator:Z3,AbstractKeyIterator:e4,AbstractValueIterator:t4}=Rn(),Po=Symbol("unfix"),_r=Symbol("iterator"),Bi=Symbol("handleOne"),Pn=Symbol("handleMany"),nn=Symbol("callback"),ea=class extends Z3{constructor(e,t,n,i){super(e,t),this[_r]=n,this[Po]=i,this[Bi]=this[Bi].bind(this),this[Pn]=this[Pn].bind(this),this[nn]=null}[Bi](e,t,n){let i=this[nn];if(e)return i(e);t!==void 0&&(t=this[Po](t)),i(e,t,n)}[Pn](e,t){let n=this[nn];if(e)return n(e);for(let i of t){let o=i[0];o!==void 0&&(i[0]=this[Po](o))}n(e,t)}},ta=class extends e4{constructor(e,t,n,i){super(e,t),this[_r]=n,this[Po]=i,this[Bi]=this[Bi].bind(this),this[Pn]=this[Pn].bind(this),this[nn]=null}[Bi](e,t){let n=this[nn];if(e)return n(e);t!==void 0&&(t=this[Po](t)),n(e,t)}[Pn](e,t){let n=this[nn];if(e)return n(e);for(let i=0;i<t.length;i++){let o=t[i];o!==void 0&&(t[i]=this[Po](o))}n(e,t)}},ra=class extends t4{constructor(e,t,n){super(e,t),this[_r]=n}};for(let r of[ea,ta])r.prototype._next=function(e){this[nn]=e,this[_r].next(this[Bi])},r.prototype._nextv=function(e,t,n){this[nn]=n,this[_r].nextv(e,t,this[Pn])},r.prototype._all=function(e,t){this[nn]=t,this[_r].all(e,this[Pn])};for(let r of[ra])r.prototype._next=function(e){this[_r].next(e)},r.prototype._nextv=function(e,t,n){this[_r].nextv(e,t,n)},r.prototype._all=function(e,t){this[_r].all(e,t)};for(let r of[ea,ta,ra])r.prototype._seek=function(e,t){this[_r].seek(e,t)},r.prototype._close=function(e){this[_r].close(e)};Kf.AbstractSublevelIterator=ea;Kf.AbstractSublevelKeyIterator=ta;Kf.AbstractSublevelValueIterator=ra});var Yg=X((LT,Jg)=>{"use strict";var Ol=or(),{Buffer:Nl}=Tn()||{},{AbstractSublevelIterator:r4,AbstractSublevelKeyIterator:n4,AbstractSublevelValueIterator:i4}=Gg(),on=Symbol("prefix"),Vg=Symbol("upperBound"),na=Symbol("prefixRange"),zt=Symbol("parent"),Rl=Symbol("unfix"),Xg=new TextEncoder,o4={separator:"!"};Jg.exports=function({AbstractLevel:r}){class e extends r{static defaults(n){if(typeof n=="string")throw new Ol("The subleveldown string shorthand for { separator } has been removed",{code:"LEVEL_LEGACY"});if(n&&n.open)throw new Ol("The subleveldown open option has been removed",{code:"LEVEL_LEGACY"});return n==null?o4:n.separator?n:{...n,separator:"!"}}constructor(n,i,o){let{separator:s,manifest:f,...h}=e.defaults(o);i=a4(i,s);let g=s.charCodeAt(0)+1,x=n[zt]||n;if(!Xg.encode(i).every(A=>A>g&&A<127))throw new Ol(`Prefix must use bytes > ${g} < ${127}`,{code:"LEVEL_INVALID_PREFIX"});super(s4(x,f),h);let T=(n.prefix||"")+s+i+s,I=T.slice(0,-1)+String.fromCharCode(g);this[zt]=x,this[on]=new zf(T),this[Vg]=new zf(I),this[Rl]=new kl,this.nextTick=x.nextTick}prefixKey(n,i){if(i==="utf8")return this[on].utf8+n;if(n.byteLength===0)return this[on][i];if(i==="view"){let o=this[on].view,s=new Uint8Array(o.byteLength+n.byteLength);return s.set(o,0),s.set(n,o.byteLength),s}else{let o=this[on].buffer;return Nl.concat([o,n],o.byteLength+n.byteLength)}}[na](n,i){n.gte!==void 0?n.gte=this.prefixKey(n.gte,i):n.gt!==void 0?n.gt=this.prefixKey(n.gt,i):n.gte=this[on][i],n.lte!==void 0?n.lte=this.prefixKey(n.lte,i):n.lt!==void 0?n.lt=this.prefixKey(n.lt,i):n.lte=this[Vg][i]}get prefix(){return this[on].utf8}get db(){return this[zt]}_open(n,i){this[zt].open({passive:!0},i)}_put(n,i,o,s){this[zt].put(n,i,o,s)}_get(n,i,o){this[zt].get(n,i,o)}_getMany(n,i,o){this[zt].getMany(n,i,o)}_del(n,i,o){this[zt].del(n,i,o)}_batch(n,i,o){this[zt].batch(n,i,o)}_clear(n,i){this[na](n,n.keyEncoding),this[zt].clear(n,i)}_iterator(n){this[na](n,n.keyEncoding);let i=this[zt].iterator(n),o=this[Rl].get(this[on].utf8.length,n.keyEncoding);return new r4(this,n,i,o)}_keys(n){this[na](n,n.keyEncoding);let i=this[zt].keys(n),o=this[Rl].get(this[on].utf8.length,n.keyEncoding);return new n4(this,n,i,o)}_values(n){this[na](n,n.keyEncoding);let i=this[zt].values(n);return new i4(this,n,i)}}return{AbstractSublevel:e}};var s4=function(r,e){return{...r.supports,createIfMissing:!1,errorIfExists:!1,events:{},additionalMethods:{},...e,encodings:{utf8:Pl(r,"utf8"),buffer:Pl(r,"buffer"),view:Pl(r,"view")}}},Pl=function(r,e){return r.supports.encodings[e]?r.keyEncoding(e).name===e:!1},zf=class{constructor(e){this.utf8=e,this.view=Xg.encode(e),this.buffer=Nl?Nl.from(this.view.buffer,0,this.view.byteLength):{}}},kl=class{constructor(){this.cache=new Map}get(e,t){let n=this.cache.get(t);return n===void 0&&(t==="view"?n=function(i,o){return o.subarray(i)}.bind(null,e):n=function(i,o){return o.slice(i)}.bind(null,e),this.cache.set(t,n)),n}},a4=function(r,e){let t=0,n=r.length;for(;t<n&&r[t]===e;)t++;for(;n>t&&r[n-1]===e;)n--;return r.slice(t,n)}});var jl=X(ql=>{"use strict";var{supports:f4}=jp(),{Transcoder:c4}=mg(),{EventEmitter:u4}=Tg(),{fromCallback:Nn}=Gs(),Sr=or(),{AbstractIterator:Oi}=Rn(),{DefaultKeyIterator:l4,DefaultValueIterator:h4}=Rg(),{DeferredIterator:d4,DeferredKeyIterator:p4,DeferredValueIterator:g4}=Pg(),{DefaultChainedBatch:Qg}=Dg(),{getCallback:Ri,getOptions:kn}=Bf(),Gf=jg(),qe=Symbol("promise"),sn=Symbol("landed"),Pi=Symbol("resources"),Ll=Symbol("closeResources"),ia=Symbol("operations"),oa=Symbol("undefer"),Vf=Symbol("deferOpen"),Zg=Symbol("options"),$e=Symbol("status"),Ni=Symbol("defaultOptions"),No=Symbol("transcoder"),Xf=Symbol("keyEncoding"),Dl=Symbol("valueEncoding"),m4=()=>{},sa=class extends u4{constructor(e,t){if(super(),typeof e!="object"||e===null)throw new TypeError("The first argument 'manifest' must be an object");t=kn(t);let{keyEncoding:n,valueEncoding:i,passive:o,...s}=t;this[Pi]=new Set,this[ia]=[],this[Vf]=!0,this[Zg]=s,this[$e]="opening",this.supports=f4(e,{status:!0,promises:!0,clear:!0,getMany:!0,deferredOpen:!0,snapshots:e.snapshots!==!1,permanence:e.permanence!==!1,keyIterator:!0,valueIterator:!0,iteratorNextv:!0,iteratorAll:!0,encodings:e.encodings||{},events:Object.assign({},e.events,{opening:!0,open:!0,closing:!0,closed:!0,put:!0,del:!0,batch:!0,clear:!0})}),this[No]=new c4(y4(this)),this[Xf]=this[No].encoding(n||"utf8"),this[Dl]=this[No].encoding(i||"utf8");for(let f of this[No].encodings())this.supports.encodings[f.commonName]||(this.supports.encodings[f.commonName]=!0);this[Ni]={empty:Object.freeze({}),entry:Object.freeze({keyEncoding:this[Xf].commonName,valueEncoding:this[Dl].commonName}),key:Object.freeze({keyEncoding:this[Xf].commonName})},this.nextTick(()=>{this[Vf]&&this.open({passive:!1},m4)})}get status(){return this[$e]}keyEncoding(e){return this[No].encoding(e??this[Xf])}valueEncoding(e){return this[No].encoding(e??this[Dl])}open(e,t){t=Ri(e,t),t=Nn(t,qe),e={...this[Zg],...kn(e)},e.createIfMissing=e.createIfMissing!==!1,e.errorIfExists=!!e.errorIfExists;let n=i=>{this[$e]==="closing"||this[$e]==="opening"?this.once(sn,i?()=>n(i):n):this[$e]!=="open"?t(new Sr("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN",cause:i})):t()};return e.passive?this[$e]==="opening"?this.once(sn,n):this.nextTick(n):this[$e]==="closed"||this[Vf]?(this[Vf]=!1,this[$e]="opening",this.emit("opening"),this._open(e,i=>{if(i){this[$e]="closed",this[Ll](()=>{this.emit(sn),n(i)}),this[oa]();return}this[$e]="open",this[oa](),this.emit(sn),this[$e]==="open"&&this.emit("open"),this[$e]==="open"&&this.emit("ready"),n()})):this[$e]==="open"?this.nextTick(n):this.once(sn,()=>this.open(e,t)),t[qe]}_open(e,t){this.nextTick(t)}close(e){e=Nn(e,qe);let t=n=>{this[$e]==="opening"||this[$e]==="closing"?this.once(sn,n?t(n):t):this[$e]!=="closed"?e(new Sr("Database is not closed",{code:"LEVEL_DATABASE_NOT_CLOSED",cause:n})):e()};if(this[$e]==="open"){this[$e]="closing",this.emit("closing");let n=i=>{this[$e]="open",this[oa](),this.emit(sn),t(i)};this[Ll](()=>{this._close(i=>{if(i)return n(i);this[$e]="closed",this[oa](),this.emit(sn),this[$e]==="closed"&&this.emit("closed"),t()})})}else this[$e]==="closed"?this.nextTick(t):this.once(sn,()=>this.close(e));return e[qe]}[Ll](e){if(this[Pi].size===0)return this.nextTick(e);let t=this[Pi].size,n=!0,i=()=>{--t===0&&(n?this.nextTick(e):e())};for(let o of this[Pi])o.close(i);n=!1,this[Pi].clear()}_close(e){this.nextTick(e)}get(e,t,n){if(n=Ri(t,n),n=Nn(n,qe),t=kn(t,this[Ni].entry),this[$e]==="opening")return this.defer(()=>this.get(e,t,n)),n[qe];if(ko(this,n))return n[qe];let i=this._checkKey(e);if(i)return this.nextTick(n,i),n[qe];let o=this.keyEncoding(t.keyEncoding),s=this.valueEncoding(t.valueEncoding),f=o.format,h=s.format;return(t.keyEncoding!==f||t.valueEncoding!==h)&&(t=Object.assign({},t,{keyEncoding:f,valueEncoding:h})),this._get(this.prefixKey(o.encode(e),f),t,(g,x)=>{if(g)return(g.code==="LEVEL_NOT_FOUND"||g.notFound||/NotFound/i.test(g))&&(g.code||(g.code="LEVEL_NOT_FOUND"),g.notFound||(g.notFound=!0),g.status||(g.status=404)),n(g);try{x=s.decode(x)}catch(T){return n(new Sr("Could not decode value",{code:"LEVEL_DECODE_ERROR",cause:T}))}n(null,x)}),n[qe]}_get(e,t,n){this.nextTick(n,new Error("NotFound"))}getMany(e,t,n){if(n=Ri(t,n),n=Nn(n,qe),t=kn(t,this[Ni].entry),this[$e]==="opening")return this.defer(()=>this.getMany(e,t,n)),n[qe];if(ko(this,n))return n[qe];if(!Array.isArray(e))return this.nextTick(n,new TypeError("The first argument 'keys' must be an array")),n[qe];if(e.length===0)return this.nextTick(n,null,[]),n[qe];let i=this.keyEncoding(t.keyEncoding),o=this.valueEncoding(t.valueEncoding),s=i.format,f=o.format;(t.keyEncoding!==s||t.valueEncoding!==f)&&(t=Object.assign({},t,{keyEncoding:s,valueEncoding:f}));let h=new Array(e.length);for(let g=0;g<e.length;g++){let x=e[g],T=this._checkKey(x);if(T)return this.nextTick(n,T),n[qe];h[g]=this.prefixKey(i.encode(x),s)}return this._getMany(h,t,(g,x)=>{if(g)return n(g);try{for(let T=0;T<x.length;T++)x[T]!==void 0&&(x[T]=o.decode(x[T]))}catch(T){return n(new Sr(`Could not decode one or more of ${x.length} value(s)`,{code:"LEVEL_DECODE_ERROR",cause:T}))}n(null,x)}),n[qe]}_getMany(e,t,n){this.nextTick(n,null,new Array(e.length).fill(void 0))}put(e,t,n,i){if(i=Ri(n,i),i=Nn(i,qe),n=kn(n,this[Ni].entry),this[$e]==="opening")return this.defer(()=>this.put(e,t,n,i)),i[qe];if(ko(this,i))return i[qe];let o=this._checkKey(e)||this._checkValue(t);if(o)return this.nextTick(i,o),i[qe];let s=this.keyEncoding(n.keyEncoding),f=this.valueEncoding(n.valueEncoding),h=s.format,g=f.format;(n.keyEncoding!==h||n.valueEncoding!==g)&&(n=Object.assign({},n,{keyEncoding:h,valueEncoding:g}));let x=this.prefixKey(s.encode(e),h),T=f.encode(t);return this._put(x,T,n,I=>{if(I)return i(I);this.emit("put",e,t),i()}),i[qe]}_put(e,t,n,i){this.nextTick(i)}del(e,t,n){if(n=Ri(t,n),n=Nn(n,qe),t=kn(t,this[Ni].key),this[$e]==="opening")return this.defer(()=>this.del(e,t,n)),n[qe];if(ko(this,n))return n[qe];let i=this._checkKey(e);if(i)return this.nextTick(n,i),n[qe];let o=this.keyEncoding(t.keyEncoding),s=o.format;return t.keyEncoding!==s&&(t=Object.assign({},t,{keyEncoding:s})),this._del(this.prefixKey(o.encode(e),s),t,f=>{if(f)return n(f);this.emit("del",e),n()}),n[qe]}_del(e,t,n){this.nextTick(n)}batch(e,t,n){if(!arguments.length){if(this[$e]==="opening")return new Qg(this);if(this[$e]!=="open")throw new Sr("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._chainedBatch()}if(typeof e=="function"?n=e:n=Ri(t,n),n=Nn(n,qe),t=kn(t,this[Ni].empty),this[$e]==="opening")return this.defer(()=>this.batch(e,t,n)),n[qe];if(ko(this,n))return n[qe];if(!Array.isArray(e))return this.nextTick(n,new TypeError("The first argument 'operations' must be an array")),n[qe];if(e.length===0)return this.nextTick(n),n[qe];let i=new Array(e.length),{keyEncoding:o,valueEncoding:s,...f}=t;for(let h=0;h<e.length;h++){if(typeof e[h]!="object"||e[h]===null)return this.nextTick(n,new TypeError("A batch operation must be an object")),n[qe];let g=Object.assign({},e[h]);if(g.type!=="put"&&g.type!=="del")return this.nextTick(n,new TypeError("A batch operation must have a type property that is 'put' or 'del'")),n[qe];let x=this._checkKey(g.key);if(x)return this.nextTick(n,x),n[qe];let T=g.sublevel!=null?g.sublevel:this,I=T.keyEncoding(g.keyEncoding||o),A=I.format;if(g.key=T.prefixKey(I.encode(g.key),A),g.keyEncoding=A,g.type==="put"){let C=this._checkValue(g.value);if(C)return this.nextTick(n,C),n[qe];let j=T.valueEncoding(g.valueEncoding||s);g.value=j.encode(g.value),g.valueEncoding=j.format}T!==this&&(g.sublevel=null),i[h]=g}return this._batch(i,f,h=>{if(h)return n(h);this.emit("batch",e),n()}),n[qe]}_batch(e,t,n){this.nextTick(n)}sublevel(e,t){return this._sublevel(e,Ul.defaults(t))}_sublevel(e,t){return new Ul(this,e,t)}prefixKey(e,t){return e}clear(e,t){if(t=Ri(e,t),t=Nn(t,qe),e=kn(e,this[Ni].empty),this[$e]==="opening")return this.defer(()=>this.clear(e,t)),t[qe];if(ko(this,t))return t[qe];let n=e,i=this.keyEncoding(e.keyEncoding);return e=Gf(e,i),e.keyEncoding=i.format,e.limit===0?this.nextTick(t):this._clear(e,o=>{if(o)return t(o);this.emit("clear",n),t()}),t[qe]}_clear(e,t){this.nextTick(t)}iterator(e){let t=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=Gf(e,t),e.keys=e.keys!==!1,e.values=e.values!==!1,e[Oi.keyEncoding]=t,e[Oi.valueEncoding]=n,e.keyEncoding=t.format,e.valueEncoding=n.format,this[$e]==="opening")return new d4(this,e);if(this[$e]!=="open")throw new Sr("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._iterator(e)}_iterator(e){return new Oi(this,e)}keys(e){let t=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=Gf(e,t),e[Oi.keyEncoding]=t,e[Oi.valueEncoding]=n,e.keyEncoding=t.format,e.valueEncoding=n.format,this[$e]==="opening")return new p4(this,e);if(this[$e]!=="open")throw new Sr("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._keys(e)}_keys(e){return new l4(this,e)}values(e){let t=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=Gf(e,t),e[Oi.keyEncoding]=t,e[Oi.valueEncoding]=n,e.keyEncoding=t.format,e.valueEncoding=n.format,this[$e]==="opening")return new g4(this,e);if(this[$e]!=="open")throw new Sr("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._values(e)}_values(e){return new h4(this,e)}defer(e){if(typeof e!="function")throw new TypeError("The first argument must be a function");this[ia].push(e)}[oa](){if(this[ia].length===0)return;let e=this[ia];this[ia]=[];for(let t of e)t()}attachResource(e){if(typeof e!="object"||e===null||typeof e.close!="function")throw new TypeError("The first argument must be a resource object");this[Pi].add(e)}detachResource(e){this[Pi].delete(e)}_chainedBatch(){return new Qg(this)}_checkKey(e){if(e==null)return new Sr("Key cannot be null or undefined",{code:"LEVEL_INVALID_KEY"})}_checkValue(e){if(e==null)return new Sr("Value cannot be null or undefined",{code:"LEVEL_INVALID_VALUE"})}};sa.prototype.nextTick=zg();var{AbstractSublevel:Ul}=Yg()({AbstractLevel:sa});ql.AbstractLevel=sa;ql.AbstractSublevel=Ul;var ko=function(r,e){return r[$e]!=="open"?(r.nextTick(e,new Sr("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"})),!0):!1},y4=function(r){return Object.keys(r.supports.encodings).filter(e=>!!r.supports.encodings[e])}});var Jf=X(ki=>{"use strict";ki.AbstractLevel=jl().AbstractLevel;ki.AbstractSublevel=jl().AbstractSublevel;ki.AbstractIterator=Rn().AbstractIterator;ki.AbstractKeyIterator=Rn().AbstractKeyIterator;ki.AbstractValueIterator=Rn().AbstractValueIterator;ki.AbstractChainedBatch=Il().AbstractChainedBatch});var t1=X((qT,e1)=>{e1.exports=v4;var b4=Bl();function v4(r,e,t){if(typeof e!="number")throw new Error("second argument must be a Number");let n,i,o,s,f,h=!0,g;Array.isArray(r)?(n=[],o=i=r.length):(s=Object.keys(r),n={},o=i=s.length);function x(I){function A(){t&&t(I,n),t=null}h?b4(A):A()}function T(I,A,C){if(n[I]=C,A&&(f=!0),--o===0||A)x(A);else if(!f&&g<i){let j;s?(j=s[g],g+=1,r[j](function(G,$){T(j,G,$)})):(j=g,g+=1,r[j](function(G,$){T(j,G,$)}))}}g=e,o?s?s.some(function(I,A){return r[I](function(C,j){T(I,C,j)}),A===e-1}):r.some(function(I,A){return I(function(C,j){T(A,C,j)}),A===e-1}):x(null),h=!1}});var Wl=X((jT,r1)=>{"use strict";r1.exports=function(e){let t=e.gte!==void 0?e.gte:e.gt!==void 0?e.gt:void 0,n=e.lte!==void 0?e.lte:e.lt!==void 0?e.lt:void 0,i=e.gte===void 0,o=e.lte===void 0;return t!==void 0&&n!==void 0?IDBKeyRange.bound(t,n,i,o):t!==void 0?IDBKeyRange.lowerBound(t,i):n!==void 0?IDBKeyRange.upperBound(n,o):null}});var $l=X((WT,n1)=>{"use strict";var w4=new TextEncoder;n1.exports=function(r){return r instanceof Uint8Array?r:r instanceof ArrayBuffer?new Uint8Array(r):w4.encode(r)}});var f1=X(a1=>{"use strict";var{AbstractIterator:x4}=Jf(),i1=Wl(),Yf=$l(),Ur=Symbol("cache"),an=Symbol("finished"),Gt=Symbol("options"),fn=Symbol("currentOptions"),Li=Symbol("position"),Hl=Symbol("location"),Lo=Symbol("first"),o1={},Kl=class extends x4{constructor(e,t,n){super(e,n),this[Ur]=[],this[an]=this.limit===0,this[Gt]=n,this[fn]={...n},this[Li]=void 0,this[Hl]=t,this[Lo]=!0}_nextv(e,t,n){if(this[Lo]=!1,this[an])return this.nextTick(n,null,[]);if(this[Ur].length>0)return e=Math.min(e,this[Ur].length),this.nextTick(n,null,this[Ur].splice(0,e));this[Li]!==void 0&&(this[Gt].reverse?(this[fn].lt=this[Li],this[fn].lte=void 0):(this[fn].gt=this[Li],this[fn].gte=void 0));let i;try{i=i1(this[fn])}catch{return this[an]=!0,this.nextTick(n,null,[])}let o=this.db.db.transaction([this[Hl]],"readonly"),s=o.objectStore(this[Hl]),f=[];if(this[Gt].reverse){let h=!this[Gt].values&&s.openKeyCursor?"openKeyCursor":"openCursor";s[h](i,"prev").onsuccess=g=>{let x=g.target.result;if(x){let{key:T,value:I}=x;this[Li]=T,f.push([this[Gt].keys&&T!==void 0?Yf(T):void 0,this[Gt].values&&I!==void 0?Yf(I):void 0]),f.length<e?x.continue():s1(o)}else this[an]=!0}}else{let h,g,x=()=>{if(h===void 0||g===void 0)return;let T=Math.max(h.length,g.length);T===0||e===1/0?this[an]=!0:this[Li]=h[T-1],f.length=T;for(let I=0;I<T;I++){let A=h[I],C=g[I];f[I]=[this[Gt].keys&&A!==void 0?Yf(A):void 0,this[Gt].values&&C!==void 0?Yf(C):void 0]}s1(o)};this[Gt].keys||e<1/0?s.getAllKeys(i,e<1/0?e:void 0).onsuccess=T=>{h=T.target.result,x()}:(h=[],this.nextTick(x)),this[Gt].values?s.getAll(i,e<1/0?e:void 0).onsuccess=T=>{g=T.target.result,x()}:(g=[],this.nextTick(x))}o.onabort=()=>{n(o.error||new Error("aborted by user")),n=null},o.oncomplete=()=>{n(null,f),n=null}}_next(e){if(this[Ur].length>0){let[t,n]=this[Ur].shift();this.nextTick(e,null,t,n)}else if(this[an])this.nextTick(e);else{let t=Math.min(100,this.limit-this.count);this[Lo]&&(this[Lo]=!1,t=1),this._nextv(t,o1,(n,i)=>{if(n)return e(n);this[Ur]=i,this._next(e)})}}_all(e,t){this[Lo]=!1;let n=this[Ur].splice(0,this[Ur].length),i=this.limit-this.count-n.length;if(i<=0)return this.nextTick(t,null,n);this._nextv(i,o1,(o,s)=>{if(o)return t(o);n.length>0&&(s=n.concat(s)),t(null,s)})}_seek(e,t){this[Lo]=!0,this[Ur]=[],this[an]=!1,this[Li]=void 0,this[fn]={...this[Gt]};let n;try{n=i1(this[Gt])}catch{this[an]=!0;return}n!==null&&!n.includes(e)?this[an]=!0:this[Gt].reverse?this[fn].lte=e:this[fn].gte=e}};a1.Iterator=Kl;function s1(r){typeof r.commit=="function"&&r.commit()}});var u1=X((HT,c1)=>{"use strict";c1.exports=function(e,t,n,i,o){if(i.limit===0)return e.nextTick(o);let s=e.db.transaction([t],"readwrite"),f=s.objectStore(t),h=0;s.oncomplete=function(){o()},s.onabort=function(){o(s.error||new Error("aborted by user"))};let g=f.openKeyCursor?"openKeyCursor":"openCursor",x=i.reverse?"prev":"next";f[g](n,x).onsuccess=function(T){let I=T.target.result;I&&(f.delete(I.key).onsuccess=function(){(i.limit<=0||++h<i.limit)&&I.continue()})}}});var m1=X(g1=>{"use strict";var{AbstractLevel:_4}=Jf(),l1=or(),S4=t1(),{fromCallback:E4}=Gs(),{Iterator:A4}=f1(),h1=$l(),F4=u1(),T4=Wl(),p1="level-js-",aa=Symbol("idb"),zl=Symbol("namePrefix"),cn=Symbol("location"),Gl=Symbol("version"),Di=Symbol("store"),fa=Symbol("onComplete"),d1=Symbol("promise"),Qf=class extends _4{constructor(e,t,n){if(typeof t=="function"||typeof n=="function")throw new l1("The levelup-style callback argument has been removed",{code:"LEVEL_LEGACY"});let{prefix:i,version:o,...s}=t||{};if(super({encodings:{view:!0},snapshots:!1,createIfMissing:!1,errorIfExists:!1,seek:!0},s),typeof e!="string")throw new Error("constructor requires a location string argument");this[cn]=e,this[zl]=i??p1,this[Gl]=parseInt(o||1,10),this[aa]=null}get location(){return this[cn]}get namePrefix(){return this[zl]}get version(){return this[Gl]}get db(){return this[aa]}get type(){return"browser-level"}_open(e,t){let n=indexedDB.open(this[zl]+this[cn],this[Gl]);n.onerror=function(){t(n.error||new Error("unknown error"))},n.onsuccess=()=>{this[aa]=n.result,t()},n.onupgradeneeded=i=>{let o=i.target.result;o.objectStoreNames.contains(this[cn])||o.createObjectStore(this[cn])}}[Di](e){return this[aa].transaction([this[cn]],e).objectStore(this[cn])}[fa](e,t){let n=e.transaction;n.onabort=function(){t(n.error||new Error("aborted by user"))},n.oncomplete=function(){t(null,e.result)}}_get(e,t,n){let i=this[Di]("readonly"),o;try{o=i.get(e)}catch(s){return this.nextTick(n,s)}this[fa](o,function(s,f){if(s)return n(s);if(f===void 0)return n(new l1("Entry not found",{code:"LEVEL_NOT_FOUND"}));n(null,h1(f))})}_getMany(e,t,n){let i=this[Di]("readonly"),o=e.map(s=>f=>{let h;try{h=i.get(s)}catch(g){return f(g)}h.onsuccess=()=>{let g=h.result;f(null,g===void 0?g:h1(g))},h.onerror=g=>{g.stopPropagation(),f(h.error)}});S4(o,16,n)}_del(e,t,n){let i=this[Di]("readwrite"),o;try{o=i.delete(e)}catch(s){return this.nextTick(n,s)}this[fa](o,n)}_put(e,t,n,i){let o=this[Di]("readwrite"),s;try{s=o.put(t,e)}catch(f){return this.nextTick(i,f)}this[fa](s,i)}_iterator(e){return new A4(this,this[cn],e)}_batch(e,t,n){let i=this[Di]("readwrite"),o=i.transaction,s=0,f;o.onabort=function(){n(f||o.error||new Error("aborted by user"))},o.oncomplete=function(){n()};function h(){let g=e[s++],x=g.key,T;try{T=g.type==="del"?i.delete(x):i.put(g.value,x)}catch(I){f=I,o.abort();return}s<e.length?T.onsuccess=h:typeof o.commit=="function"&&o.commit()}h()}_clear(e,t){let n,i;try{n=T4(e)}catch{return this.nextTick(t)}if(e.limit>=0)return F4(this,this[cn],n,e,t);try{let o=this[Di]("readwrite");i=n?o.delete(n):o.clear()}catch(o){return this.nextTick(t,o)}this[fa](i,t)}_close(e){this[aa].close(),this.nextTick(e)}};Qf.destroy=function(r,e,t){typeof e=="function"&&(t=e,e=p1),t=E4(t,d1);let n=indexedDB.deleteDatabase(e+r);return n.onsuccess=function(){t()},n.onerror=function(i){t(i)},t[d1]};g1.BrowserLevel=Qf});var b1=X(y1=>{y1.Level=m1().BrowserLevel});var x1=X((GT,w1)=>{"use strict";w1.exports=C4;var rt=0,Ve=1;function Vt(r,e,t,n,i,o){this._color=r,this.key=e,this.value=t,this.left=n,this.right=i,this._count=o}function qr(r){return new Vt(r._color,r.key,r.value,r.left,r.right,r._count)}function Ln(r,e){return new Vt(r,e.key,e.value,e.left,e.right,e._count)}function ft(r){r._count=1+(r.left?r.left._count:0)+(r.right?r.right._count:0)}function Dn(r,e){this._compare=r,this.root=e}var Ot=Dn.prototype;Object.defineProperty(Ot,"keys",{get:function(){var r=[];return this.forEach(function(e,t){r.push(e)}),r}});Object.defineProperty(Ot,"values",{get:function(){var r=[];return this.forEach(function(e,t){r.push(t)}),r}});Object.defineProperty(Ot,"length",{get:function(){return this.root?this.root._count:0}});Ot.insert=function(r,e){for(var t=this._compare,n=this.root,i=[],o=[];n;){var s=t(r,n.key);i.push(n),o.push(s),s<=0?n=n.left:n=n.right}i.push(new Vt(rt,r,e,null,null,1));for(var f=i.length-2;f>=0;--f){var n=i[f];o[f]<=0?i[f]=new Vt(n._color,n.key,n.value,i[f+1],n.right,n._count+1):i[f]=new Vt(n._color,n.key,n.value,n.left,i[f+1],n._count+1)}for(var f=i.length-1;f>1;--f){var h=i[f-1],n=i[f];if(h._color===Ve||n._color===Ve)break;var g=i[f-2];if(g.left===h)if(h.left===n){var x=g.right;if(x&&x._color===rt)h._color=Ve,g.right=Ln(Ve,x),g._color=rt,f-=1;else{if(g._color=rt,g.left=h.right,h._color=Ve,h.right=g,i[f-2]=h,i[f-1]=n,ft(g),ft(h),f>=3){var T=i[f-3];T.left===g?T.left=h:T.right=h}break}}else{var x=g.right;if(x&&x._color===rt)h._color=Ve,g.right=Ln(Ve,x),g._color=rt,f-=1;else{if(h.right=n.left,g._color=rt,g.left=n.right,n._color=Ve,n.left=h,n.right=g,i[f-2]=n,i[f-1]=h,ft(g),ft(h),ft(n),f>=3){var T=i[f-3];T.left===g?T.left=n:T.right=n}break}}else if(h.right===n){var x=g.left;if(x&&x._color===rt)h._color=Ve,g.left=Ln(Ve,x),g._color=rt,f-=1;else{if(g._color=rt,g.right=h.left,h._color=Ve,h.left=g,i[f-2]=h,i[f-1]=n,ft(g),ft(h),f>=3){var T=i[f-3];T.right===g?T.right=h:T.left=h}break}}else{var x=g.left;if(x&&x._color===rt)h._color=Ve,g.left=Ln(Ve,x),g._color=rt,f-=1;else{if(h.left=n.right,g._color=rt,g.right=n.left,n._color=Ve,n.right=h,n.left=g,i[f-2]=n,i[f-1]=h,ft(g),ft(h),ft(n),f>=3){var T=i[f-3];T.right===g?T.right=n:T.left=n}break}}}return i[0]._color=Ve,new Dn(t,i[0])};function Vl(r,e){if(e.left){var t=Vl(r,e.left);if(t)return t}var t=r(e.key,e.value);if(t)return t;if(e.right)return Vl(r,e.right)}function Xl(r,e,t,n){var i=e(r,n.key);if(i<=0){if(n.left){var o=Xl(r,e,t,n.left);if(o)return o}var o=t(n.key,n.value);if(o)return o}if(n.right)return Xl(r,e,t,n.right)}function Jl(r,e,t,n,i){var o=t(r,i.key),s=t(e,i.key),f;if(o<=0&&(i.left&&(f=Jl(r,e,t,n,i.left),f)||s>0&&(f=n(i.key,i.value),f)))return f;if(s>0&&i.right)return Jl(r,e,t,n,i.right)}Ot.forEach=function(e,t,n){if(!!this.root)switch(arguments.length){case 1:return Vl(e,this.root);case 2:return Xl(t,this._compare,e,this.root);case 3:return this._compare(t,n)>=0?void 0:Jl(t,n,this._compare,e,this.root)}};Object.defineProperty(Ot,"begin",{get:function(){for(var r=[],e=this.root;e;)r.push(e),e=e.left;return new Xt(this,r)}});Object.defineProperty(Ot,"end",{get:function(){for(var r=[],e=this.root;e;)r.push(e),e=e.right;return new Xt(this,r)}});Ot.at=function(r){if(r<0)return new Xt(this,[]);for(var e=this.root,t=[];;){if(t.push(e),e.left){if(r<e.left._count){e=e.left;continue}r-=e.left._count}if(!r)return new Xt(this,t);if(r-=1,e.right){if(r>=e.right._count)break;e=e.right}else break}return new Xt(this,[])};Ot.ge=function(r){for(var e=this._compare,t=this.root,n=[],i=0;t;){var o=e(r,t.key);n.push(t),o<=0&&(i=n.length),o<=0?t=t.left:t=t.right}return n.length=i,new Xt(this,n)};Ot.gt=function(r){for(var e=this._compare,t=this.root,n=[],i=0;t;){var o=e(r,t.key);n.push(t),o<0&&(i=n.length),o<0?t=t.left:t=t.right}return n.length=i,new Xt(this,n)};Ot.lt=function(r){for(var e=this._compare,t=this.root,n=[],i=0;t;){var o=e(r,t.key);n.push(t),o>0&&(i=n.length),o<=0?t=t.left:t=t.right}return n.length=i,new Xt(this,n)};Ot.le=function(r){for(var e=this._compare,t=this.root,n=[],i=0;t;){var o=e(r,t.key);n.push(t),o>=0&&(i=n.length),o<0?t=t.left:t=t.right}return n.length=i,new Xt(this,n)};Ot.find=function(r){for(var e=this._compare,t=this.root,n=[];t;){var i=e(r,t.key);if(n.push(t),i===0)return new Xt(this,n);i<=0?t=t.left:t=t.right}return new Xt(this,[])};Ot.remove=function(r){var e=this.find(r);return e?e.remove():this};Ot.get=function(r){for(var e=this._compare,t=this.root;t;){var n=e(r,t.key);if(n===0)return t.value;n<=0?t=t.left:t=t.right}};function Xt(r,e){this.tree=r,this._stack=e}var cr=Xt.prototype;Object.defineProperty(cr,"valid",{get:function(){return this._stack.length>0}});Object.defineProperty(cr,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0});cr.clone=function(){return new Xt(this.tree,this._stack.slice())};function v1(r,e){r.key=e.key,r.value=e.value,r.left=e.left,r.right=e.right,r._color=e._color,r._count=e._count}function M4(r){for(var e,t,n,i,o=r.length-1;o>=0;--o){if(e=r[o],o===0){e._color=Ve;return}if(t=r[o-1],t.left===e){if(n=t.right,n.right&&n.right._color===rt){if(n=t.right=qr(n),i=n.right=qr(n.right),t.right=n.left,n.left=t,n.right=i,n._color=t._color,e._color=Ve,t._color=Ve,i._color=Ve,ft(t),ft(n),o>1){var s=r[o-2];s.left===t?s.left=n:s.right=n}r[o-1]=n;return}else if(n.left&&n.left._color===rt){if(n=t.right=qr(n),i=n.left=qr(n.left),t.right=i.left,n.left=i.right,i.left=t,i.right=n,i._color=t._color,t._color=Ve,n._color=Ve,e._color=Ve,ft(t),ft(n),ft(i),o>1){var s=r[o-2];s.left===t?s.left=i:s.right=i}r[o-1]=i;return}if(n._color===Ve)if(t._color===rt){t._color=Ve,t.right=Ln(rt,n);return}else{t.right=Ln(rt,n);continue}else{if(n=qr(n),t.right=n.left,n.left=t,n._color=t._color,t._color=rt,ft(t),ft(n),o>1){var s=r[o-2];s.left===t?s.left=n:s.right=n}r[o-1]=n,r[o]=t,o+1<r.length?r[o+1]=e:r.push(e),o=o+2}}else{if(n=t.left,n.left&&n.left._color===rt){if(n=t.left=qr(n),i=n.left=qr(n.left),t.left=n.right,n.right=t,n.left=i,n._color=t._color,e._color=Ve,t._color=Ve,i._color=Ve,ft(t),ft(n),o>1){var s=r[o-2];s.right===t?s.right=n:s.left=n}r[o-1]=n;return}else if(n.right&&n.right._color===rt){if(n=t.left=qr(n),i=n.right=qr(n.right),t.left=i.right,n.right=i.left,i.right=t,i.left=n,i._color=t._color,t._color=Ve,n._color=Ve,e._color=Ve,ft(t),ft(n),ft(i),o>1){var s=r[o-2];s.right===t?s.right=i:s.left=i}r[o-1]=i;return}if(n._color===Ve)if(t._color===rt){t._color=Ve,t.left=Ln(rt,n);return}else{t.left=Ln(rt,n);continue}else{if(n=qr(n),t.left=n.right,n.right=t,n._color=t._color,t._color=rt,ft(t),ft(n),o>1){var s=r[o-2];s.right===t?s.right=n:s.left=n}r[o-1]=n,r[o]=t,o+1<r.length?r[o+1]=e:r.push(e),o=o+2}}}}cr.remove=function(){var r=this._stack;if(r.length===0)return this.tree;var e=new Array(r.length),t=r[r.length-1];e[e.length-1]=new Vt(t._color,t.key,t.value,t.left,t.right,t._count);for(var n=r.length-2;n>=0;--n){var t=r[n];t.left===r[n+1]?e[n]=new Vt(t._color,t.key,t.value,e[n+1],t.right,t._count):e[n]=new Vt(t._color,t.key,t.value,t.left,e[n+1],t._count)}if(t=e[e.length-1],t.left&&t.right){var i=e.length;for(t=t.left;t.right;)e.push(t),t=t.right;var o=e[i-1];e.push(new Vt(t._color,o.key,o.value,t.left,t.right,t._count)),e[i-1].key=t.key,e[i-1].value=t.value;for(var n=e.length-2;n>=i;--n)t=e[n],e[n]=new Vt(t._color,t.key,t.value,t.left,e[n+1],t._count);e[i-1].left=e[i]}if(t=e[e.length-1],t._color===rt){var s=e[e.length-2];s.left===t?s.left=null:s.right===t&&(s.right=null),e.pop();for(var n=0;n<e.length;++n)e[n]._count--;return new Dn(this.tree._compare,e[0])}else if(t.left||t.right){t.left?v1(t,t.left):t.right&&v1(t,t.right),t._color=Ve;for(var n=0;n<e.length-1;++n)e[n]._count--;return new Dn(this.tree._compare,e[0])}else{if(e.length===1)return new Dn(this.tree._compare,null);for(var n=0;n<e.length;++n)e[n]._count--;var f=e[e.length-2];M4(e),f.left===t?f.left=null:f.right=null}return new Dn(this.tree._compare,e[0])};Object.defineProperty(cr,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0});Object.defineProperty(cr,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0});Object.defineProperty(cr,"index",{get:function(){var r=0,e=this._stack;if(e.length===0){var t=this.tree.root;return t?t._count:0}else e[e.length-1].left&&(r=e[e.length-1].left._count);for(var n=e.length-2;n>=0;--n)e[n+1]===e[n].right&&(++r,e[n].left&&(r+=e[n].left._count));return r},enumerable:!0});cr.next=function(){var r=this._stack;if(r.length!==0){var e=r[r.length-1];if(e.right)for(e=e.right;e;)r.push(e),e=e.left;else for(r.pop();r.length>0&&r[r.length-1].right===e;)e=r[r.length-1],r.pop()}};Object.defineProperty(cr,"hasNext",{get:function(){var r=this._stack;if(r.length===0)return!1;if(r[r.length-1].right)return!0;for(var e=r.length-1;e>0;--e)if(r[e-1].left===r[e])return!0;return!1}});cr.update=function(r){var e=this._stack;if(e.length===0)throw new Error("Can't update empty node!");var t=new Array(e.length),n=e[e.length-1];t[t.length-1]=new Vt(n._color,n.key,r,n.left,n.right,n._count);for(var i=e.length-2;i>=0;--i)n=e[i],n.left===e[i+1]?t[i]=new Vt(n._color,n.key,n.value,t[i+1],n.right,n._count):t[i]=new Vt(n._color,n.key,n.value,n.left,t[i+1],n._count);return new Dn(this.tree._compare,t[0])};cr.prev=function(){var r=this._stack;if(r.length!==0){var e=r[r.length-1];if(e.left)for(e=e.left;e;)r.push(e),e=e.right;else for(r.pop();r.length>0&&r[r.length-1].left===e;)e=r[r.length-1],r.pop()}};Object.defineProperty(cr,"hasPrev",{get:function(){var r=this._stack;if(r.length===0)return!1;if(r[r.length-1].left)return!0;for(var e=r.length-1;e>0;--e)if(r[e-1].right===r[e])return!0;return!1}});function I4(r,e){return r<e?-1:r>e?1:0}function C4(r){return new Dn(r||I4,null)}});var F1=X(A1=>{"use strict";var{AbstractLevel:B4,AbstractIterator:O4,AbstractKeyIterator:R4,AbstractValueIterator:P4}=Jf(),_1=or(),S1=x1(),N4=new Set(["gt","gte","lt","lte"]),un=Symbol("none"),At=Symbol("tree"),ze=Symbol("iterator"),Jt=Symbol("lowerBound"),Un=Symbol("upperBound"),E1=Symbol("outOfRange"),Zf=Symbol("reverse"),Yl=Symbol("options"),Ut=Symbol("test"),ur=Symbol("advance"),ic=Symbol("init");function jr(r,e){if(typeof r=="string")return r<e?-1:r>e?1:0;let t=Math.min(r.byteLength,e.byteLength);for(let n=0;n<t;n++){let i=r[n]-e[n];if(i!==0)return i}return r.byteLength-e.byteLength}function k4(r){return jr(r,this[Un])>0}function L4(r){return jr(r,this[Un])>=0}function D4(r){return jr(r,this[Un])<0}function U4(r){return jr(r,this[Un])<=0}var ec=class extends O4{constructor(e,t){super(e,t),this[ic](e[At],t)}_next(e){if(!this[ze].valid)return this.nextTick(e);let t=this[ze].key,n=this[ze].value;if(!this[Ut](t))return this.nextTick(e);this[ze][this[ur]](),this.nextTick(e,null,t,n)}_nextv(e,t,n){let i=this[ze],o=[];for(;i.valid&&o.length<e&&this[Ut](i.key);)o.push([i.key,i.value]),i[this[ur]]();this.nextTick(n,null,o)}_all(e,t){let n=this.limit-this.count,i=this[ze],o=[];for(;i.valid&&o.length<n&&this[Ut](i.key);)o.push([i.key,i.value]),i[this[ur]]();this.nextTick(t,null,o)}},tc=class extends R4{constructor(e,t){super(e,t),this[ic](e[At],t)}_next(e){if(!this[ze].valid)return this.nextTick(e);let t=this[ze].key;if(!this[Ut](t))return this.nextTick(e);this[ze][this[ur]](),this.nextTick(e,null,t)}_nextv(e,t,n){let i=this[ze],o=[];for(;i.valid&&o.length<e&&this[Ut](i.key);)o.push(i.key),i[this[ur]]();this.nextTick(n,null,o)}_all(e,t){let n=this.limit-this.count,i=this[ze],o=[];for(;i.valid&&o.length<n&&this[Ut](i.key);)o.push(i.key),i[this[ur]]();this.nextTick(t,null,o)}},rc=class extends P4{constructor(e,t){super(e,t),this[ic](e[At],t)}_next(e){if(!this[ze].valid)return this.nextTick(e);let t=this[ze].key,n=this[ze].value;if(!this[Ut](t))return this.nextTick(e);this[ze][this[ur]](),this.nextTick(e,null,n)}_nextv(e,t,n){let i=this[ze],o=[];for(;i.valid&&o.length<e&&this[Ut](i.key);)o.push(i.value),i[this[ur]]();this.nextTick(n,null,o)}_all(e,t){let n=this.limit-this.count,i=this[ze],o=[];for(;i.valid&&o.length<n&&this[Ut](i.key);)o.push(i.value),i[this[ur]]();this.nextTick(t,null,o)}};for(let r of[ec,tc,rc])r.prototype[ic]=function(e,t){this[Zf]=t.reverse,this[Yl]=t,this[Zf]?(this[ur]="prev",this[Jt]="lte"in t?t.lte:"lt"in t?t.lt:un,this[Un]="gte"in t?t.gte:"gt"in t?t.gt:un,this[Jt]===un?this[ze]=e.end:"lte"in t?this[ze]=e.le(this[Jt]):this[ze]=e.lt(this[Jt]),this[Un]!==un&&(this[Ut]="gte"in t?L4:k4)):(this[ur]="next",this[Jt]="gte"in t?t.gte:"gt"in t?t.gt:un,this[Un]="lte"in t?t.lte:"lt"in t?t.lt:un,this[Jt]===un?this[ze]=e.begin:"gte"in t?this[ze]=e.ge(this[Jt]):this[ze]=e.gt(this[Jt]),this[Un]!==un&&(this[Ut]="lte"in t?U4:D4))},r.prototype[Ut]=function(){return!0},r.prototype[E1]=function(e){return this[Ut](e)?this[Jt]===un?!1:this[Zf]?"lte"in this[Yl]?jr(e,this[Jt])>0:jr(e,this[Jt])>=0:"gte"in this[Yl]?jr(e,this[Jt])<0:jr(e,this[Jt])<=0:!0},r.prototype._seek=function(e,t){this[E1](e)?(this[ze]=this[ze].tree.end,this[ze].next()):this[Zf]?this[ze]=this[ze].tree.le(e):this[ze]=this[ze].tree.ge(e)};var nc=class extends B4{constructor(e,t,n){if(typeof e=="object"&&e!==null&&(t=e),typeof e=="function"||typeof t=="function"||typeof n=="function")throw new _1("The levelup-style callback argument has been removed",{code:"LEVEL_LEGACY"});let{storeEncoding:i,...o}=t||{};if(i=i||"buffer",!["buffer","view","utf8"].includes(i))throw new _1("The storeEncoding option must be 'buffer', 'view' or 'utf8'",{code:"LEVEL_ENCODING_NOT_SUPPORTED"});super({seek:!0,permanence:!1,createIfMissing:!1,errorIfExists:!1,encodings:{[i]:!0}},o),this[At]=S1(jr)}_put(e,t,n,i){let o=this[At].find(e);o.valid?this[At]=o.update(t):this[At]=this[At].insert(e,t),this.nextTick(i)}_get(e,t,n){let i=this[At].get(e);if(typeof i>"u")return this.nextTick(n,new Error("NotFound"));this.nextTick(n,null,i)}_getMany(e,t,n){this.nextTick(n,null,e.map(i=>this[At].get(i)))}_del(e,t,n){this[At]=this[At].remove(e),this.nextTick(n)}_batch(e,t,n){let i=this[At];for(let o of e){let s=o.key,f=i.find(s);o.type==="put"?i=f.valid?f.update(o.value):i.insert(s,o.value):i=f.remove()}this[At]=i,this.nextTick(n)}_clear(e,t){if(e.limit===-1&&!Object.keys(e).some(q4))return this[At]=S1(jr),this.nextTick(t);let n=this._keys({...e}),i=n.limit,o=0,s=()=>{for(let f=0;f<500;f++){if(++o>i||!n[ze].valid||!n[Ut](n[ze].key))return t();this[At]=this[At].remove(n[ze].key),n[ze][n[ur]]()}this.nextTick(s)};this.nextTick(s)}_iterator(e){return new ec(this,e)}_keys(e){return new tc(this,e)}_values(e){return new rc(this,e)}};A1.MemoryLevel=nc;if(typeof process<"u"&&!process.browser&&typeof global<"u"&&typeof global.setImmediate=="function"){let r=global.setImmediate;nc.prototype.nextTick=function(e,...t){t.length===0?r(e):r(()=>e(...t))}}function q4(r){return N4.has(r)}});var Ql=X((C1,oc)=>{(function(r){"use strict";var e,t=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,n=Math.ceil,i=Math.floor,o="[BigNumber Error] ",s=o+"Number primitive has more than 15 significant digits: ",f=1e14,h=14,g=9007199254740991,x=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],T=1e7,I=1e9;function A(V){var q,z,J,H=_.prototype={constructor:_,toString:null,valueOf:null},L=new _(1),l=20,b=4,d=-7,a=21,u=-1e7,v=1e7,F=!1,p=1,c=0,E={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"\xA0",suffix:""},M="0123456789abcdefghijklmnopqrstuvwxyz",y=!0;function _(m,w){var S,N,R,P,D,B,O,k,U=this;if(!(U instanceof _))return new _(m,w);if(w==null){if(m&&m._isBigNumber===!0){U.s=m.s,!m.c||m.e>v?U.c=U.e=null:m.e<u?U.c=[U.e=0]:(U.e=m.e,U.c=m.c.slice());return}if((B=typeof m=="number")&&m*0==0){if(U.s=1/m<0?(m=-m,-1):1,m===~~m){for(P=0,D=m;D>=10;D/=10,P++);P>v?U.c=U.e=null:(U.e=P,U.c=[m]);return}k=String(m)}else{if(!t.test(k=String(m)))return J(U,k,B);U.s=k.charCodeAt(0)==45?(k=k.slice(1),-1):1}(P=k.indexOf("."))>-1&&(k=k.replace(".","")),(D=k.search(/e/i))>0?(P<0&&(P=D),P+=+k.slice(D+1),k=k.substring(0,D)):P<0&&(P=k.length)}else{if($(w,2,M.length,"Base"),w==10&&y)return U=new _(m),he(U,l+U.e+1,b);if(k=String(m),B=typeof m=="number"){if(m*0!=0)return J(U,k,B,w);if(U.s=1/m<0?(k=k.slice(1),-1):1,_.DEBUG&&k.replace(/^0\.0*|\./,"").length>15)throw Error(s+m)}else U.s=k.charCodeAt(0)===45?(k=k.slice(1),-1):1;for(S=M.slice(0,w),P=D=0,O=k.length;D<O;D++)if(S.indexOf(N=k.charAt(D))<0){if(N=="."){if(D>P){P=O;continue}}else if(!R&&(k==k.toUpperCase()&&(k=k.toLowerCase())||k==k.toLowerCase()&&(k=k.toUpperCase()))){R=!0,D=-1,P=0;continue}return J(U,String(m),B,w)}B=!1,k=z(k,w,10,U.s),(P=k.indexOf("."))>-1?k=k.replace(".",""):P=k.length}for(D=0;k.charCodeAt(D)===48;D++);for(O=k.length;k.charCodeAt(--O)===48;);if(k=k.slice(D,++O)){if(O-=D,B&&_.DEBUG&&O>15&&(m>g||m!==i(m)))throw Error(s+U.s*m);if((P=P-D-1)>v)U.c=U.e=null;else if(P<u)U.c=[U.e=0];else{if(U.e=P,U.c=[],D=(P+1)%h,P<0&&(D+=h),D<O){for(D&&U.c.push(+k.slice(0,D)),O-=h;D<O;)U.c.push(+k.slice(D,D+=h));D=h-(k=k.slice(D)).length}else D-=O;for(;D--;k+="0");U.c.push(+k)}}else U.c=[U.e=0]}_.clone=A,_.ROUND_UP=0,_.ROUND_DOWN=1,_.ROUND_CEIL=2,_.ROUND_FLOOR=3,_.ROUND_HALF_UP=4,_.ROUND_HALF_DOWN=5,_.ROUND_HALF_EVEN=6,_.ROUND_HALF_CEIL=7,_.ROUND_HALF_FLOOR=8,_.EUCLID=9,_.config=_.set=function(m){var w,S;if(m!=null)if(typeof m=="object"){if(m.hasOwnProperty(w="DECIMAL_PLACES")&&(S=m[w],$(S,0,I,w),l=S),m.hasOwnProperty(w="ROUNDING_MODE")&&(S=m[w],$(S,0,8,w),b=S),m.hasOwnProperty(w="EXPONENTIAL_AT")&&(S=m[w],S&&S.pop?($(S[0],-I,0,w),$(S[1],0,I,w),d=S[0],a=S[1]):($(S,-I,I,w),d=-(a=S<0?-S:S))),m.hasOwnProperty(w="RANGE"))if(S=m[w],S&&S.pop)$(S[0],-I,-1,w),$(S[1],1,I,w),u=S[0],v=S[1];else if($(S,-I,I,w),S)u=-(v=S<0?-S:S);else throw Error(o+w+" cannot be zero: "+S);if(m.hasOwnProperty(w="CRYPTO"))if(S=m[w],S===!!S)if(S)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))F=S;else throw F=!S,Error(o+"crypto unavailable");else F=S;else throw Error(o+w+" not true or false: "+S);if(m.hasOwnProperty(w="MODULO_MODE")&&(S=m[w],$(S,0,9,w),p=S),m.hasOwnProperty(w="POW_PRECISION")&&(S=m[w],$(S,0,I,w),c=S),m.hasOwnProperty(w="FORMAT"))if(S=m[w],typeof S=="object")E=S;else throw Error(o+w+" not an object: "+S);if(m.hasOwnProperty(w="ALPHABET"))if(S=m[w],typeof S=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(S))y=S.slice(0,10)=="0123456789",M=S;else throw Error(o+w+" invalid: "+S)}else throw Error(o+"Object expected: "+m);return{DECIMAL_PLACES:l,ROUNDING_MODE:b,EXPONENTIAL_AT:[d,a],RANGE:[u,v],CRYPTO:F,MODULO_MODE:p,POW_PRECISION:c,FORMAT:E,ALPHABET:M}},_.isBigNumber=function(m){if(!m||m._isBigNumber!==!0)return!1;if(!_.DEBUG)return!0;var w,S,N=m.c,R=m.e,P=m.s;e:if({}.toString.call(N)=="[object Array]"){if((P===1||P===-1)&&R>=-I&&R<=I&&R===i(R)){if(N[0]===0){if(R===0&&N.length===1)return!0;break e}if(w=(R+1)%h,w<1&&(w+=h),String(N[0]).length==w){for(w=0;w<N.length;w++)if(S=N[w],S<0||S>=f||S!==i(S))break e;if(S!==0)return!0}}}else if(N===null&&R===null&&(P===null||P===1||P===-1))return!0;throw Error(o+"Invalid BigNumber: "+m)},_.maximum=_.max=function(){return ie(arguments,H.lt)},_.minimum=_.min=function(){return ie(arguments,H.gt)},_.random=function(){var m=9007199254740992,w=Math.random()*m&2097151?function(){return i(Math.random()*m)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(S){var N,R,P,D,B,O=0,k=[],U=new _(L);if(S==null?S=l:$(S,0,I),D=n(S/h),F)if(crypto.getRandomValues){for(N=crypto.getRandomValues(new Uint32Array(D*=2));O<D;)B=N[O]*131072+(N[O+1]>>>11),B>=9e15?(R=crypto.getRandomValues(new Uint32Array(2)),N[O]=R[0],N[O+1]=R[1]):(k.push(B%1e14),O+=2);O=D/2}else if(crypto.randomBytes){for(N=crypto.randomBytes(D*=7);O<D;)B=(N[O]&31)*281474976710656+N[O+1]*1099511627776+N[O+2]*4294967296+N[O+3]*16777216+(N[O+4]<<16)+(N[O+5]<<8)+N[O+6],B>=9e15?crypto.randomBytes(7).copy(N,O):(k.push(B%1e14),O+=7);O=D/7}else throw F=!1,Error(o+"crypto unavailable");if(!F)for(;O<D;)B=w(),B<9e15&&(k[O++]=B%1e14);for(D=k[--O],S%=h,D&&S&&(B=x[h-S],k[O]=i(D/B)*B);k[O]===0;k.pop(),O--);if(O<0)k=[P=0];else{for(P=-1;k[0]===0;k.splice(0,1),P-=h);for(O=1,B=k[0];B>=10;B/=10,O++);O<h&&(P-=h-O)}return U.e=P,U.c=k,U}}(),_.sum=function(){for(var m=1,w=arguments,S=new _(w[0]);m<w.length;)S=S.plus(w[m++]);return S},z=function(){var m="0123456789";function w(S,N,R,P){for(var D,B=[0],O,k=0,U=S.length;k<U;){for(O=B.length;O--;B[O]*=N);for(B[0]+=P.indexOf(S.charAt(k++)),D=0;D<B.length;D++)B[D]>R-1&&(B[D+1]==null&&(B[D+1]=0),B[D+1]+=B[D]/R|0,B[D]%=R)}return B.reverse()}return function(S,N,R,P,D){var B,O,k,U,W,Y,Q,te,fe=S.indexOf("."),ge=l,ae=b;for(fe>=0&&(U=c,c=0,S=S.replace(".",""),te=new _(N),Y=te.pow(S.length-fe),c=U,te.c=w(se(j(Y.c),Y.e,"0"),10,R,m),te.e=te.c.length),Q=w(S,N,R,D?(B=M,m):(B=m,M)),k=U=Q.length;Q[--U]==0;Q.pop());if(!Q[0])return B.charAt(0);if(fe<0?--k:(Y.c=Q,Y.e=k,Y.s=P,Y=q(Y,te,ge,ae,R),Q=Y.c,W=Y.r,k=Y.e),O=k+ge+1,fe=Q[O],U=R/2,W=W||O<0||Q[O+1]!=null,W=ae<4?(fe!=null||W)&&(ae==0||ae==(Y.s<0?3:2)):fe>U||fe==U&&(ae==4||W||ae==6&&Q[O-1]&1||ae==(Y.s<0?8:7)),O<1||!Q[0])S=W?se(B.charAt(1),-ge,B.charAt(0)):B.charAt(0);else{if(Q.length=O,W)for(--R;++Q[--O]>R;)Q[O]=0,O||(++k,Q=[1].concat(Q));for(U=Q.length;!Q[--U];);for(fe=0,S="";fe<=U;S+=B.charAt(Q[fe++]));S=se(S,k,B.charAt(0))}return S}}(),q=function(){function m(N,R,P){var D,B,O,k,U=0,W=N.length,Y=R%T,Q=R/T|0;for(N=N.slice();W--;)O=N[W]%T,k=N[W]/T|0,D=Q*O+k*Y,B=Y*O+D%T*T+U,U=(B/P|0)+(D/T|0)+Q*k,N[W]=B%P;return U&&(N=[U].concat(N)),N}function w(N,R,P,D){var B,O;if(P!=D)O=P>D?1:-1;else for(B=O=0;B<P;B++)if(N[B]!=R[B]){O=N[B]>R[B]?1:-1;break}return O}function S(N,R,P,D){for(var B=0;P--;)N[P]-=B,B=N[P]<R[P]?1:0,N[P]=B*D+N[P]-R[P];for(;!N[0]&&N.length>1;N.splice(0,1));}return function(N,R,P,D,B){var O,k,U,W,Y,Q,te,fe,ge,ae,ue,Se,ye,be,Je,pe,me,Fe=N.s==R.s?1:-1,de=N.c,le=R.c;if(!de||!de[0]||!le||!le[0])return new _(!N.s||!R.s||(de?le&&de[0]==le[0]:!le)?NaN:de&&de[0]==0||!le?Fe*0:Fe/0);for(fe=new _(Fe),ge=fe.c=[],k=N.e-R.e,Fe=P+k+1,B||(B=f,k=C(N.e/h)-C(R.e/h),Fe=Fe/h|0),U=0;le[U]==(de[U]||0);U++);if(le[U]>(de[U]||0)&&k--,Fe<0)ge.push(1),W=!0;else{for(be=de.length,pe=le.length,U=0,Fe+=2,Y=i(B/(le[0]+1)),Y>1&&(le=m(le,Y,B),de=m(de,Y,B),pe=le.length,be=de.length),ye=pe,ae=de.slice(0,pe),ue=ae.length;ue<pe;ae[ue++]=0);me=le.slice(),me=[0].concat(me),Je=le[0],le[1]>=B/2&&Je++;do{if(Y=0,O=w(le,ae,pe,ue),O<0){if(Se=ae[0],pe!=ue&&(Se=Se*B+(ae[1]||0)),Y=i(Se/Je),Y>1)for(Y>=B&&(Y=B-1),Q=m(le,Y,B),te=Q.length,ue=ae.length;w(Q,ae,te,ue)==1;)Y--,S(Q,pe<te?me:le,te,B),te=Q.length,O=1;else Y==0&&(O=Y=1),Q=le.slice(),te=Q.length;if(te<ue&&(Q=[0].concat(Q)),S(ae,Q,ue,B),ue=ae.length,O==-1)for(;w(le,ae,pe,ue)<1;)Y++,S(ae,pe<ue?me:le,ue,B),ue=ae.length}else O===0&&(Y++,ae=[0]);ge[U++]=Y,ae[0]?ae[ue++]=de[ye]||0:(ae=[de[ye]],ue=1)}while((ye++<be||ae[0]!=null)&&Fe--);W=ae[0]!=null,ge[0]||ge.splice(0,1)}if(B==f){for(U=1,Fe=ge[0];Fe>=10;Fe/=10,U++);he(fe,P+(fe.e=U+k*h-1)+1,D,W)}else fe.e=k,fe.r=+W;return fe}}();function ne(m,w,S,N){var R,P,D,B,O;if(S==null?S=b:$(S,0,8),!m.c)return m.toString();if(R=m.c[0],D=m.e,w==null)O=j(m.c),O=N==1||N==2&&(D<=d||D>=a)?ee(O,D):se(O,D,"0");else if(m=he(new _(m),w,S),P=m.e,O=j(m.c),B=O.length,N==1||N==2&&(w<=P||P<=d)){for(;B<w;O+="0",B++);O=ee(O,P)}else if(w-=D,O=se(O,P,"0"),P+1>B){if(--w>0)for(O+=".";w--;O+="0");}else if(w+=P-B,w>0)for(P+1==B&&(O+=".");w--;O+="0");return m.s<0&&R?"-"+O:O}function ie(m,w){for(var S,N=1,R=new _(m[0]);N<m.length;N++)if(S=new _(m[N]),S.s)w.call(R,S)&&(R=S);else{R=S;break}return R}function ce(m,w,S){for(var N=1,R=w.length;!w[--R];w.pop());for(R=w[0];R>=10;R/=10,N++);return(S=N+S*h-1)>v?m.c=m.e=null:S<u?m.c=[m.e=0]:(m.e=S,m.c=w),m}J=function(){var m=/^(-?)0([xbo])(?=\w[\w.]*$)/i,w=/^([^.]+)\.$/,S=/^\.([^.]+)$/,N=/^-?(Infinity|NaN)$/,R=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(P,D,B,O){var k,U=B?D:D.replace(R,"");if(N.test(U))P.s=isNaN(U)?null:U<0?-1:1;else{if(!B&&(U=U.replace(m,function(W,Y,Q){return k=(Q=Q.toLowerCase())=="x"?16:Q=="b"?2:8,!O||O==k?Y:W}),O&&(k=O,U=U.replace(w,"$1").replace(S,"0.$1")),D!=U))return new _(U,k);if(_.DEBUG)throw Error(o+"Not a"+(O?" base "+O:"")+" number: "+D);P.s=null}P.c=P.e=null}}();function he(m,w,S,N){var R,P,D,B,O,k,U,W=m.c,Y=x;if(W){e:{for(R=1,B=W[0];B>=10;B/=10,R++);if(P=w-R,P<0)P+=h,D=w,O=W[k=0],U=O/Y[R-D-1]%10|0;else if(k=n((P+1)/h),k>=W.length)if(N){for(;W.length<=k;W.push(0));O=U=0,R=1,P%=h,D=P-h+1}else break e;else{for(O=B=W[k],R=1;B>=10;B/=10,R++);P%=h,D=P-h+R,U=D<0?0:O/Y[R-D-1]%10|0}if(N=N||w<0||W[k+1]!=null||(D<0?O:O%Y[R-D-1]),N=S<4?(U||N)&&(S==0||S==(m.s<0?3:2)):U>5||U==5&&(S==4||N||S==6&&(P>0?D>0?O/Y[R-D]:0:W[k-1])%10&1||S==(m.s<0?8:7)),w<1||!W[0])return W.length=0,N?(w-=m.e+1,W[0]=Y[(h-w%h)%h],m.e=-w||0):W[0]=m.e=0,m;if(P==0?(W.length=k,B=1,k--):(W.length=k+1,B=Y[h-P],W[k]=D>0?i(O/Y[R-D]%Y[D])*B:0),N)for(;;)if(k==0){for(P=1,D=W[0];D>=10;D/=10,P++);for(D=W[0]+=B,B=1;D>=10;D/=10,B++);P!=B&&(m.e++,W[0]==f&&(W[0]=1));break}else{if(W[k]+=B,W[k]!=f)break;W[k--]=0,B=1}for(P=W.length;W[--P]===0;W.pop());}m.e>v?m.c=m.e=null:m.e<u&&(m.c=[m.e=0])}return m}function re(m){var w,S=m.e;return S===null?m.toString():(w=j(m.c),w=S<=d||S>=a?ee(w,S):se(w,S,"0"),m.s<0?"-"+w:w)}return H.absoluteValue=H.abs=function(){var m=new _(this);return m.s<0&&(m.s=1),m},H.comparedTo=function(m,w){return G(this,new _(m,w))},H.decimalPlaces=H.dp=function(m,w){var S,N,R,P=this;if(m!=null)return $(m,0,I),w==null?w=b:$(w,0,8),he(new _(P),m+P.e+1,w);if(!(S=P.c))return null;if(N=((R=S.length-1)-C(this.e/h))*h,R=S[R])for(;R%10==0;R/=10,N--);return N<0&&(N=0),N},H.dividedBy=H.div=function(m,w){return q(this,new _(m,w),l,b)},H.dividedToIntegerBy=H.idiv=function(m,w){return q(this,new _(m,w),0,1)},H.exponentiatedBy=H.pow=function(m,w){var S,N,R,P,D,B,O,k,U,W=this;if(m=new _(m),m.c&&!m.isInteger())throw Error(o+"Exponent not an integer: "+re(m));if(w!=null&&(w=new _(w)),B=m.e>14,!W.c||!W.c[0]||W.c[0]==1&&!W.e&&W.c.length==1||!m.c||!m.c[0])return U=new _(Math.pow(+re(W),B?2-Z(m):+re(m))),w?U.mod(w):U;if(O=m.s<0,w){if(w.c?!w.c[0]:!w.s)return new _(NaN);N=!O&&W.isInteger()&&w.isInteger(),N&&(W=W.mod(w))}else{if(m.e>9&&(W.e>0||W.e<-1||(W.e==0?W.c[0]>1||B&&W.c[1]>=24e7:W.c[0]<8e13||B&&W.c[0]<=9999975e7)))return P=W.s<0&&Z(m)?-0:0,W.e>-1&&(P=1/P),new _(O?1/P:P);c&&(P=n(c/h+2))}for(B?(S=new _(.5),O&&(m.s=1),k=Z(m)):(R=Math.abs(+re(m)),k=R%2),U=new _(L);;){if(k){if(U=U.times(W),!U.c)break;P?U.c.length>P&&(U.c.length=P):N&&(U=U.mod(w))}if(R){if(R=i(R/2),R===0)break;k=R%2}else if(m=m.times(S),he(m,m.e+1,1),m.e>14)k=Z(m);else{if(R=+re(m),R===0)break;k=R%2}W=W.times(W),P?W.c&&W.c.length>P&&(W.c.length=P):N&&(W=W.mod(w))}return N?U:(O&&(U=L.div(U)),w?U.mod(w):P?he(U,c,b,D):U)},H.integerValue=function(m){var w=new _(this);return m==null?m=b:$(m,0,8),he(w,w.e+1,m)},H.isEqualTo=H.eq=function(m,w){return G(this,new _(m,w))===0},H.isFinite=function(){return!!this.c},H.isGreaterThan=H.gt=function(m,w){return G(this,new _(m,w))>0},H.isGreaterThanOrEqualTo=H.gte=function(m,w){return(w=G(this,new _(m,w)))===1||w===0},H.isInteger=function(){return!!this.c&&C(this.e/h)>this.c.length-2},H.isLessThan=H.lt=function(m,w){return G(this,new _(m,w))<0},H.isLessThanOrEqualTo=H.lte=function(m,w){return(w=G(this,new _(m,w)))===-1||w===0},H.isNaN=function(){return!this.s},H.isNegative=function(){return this.s<0},H.isPositive=function(){return this.s>0},H.isZero=function(){return!!this.c&&this.c[0]==0},H.minus=function(m,w){var S,N,R,P,D=this,B=D.s;if(m=new _(m,w),w=m.s,!B||!w)return new _(NaN);if(B!=w)return m.s=-w,D.plus(m);var O=D.e/h,k=m.e/h,U=D.c,W=m.c;if(!O||!k){if(!U||!W)return U?(m.s=-w,m):new _(W?D:NaN);if(!U[0]||!W[0])return W[0]?(m.s=-w,m):new _(U[0]?D:b==3?-0:0)}if(O=C(O),k=C(k),U=U.slice(),B=O-k){for((P=B<0)?(B=-B,R=U):(k=O,R=W),R.reverse(),w=B;w--;R.push(0));R.reverse()}else for(N=(P=(B=U.length)<(w=W.length))?B:w,B=w=0;w<N;w++)if(U[w]!=W[w]){P=U[w]<W[w];break}if(P&&(R=U,U=W,W=R,m.s=-m.s),w=(N=W.length)-(S=U.length),w>0)for(;w--;U[S++]=0);for(w=f-1;N>B;){if(U[--N]<W[N]){for(S=N;S&&!U[--S];U[S]=w);--U[S],U[N]+=f}U[N]-=W[N]}for(;U[0]==0;U.splice(0,1),--k);return U[0]?ce(m,U,k):(m.s=b==3?-1:1,m.c=[m.e=0],m)},H.modulo=H.mod=function(m,w){var S,N,R=this;return m=new _(m,w),!R.c||!m.s||m.c&&!m.c[0]?new _(NaN):!m.c||R.c&&!R.c[0]?new _(R):(p==9?(N=m.s,m.s=1,S=q(R,m,0,3),m.s=N,S.s*=N):S=q(R,m,0,p),m=R.minus(S.times(m)),!m.c[0]&&p==1&&(m.s=R.s),m)},H.multipliedBy=H.times=function(m,w){var S,N,R,P,D,B,O,k,U,W,Y,Q,te,fe,ge,ae=this,ue=ae.c,Se=(m=new _(m,w)).c;if(!ue||!Se||!ue[0]||!Se[0])return!ae.s||!m.s||ue&&!ue[0]&&!Se||Se&&!Se[0]&&!ue?m.c=m.e=m.s=null:(m.s*=ae.s,!ue||!Se?m.c=m.e=null:(m.c=[0],m.e=0)),m;for(N=C(ae.e/h)+C(m.e/h),m.s*=ae.s,O=ue.length,W=Se.length,O<W&&(te=ue,ue=Se,Se=te,R=O,O=W,W=R),R=O+W,te=[];R--;te.push(0));for(fe=f,ge=T,R=W;--R>=0;){for(S=0,Y=Se[R]%ge,Q=Se[R]/ge|0,D=O,P=R+D;P>R;)k=ue[--D]%ge,U=ue[D]/ge|0,B=Q*k+U*Y,k=Y*k+B%ge*ge+te[P]+S,S=(k/fe|0)+(B/ge|0)+Q*U,te[P--]=k%fe;te[P]=S}return S?++N:te.splice(0,1),ce(m,te,N)},H.negated=function(){var m=new _(this);return m.s=-m.s||null,m},H.plus=function(m,w){var S,N=this,R=N.s;if(m=new _(m,w),w=m.s,!R||!w)return new _(NaN);if(R!=w)return m.s=-w,N.minus(m);var P=N.e/h,D=m.e/h,B=N.c,O=m.c;if(!P||!D){if(!B||!O)return new _(R/0);if(!B[0]||!O[0])return O[0]?m:new _(B[0]?N:R*0)}if(P=C(P),D=C(D),B=B.slice(),R=P-D){for(R>0?(D=P,S=O):(R=-R,S=B),S.reverse();R--;S.push(0));S.reverse()}for(R=B.length,w=O.length,R-w<0&&(S=O,O=B,B=S,w=R),R=0;w;)R=(B[--w]=B[w]+O[w]+R)/f|0,B[w]=f===B[w]?0:B[w]%f;return R&&(B=[R].concat(B),++D),ce(m,B,D)},H.precision=H.sd=function(m,w){var S,N,R,P=this;if(m!=null&&m!==!!m)return $(m,1,I),w==null?w=b:$(w,0,8),he(new _(P),m,w);if(!(S=P.c))return null;if(R=S.length-1,N=R*h+1,R=S[R]){for(;R%10==0;R/=10,N--);for(R=S[0];R>=10;R/=10,N++);}return m&&P.e+1>N&&(N=P.e+1),N},H.shiftedBy=function(m){return $(m,-g,g),this.times("1e"+m)},H.squareRoot=H.sqrt=function(){var m,w,S,N,R,P=this,D=P.c,B=P.s,O=P.e,k=l+4,U=new _("0.5");if(B!==1||!D||!D[0])return new _(!B||B<0&&(!D||D[0])?NaN:D?P:1/0);if(B=Math.sqrt(+re(P)),B==0||B==1/0?(w=j(D),(w.length+O)%2==0&&(w+="0"),B=Math.sqrt(+w),O=C((O+1)/2)-(O<0||O%2),B==1/0?w="5e"+O:(w=B.toExponential(),w=w.slice(0,w.indexOf("e")+1)+O),S=new _(w)):S=new _(B+""),S.c[0]){for(O=S.e,B=O+k,B<3&&(B=0);;)if(R=S,S=U.times(R.plus(q(P,R,k,1))),j(R.c).slice(0,B)===(w=j(S.c)).slice(0,B))if(S.e<O&&--B,w=w.slice(B-3,B+1),w=="9999"||!N&&w=="4999"){if(!N&&(he(R,R.e+l+2,0),R.times(R).eq(P))){S=R;break}k+=4,B+=4,N=1}else{(!+w||!+w.slice(1)&&w.charAt(0)=="5")&&(he(S,S.e+l+2,1),m=!S.times(S).eq(P));break}}return he(S,S.e+l+1,b,m)},H.toExponential=function(m,w){return m!=null&&($(m,0,I),m++),ne(this,m,w,1)},H.toFixed=function(m,w){return m!=null&&($(m,0,I),m=m+this.e+1),ne(this,m,w)},H.toFormat=function(m,w,S){var N,R=this;if(S==null)m!=null&&w&&typeof w=="object"?(S=w,w=null):m&&typeof m=="object"?(S=m,m=w=null):S=E;else if(typeof S!="object")throw Error(o+"Argument not an object: "+S);if(N=R.toFixed(m,w),R.c){var P,D=N.split("."),B=+S.groupSize,O=+S.secondaryGroupSize,k=S.groupSeparator||"",U=D[0],W=D[1],Y=R.s<0,Q=Y?U.slice(1):U,te=Q.length;if(O&&(P=B,B=O,O=P,te-=P),B>0&&te>0){for(P=te%B||B,U=Q.substr(0,P);P<te;P+=B)U+=k+Q.substr(P,B);O>0&&(U+=k+Q.slice(P)),Y&&(U="-"+U)}N=W?U+(S.decimalSeparator||"")+((O=+S.fractionGroupSize)?W.replace(new RegExp("\\d{"+O+"}\\B","g"),"$&"+(S.fractionGroupSeparator||"")):W):U}return(S.prefix||"")+N+(S.suffix||"")},H.toFraction=function(m){var w,S,N,R,P,D,B,O,k,U,W,Y,Q=this,te=Q.c;if(m!=null&&(B=new _(m),!B.isInteger()&&(B.c||B.s!==1)||B.lt(L)))throw Error(o+"Argument "+(B.isInteger()?"out of range: ":"not an integer: ")+re(B));if(!te)return new _(Q);for(w=new _(L),k=S=new _(L),N=O=new _(L),Y=j(te),P=w.e=Y.length-Q.e-1,w.c[0]=x[(D=P%h)<0?h+D:D],m=!m||B.comparedTo(w)>0?P>0?w:k:B,D=v,v=1/0,B=new _(Y),O.c[0]=0;U=q(B,w,0,1),R=S.plus(U.times(N)),R.comparedTo(m)!=1;)S=N,N=R,k=O.plus(U.times(R=k)),O=R,w=B.minus(U.times(R=w)),B=R;return R=q(m.minus(S),N,0,1),O=O.plus(R.times(k)),S=S.plus(R.times(N)),O.s=k.s=Q.s,P=P*2,W=q(k,N,P,b).minus(Q).abs().comparedTo(q(O,S,P,b).minus(Q).abs())<1?[k,N]:[O,S],v=D,W},H.toNumber=function(){return+re(this)},H.toPrecision=function(m,w){return m!=null&&$(m,1,I),ne(this,m,w,2)},H.toString=function(m){var w,S=this,N=S.s,R=S.e;return R===null?N?(w="Infinity",N<0&&(w="-"+w)):w="NaN":(m==null?w=R<=d||R>=a?ee(j(S.c),R):se(j(S.c),R,"0"):m===10&&y?(S=he(new _(S),l+R+1,b),w=se(j(S.c),S.e,"0")):($(m,2,M.length,"Base"),w=z(se(j(S.c),R,"0"),10,m,N,!0)),N<0&&S.c[0]&&(w="-"+w)),w},H.valueOf=H.toJSON=function(){return re(this)},H._isBigNumber=!0,V!=null&&_.set(V),_}function C(V){var q=V|0;return V>0||V===q?q:q-1}function j(V){for(var q,z,J=1,H=V.length,L=V[0]+"";J<H;){for(q=V[J++]+"",z=h-q.length;z--;q="0"+q);L+=q}for(H=L.length;L.charCodeAt(--H)===48;);return L.slice(0,H+1||1)}function G(V,q){var z,J,H=V.c,L=q.c,l=V.s,b=q.s,d=V.e,a=q.e;if(!l||!b)return null;if(z=H&&!H[0],J=L&&!L[0],z||J)return z?J?0:-b:l;if(l!=b)return l;if(z=l<0,J=d==a,!H||!L)return J?0:!H^z?1:-1;if(!J)return d>a^z?1:-1;for(b=(d=H.length)<(a=L.length)?d:a,l=0;l<b;l++)if(H[l]!=L[l])return H[l]>L[l]^z?1:-1;return d==a?0:d>a^z?1:-1}function $(V,q,z,J){if(V<q||V>z||V!==i(V))throw Error(o+(J||"Argument")+(typeof V=="number"?V<q||V>z?" out of range: ":" not an integer: ":" not a primitive number: ")+String(V))}function Z(V){var q=V.c.length-1;return C(V.e/h)==q&&V.c[q]%2!=0}function ee(V,q){return(V.length>1?V.charAt(0)+"."+V.slice(1):V)+(q<0?"e":"e+")+q}function se(V,q,z){var J,H;if(q<0){for(H=z+".";++q;H+=z);V=H+V}else if(J=V.length,++q>J){for(H=z,q-=J;--q;H+=z);V+=H}else q<J&&(V=V.slice(0,q)+"."+V.slice(q));return V}e=A(),e.default=e.BigNumber=e,typeof define=="function"&&define.amd?define(function(){return e}):typeof oc<"u"&&oc.exports?oc.exports=e:(r||(r=typeof self<"u"&&self?self:window),r.BigNumber=e)})(C1)});var B1=X(eh=>{"use strict";Object.defineProperty(eh,"__esModule",{value:!0});var j4=Ql(),Zl=class{constructor(){this.BigNum=(e,t)=>{let n=j4.BigNumber.clone({DECIMAL_PLACES:t});return new n(e)}}winstonToAr(e,{formatted:t=!1,decimals:n=12,trim:i=!0}={}){let o=this.stringToBigNum(e,n).shiftedBy(-12);return t?o.toFormat(n):o.toFixed(n)}arToWinston(e,{formatted:t=!1}={}){let n=this.stringToBigNum(e).shiftedBy(12);return t?n.toFormat():n.toFixed(0)}compare(e,t){let n=this.stringToBigNum(e),i=this.stringToBigNum(t);return n.comparedTo(i)}isEqual(e,t){return this.compare(e,t)===0}isLessThan(e,t){let n=this.stringToBigNum(e),i=this.stringToBigNum(t);return n.isLessThan(i)}isGreaterThan(e,t){let n=this.stringToBigNum(e),i=this.stringToBigNum(t);return n.isGreaterThan(i)}add(e,t){let n=this.stringToBigNum(e),i=this.stringToBigNum(t);return n.plus(t).toFixed(0)}sub(e,t){let n=this.stringToBigNum(e),i=this.stringToBigNum(t);return n.minus(t).toFixed(0)}stringToBigNum(e,t=12){return this.BigNum(e,t)}};eh.default=Zl});var th=X((tM,O1)=>{"use strict";O1.exports=function(e,t){return function(){for(var i=new Array(arguments.length),o=0;o<i.length;o++)i[o]=arguments[o];return e.apply(t,i)}}});var bt=X((rM,N1)=>{"use strict";var W4=th(),nh=Object.prototype.toString,ih=function(r){return function(e){var t=nh.call(e);return r[t]||(r[t]=t.slice(8,-1).toLowerCase())}}(Object.create(null));function ji(r){return r=r.toLowerCase(),function(t){return ih(t)===r}}function oh(r){return Array.isArray(r)}function ac(r){return typeof r>"u"}function $4(r){return r!==null&&!ac(r)&&r.constructor!==null&&!ac(r.constructor)&&typeof r.constructor.isBuffer=="function"&&r.constructor.isBuffer(r)}var R1=ji("ArrayBuffer");function H4(r){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(r):e=r&&r.buffer&&R1(r.buffer),e}function K4(r){return typeof r=="string"}function z4(r){return typeof r=="number"}function P1(r){return r!==null&&typeof r=="object"}function sc(r){if(ih(r)!=="object")return!1;var e=Object.getPrototypeOf(r);return e===null||e===Object.prototype}var G4=ji("Date"),V4=ji("File"),X4=ji("Blob"),J4=ji("FileList");function sh(r){return nh.call(r)==="[object Function]"}function Y4(r){return P1(r)&&sh(r.pipe)}function Q4(r){var e="[object FormData]";return r&&(typeof FormData=="function"&&r instanceof FormData||nh.call(r)===e||sh(r.toString)&&r.toString()===e)}var Z4=ji("URLSearchParams");function e_(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function t_(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function ah(r,e){if(!(r===null||typeof r>"u"))if(typeof r!="object"&&(r=[r]),oh(r))for(var t=0,n=r.length;t<n;t++)e.call(null,r[t],t,r);else for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.call(null,r[i],i,r)}function rh(){var r={};function e(i,o){sc(r[o])&&sc(i)?r[o]=rh(r[o],i):sc(i)?r[o]=rh({},i):oh(i)?r[o]=i.slice():r[o]=i}for(var t=0,n=arguments.length;t<n;t++)ah(arguments[t],e);return r}function r_(r,e,t){return ah(e,function(i,o){t&&typeof i=="function"?r[o]=W4(i,t):r[o]=i}),r}function n_(r){return r.charCodeAt(0)===65279&&(r=r.slice(1)),r}function i_(r,e,t,n){r.prototype=Object.create(e.prototype,n),r.prototype.constructor=r,t&&Object.assign(r.prototype,t)}function o_(r,e,t){var n,i,o,s={};e=e||{};do{for(n=Object.getOwnPropertyNames(r),i=n.length;i-- >0;)o=n[i],s[o]||(e[o]=r[o],s[o]=!0);r=Object.getPrototypeOf(r)}while(r&&(!t||t(r,e))&&r!==Object.prototype);return e}function s_(r,e,t){r=String(r),(t===void 0||t>r.length)&&(t=r.length),t-=e.length;var n=r.indexOf(e,t);return n!==-1&&n===t}function a_(r){if(!r)return null;var e=r.length;if(ac(e))return null;for(var t=new Array(e);e-- >0;)t[e]=r[e];return t}var f_=function(r){return function(e){return r&&e instanceof r}}(typeof Uint8Array<"u"&&Object.getPrototypeOf(Uint8Array));N1.exports={isArray:oh,isArrayBuffer:R1,isBuffer:$4,isFormData:Q4,isArrayBufferView:H4,isString:K4,isNumber:z4,isObject:P1,isPlainObject:sc,isUndefined:ac,isDate:G4,isFile:V4,isBlob:X4,isFunction:sh,isStream:Y4,isURLSearchParams:Z4,isStandardBrowserEnv:t_,forEach:ah,merge:rh,extend:r_,trim:e_,stripBOM:n_,inherits:i_,toFlatObject:o_,kindOf:ih,kindOfTest:ji,endsWith:s_,toArray:a_,isTypedArray:f_,isFileList:J4}});var fh=X((nM,L1)=>{"use strict";var Do=bt();function k1(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}L1.exports=function(e,t,n){if(!t)return e;var i;if(n)i=n(t);else if(Do.isURLSearchParams(t))i=t.toString();else{var o=[];Do.forEach(t,function(h,g){h===null||typeof h>"u"||(Do.isArray(h)?g=g+"[]":h=[h],Do.forEach(h,function(T){Do.isDate(T)?T=T.toISOString():Do.isObject(T)&&(T=JSON.stringify(T)),o.push(k1(g)+"="+k1(T))}))}),i=o.join("&")}if(i){var s=e.indexOf("#");s!==-1&&(e=e.slice(0,s)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}});var U1=X((iM,D1)=>{"use strict";var c_=bt();function fc(){this.handlers=[]}fc.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};fc.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};fc.prototype.forEach=function(e){c_.forEach(this.handlers,function(n){n!==null&&e(n)})};D1.exports=fc});var j1=X((oM,q1)=>{"use strict";var u_=bt();q1.exports=function(e,t){u_.forEach(e,function(i,o){o!==t&&o.toUpperCase()===t.toUpperCase()&&(e[t]=i,delete e[o])})}});var Wi=X((sM,K1)=>{"use strict";var W1=bt();function Uo(r,e,t,n,i){Error.call(this),this.message=r,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),n&&(this.request=n),i&&(this.response=i)}W1.inherits(Uo,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var $1=Uo.prototype,H1={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(r){H1[r]={value:r}});Object.defineProperties(Uo,H1);Object.defineProperty($1,"isAxiosError",{value:!0});Uo.from=function(r,e,t,n,i,o){var s=Object.create($1);return W1.toFlatObject(r,s,function(h){return h!==Error.prototype}),Uo.call(s,r.message,e,t,n,i),s.name=r.name,o&&Object.assign(s,o),s};K1.exports=Uo});var ch=X((aM,z1)=>{"use strict";z1.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}});var uh=X((fM,G1)=>{"use strict";var Er=bt();function l_(r,e){e=e||new FormData;var t=[];function n(o){return o===null?"":Er.isDate(o)?o.toISOString():Er.isArrayBuffer(o)||Er.isTypedArray(o)?typeof Blob=="function"?new Blob([o]):Buffer.from(o):o}function i(o,s){if(Er.isPlainObject(o)||Er.isArray(o)){if(t.indexOf(o)!==-1)throw Error("Circular reference detected in "+s);t.push(o),Er.forEach(o,function(h,g){if(!Er.isUndefined(h)){var x=s?s+"."+g:g,T;if(h&&!s&&typeof h=="object"){if(Er.endsWith(g,"{}"))h=JSON.stringify(h);else if(Er.endsWith(g,"[]")&&(T=Er.toArray(h))){T.forEach(function(I){!Er.isUndefined(I)&&e.append(x,n(I))});return}}i(h,x)}}),t.pop()}else e.append(s,n(o))}return i(r),e}G1.exports=l_});var X1=X((cM,V1)=>{"use strict";var lh=Wi();V1.exports=function(e,t,n){var i=n.config.validateStatus;!n.status||!i||i(n.status)?e(n):t(new lh("Request failed with status code "+n.status,[lh.ERR_BAD_REQUEST,lh.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}});var Y1=X((uM,J1)=>{"use strict";var cc=bt();J1.exports=cc.isStandardBrowserEnv()?function(){return{write:function(t,n,i,o,s,f){var h=[];h.push(t+"="+encodeURIComponent(n)),cc.isNumber(i)&&h.push("expires="+new Date(i).toGMTString()),cc.isString(o)&&h.push("path="+o),cc.isString(s)&&h.push("domain="+s),f===!0&&h.push("secure"),document.cookie=h.join("; ")},read:function(t){var n=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()});var Z1=X((lM,Q1)=>{"use strict";Q1.exports=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}});var tm=X((hM,em)=>{"use strict";em.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}});var hh=X((dM,rm)=>{"use strict";var h_=Z1(),d_=tm();rm.exports=function(e,t){return e&&!h_(t)?d_(e,t):t}});var im=X((pM,nm)=>{"use strict";var dh=bt(),p_=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];nm.exports=function(e){var t={},n,i,o;return e&&dh.forEach(e.split(`
`),function(f){if(o=f.indexOf(":"),n=dh.trim(f.substr(0,o)).toLowerCase(),i=dh.trim(f.substr(o+1)),n){if(t[n]&&p_.indexOf(n)>=0)return;n==="set-cookie"?t[n]=(t[n]?t[n]:[]).concat([i]):t[n]=t[n]?t[n]+", "+i:i}}),t}});var am=X((gM,sm)=>{"use strict";var om=bt();sm.exports=om.isStandardBrowserEnv()?function(){var e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a"),n;function i(o){var s=o;return e&&(t.setAttribute("href",s),s=t.href),t.setAttribute("href",s),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:t.pathname.charAt(0)==="/"?t.pathname:"/"+t.pathname}}return n=i(window.location.href),function(s){var f=om.isString(s)?i(s):s;return f.protocol===n.protocol&&f.host===n.host}}():function(){return function(){return!0}}()});var ua=X((mM,cm)=>{"use strict";var ph=Wi(),g_=bt();function fm(r){ph.call(this,r??"canceled",ph.ERR_CANCELED),this.name="CanceledError"}g_.inherits(fm,ph,{__CANCEL__:!0});cm.exports=fm});var lm=X((yM,um)=>{"use strict";um.exports=function(e){var t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}});var gh=X((bM,hm)=>{"use strict";var la=bt(),m_=X1(),y_=Y1(),b_=fh(),v_=hh(),w_=im(),x_=am(),__=ch(),ln=Wi(),S_=ua(),E_=lm();hm.exports=function(e){return new Promise(function(n,i){var o=e.data,s=e.headers,f=e.responseType,h;function g(){e.cancelToken&&e.cancelToken.unsubscribe(h),e.signal&&e.signal.removeEventListener("abort",h)}la.isFormData(o)&&la.isStandardBrowserEnv()&&delete s["Content-Type"];var x=new XMLHttpRequest;if(e.auth){var T=e.auth.username||"",I=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";s.Authorization="Basic "+btoa(T+":"+I)}var A=v_(e.baseURL,e.url);x.open(e.method.toUpperCase(),b_(A,e.params,e.paramsSerializer),!0),x.timeout=e.timeout;function C(){if(!!x){var $="getAllResponseHeaders"in x?w_(x.getAllResponseHeaders()):null,Z=!f||f==="text"||f==="json"?x.responseText:x.response,ee={data:Z,status:x.status,statusText:x.statusText,headers:$,config:e,request:x};m_(function(V){n(V),g()},function(V){i(V),g()},ee),x=null}}if("onloadend"in x?x.onloadend=C:x.onreadystatechange=function(){!x||x.readyState!==4||x.status===0&&!(x.responseURL&&x.responseURL.indexOf("file:")===0)||setTimeout(C)},x.onabort=function(){!x||(i(new ln("Request aborted",ln.ECONNABORTED,e,x)),x=null)},x.onerror=function(){i(new ln("Network Error",ln.ERR_NETWORK,e,x,x)),x=null},x.ontimeout=function(){var Z=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",ee=e.transitional||__;e.timeoutErrorMessage&&(Z=e.timeoutErrorMessage),i(new ln(Z,ee.clarifyTimeoutError?ln.ETIMEDOUT:ln.ECONNABORTED,e,x)),x=null},la.isStandardBrowserEnv()){var j=(e.withCredentials||x_(A))&&e.xsrfCookieName?y_.read(e.xsrfCookieName):void 0;j&&(s[e.xsrfHeaderName]=j)}"setRequestHeader"in x&&la.forEach(s,function(Z,ee){typeof o>"u"&&ee.toLowerCase()==="content-type"?delete s[ee]:x.setRequestHeader(ee,Z)}),la.isUndefined(e.withCredentials)||(x.withCredentials=!!e.withCredentials),f&&f!=="json"&&(x.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&x.addEventListener("progress",e.onDownloadProgress),typeof e.onUploadProgress=="function"&&x.upload&&x.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(h=function($){!x||(i(!$||$&&$.type?new S_:$),x.abort(),x=null)},e.cancelToken&&e.cancelToken.subscribe(h),e.signal&&(e.signal.aborted?h():e.signal.addEventListener("abort",h))),o||(o=null);var G=E_(A);if(G&&["http","https","file"].indexOf(G)===-1){i(new ln("Unsupported protocol "+G+":",ln.ERR_BAD_REQUEST,e));return}x.send(o)})}});var pm=X((vM,dm)=>{dm.exports=null});var lc=X((wM,bm)=>{"use strict";var vt=bt(),gm=j1(),mm=Wi(),A_=ch(),F_=uh(),T_={"Content-Type":"application/x-www-form-urlencoded"};function ym(r,e){!vt.isUndefined(r)&&vt.isUndefined(r["Content-Type"])&&(r["Content-Type"]=e)}function M_(){var r;return typeof XMLHttpRequest<"u"?r=gh():typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]"&&(r=gh()),r}function I_(r,e,t){if(vt.isString(r))try{return(e||JSON.parse)(r),vt.trim(r)}catch(n){if(n.name!=="SyntaxError")throw n}return(t||JSON.stringify)(r)}var uc={transitional:A_,adapter:M_(),transformRequest:[function(e,t){if(gm(t,"Accept"),gm(t,"Content-Type"),vt.isFormData(e)||vt.isArrayBuffer(e)||vt.isBuffer(e)||vt.isStream(e)||vt.isFile(e)||vt.isBlob(e))return e;if(vt.isArrayBufferView(e))return e.buffer;if(vt.isURLSearchParams(e))return ym(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();var n=vt.isObject(e),i=t&&t["Content-Type"],o;if((o=vt.isFileList(e))||n&&i==="multipart/form-data"){var s=this.env&&this.env.FormData;return F_(o?{"files[]":e}:e,s&&new s)}else if(n||i==="application/json")return ym(t,"application/json"),I_(e);return e}],transformResponse:[function(e){var t=this.transitional||uc.transitional,n=t&&t.silentJSONParsing,i=t&&t.forcedJSONParsing,o=!n&&this.responseType==="json";if(o||i&&vt.isString(e)&&e.length)try{return JSON.parse(e)}catch(s){if(o)throw s.name==="SyntaxError"?mm.from(s,mm.ERR_BAD_RESPONSE,this,null,this.response):s}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:pm()},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};vt.forEach(["delete","get","head"],function(e){uc.headers[e]={}});vt.forEach(["post","put","patch"],function(e){uc.headers[e]=vt.merge(T_)});bm.exports=uc});var wm=X((xM,vm)=>{"use strict";var C_=bt(),B_=lc();vm.exports=function(e,t,n){var i=this||B_;return C_.forEach(n,function(s){e=s.call(i,e,t)}),e}});var mh=X((_M,xm)=>{"use strict";xm.exports=function(e){return!!(e&&e.__CANCEL__)}});var Em=X((SM,Sm)=>{"use strict";var _m=bt(),yh=wm(),O_=mh(),R_=lc(),P_=ua();function bh(r){if(r.cancelToken&&r.cancelToken.throwIfRequested(),r.signal&&r.signal.aborted)throw new P_}Sm.exports=function(e){bh(e),e.headers=e.headers||{},e.data=yh.call(e,e.data,e.headers,e.transformRequest),e.headers=_m.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),_m.forEach(["delete","get","head","post","put","patch","common"],function(i){delete e.headers[i]});var t=e.adapter||R_.adapter;return t(e).then(function(i){return bh(e),i.data=yh.call(e,i.data,i.headers,e.transformResponse),i},function(i){return O_(i)||(bh(e),i&&i.response&&(i.response.data=yh.call(e,i.response.data,i.response.headers,e.transformResponse))),Promise.reject(i)})}});var vh=X((EM,Am)=>{"use strict";var Yt=bt();Am.exports=function(e,t){t=t||{};var n={};function i(x,T){return Yt.isPlainObject(x)&&Yt.isPlainObject(T)?Yt.merge(x,T):Yt.isPlainObject(T)?Yt.merge({},T):Yt.isArray(T)?T.slice():T}function o(x){if(Yt.isUndefined(t[x])){if(!Yt.isUndefined(e[x]))return i(void 0,e[x])}else return i(e[x],t[x])}function s(x){if(!Yt.isUndefined(t[x]))return i(void 0,t[x])}function f(x){if(Yt.isUndefined(t[x])){if(!Yt.isUndefined(e[x]))return i(void 0,e[x])}else return i(void 0,t[x])}function h(x){if(x in t)return i(e[x],t[x]);if(x in e)return i(void 0,e[x])}var g={url:s,method:s,data:s,baseURL:f,transformRequest:f,transformResponse:f,paramsSerializer:f,timeout:f,timeoutMessage:f,withCredentials:f,adapter:f,responseType:f,xsrfCookieName:f,xsrfHeaderName:f,onUploadProgress:f,onDownloadProgress:f,decompress:f,maxContentLength:f,maxBodyLength:f,beforeRedirect:f,transport:f,httpAgent:f,httpsAgent:f,cancelToken:f,socketPath:f,responseEncoding:f,validateStatus:h};return Yt.forEach(Object.keys(e).concat(Object.keys(t)),function(T){var I=g[T]||o,A=I(T);Yt.isUndefined(A)&&I!==h||(n[T]=A)}),n}});var wh=X((AM,Fm)=>{Fm.exports={version:"0.27.2"}});var Im=X((FM,Mm)=>{"use strict";var N_=wh().version,qn=Wi(),xh={};["object","boolean","number","function","string","symbol"].forEach(function(r,e){xh[r]=function(n){return typeof n===r||"a"+(e<1?"n ":" ")+r}});var Tm={};xh.transitional=function(e,t,n){function i(o,s){return"[Axios v"+N_+"] Transitional option '"+o+"'"+s+(n?". "+n:"")}return function(o,s,f){if(e===!1)throw new qn(i(s," has been removed"+(t?" in "+t:"")),qn.ERR_DEPRECATED);return t&&!Tm[s]&&(Tm[s]=!0,console.warn(i(s," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(o,s,f):!0}};function k_(r,e,t){if(typeof r!="object")throw new qn("options must be an object",qn.ERR_BAD_OPTION_VALUE);for(var n=Object.keys(r),i=n.length;i-- >0;){var o=n[i],s=e[o];if(s){var f=r[o],h=f===void 0||s(f,o,r);if(h!==!0)throw new qn("option "+o+" must be "+h,qn.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new qn("Unknown option "+o,qn.ERR_BAD_OPTION)}}Mm.exports={assertOptions:k_,validators:xh}});var Nm=X((TM,Pm)=>{"use strict";var Om=bt(),L_=fh(),Cm=U1(),Bm=Em(),hc=vh(),D_=hh(),Rm=Im(),qo=Rm.validators;function jo(r){this.defaults=r,this.interceptors={request:new Cm,response:new Cm}}jo.prototype.request=function(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=hc(this.defaults,t),t.method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var n=t.transitional;n!==void 0&&Rm.assertOptions(n,{silentJSONParsing:qo.transitional(qo.boolean),forcedJSONParsing:qo.transitional(qo.boolean),clarifyTimeoutError:qo.transitional(qo.boolean)},!1);var i=[],o=!0;this.interceptors.request.forEach(function(A){typeof A.runWhen=="function"&&A.runWhen(t)===!1||(o=o&&A.synchronous,i.unshift(A.fulfilled,A.rejected))});var s=[];this.interceptors.response.forEach(function(A){s.push(A.fulfilled,A.rejected)});var f;if(!o){var h=[Bm,void 0];for(Array.prototype.unshift.apply(h,i),h=h.concat(s),f=Promise.resolve(t);h.length;)f=f.then(h.shift(),h.shift());return f}for(var g=t;i.length;){var x=i.shift(),T=i.shift();try{g=x(g)}catch(I){T(I);break}}try{f=Bm(g)}catch(I){return Promise.reject(I)}for(;s.length;)f=f.then(s.shift(),s.shift());return f};jo.prototype.getUri=function(e){e=hc(this.defaults,e);var t=D_(e.baseURL,e.url);return L_(t,e.params,e.paramsSerializer)};Om.forEach(["delete","get","head","options"],function(e){jo.prototype[e]=function(t,n){return this.request(hc(n||{},{method:e,url:t,data:(n||{}).data}))}});Om.forEach(["post","put","patch"],function(e){function t(n){return function(o,s,f){return this.request(hc(f||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:o,data:s}))}}jo.prototype[e]=t(),jo.prototype[e+"Form"]=t(!0)});Pm.exports=jo});var Lm=X((MM,km)=>{"use strict";var U_=ua();function Wo(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(i){e=i});var t=this;this.promise.then(function(n){if(!!t._listeners){var i,o=t._listeners.length;for(i=0;i<o;i++)t._listeners[i](n);t._listeners=null}}),this.promise.then=function(n){var i,o=new Promise(function(s){t.subscribe(s),i=s}).then(n);return o.cancel=function(){t.unsubscribe(i)},o},r(function(i){t.reason||(t.reason=new U_(i),e(t.reason))})}Wo.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};Wo.prototype.subscribe=function(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]};Wo.prototype.unsubscribe=function(e){if(!!this._listeners){var t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}};Wo.source=function(){var e,t=new Wo(function(i){e=i});return{token:t,cancel:e}};km.exports=Wo});var Um=X((IM,Dm)=>{"use strict";Dm.exports=function(e){return function(n){return e.apply(null,n)}}});var jm=X((CM,qm)=>{"use strict";var q_=bt();qm.exports=function(e){return q_.isObject(e)&&e.isAxiosError===!0}});var Hm=X((BM,_h)=>{"use strict";var Wm=bt(),j_=th(),dc=Nm(),W_=vh(),$_=lc();function $m(r){var e=new dc(r),t=j_(dc.prototype.request,e);return Wm.extend(t,dc.prototype,e),Wm.extend(t,e),t.create=function(i){return $m(W_(r,i))},t}var qt=$m($_);qt.Axios=dc;qt.CanceledError=ua();qt.CancelToken=Lm();qt.isCancel=mh();qt.VERSION=wh().version;qt.toFormData=uh();qt.AxiosError=Wi();qt.Cancel=qt.CanceledError;qt.all=function(e){return Promise.all(e)};qt.spread=Um();qt.isAxiosError=jm();_h.exports=qt;_h.exports.default=qt});var Sh=X((OM,Km)=>{Km.exports=Hm()});var zm=X(Ah=>{"use strict";Object.defineProperty(Ah,"__esModule",{value:!0});var H_=Sh(),Eh=class{constructor(e){this.METHOD_GET="GET",this.METHOD_POST="POST",this.applyConfig(e)}applyConfig(e){this.config=this.mergeDefaults(e)}getConfig(){return this.config}mergeDefaults(e){let t=e.protocol||"http",n=e.port||(t==="https"?443:80);return{host:e.host||"127.0.0.1",protocol:t,port:n,timeout:e.timeout||2e4,logging:e.logging||!1,logger:e.logger||console.log,network:e.network}}async get(e,t){try{return await this.request().get(e,t)}catch(n){if(n.response&&n.response.status)return n.response;throw n}}async post(e,t,n){try{return await this.request().post(e,t,n)}catch(i){if(i.response&&i.response.status)return i.response;throw i}}request(){let e={};this.config.network&&(e["x-network"]=this.config.network);let t=H_.default.create({baseURL:`${this.config.protocol}://${this.config.host}:${this.config.port}`,timeout:this.config.timeout,maxContentLength:1024*1024*512,headers:e});return this.config.logging&&(t.interceptors.request.use(n=>(this.config.logger(`Requesting: ${n.baseURL}/${n.url}`),n)),t.interceptors.response.use(n=>(this.config.logger(`Response:   ${n.config.url} - ${n.status}`),n))),t}};Ah.default=Eh});var Fh=X((PM,Gm)=>{"use strict";Gm.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),n=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;e[t]=i;for(t in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var o=Object.getOwnPropertySymbols(e);if(o.length!==1||o[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var s=Object.getOwnPropertyDescriptor(e,t);if(s.value!==i||s.enumerable!==!0)return!1}return!0}});var ha=X((NM,Vm)=>{"use strict";var K_=Fh();Vm.exports=function(){return K_()&&!!Symbol.toStringTag}});var Ym=X((kM,Jm)=>{"use strict";var Xm=typeof Symbol<"u"&&Symbol,z_=Fh();Jm.exports=function(){return typeof Xm!="function"||typeof Symbol!="function"||typeof Xm("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:z_()}});var Zm=X((LM,Qm)=>{"use strict";var G_="Function.prototype.bind called on incompatible ",Th=Array.prototype.slice,V_=Object.prototype.toString,X_="[object Function]";Qm.exports=function(e){var t=this;if(typeof t!="function"||V_.call(t)!==X_)throw new TypeError(G_+t);for(var n=Th.call(arguments,1),i,o=function(){if(this instanceof i){var x=t.apply(this,n.concat(Th.call(arguments)));return Object(x)===x?x:this}else return t.apply(e,n.concat(Th.call(arguments)))},s=Math.max(0,t.length-n.length),f=[],h=0;h<s;h++)f.push("$"+h);if(i=Function("binder","return function ("+f.join(",")+"){ return binder.apply(this,arguments); }")(o),t.prototype){var g=function(){};g.prototype=t.prototype,i.prototype=new g,g.prototype=null}return i}});var pc=X((DM,ey)=>{"use strict";var J_=Zm();ey.exports=Function.prototype.bind||J_});var ry=X((UM,ty)=>{"use strict";var Y_=pc();ty.exports=Y_.call(Function.call,Object.prototype.hasOwnProperty)});var yc=X((qM,sy)=>{"use strict";var Ge,Go=SyntaxError,oy=Function,Ko=TypeError,Mh=function(r){try{return oy('"use strict"; return ('+r+").constructor;")()}catch{}},$i=Object.getOwnPropertyDescriptor;if($i)try{$i({},"")}catch{$i=null}var Ih=function(){throw new Ko},Q_=$i?function(){try{return arguments.callee,Ih}catch{try{return $i(arguments,"callee").get}catch{return Ih}}}():Ih,$o=Ym()(),jn=Object.getPrototypeOf||function(r){return r.__proto__},Ho={},Z_=typeof Uint8Array>"u"?Ge:jn(Uint8Array),zo={"%AggregateError%":typeof AggregateError>"u"?Ge:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Ge:ArrayBuffer,"%ArrayIteratorPrototype%":$o?jn([][Symbol.iterator]()):Ge,"%AsyncFromSyncIteratorPrototype%":Ge,"%AsyncFunction%":Ho,"%AsyncGenerator%":Ho,"%AsyncGeneratorFunction%":Ho,"%AsyncIteratorPrototype%":Ho,"%Atomics%":typeof Atomics>"u"?Ge:Atomics,"%BigInt%":typeof BigInt>"u"?Ge:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Ge:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?Ge:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Ge:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Ge:FinalizationRegistry,"%Function%":oy,"%GeneratorFunction%":Ho,"%Int8Array%":typeof Int8Array>"u"?Ge:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Ge:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Ge:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":$o?jn(jn([][Symbol.iterator]())):Ge,"%JSON%":typeof JSON=="object"?JSON:Ge,"%Map%":typeof Map>"u"?Ge:Map,"%MapIteratorPrototype%":typeof Map>"u"||!$o?Ge:jn(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Ge:Promise,"%Proxy%":typeof Proxy>"u"?Ge:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?Ge:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Ge:Set,"%SetIteratorPrototype%":typeof Set>"u"||!$o?Ge:jn(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Ge:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":$o?jn(""[Symbol.iterator]()):Ge,"%Symbol%":$o?Symbol:Ge,"%SyntaxError%":Go,"%ThrowTypeError%":Q_,"%TypedArray%":Z_,"%TypeError%":Ko,"%Uint8Array%":typeof Uint8Array>"u"?Ge:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Ge:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Ge:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Ge:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?Ge:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Ge:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Ge:WeakSet},e8=function r(e){var t;if(e==="%AsyncFunction%")t=Mh("async function () {}");else if(e==="%GeneratorFunction%")t=Mh("function* () {}");else if(e==="%AsyncGeneratorFunction%")t=Mh("async function* () {}");else if(e==="%AsyncGenerator%"){var n=r("%AsyncGeneratorFunction%");n&&(t=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=r("%AsyncGenerator%");i&&(t=jn(i.prototype))}return zo[e]=t,t},ny={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},da=pc(),gc=ry(),t8=da.call(Function.call,Array.prototype.concat),r8=da.call(Function.apply,Array.prototype.splice),iy=da.call(Function.call,String.prototype.replace),mc=da.call(Function.call,String.prototype.slice),n8=da.call(Function.call,RegExp.prototype.exec),i8=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,o8=/\\(\\)?/g,s8=function(e){var t=mc(e,0,1),n=mc(e,-1);if(t==="%"&&n!=="%")throw new Go("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&t!=="%")throw new Go("invalid intrinsic syntax, expected opening `%`");var i=[];return iy(e,i8,function(o,s,f,h){i[i.length]=f?iy(h,o8,"$1"):s||o}),i},a8=function(e,t){var n=e,i;if(gc(ny,n)&&(i=ny[n],n="%"+i[0]+"%"),gc(zo,n)){var o=zo[n];if(o===Ho&&(o=e8(n)),typeof o>"u"&&!t)throw new Ko("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:o}}throw new Go("intrinsic "+e+" does not exist!")};sy.exports=function(e,t){if(typeof e!="string"||e.length===0)throw new Ko("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof t!="boolean")throw new Ko('"allowMissing" argument must be a boolean');if(n8(/^%?[^%]*%?$/,e)===null)throw new Go("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=s8(e),i=n.length>0?n[0]:"",o=a8("%"+i+"%",t),s=o.name,f=o.value,h=!1,g=o.alias;g&&(i=g[0],r8(n,t8([0,1],g)));for(var x=1,T=!0;x<n.length;x+=1){var I=n[x],A=mc(I,0,1),C=mc(I,-1);if((A==='"'||A==="'"||A==="`"||C==='"'||C==="'"||C==="`")&&A!==C)throw new Go("property names with quotes must have matching quotes");if((I==="constructor"||!T)&&(h=!0),i+="."+I,s="%"+i+"%",gc(zo,s))f=zo[s];else if(f!=null){if(!(I in f)){if(!t)throw new Ko("base intrinsic for "+e+" exists, but the property is not available.");return}if($i&&x+1>=n.length){var j=$i(f,I);T=!!j,T&&"get"in j&&!("originalValue"in j.get)?f=j.get:f=f[I]}else T=gc(f,I),f=f[I];T&&!h&&(zo[s]=f)}}return f}});var hy=X((jM,bc)=>{"use strict";var Ch=pc(),Vo=yc(),cy=Vo("%Function.prototype.apply%"),uy=Vo("%Function.prototype.call%"),ly=Vo("%Reflect.apply%",!0)||Ch.call(uy,cy),ay=Vo("%Object.getOwnPropertyDescriptor%",!0),Hi=Vo("%Object.defineProperty%",!0),f8=Vo("%Math.max%");if(Hi)try{Hi({},"a",{value:1})}catch{Hi=null}bc.exports=function(e){var t=ly(Ch,uy,arguments);if(ay&&Hi){var n=ay(t,"length");n.configurable&&Hi(t,"length",{value:1+f8(0,e.length-(arguments.length-1))})}return t};var fy=function(){return ly(Ch,cy,arguments)};Hi?Hi(bc.exports,"apply",{value:fy}):bc.exports.apply=fy});var vc=X((WM,gy)=>{"use strict";var dy=yc(),py=hy(),c8=py(dy("String.prototype.indexOf"));gy.exports=function(e,t){var n=dy(e,!!t);return typeof n=="function"&&c8(e,".prototype.")>-1?py(n):n}});var by=X(($M,yy)=>{"use strict";var u8=ha()(),l8=vc(),Bh=l8("Object.prototype.toString"),wc=function(e){return u8&&e&&typeof e=="object"&&Symbol.toStringTag in e?!1:Bh(e)==="[object Arguments]"},my=function(e){return wc(e)?!0:e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&Bh(e)!=="[object Array]"&&Bh(e.callee)==="[object Function]"},h8=function(){return wc(arguments)}();wc.isLegacyArguments=my;yy.exports=h8?wc:my});var xy=X((HM,wy)=>{"use strict";var d8=Object.prototype.toString,p8=Function.prototype.toString,g8=/^\s*(?:function)?\*/,vy=ha()(),Oh=Object.getPrototypeOf,m8=function(){if(!vy)return!1;try{return Function("return function*() {}")()}catch{}},Rh;wy.exports=function(e){if(typeof e!="function")return!1;if(g8.test(p8.call(e)))return!0;if(!vy){var t=d8.call(e);return t==="[object GeneratorFunction]"}if(!Oh)return!1;if(typeof Rh>"u"){var n=m8();Rh=n?Oh(n):!1}return Oh(e)===Rh}});var Ay=X((KM,Ey)=>{"use strict";var Sy=Function.prototype.toString,Xo=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,Nh,xc;if(typeof Xo=="function"&&typeof Object.defineProperty=="function")try{Nh=Object.defineProperty({},"length",{get:function(){throw xc}}),xc={},Xo(function(){throw 42},null,Nh)}catch(r){r!==xc&&(Xo=null)}else Xo=null;var y8=/^\s*class\b/,kh=function(e){try{var t=Sy.call(e);return y8.test(t)}catch{return!1}},Ph=function(e){try{return kh(e)?!1:(Sy.call(e),!0)}catch{return!1}},_c=Object.prototype.toString,b8="[object Object]",v8="[object Function]",w8="[object GeneratorFunction]",x8="[object HTMLAllCollection]",_8="[object HTML document.all class]",S8="[object HTMLCollection]",E8=typeof Symbol=="function"&&!!Symbol.toStringTag,A8=!(0 in[,]),Lh=function(){return!1};typeof document=="object"&&(_y=document.all,_c.call(_y)===_c.call(document.all)&&(Lh=function(e){if((A8||!e)&&(typeof e>"u"||typeof e=="object"))try{var t=_c.call(e);return(t===x8||t===_8||t===S8||t===b8)&&e("")==null}catch{}return!1}));var _y;Ey.exports=Xo?function(e){if(Lh(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;try{Xo(e,null,Nh)}catch(t){if(t!==xc)return!1}return!kh(e)&&Ph(e)}:function(e){if(Lh(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;if(E8)return Ph(e);if(kh(e))return!1;var t=_c.call(e);return t!==v8&&t!==w8&&!/^\[object HTML/.test(t)?!1:Ph(e)}});var Dh=X((zM,Ty)=>{"use strict";var F8=Ay(),T8=Object.prototype.toString,Fy=Object.prototype.hasOwnProperty,M8=function(e,t,n){for(var i=0,o=e.length;i<o;i++)Fy.call(e,i)&&(n==null?t(e[i],i,e):t.call(n,e[i],i,e))},I8=function(e,t,n){for(var i=0,o=e.length;i<o;i++)n==null?t(e.charAt(i),i,e):t.call(n,e.charAt(i),i,e)},C8=function(e,t,n){for(var i in e)Fy.call(e,i)&&(n==null?t(e[i],i,e):t.call(n,e[i],i,e))},B8=function(e,t,n){if(!F8(t))throw new TypeError("iterator must be a function");var i;arguments.length>=3&&(i=n),T8.call(e)==="[object Array]"?M8(e,t,i):typeof e=="string"?I8(e,t,i):C8(e,t,i)};Ty.exports=B8});var qh=X((GM,My)=>{"use strict";var Uh=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],O8=typeof globalThis>"u"?global:globalThis;My.exports=function(){for(var e=[],t=0;t<Uh.length;t++)typeof O8[Uh[t]]=="function"&&(e[e.length]=Uh[t]);return e}});var jh=X((VM,Iy)=>{"use strict";var R8=yc(),Sc=R8("%Object.getOwnPropertyDescriptor%",!0);if(Sc)try{Sc([],"length")}catch{Sc=null}Iy.exports=Sc});var Hh=X((XM,Py)=>{"use strict";var Cy=Dh(),P8=qh(),$h=vc(),N8=$h("Object.prototype.toString"),By=ha()(),Ec=jh(),k8=typeof globalThis>"u"?global:globalThis,Oy=P8(),L8=$h("Array.prototype.indexOf",!0)||function(e,t){for(var n=0;n<e.length;n+=1)if(e[n]===t)return n;return-1},D8=$h("String.prototype.slice"),Ry={},Wh=Object.getPrototypeOf;By&&Ec&&Wh&&Cy(Oy,function(r){var e=new k8[r];if(Symbol.toStringTag in e){var t=Wh(e),n=Ec(t,Symbol.toStringTag);if(!n){var i=Wh(t);n=Ec(i,Symbol.toStringTag)}Ry[r]=n.get}});var U8=function(e){var t=!1;return Cy(Ry,function(n,i){if(!t)try{t=n.call(e)===i}catch{}}),t};Py.exports=function(e){if(!e||typeof e!="object")return!1;if(!By||!(Symbol.toStringTag in e)){var t=D8(N8(e),8,-1);return L8(Oy,t)>-1}return Ec?U8(e):!1}});var jy=X((JM,qy)=>{"use strict";var ky=Dh(),q8=qh(),Ly=vc(),Kh=jh(),j8=Ly("Object.prototype.toString"),Dy=ha()(),Ny=typeof globalThis>"u"?global:globalThis,W8=q8(),$8=Ly("String.prototype.slice"),Uy={},zh=Object.getPrototypeOf;Dy&&Kh&&zh&&ky(W8,function(r){if(typeof Ny[r]=="function"){var e=new Ny[r];if(Symbol.toStringTag in e){var t=zh(e),n=Kh(t,Symbol.toStringTag);if(!n){var i=zh(t);n=Kh(i,Symbol.toStringTag)}Uy[r]=n.get}}});var H8=function(e){var t=!1;return ky(Uy,function(n,i){if(!t)try{var o=n.call(e);o===i&&(t=o)}catch{}}),t},K8=Hh();qy.exports=function(e){return K8(e)?!Dy||!(Symbol.toStringTag in e)?$8(j8(e),8,-1):H8(e):!1}});var tb=X(He=>{"use strict";var z8=by(),G8=xy(),Ar=jy(),Wy=Hh();function Jo(r){return r.call.bind(r)}var $y=typeof BigInt<"u",Hy=typeof Symbol<"u",lr=Jo(Object.prototype.toString),V8=Jo(Number.prototype.valueOf),X8=Jo(String.prototype.valueOf),J8=Jo(Boolean.prototype.valueOf);$y&&(Ky=Jo(BigInt.prototype.valueOf));var Ky;Hy&&(zy=Jo(Symbol.prototype.valueOf));var zy;function ga(r,e){if(typeof r!="object")return!1;try{return e(r),!0}catch{return!1}}He.isArgumentsObject=z8;He.isGeneratorFunction=G8;He.isTypedArray=Wy;function Y8(r){return typeof Promise<"u"&&r instanceof Promise||r!==null&&typeof r=="object"&&typeof r.then=="function"&&typeof r.catch=="function"}He.isPromise=Y8;function Q8(r){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(r):Wy(r)||Vy(r)}He.isArrayBufferView=Q8;function Z8(r){return Ar(r)==="Uint8Array"}He.isUint8Array=Z8;function e5(r){return Ar(r)==="Uint8ClampedArray"}He.isUint8ClampedArray=e5;function t5(r){return Ar(r)==="Uint16Array"}He.isUint16Array=t5;function r5(r){return Ar(r)==="Uint32Array"}He.isUint32Array=r5;function n5(r){return Ar(r)==="Int8Array"}He.isInt8Array=n5;function i5(r){return Ar(r)==="Int16Array"}He.isInt16Array=i5;function o5(r){return Ar(r)==="Int32Array"}He.isInt32Array=o5;function s5(r){return Ar(r)==="Float32Array"}He.isFloat32Array=s5;function a5(r){return Ar(r)==="Float64Array"}He.isFloat64Array=a5;function f5(r){return Ar(r)==="BigInt64Array"}He.isBigInt64Array=f5;function c5(r){return Ar(r)==="BigUint64Array"}He.isBigUint64Array=c5;function Ac(r){return lr(r)==="[object Map]"}Ac.working=typeof Map<"u"&&Ac(new Map);function u5(r){return typeof Map>"u"?!1:Ac.working?Ac(r):r instanceof Map}He.isMap=u5;function Fc(r){return lr(r)==="[object Set]"}Fc.working=typeof Set<"u"&&Fc(new Set);function l5(r){return typeof Set>"u"?!1:Fc.working?Fc(r):r instanceof Set}He.isSet=l5;function Tc(r){return lr(r)==="[object WeakMap]"}Tc.working=typeof WeakMap<"u"&&Tc(new WeakMap);function h5(r){return typeof WeakMap>"u"?!1:Tc.working?Tc(r):r instanceof WeakMap}He.isWeakMap=h5;function Vh(r){return lr(r)==="[object WeakSet]"}Vh.working=typeof WeakSet<"u"&&Vh(new WeakSet);function d5(r){return Vh(r)}He.isWeakSet=d5;function Mc(r){return lr(r)==="[object ArrayBuffer]"}Mc.working=typeof ArrayBuffer<"u"&&Mc(new ArrayBuffer);function Gy(r){return typeof ArrayBuffer>"u"?!1:Mc.working?Mc(r):r instanceof ArrayBuffer}He.isArrayBuffer=Gy;function Ic(r){return lr(r)==="[object DataView]"}Ic.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&Ic(new DataView(new ArrayBuffer(1),0,1));function Vy(r){return typeof DataView>"u"?!1:Ic.working?Ic(r):r instanceof DataView}He.isDataView=Vy;var Gh=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function pa(r){return lr(r)==="[object SharedArrayBuffer]"}function Xy(r){return typeof Gh>"u"?!1:(typeof pa.working>"u"&&(pa.working=pa(new Gh)),pa.working?pa(r):r instanceof Gh)}He.isSharedArrayBuffer=Xy;function p5(r){return lr(r)==="[object AsyncFunction]"}He.isAsyncFunction=p5;function g5(r){return lr(r)==="[object Map Iterator]"}He.isMapIterator=g5;function m5(r){return lr(r)==="[object Set Iterator]"}He.isSetIterator=m5;function y5(r){return lr(r)==="[object Generator]"}He.isGeneratorObject=y5;function b5(r){return lr(r)==="[object WebAssembly.Module]"}He.isWebAssemblyCompiledModule=b5;function Jy(r){return ga(r,V8)}He.isNumberObject=Jy;function Yy(r){return ga(r,X8)}He.isStringObject=Yy;function Qy(r){return ga(r,J8)}He.isBooleanObject=Qy;function Zy(r){return $y&&ga(r,Ky)}He.isBigIntObject=Zy;function eb(r){return Hy&&ga(r,zy)}He.isSymbolObject=eb;function v5(r){return Jy(r)||Yy(r)||Qy(r)||Zy(r)||eb(r)}He.isBoxedPrimitive=v5;function w5(r){return typeof Uint8Array<"u"&&(Gy(r)||Xy(r))}He.isAnyArrayBuffer=w5;["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(r){Object.defineProperty(He,r,{enumerable:!1,value:function(){throw new Error(r+" is not supported in userland")}})})});var nb=X((QM,rb)=>{rb.exports=function(e){return e&&typeof e=="object"&&typeof e.copy=="function"&&typeof e.fill=="function"&&typeof e.readUInt8=="function"}});var Qt=X((ZM,Xh)=>{typeof Object.create=="function"?Xh.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:Xh.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}});var ba=X(Ke=>{var ib=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),n={},i=0;i<t.length;i++)n[t[i]]=Object.getOwnPropertyDescriptor(e,t[i]);return n},x5=/%[sdj%]/g;Ke.format=function(r){if(!kc(r)){for(var e=[],t=0;t<arguments.length;t++)e.push(Wn(arguments[t]));return e.join(" ")}for(var t=1,n=arguments,i=n.length,o=String(r).replace(x5,function(f){if(f==="%%")return"%";if(t>=i)return f;switch(f){case"%s":return String(n[t++]);case"%d":return Number(n[t++]);case"%j":try{return JSON.stringify(n[t++])}catch{return"[Circular]"}default:return f}}),s=n[t];t<i;s=n[++t])Nc(s)||!Yo(s)?o+=" "+s:o+=" "+Wn(s);return o};Ke.deprecate=function(r,e){if(typeof process<"u"&&process.noDeprecation===!0)return r;if(typeof process>"u")return function(){return Ke.deprecate(r,e).apply(this,arguments)};var t=!1;function n(){if(!t){if(process.throwDeprecation)throw new Error(e);process.traceDeprecation?console.trace(e):console.error(e),t=!0}return r.apply(this,arguments)}return n};var Cc={},ob=/^$/;process.env.NODE_DEBUG&&(Bc=process.env.NODE_DEBUG,Bc=Bc.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),ob=new RegExp("^"+Bc+"$","i"));var Bc;Ke.debuglog=function(r){if(r=r.toUpperCase(),!Cc[r])if(ob.test(r)){var e=process.pid;Cc[r]=function(){var t=Ke.format.apply(Ke,arguments);console.error("%s %d: %s",r,e,t)}}else Cc[r]=function(){};return Cc[r]};function Wn(r,e){var t={seen:[],stylize:S5};return arguments.length>=3&&(t.depth=arguments[2]),arguments.length>=4&&(t.colors=arguments[3]),Zh(e)?t.showHidden=e:e&&Ke._extend(t,e),zi(t.showHidden)&&(t.showHidden=!1),zi(t.depth)&&(t.depth=2),zi(t.colors)&&(t.colors=!1),zi(t.customInspect)&&(t.customInspect=!0),t.colors&&(t.stylize=_5),Rc(t,r,t.depth)}Ke.inspect=Wn;Wn.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};Wn.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function _5(r,e){var t=Wn.styles[e];return t?"\x1B["+Wn.colors[t][0]+"m"+r+"\x1B["+Wn.colors[t][1]+"m":r}function S5(r,e){return r}function E5(r){var e={};return r.forEach(function(t,n){e[t]=!0}),e}function Rc(r,e,t){if(r.customInspect&&e&&Oc(e.inspect)&&e.inspect!==Ke.inspect&&!(e.constructor&&e.constructor.prototype===e)){var n=e.inspect(t,r);return kc(n)||(n=Rc(r,n,t)),n}var i=A5(r,e);if(i)return i;var o=Object.keys(e),s=E5(o);if(r.showHidden&&(o=Object.getOwnPropertyNames(e)),ya(e)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return Jh(e);if(o.length===0){if(Oc(e)){var f=e.name?": "+e.name:"";return r.stylize("[Function"+f+"]","special")}if(ma(e))return r.stylize(RegExp.prototype.toString.call(e),"regexp");if(Pc(e))return r.stylize(Date.prototype.toString.call(e),"date");if(ya(e))return Jh(e)}var h="",g=!1,x=["{","}"];if(sb(e)&&(g=!0,x=["[","]"]),Oc(e)){var T=e.name?": "+e.name:"";h=" [Function"+T+"]"}if(ma(e)&&(h=" "+RegExp.prototype.toString.call(e)),Pc(e)&&(h=" "+Date.prototype.toUTCString.call(e)),ya(e)&&(h=" "+Jh(e)),o.length===0&&(!g||e.length==0))return x[0]+h+x[1];if(t<0)return ma(e)?r.stylize(RegExp.prototype.toString.call(e),"regexp"):r.stylize("[Object]","special");r.seen.push(e);var I;return g?I=F5(r,e,t,s,o):I=o.map(function(A){return Qh(r,e,t,s,A,g)}),r.seen.pop(),T5(I,h,x)}function A5(r,e){if(zi(e))return r.stylize("undefined","undefined");if(kc(e)){var t="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return r.stylize(t,"string")}if(ab(e))return r.stylize(""+e,"number");if(Zh(e))return r.stylize(""+e,"boolean");if(Nc(e))return r.stylize("null","null")}function Jh(r){return"["+Error.prototype.toString.call(r)+"]"}function F5(r,e,t,n,i){for(var o=[],s=0,f=e.length;s<f;++s)fb(e,String(s))?o.push(Qh(r,e,t,n,String(s),!0)):o.push("");return i.forEach(function(h){h.match(/^\d+$/)||o.push(Qh(r,e,t,n,h,!0))}),o}function Qh(r,e,t,n,i,o){var s,f,h;if(h=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]},h.get?h.set?f=r.stylize("[Getter/Setter]","special"):f=r.stylize("[Getter]","special"):h.set&&(f=r.stylize("[Setter]","special")),fb(n,i)||(s="["+i+"]"),f||(r.seen.indexOf(h.value)<0?(Nc(t)?f=Rc(r,h.value,null):f=Rc(r,h.value,t-1),f.indexOf(`
`)>-1&&(o?f=f.split(`
`).map(function(g){return"  "+g}).join(`
`).slice(2):f=`
`+f.split(`
`).map(function(g){return"   "+g}).join(`
`))):f=r.stylize("[Circular]","special")),zi(s)){if(o&&i.match(/^\d+$/))return f;s=JSON.stringify(""+i),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.slice(1,-1),s=r.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=r.stylize(s,"string"))}return s+": "+f}function T5(r,e,t){var n=0,i=r.reduce(function(o,s){return n++,s.indexOf(`
`)>=0&&n++,o+s.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?t[0]+(e===""?"":e+`
 `)+" "+r.join(`,
  `)+" "+t[1]:t[0]+e+" "+r.join(", ")+" "+t[1]}Ke.types=tb();function sb(r){return Array.isArray(r)}Ke.isArray=sb;function Zh(r){return typeof r=="boolean"}Ke.isBoolean=Zh;function Nc(r){return r===null}Ke.isNull=Nc;function M5(r){return r==null}Ke.isNullOrUndefined=M5;function ab(r){return typeof r=="number"}Ke.isNumber=ab;function kc(r){return typeof r=="string"}Ke.isString=kc;function I5(r){return typeof r=="symbol"}Ke.isSymbol=I5;function zi(r){return r===void 0}Ke.isUndefined=zi;function ma(r){return Yo(r)&&e0(r)==="[object RegExp]"}Ke.isRegExp=ma;Ke.types.isRegExp=ma;function Yo(r){return typeof r=="object"&&r!==null}Ke.isObject=Yo;function Pc(r){return Yo(r)&&e0(r)==="[object Date]"}Ke.isDate=Pc;Ke.types.isDate=Pc;function ya(r){return Yo(r)&&(e0(r)==="[object Error]"||r instanceof Error)}Ke.isError=ya;Ke.types.isNativeError=ya;function Oc(r){return typeof r=="function"}Ke.isFunction=Oc;function C5(r){return r===null||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||typeof r=="symbol"||typeof r>"u"}Ke.isPrimitive=C5;Ke.isBuffer=nb();function e0(r){return Object.prototype.toString.call(r)}function Yh(r){return r<10?"0"+r.toString(10):r.toString(10)}var B5=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function O5(){var r=new Date,e=[Yh(r.getHours()),Yh(r.getMinutes()),Yh(r.getSeconds())].join(":");return[r.getDate(),B5[r.getMonth()],e].join(" ")}Ke.log=function(){console.log("%s - %s",O5(),Ke.format.apply(Ke,arguments))};Ke.inherits=Qt();Ke._extend=function(r,e){if(!e||!Yo(e))return r;for(var t=Object.keys(e),n=t.length;n--;)r[t[n]]=e[t[n]];return r};function fb(r,e){return Object.prototype.hasOwnProperty.call(r,e)}var Ki=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;Ke.promisify=function(e){if(typeof e!="function")throw new TypeError('The "original" argument must be of type Function');if(Ki&&e[Ki]){var t=e[Ki];if(typeof t!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,Ki,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var n,i,o=new Promise(function(h,g){n=h,i=g}),s=[],f=0;f<arguments.length;f++)s.push(arguments[f]);s.push(function(h,g){h?i(h):n(g)});try{e.apply(this,s)}catch(h){i(h)}return o}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),Ki&&Object.defineProperty(t,Ki,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,ib(e))};Ke.promisify.custom=Ki;function R5(r,e){if(!r){var t=new Error("Promise was rejected with a falsy value");t.reason=r,r=t}return e(r)}function P5(r){if(typeof r!="function")throw new TypeError('The "original" argument must be of type Function');function e(){for(var t=[],n=0;n<arguments.length;n++)t.push(arguments[n]);var i=t.pop();if(typeof i!="function")throw new TypeError("The last argument must be of type Function");var o=this,s=function(){return i.apply(o,arguments)};r.apply(this,t).then(function(f){process.nextTick(s.bind(null,null,f))},function(f){process.nextTick(R5.bind(null,f,s))})}return Object.setPrototypeOf(e,Object.getPrototypeOf(r)),Object.defineProperties(e,ib(r)),e}Ke.callbackify=P5});var Wr=X(ut=>{"use strict";Object.defineProperty(ut,"__esModule",{value:!0});ut.b64UrlDecode=ut.b64UrlEncode=ut.bufferTob64Url=ut.bufferTob64=ut.b64UrlToBuffer=ut.stringToB64Url=ut.stringToBuffer=ut.bufferToString=ut.b64UrlToString=ut.concatBuffers=void 0;var cb=_f();function N5(r){let e=0;for(let i=0;i<r.length;i++)e+=r[i].byteLength;let t=new Uint8Array(e),n=0;t.set(new Uint8Array(r[0]),n),n+=r[0].byteLength;for(let i=1;i<r.length;i++)t.set(new Uint8Array(r[i]),n),n+=r[i].byteLength;return t}ut.concatBuffers=N5;function k5(r){let e=hb(r);return ub(e)}ut.b64UrlToString=k5;function ub(r){if(typeof TextDecoder>"u"){let e=ba().TextDecoder;return new e("utf-8",{fatal:!0}).decode(r)}return new TextDecoder("utf-8",{fatal:!0}).decode(r)}ut.bufferToString=ub;function lb(r){if(typeof TextEncoder>"u"){let e=ba().TextEncoder;return new e().encode(r)}return new TextEncoder().encode(r)}ut.stringToBuffer=lb;function L5(r){return pb(lb(r))}ut.stringToB64Url=L5;function hb(r){return new Uint8Array(cb.toByteArray(mb(r)))}ut.b64UrlToBuffer=hb;function db(r){return cb.fromByteArray(new Uint8Array(r))}ut.bufferTob64=db;function pb(r){return gb(db(r))}ut.bufferTob64Url=pb;function gb(r){return r.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}ut.b64UrlEncode=gb;function mb(r){r=r.replace(/\-/g,"+").replace(/\_/g,"/");let e;return r.length%4==0?e=0:e=4-r.length%4,r.concat("=".repeat(e))}ut.b64UrlDecode=mb});var yb=X(r0=>{"use strict";Object.defineProperty(r0,"__esModule",{value:!0});var $n=Wr(),t0=class{constructor(){if(this.keyLength=4096,this.publicExponent=65537,this.hashAlgorithm="sha256",!this.detectWebCrypto())throw new Error("SubtleCrypto not available!");this.driver=crypto.subtle}async generateJWK(){let e=await this.driver.generateKey({name:"RSA-PSS",modulusLength:4096,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign"]),t=await this.driver.exportKey("jwk",e.privateKey);return{kty:t.kty,e:t.e,n:t.n,d:t.d,p:t.p,q:t.q,dp:t.dp,dq:t.dq,qi:t.qi}}async sign(e,t,{saltLength:n}={}){let i=await this.driver.sign({name:"RSA-PSS",saltLength:32},await this.jwkToCryptoKey(e),t);return new Uint8Array(i)}async hash(e,t="SHA-256"){let n=await this.driver.digest(t,e);return new Uint8Array(n)}async verify(e,t,n){let i={kty:"RSA",e:"AQAB",n:e},o=await this.jwkToPublicCryptoKey(i),s=this.driver.verify({name:"RSA-PSS",saltLength:32},o,n,t),f=this.driver.verify({name:"RSA-PSS",saltLength:0},o,n,t);return s||f}async jwkToCryptoKey(e){return this.driver.importKey("jwk",e,{name:"RSA-PSS",hash:{name:"SHA-256"}},!1,["sign"])}async jwkToPublicCryptoKey(e){return this.driver.importKey("jwk",e,{name:"RSA-PSS",hash:{name:"SHA-256"}},!1,["verify"])}detectWebCrypto(){if(typeof crypto>"u")return!1;let e=crypto==null?void 0:crypto.subtle;return e===void 0?!1:["generateKey","importKey","exportKey","digest","sign"].every(n=>typeof e[n]=="function")}async encrypt(e,t,n){let i=await this.driver.importKey("raw",typeof t=="string"?$n.stringToBuffer(t):t,{name:"PBKDF2",length:32},!1,["deriveKey"]),o=await this.driver.deriveKey({name:"PBKDF2",salt:n?$n.stringToBuffer(n):$n.stringToBuffer("salt"),iterations:1e5,hash:"SHA-256"},i,{name:"AES-CBC",length:256},!1,["encrypt","decrypt"]),s=new Uint8Array(16);crypto.getRandomValues(s);let f=await this.driver.encrypt({name:"AES-CBC",iv:s},o,e);return $n.concatBuffers([s,f])}async decrypt(e,t,n){let i=await this.driver.importKey("raw",typeof t=="string"?$n.stringToBuffer(t):t,{name:"PBKDF2",length:32},!1,["deriveKey"]),o=await this.driver.deriveKey({name:"PBKDF2",salt:n?$n.stringToBuffer(n):$n.stringToBuffer("salt"),iterations:1e5,hash:"SHA-256"},i,{name:"AES-CBC",length:256},!1,["encrypt","decrypt"]),s=e.slice(0,16),f=await this.driver.decrypt({name:"AES-CBC",iv:s},o,e.slice(16));return $n.concatBuffers([f])}};r0.default=t0});var bb=X(i0=>{"use strict";Object.defineProperty(i0,"__esModule",{value:!0});var n0=class{constructor(e){this.api=e}getInfo(){return this.api.get("info").then(e=>e.data)}getPeers(){return this.api.get("peers").then(e=>e.data)}};i0.default=n0});var wa=X(va=>{"use strict";Object.defineProperty(va,"__esModule",{value:!0});va.getError=void 0;var o0=class extends Error{constructor(e,t={}){t.message?super(t.message):super(),this.type=e,this.response=t.response}getType(){return this.type}};va.default=o0;function D5(r){let e=r.data;if(typeof r.data=="string")try{e=JSON.parse(r.data)}catch{}if(r.data instanceof ArrayBuffer||r.data instanceof Uint8Array)try{e=JSON.parse(e.toString())}catch{}return e?e.error||e:r.statusText||"unknown"}va.getError=D5});var xb=X(s0=>{"use strict";Object.defineProperty(s0,"__esModule",{value:!0});var Zt=xa();async function vb(r){if(Array.isArray(r)){let n=Zt.default.utils.concatBuffers([Zt.default.utils.stringToBuffer("list"),Zt.default.utils.stringToBuffer(r.length.toString())]);return await wb(r,await Zt.default.crypto.hash(n,"SHA-384"))}let e=Zt.default.utils.concatBuffers([Zt.default.utils.stringToBuffer("blob"),Zt.default.utils.stringToBuffer(r.byteLength.toString())]),t=Zt.default.utils.concatBuffers([await Zt.default.crypto.hash(e,"SHA-384"),await Zt.default.crypto.hash(r,"SHA-384")]);return await Zt.default.crypto.hash(t,"SHA-384")}s0.default=vb;async function wb(r,e){if(r.length<1)return e;let t=Zt.default.utils.concatBuffers([e,await vb(r[0])]),n=await Zt.default.crypto.hash(t,"SHA-384");return await wb(r.slice(1),n)}});var h0=X(We=>{"use strict";Object.defineProperty(We,"__esModule",{value:!0});We.debug=We.validatePath=We.arrayCompare=We.bufferToInt=We.intToBuffer=We.arrayFlatten=We.generateProofs=We.buildLayers=We.generateTransactionChunks=We.generateTree=We.computeRootHash=We.generateLeaves=We.chunkData=We.MIN_CHUNK_SIZE=We.MAX_CHUNK_SIZE=void 0;var Lc=xa(),_b=Wr();We.MAX_CHUNK_SIZE=256*1024;We.MIN_CHUNK_SIZE=32*1024;var Sa=32,Qo=32;async function f0(r){let e=[],t=r,n=0;for(;t.byteLength>=We.MAX_CHUNK_SIZE;){let i=We.MAX_CHUNK_SIZE,o=t.byteLength-We.MAX_CHUNK_SIZE;o>0&&o<We.MIN_CHUNK_SIZE&&(i=Math.ceil(t.byteLength/2));let s=t.slice(0,i),f=await Lc.default.crypto.hash(s);n+=s.byteLength,e.push({dataHash:f,minByteRange:n-s.byteLength,maxByteRange:n}),t=t.slice(i)}return e.push({dataHash:await Lc.default.crypto.hash(t),minByteRange:n,maxByteRange:n+t.byteLength}),e}We.chunkData=f0;async function c0(r){return Promise.all(r.map(async({dataHash:e,minByteRange:t,maxByteRange:n})=>({type:"leaf",id:await wt(await Promise.all([wt(e),wt(Ea(n))])),dataHash:e,minByteRange:t,maxByteRange:n})))}We.generateLeaves=c0;async function U5(r){return(await Sb(r)).id}We.computeRootHash=U5;async function Sb(r){return await Dc(await c0(await f0(r)))}We.generateTree=Sb;async function q5(r){let e=await f0(r),t=await c0(e),n=await Dc(t),i=await Eb(n),o=e.slice(-1)[0];return o.maxByteRange-o.minByteRange===0&&(e.splice(e.length-1,1),i.splice(i.length-1,1)),{data_root:n.id,chunks:e,proofs:i}}We.generateTransactionChunks=q5;async function Dc(r,e=0){if(r.length<2)return r[0];let t=[];for(let n=0;n<r.length;n+=2)t.push(await j5(r[n],r[n+1]));return Dc(t,e+1)}We.buildLayers=Dc;function Eb(r){let e=a0(r);return Array.isArray(e)?u0(e):[e]}We.generateProofs=Eb;function a0(r,e=new Uint8Array,t=0){if(r.type=="leaf")return{offset:r.maxByteRange-1,proof:(0,_b.concatBuffers)([e,r.dataHash,Ea(r.maxByteRange)])};if(r.type=="branch"){let n=(0,_b.concatBuffers)([e,r.leftChild.id,r.rightChild.id,Ea(r.byteRange)]);return[a0(r.leftChild,n,t+1),a0(r.rightChild,n,t+1)]}throw new Error("Unexpected node type")}function u0(r){let e=[];return r.forEach(t=>{Array.isArray(t)?e.push(...u0(t)):e.push(t)}),e}We.arrayFlatten=u0;async function j5(r,e){return e?{type:"branch",id:await wt([await wt(r.id),await wt(e.id),await wt(Ea(r.maxByteRange))]),byteRange:r.maxByteRange,maxByteRange:e.maxByteRange,leftChild:r,rightChild:e}:r}async function wt(r){return Array.isArray(r)&&(r=Lc.default.utils.concatBuffers(r)),new Uint8Array(await Lc.default.crypto.hash(r))}function Ea(r){let e=new Uint8Array(Sa);for(var t=e.length-1;t>=0;t--){var n=r%256;e[t]=n,r=(r-n)/256}return e}We.intToBuffer=Ea;function l0(r){let e=0;for(var t=0;t<r.length;t++)e*=256,e+=r[t];return e}We.bufferToInt=l0;var W5=(r,e)=>r.every((t,n)=>e[n]===t);We.arrayCompare=W5;async function _a(r,e,t,n,i){if(n<=0)return!1;if(e>=n)return _a(r,0,n-1,n,i);if(e<0)return _a(r,0,0,n,i);if(i.length==Qo+Sa){let T=i.slice(0,Qo),I=i.slice(T.length,T.length+Sa),A=await wt([await wt(T),await wt(I)]);return(0,We.arrayCompare)(r,A)?{offset:n-1,leftBound:t,rightBound:n,chunkSize:n-t}:!1}let o=i.slice(0,Qo),s=i.slice(o.length,o.length+Qo),f=i.slice(o.length+s.length,o.length+s.length+Sa),h=l0(f),g=i.slice(o.length+s.length+f.length),x=await wt([await wt(o),await wt(s),await wt(f)]);return(0,We.arrayCompare)(r,x)?e<h?await _a(o,e,t,Math.min(n,h),g):await _a(s,e,Math.max(t,h),n,g):!1}We.validatePath=_a;async function Ab(r,e=""){if(r.byteLength<1)return e;let t=r.slice(0,Qo),n=r.slice(t.length,t.length+Qo),i=r.slice(t.length+n.length,t.length+n.length+Sa),o=l0(i),s=r.slice(t.length+n.length+i.length),f=await wt([await wt(t),await wt(n),await wt(i)]),h=`${e}
${JSON.stringify(Buffer.from(t))},${JSON.stringify(Buffer.from(n))},${o} => ${JSON.stringify(f)}`;return Ab(s,h)}We.debug=Ab});var qc=X(Fa=>{"use strict";Object.defineProperty(Fa,"__esModule",{value:!0});Fa.Tag=void 0;var gt=Wr(),$5=xb(),H5=h0(),Uc=class{get(e,t){if(!Object.getOwnPropertyNames(this).includes(e))throw new Error(`Field "${e}" is not a property of the Arweave Transaction class.`);return this[e]instanceof Uint8Array?t&&t.decode&&t.string?gt.bufferToString(this[e]):t&&t.decode&&!t.string?this[e]:gt.bufferTob64Url(this[e]):t&&t.decode==!0?t&&t.string?gt.b64UrlToString(this[e]):gt.b64UrlToBuffer(this[e]):this[e]}},Aa=class extends Uc{constructor(e,t,n=!1){super(),this.name=e,this.value=t}};Fa.Tag=Aa;var d0=class extends Uc{constructor(e={}){super(),this.format=2,this.id="",this.last_tx="",this.owner="",this.tags=[],this.target="",this.quantity="0",this.data_size="0",this.data=new Uint8Array,this.data_root="",this.reward="0",this.signature="",Object.assign(this,e),typeof this.data=="string"&&(this.data=gt.b64UrlToBuffer(this.data)),e.tags&&(this.tags=e.tags.map(t=>new Aa(t.name,t.value)))}addTag(e,t){this.tags.push(new Aa(gt.stringToB64Url(e),gt.stringToB64Url(t)))}toJSON(){return{format:this.format,id:this.id,last_tx:this.last_tx,owner:this.owner,tags:this.tags,target:this.target,quantity:this.quantity,data:gt.bufferTob64Url(this.data),data_size:this.data_size,data_root:this.data_root,data_tree:this.data_tree,reward:this.reward,signature:this.signature}}setOwner(e){this.owner=e}setSignature({id:e,owner:t,reward:n,tags:i,signature:o}){this.id=e,this.owner=t,n&&(this.reward=n),i&&(this.tags=i),this.signature=o}async prepareChunks(e){!this.chunks&&e.byteLength>0&&(this.chunks=await(0,H5.generateTransactionChunks)(e),this.data_root=gt.bufferTob64Url(this.chunks.data_root)),!this.chunks&&e.byteLength===0&&(this.chunks={chunks:[],data_root:new Uint8Array,proofs:[]},this.data_root="")}getChunk(e,t){if(!this.chunks)throw new Error("Chunks have not been prepared");let n=this.chunks.proofs[e],i=this.chunks.chunks[e];return{data_root:this.data_root,data_size:this.data_size,data_path:gt.bufferTob64Url(n.proof),offset:n.offset.toString(),chunk:gt.bufferTob64Url(t.slice(i.minByteRange,i.maxByteRange))}}async getSignatureData(){switch(this.format){case 1:let e=this.tags.reduce((n,i)=>gt.concatBuffers([n,i.get("name",{decode:!0,string:!1}),i.get("value",{decode:!0,string:!1})]),new Uint8Array);return gt.concatBuffers([this.get("owner",{decode:!0,string:!1}),this.get("target",{decode:!0,string:!1}),this.get("data",{decode:!0,string:!1}),gt.stringToBuffer(this.quantity),gt.stringToBuffer(this.reward),this.get("last_tx",{decode:!0,string:!1}),e]);case 2:this.data_root||await this.prepareChunks(this.data);let t=this.tags.map(n=>[n.get("name",{decode:!0,string:!1}),n.get("value",{decode:!0,string:!1})]);return await(0,$5.default)([gt.stringToBuffer(this.format.toString()),this.get("owner",{decode:!0,string:!1}),this.get("target",{decode:!0,string:!1}),gt.stringToBuffer(this.quantity),gt.stringToBuffer(this.reward),this.get("last_tx",{decode:!0,string:!1}),t,gt.stringToBuffer(this.data_size),this.get("data_root",{decode:!0,string:!1})]);default:throw new Error(`Unexpected transaction format: ${this.format}`)}}};Fa.default=d0});var Ib=X(jc=>{"use strict";Object.defineProperty(jc,"__esModule",{value:!0});jc.TransactionUploader=void 0;var Fb=qc(),K5=Wr(),p0=wa(),z5=h0(),Tb=1,G5=["invalid_json","chunk_too_big","data_path_too_big","offset_too_big","data_size_too_big","chunk_proof_ratio_not_attractive","invalid_proof"],Mb=1e3*40,Ta=class{constructor(e,t){if(this.api=e,this.chunkIndex=0,this.txPosted=!1,this.lastRequestTimeEnd=0,this.totalErrors=0,this.lastResponseStatus=0,this.lastResponseError="",!t.id)throw new Error("Transaction is not signed");if(!t.chunks)throw new Error("Transaction chunks not prepared");this.data=t.data,this.transaction=new Fb.default(Object.assign({},t,{data:new Uint8Array(0)}))}get isComplete(){return this.txPosted&&this.chunkIndex===this.transaction.chunks.chunks.length}get totalChunks(){return this.transaction.chunks.chunks.length}get uploadedChunks(){return this.chunkIndex}get pctComplete(){return Math.trunc(this.uploadedChunks/this.totalChunks*100)}async uploadChunk(e){if(this.isComplete)throw new Error("Upload is already complete");if(this.lastResponseError!==""?this.totalErrors++:this.totalErrors=0,this.totalErrors===100)throw new Error(`Unable to complete upload: ${this.lastResponseStatus}: ${this.lastResponseError}`);let t=this.lastResponseError===""?0:Math.max(this.lastRequestTimeEnd+Mb-Date.now(),Mb);if(t>0&&(t=t-t*Math.random()*.3,await new Promise(s=>setTimeout(s,t))),this.lastResponseError="",!this.txPosted){await this.postTransaction();return}e&&(this.chunkIndex=e);let n=this.transaction.getChunk(e||this.chunkIndex,this.data);if(!await(0,z5.validatePath)(this.transaction.chunks.data_root,parseInt(n.offset),0,parseInt(n.data_size),K5.b64UrlToBuffer(n.data_path)))throw new Error(`Unable to validate chunk ${this.chunkIndex}`);let o=await this.api.post("chunk",this.transaction.getChunk(this.chunkIndex,this.data)).catch(s=>(console.error(s.message),{status:-1,data:{error:s.message}}));if(this.lastRequestTimeEnd=Date.now(),this.lastResponseStatus=o.status,this.lastResponseStatus==200)this.chunkIndex++;else if(this.lastResponseError=(0,p0.getError)(o),G5.includes(this.lastResponseError))throw new Error(`Fatal error uploading chunk ${this.chunkIndex}: ${this.lastResponseError}`)}static async fromSerialized(e,t,n){if(!t||typeof t.chunkIndex!="number"||typeof t.transaction!="object")throw new Error("Serialized object does not match expected format.");var i=new Fb.default(t.transaction);i.chunks||await i.prepareChunks(n);let o=new Ta(e,i);if(o.chunkIndex=t.chunkIndex,o.lastRequestTimeEnd=t.lastRequestTimeEnd,o.lastResponseError=t.lastResponseError,o.lastResponseStatus=t.lastResponseStatus,o.txPosted=t.txPosted,o.data=n,o.transaction.data_root!==t.transaction.data_root)throw new Error("Data mismatch: Uploader doesn't match provided data.");return o}static async fromTransactionId(e,t){let n=await e.get(`tx/${t}`);if(n.status!==200)throw new Error(`Tx ${t} not found: ${n.status}`);let i=n.data;return i.data=new Uint8Array(0),{txPosted:!0,chunkIndex:0,lastResponseError:"",lastRequestTimeEnd:0,lastResponseStatus:0,transaction:i}}toJSON(){return{chunkIndex:this.chunkIndex,transaction:this.transaction,lastRequestTimeEnd:this.lastRequestTimeEnd,lastResponseStatus:this.lastResponseStatus,lastResponseError:this.lastResponseError,txPosted:this.txPosted}}async postTransaction(){if(this.totalChunks<=Tb){this.transaction.data=this.data;let n=await this.api.post("tx",this.transaction).catch(i=>(console.error(i),{status:-1,data:{error:i.message}}));if(this.lastRequestTimeEnd=Date.now(),this.lastResponseStatus=n.status,this.transaction.data=new Uint8Array(0),n.status>=200&&n.status<300){this.txPosted=!0,this.chunkIndex=Tb;return}throw this.lastResponseError=(0,p0.getError)(n),new Error(`Unable to upload transaction: ${n.status}, ${this.lastResponseError}`)}let t=await this.api.post("tx",this.transaction);if(this.lastRequestTimeEnd=Date.now(),this.lastResponseStatus=t.status,!(t.status>=200&&t.status<300))throw this.lastResponseError=(0,p0.getError)(t),new Error(`Unable to upload transaction: ${t.status}, ${this.lastResponseError}`);this.txPosted=!0}};jc.TransactionUploader=Ta});var Gi=X((cI,Cb)=>{Cb.exports={}});var Bb=X(Xi=>{"use strict";var Vi=Xi&&Xi.__await||function(r){return this instanceof Vi?(this.v=r,this):new Vi(r)},V5=Xi&&Xi.__asyncGenerator||function(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(r,e||[]),i,o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(I){n[I]&&(i[I]=function(A){return new Promise(function(C,j){o.push([I,A,C,j])>1||f(I,A)})})}function f(I,A){try{h(n[I](A))}catch(C){T(o[0][3],C)}}function h(I){I.value instanceof Vi?Promise.resolve(I.value.v).then(g,x):T(o[0][2],I)}function g(I){f("next",I)}function x(I){f("throw",I)}function T(I,A){I(A),o.shift(),o.length&&f(o[0][0],o[0][1])}};Object.defineProperty(Xi,"__esModule",{value:!0});var g0=wa(),hn=qc(),Ma=Wr(),m0=Ib();Gi();var y0=class{constructor(e,t,n){this.api=e,this.crypto=t,this.chunks=n}getTransactionAnchor(){return this.api.get("tx_anchor",{transformResponse:[]}).then(e=>e.data)}getPrice(e,t){let n=t?`price/${e}/${t}`:`price/${e}`;return this.api.get(n,{transformResponse:[function(i){return i}]}).then(i=>i.data)}async get(e){let t=await this.api.get(`tx/${e}`);if(t.status==200){let n=parseInt(t.data.data_size);if(t.data.format>=2&&n>0&&n<=1024*1024*12){let i=await this.getData(e);return new hn.default(Object.assign(Object.assign({},t.data),{data:i}))}return new hn.default(Object.assign(Object.assign({},t.data),{format:t.data.format||1}))}throw t.status==404?new g0.default("TX_NOT_FOUND"):t.status==410?new g0.default("TX_FAILED"):new g0.default("TX_INVALID")}fromRaw(e){return new hn.default(e)}async search(e,t){return this.api.post("arql",{op:"equals",expr1:e,expr2:t}).then(n=>n.data?n.data:[])}getStatus(e){return this.api.get(`tx/${e}/status`).then(t=>t.status==200?{status:200,confirmed:t.data}:{status:t.status,confirmed:null})}async getData(e,t){let n;try{n=await this.chunks.downloadChunkedData(e)}catch(i){console.error(`Error while trying to download chunked data for ${e}`),console.error(i)}if(!n){console.warn(`Falling back to gateway cache for ${e}`);try{n=(await this.api.get(`/${e}`)).data}catch(i){console.error(`Error while trying to download contiguous data from gateway cache for ${e}`),console.error(i)}}if(!n)throw new Error(`${e} was not found!`);return t&&t.decode&&!t.string?n:t&&t.decode&&t.string?Ma.bufferToString(n):Ma.bufferTob64Url(n)}async sign(e,t,n){if(!t&&(typeof window>"u"||!window.arweaveWallet))throw new Error("A new Arweave transaction must provide the jwk parameter.");if(!t||t==="use_wallet"){try{(await window.arweaveWallet.getPermissions()).includes("SIGN_TRANSACTION")||await window.arweaveWallet.connect(["SIGN_TRANSACTION"])}catch{}let i=await window.arweaveWallet.sign(e,n);e.setSignature({id:i.id,owner:i.owner,reward:i.reward,tags:i.tags,signature:i.signature})}else{e.setOwner(t.n);let i=await e.getSignatureData(),o=await this.crypto.sign(t,i,n),s=await this.crypto.hash(o);e.setSignature({id:Ma.bufferTob64Url(s),owner:t.n,signature:Ma.bufferTob64Url(o)})}}async verify(e){let t=await e.getSignatureData(),n=e.get("signature",{decode:!0,string:!1}),i=Ma.bufferTob64Url(await this.crypto.hash(n));if(e.id!==i)throw new Error("Invalid transaction signature or ID! The transaction ID doesn't match the expected SHA-256 hash of the signature.");return this.crypto.verify(e.owner,t,n)}async post(e){if(typeof e=="string"?e=new hn.default(JSON.parse(e)):typeof e.readInt32BE=="function"?e=new hn.default(JSON.parse(e.toString())):typeof e=="object"&&!(e instanceof hn.default)&&(e=new hn.default(e)),!(e instanceof hn.default))throw new Error("Must be Transaction object");e.chunks||await e.prepareChunks(e.data);let t=await this.getUploader(e,e.data);try{for(;!t.isComplete;)await t.uploadChunk()}catch(n){if(t.lastResponseStatus>0)return{status:t.lastResponseStatus,statusText:t.lastResponseError,data:{error:t.lastResponseError}};throw n}return{status:200,statusText:"OK",data:{}}}async getUploader(e,t){let n;if(t instanceof ArrayBuffer&&(t=new Uint8Array(t)),e instanceof hn.default){if(t||(t=e.data),!(t instanceof Uint8Array))throw new Error("Data format is invalid");e.chunks||await e.prepareChunks(t),n=new m0.TransactionUploader(this.api,e),(!n.data||n.data.length===0)&&(n.data=t)}else{if(typeof e=="string"&&(e=await m0.TransactionUploader.fromTransactionId(this.api,e)),!t||!(t instanceof Uint8Array))throw new Error("Must provide data when resuming upload");n=await m0.TransactionUploader.fromSerialized(this.api,e,t)}return n}upload(e,t){return V5(this,arguments,function*(){let i=yield Vi(this.getUploader(e,t));for(;!i.isComplete;)yield Vi(i.uploadChunk()),yield yield Vi(i);return yield Vi(i)})}};Xi.default=y0});var Rb=X(v0=>{"use strict";Object.defineProperty(v0,"__esModule",{value:!0});var Ob=Wr();Gi();var b0=class{constructor(e,t){this.api=e,this.crypto=t}getBalance(e){return this.api.get(`wallet/${e}/balance`,{transformResponse:[function(t){return t}]}).then(t=>t.data)}getLastTransactionID(e){return this.api.get(`wallet/${e}/last_tx`).then(t=>t.data)}generate(){return this.crypto.generateJWK()}async jwkToAddress(e){return!e||e==="use_wallet"?this.getAddress():this.getAddress(e)}async getAddress(e){if(!e||e==="use_wallet"){try{await window.arweaveWallet.connect(["ACCESS_ADDRESS"])}catch{}return window.arweaveWallet.getActiveAddress()}else return this.ownerToAddress(e.n)}async ownerToAddress(e){return Ob.bufferTob64Url(await this.crypto.hash(Ob.b64UrlToBuffer(e)))}};v0.default=b0});var Nb=X(Ia=>{"use strict";Object.defineProperty(Ia,"__esModule",{value:!0});Ia.SiloResource=void 0;var Pb=Wr(),w0=class{constructor(e,t,n){this.api=e,this.crypto=t,this.transactions=n}async get(e){if(!e)throw new Error("No Silo URI specified");let t=await this.parseUri(e),n=await this.transactions.search("Silo-Name",t.getAccessKey());if(n.length==0)throw new Error(`No data could be found for the Silo URI: ${e}`);let i=await this.transactions.get(n[0]);if(!i)throw new Error(`No data could be found for the Silo URI: ${e}`);let o=i.get("data",{decode:!0,string:!1});return this.crypto.decrypt(o,t.getEncryptionKey())}async readTransactionData(e,t){if(!t)throw new Error("No Silo URI specified");let n=await this.parseUri(t),i=e.get("data",{decode:!0,string:!1});return this.crypto.decrypt(i,n.getEncryptionKey())}async parseUri(e){let t=e.match(/^([a-z0-9-_]+)\.([0-9]+)/i);if(!t)throw new Error("Invalid Silo name, must be a name in the format of [a-z0-9]+.[0-9]+, e.g. 'bubble.7'");let n=t[1],i=Math.pow(2,parseInt(t[2])),o=await this.hash(Pb.stringToBuffer(n),i),s=Pb.bufferTob64(o.slice(0,15)),f=await this.hash(o.slice(16,31),1);return new Wc(e,s,f)}async hash(e,t){let n=await this.crypto.hash(e);for(let i=0;i<t-1;i++)n=await this.crypto.hash(n);return n}};Ia.default=w0;var Wc=class{constructor(e,t,n){this.uri=e,this.accessKey=t,this.encryptionKey=n}getUri(){return this.uri}getAccessKey(){return this.accessKey}getEncryptionKey(){return this.encryptionKey}};Ia.SiloResource=Wc});var Lb=X(_0=>{"use strict";Object.defineProperty(_0,"__esModule",{value:!0});var kb=wa(),X5=Wr(),x0=class{constructor(e){this.api=e}async getTransactionOffset(e){let t=await this.api.get(`tx/${e}/offset`);if(t.status===200)return t.data;throw new Error(`Unable to get transaction offset: ${(0,kb.getError)(t)}`)}async getChunk(e){let t=await this.api.get(`chunk/${e}`);if(t.status===200)return t.data;throw new Error(`Unable to get chunk: ${(0,kb.getError)(t)}`)}async getChunkData(e){let t=await this.getChunk(e);return X5.b64UrlToBuffer(t.chunk)}firstChunkOffset(e){return parseInt(e.offset)-parseInt(e.size)+1}async downloadChunkedData(e){let t=await this.getTransactionOffset(e),n=parseInt(t.size),o=parseInt(t.offset)-n+1,s=new Uint8Array(n),f=0;for(;f<n;){this.api.config.logging&&console.log(`[chunk] ${f}/${n}`);let h;try{h=await this.getChunkData(o+f)}catch{console.error(`[chunk] Failed to fetch chunk at offset ${o+f}`),console.error("[chunk] This could indicate that the chunk wasn't uploaded or hasn't yet seeded properly to a particular gateway/node")}if(h)s.set(h,f),f+=h.length;else throw new Error(`Couldn't complete data download at ${f}/${n}`)}return s}};_0.default=x0});var Db=X(S0=>{"use strict";Object.defineProperty(S0,"__esModule",{value:!0});var J5=wa();Gi();var Zo=class{constructor(e,t){this.api=e,this.network=t}async get(e){let t=await this.api.get(`${Zo.ENDPOINT}${e}`);if(t.status===200)return t.data;throw t.status===404?new J5.default("BLOCK_NOT_FOUND"):new Error(`Error while loading block data: ${t}`)}async getCurrent(){let{current:e}=await this.network.getInfo();return await this.get(e)}};S0.default=Zo;Zo.ENDPOINT="block/hash/"});var xa=X(E0=>{"use strict";Object.defineProperty(E0,"__esModule",{value:!0});var Y5=B1(),Q5=zm(),Z5=yb(),eS=bb(),tS=Bb(),rS=Rb(),Ub=qc(),Ca=Wr(),nS=Nb(),iS=Lb(),oS=Db(),$r=class{constructor(e){this.api=new Q5.default(e),this.wallets=new rS.default(this.api,$r.crypto),this.chunks=new iS.default(this.api),this.transactions=new tS.default(this.api,$r.crypto,this.chunks),this.silo=new nS.default(this.api,this.crypto,this.transactions),this.network=new eS.default(this.api),this.blocks=new oS.default(this.api,this.network),this.ar=new Y5.default}get crypto(){return $r.crypto}get utils(){return $r.utils}getConfig(){return{api:this.api.getConfig(),crypto:null}}async createTransaction(e,t){let n={};if(Object.assign(n,e),!e.data&&!(e.target&&e.quantity))throw new Error("A new Arweave transaction must have a 'data' value, or 'target' and 'quantity' values.");if(e.owner==null&&t&&t!=="use_wallet"&&(n.owner=t.n),e.last_tx==null&&(n.last_tx=await this.transactions.getTransactionAnchor()),typeof e.data=="string"&&(e.data=Ca.stringToBuffer(e.data)),e.data instanceof ArrayBuffer&&(e.data=new Uint8Array(e.data)),e.data&&!(e.data instanceof Uint8Array))throw new Error("Expected data to be a string, Uint8Array or ArrayBuffer");if(e.reward==null){let o=e.data?e.data.byteLength:0;n.reward=await this.transactions.getPrice(o,n.target)}n.data_root="",n.data_size=e.data?e.data.byteLength.toString():"0",n.data=e.data||new Uint8Array(0);let i=new Ub.default(n);return await i.getSignatureData(),i}async createSiloTransaction(e,t,n){let i={};if(Object.assign(i,e),!e.data)throw new Error("Silo transactions must have a 'data' value");if(!n)throw new Error("No Silo URI specified.");if(e.target||e.quantity)throw new Error("Silo transactions can only be used for storing data, sending AR to other wallets isn't supported.");if(e.owner==null){if(!t||!t.n)throw new Error("A new Arweave transaction must either have an 'owner' attribute, or you must provide the jwk parameter.");i.owner=t.n}e.last_tx==null&&(i.last_tx=await this.transactions.getTransactionAnchor());let o=await this.silo.parseUri(n);if(typeof e.data=="string"){let f=await this.crypto.encrypt(Ca.stringToBuffer(e.data),o.getEncryptionKey());i.reward=await this.transactions.getPrice(f.byteLength),i.data=Ca.bufferTob64Url(f)}if(e.data instanceof Uint8Array){let f=await this.crypto.encrypt(e.data,o.getEncryptionKey());i.reward=await this.transactions.getPrice(f.byteLength),i.data=Ca.bufferTob64Url(f)}let s=new Ub.default(i);return s.addTag("Silo-Name",o.getAccessKey()),s.addTag("Silo-Version","0.1.0"),s}arql(e){return this.api.post("/arql",e).then(t=>t.data||[])}};E0.default=$r;$r.crypto=new Z5.default;$r.utils=Ca});var A0=X(Hn=>{"use strict";var sS=Hn&&Hn.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),aS=Hn&&Hn.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&sS(e,r,t)};Object.defineProperty(Hn,"__esModule",{value:!0});var $c=xa();$c.default.init=function(r={}){function e(){let s={host:"arweave.net",port:443,protocol:"https"};if(!window||!window.location||!window.location.protocol||!window.location.hostname)return s;let f=window.location.protocol.replace(":",""),h=window.location.hostname,g=window.location.port?parseInt(window.location.port):f=="https"?443:80;return["localhost","127.0.0.1"].includes(h)||f=="file"?s:{host:h,port:g,protocol:f}}let t=e(),n=r.protocol||t.protocol,i=r.host||t.host,o=r.port||t.port;return new $c.default(Object.assign(Object.assign({},r),{host:i,protocol:n,port:o}))};window.Arweave=$c.default;aS(xa(),Hn);Hn.default=$c.default});var dn=X(Qe=>{"use strict";var fS=Qe&&Qe.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),cS=Qe&&Qe.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),uS=Qe&&Qe.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&fS(e,r,t);return cS(e,r),e};Object.defineProperty(Qe,"__esModule",{value:!0});Qe.b64UrlDecode=Qe.b64UrlEncode=Qe.bufferTob64Url=Qe.bufferTob64=Qe.b64UrlToBuffer=Qe.stringToB64Url=Qe.stringToBuffer=Qe.bufferToString=Qe.b64UrlToString=Qe.concatBuffers=void 0;var qb=uS(_f());function lS(r){let e=0;for(let i=0;i<r.length;i++)e+=r[i].byteLength;let t=new Uint8Array(e),n=0;t.set(new Uint8Array(r[0]),n),n+=r[0].byteLength;for(let i=1;i<r.length;i++)t.set(new Uint8Array(r[i]),n),n+=r[i].byteLength;return t}Qe.concatBuffers=lS;function hS(r){let e=$b(r);return jb(e)}Qe.b64UrlToString=hS;function jb(r){if(typeof TextDecoder>"u"){let e=ba().TextDecoder;return new e("utf-8",{fatal:!0}).decode(r)}return new TextDecoder("utf-8",{fatal:!0}).decode(r)}Qe.bufferToString=jb;function Wb(r){if(typeof TextEncoder>"u"){let e=ba().TextEncoder;return new e().encode(r)}return new TextEncoder().encode(r)}Qe.stringToBuffer=Wb;function dS(r){return Kb(Wb(r))}Qe.stringToB64Url=dS;function $b(r){return new Uint8Array(qb.toByteArray(Gb(r)))}Qe.b64UrlToBuffer=$b;function Hb(r){return qb.fromByteArray(new Uint8Array(r))}Qe.bufferTob64=Hb;function Kb(r){return zb(Hb(r))}Qe.bufferTob64Url=Kb;function zb(r){return r.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}Qe.b64UrlEncode=zb;function Gb(r){r=r.replace(/\-/g,"+").replace(/\_/g,"/");let e;return r.length%4==0?e=0:e=4-r.length%4,r.concat("=".repeat(e))}Qe.b64UrlDecode=Gb});var Vb=X(T0=>{"use strict";Object.defineProperty(T0,"__esModule",{value:!0});var pS=Ql(),F0=class{constructor(){this.BigNum=(e,t)=>{let n=pS.BigNumber.clone({DECIMAL_PLACES:t});return new n(e)}}winstonToAr(e,{formatted:t=!1,decimals:n=12,trim:i=!0}={}){let o=this.stringToBigNum(e,n).shiftedBy(-12);return t?o.toFormat(n):o.toFixed(n)}arToWinston(e,{formatted:t=!1}={}){let n=this.stringToBigNum(e).shiftedBy(12);return t?n.toFormat():n.toFixed(0)}compare(e,t){let n=this.stringToBigNum(e),i=this.stringToBigNum(t);return n.comparedTo(i)}isEqual(e,t){return this.compare(e,t)===0}isLessThan(e,t){let n=this.stringToBigNum(e),i=this.stringToBigNum(t);return n.isLessThan(i)}isGreaterThan(e,t){let n=this.stringToBigNum(e),i=this.stringToBigNum(t);return n.isGreaterThan(i)}add(e,t){let n=this.stringToBigNum(e),i=this.stringToBigNum(t);return n.plus(t).toFixed(0)}sub(e,t){let n=this.stringToBigNum(e),i=this.stringToBigNum(t);return n.minus(t).toFixed(0)}stringToBigNum(e,t=12){return this.BigNum(e,t)}};T0.default=F0});var Xb=X(Ba=>{"use strict";var gS=Ba&&Ba.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ba,"__esModule",{value:!0});var mS=gS(Sh()),M0=class{constructor(e){this.METHOD_GET="GET",this.METHOD_POST="POST",this.applyConfig(e)}applyConfig(e){this.config=this.mergeDefaults(e)}getConfig(){return this.config}mergeDefaults(e){let t=e.protocol||"http",n=e.port||(t==="https"?443:80);return{host:e.host||"127.0.0.1",protocol:t,port:n,timeout:e.timeout||2e4,logging:e.logging||!1,logger:e.logger||console.log,network:e.network}}async get(e,t){try{return await this.request().get(e,t)}catch(n){if(n.response&&n.response.status)return n.response;throw n}}async post(e,t,n){try{return await this.request().post(e,t,n)}catch(i){if(i.response&&i.response.status)return i.response;throw i}}request(){let e={};this.config.network&&(e["x-network"]=this.config.network);let t=mS.default.create({baseURL:`${this.config.protocol}://${this.config.host}:${this.config.port}`,timeout:this.config.timeout,maxContentLength:1024*1024*512,headers:e});return this.config.logging&&(t.interceptors.request.use(n=>(this.config.logger(`Requesting: ${n.baseURL}/${n.url}`),n)),t.interceptors.response.use(n=>(this.config.logger(`Response:   ${n.config.url} - ${n.status}`),n))),t}};Ba.default=M0});var I0=X(()=>{});var jt=X((Jb,C0)=>{(function(r,e){"use strict";function t(L,l){if(!L)throw new Error(l||"Assertion failed")}function n(L,l){L.super_=l;var b=function(){};b.prototype=l.prototype,L.prototype=new b,L.prototype.constructor=L}function i(L,l,b){if(i.isBN(L))return L;this.negative=0,this.words=null,this.length=0,this.red=null,L!==null&&((l==="le"||l==="be")&&(b=l,l=10),this._init(L||0,l||10,b||"be"))}typeof r=="object"?r.exports=i:e.BN=i,i.BN=i,i.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=I0().Buffer}catch{}i.isBN=function(l){return l instanceof i?!0:l!==null&&typeof l=="object"&&l.constructor.wordSize===i.wordSize&&Array.isArray(l.words)},i.max=function(l,b){return l.cmp(b)>0?l:b},i.min=function(l,b){return l.cmp(b)<0?l:b},i.prototype._init=function(l,b,d){if(typeof l=="number")return this._initNumber(l,b,d);if(typeof l=="object")return this._initArray(l,b,d);b==="hex"&&(b=16),t(b===(b|0)&&b>=2&&b<=36),l=l.toString().replace(/\s+/g,"");var a=0;l[0]==="-"&&(a++,this.negative=1),a<l.length&&(b===16?this._parseHex(l,a,d):(this._parseBase(l,b,a),d==="le"&&this._initArray(this.toArray(),b,d)))},i.prototype._initNumber=function(l,b,d){l<0&&(this.negative=1,l=-l),l<67108864?(this.words=[l&67108863],this.length=1):l<4503599627370496?(this.words=[l&67108863,l/67108864&67108863],this.length=2):(t(l<9007199254740992),this.words=[l&67108863,l/67108864&67108863,1],this.length=3),d==="le"&&this._initArray(this.toArray(),b,d)},i.prototype._initArray=function(l,b,d){if(t(typeof l.length=="number"),l.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(l.length/3),this.words=new Array(this.length);for(var a=0;a<this.length;a++)this.words[a]=0;var u,v,F=0;if(d==="be")for(a=l.length-1,u=0;a>=0;a-=3)v=l[a]|l[a-1]<<8|l[a-2]<<16,this.words[u]|=v<<F&67108863,this.words[u+1]=v>>>26-F&67108863,F+=24,F>=26&&(F-=26,u++);else if(d==="le")for(a=0,u=0;a<l.length;a+=3)v=l[a]|l[a+1]<<8|l[a+2]<<16,this.words[u]|=v<<F&67108863,this.words[u+1]=v>>>26-F&67108863,F+=24,F>=26&&(F-=26,u++);return this.strip()};function s(L,l){var b=L.charCodeAt(l);return b>=65&&b<=70?b-55:b>=97&&b<=102?b-87:b-48&15}function f(L,l,b){var d=s(L,b);return b-1>=l&&(d|=s(L,b-1)<<4),d}i.prototype._parseHex=function(l,b,d){this.length=Math.ceil((l.length-b)/6),this.words=new Array(this.length);for(var a=0;a<this.length;a++)this.words[a]=0;var u=0,v=0,F;if(d==="be")for(a=l.length-1;a>=b;a-=2)F=f(l,b,a)<<u,this.words[v]|=F&67108863,u>=18?(u-=18,v+=1,this.words[v]|=F>>>26):u+=8;else{var p=l.length-b;for(a=p%2===0?b+1:b;a<l.length;a+=2)F=f(l,b,a)<<u,this.words[v]|=F&67108863,u>=18?(u-=18,v+=1,this.words[v]|=F>>>26):u+=8}this.strip()};function h(L,l,b,d){for(var a=0,u=Math.min(L.length,b),v=l;v<u;v++){var F=L.charCodeAt(v)-48;a*=d,F>=49?a+=F-49+10:F>=17?a+=F-17+10:a+=F}return a}i.prototype._parseBase=function(l,b,d){this.words=[0],this.length=1;for(var a=0,u=1;u<=67108863;u*=b)a++;a--,u=u/b|0;for(var v=l.length-d,F=v%a,p=Math.min(v,v-F)+d,c=0,E=d;E<p;E+=a)c=h(l,E,E+a,b),this.imuln(u),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(F!==0){var M=1;for(c=h(l,E,l.length,b),E=0;E<F;E++)M*=b;this.imuln(M),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this.strip()},i.prototype.copy=function(l){l.words=new Array(this.length);for(var b=0;b<this.length;b++)l.words[b]=this.words[b];l.length=this.length,l.negative=this.negative,l.red=this.red},i.prototype.clone=function(){var l=new i(null);return this.copy(l),l},i.prototype._expand=function(l){for(;this.length<l;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var g=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],x=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],T=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(l,b){l=l||10,b=b|0||1;var d;if(l===16||l==="hex"){d="";for(var a=0,u=0,v=0;v<this.length;v++){var F=this.words[v],p=((F<<a|u)&16777215).toString(16);u=F>>>24-a&16777215,u!==0||v!==this.length-1?d=g[6-p.length]+p+d:d=p+d,a+=2,a>=26&&(a-=26,v--)}for(u!==0&&(d=u.toString(16)+d);d.length%b!==0;)d="0"+d;return this.negative!==0&&(d="-"+d),d}if(l===(l|0)&&l>=2&&l<=36){var c=x[l],E=T[l];d="";var M=this.clone();for(M.negative=0;!M.isZero();){var y=M.modn(E).toString(l);M=M.idivn(E),M.isZero()?d=y+d:d=g[c-y.length]+y+d}for(this.isZero()&&(d="0"+d);d.length%b!==0;)d="0"+d;return this.negative!==0&&(d="-"+d),d}t(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var l=this.words[0];return this.length===2?l+=this.words[1]*67108864:this.length===3&&this.words[2]===1?l+=4503599627370496+this.words[1]*67108864:this.length>2&&t(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-l:l},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(l,b){return t(typeof o<"u"),this.toArrayLike(o,l,b)},i.prototype.toArray=function(l,b){return this.toArrayLike(Array,l,b)},i.prototype.toArrayLike=function(l,b,d){var a=this.byteLength(),u=d||Math.max(1,a);t(a<=u,"byte array longer than desired length"),t(u>0,"Requested array length <= 0"),this.strip();var v=b==="le",F=new l(u),p,c,E=this.clone();if(v){for(c=0;!E.isZero();c++)p=E.andln(255),E.iushrn(8),F[c]=p;for(;c<u;c++)F[c]=0}else{for(c=0;c<u-a;c++)F[c]=0;for(c=0;!E.isZero();c++)p=E.andln(255),E.iushrn(8),F[u-c-1]=p}return F},Math.clz32?i.prototype._countBits=function(l){return 32-Math.clz32(l)}:i.prototype._countBits=function(l){var b=l,d=0;return b>=4096&&(d+=13,b>>>=13),b>=64&&(d+=7,b>>>=7),b>=8&&(d+=4,b>>>=4),b>=2&&(d+=2,b>>>=2),d+b},i.prototype._zeroBits=function(l){if(l===0)return 26;var b=l,d=0;return(b&8191)===0&&(d+=13,b>>>=13),(b&127)===0&&(d+=7,b>>>=7),(b&15)===0&&(d+=4,b>>>=4),(b&3)===0&&(d+=2,b>>>=2),(b&1)===0&&d++,d},i.prototype.bitLength=function(){var l=this.words[this.length-1],b=this._countBits(l);return(this.length-1)*26+b};function I(L){for(var l=new Array(L.bitLength()),b=0;b<l.length;b++){var d=b/26|0,a=b%26;l[b]=(L.words[d]&1<<a)>>>a}return l}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var l=0,b=0;b<this.length;b++){var d=this._zeroBits(this.words[b]);if(l+=d,d!==26)break}return l},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(l){return this.negative!==0?this.abs().inotn(l).iaddn(1):this.clone()},i.prototype.fromTwos=function(l){return this.testn(l-1)?this.notn(l).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(l){for(;this.length<l.length;)this.words[this.length++]=0;for(var b=0;b<l.length;b++)this.words[b]=this.words[b]|l.words[b];return this.strip()},i.prototype.ior=function(l){return t((this.negative|l.negative)===0),this.iuor(l)},i.prototype.or=function(l){return this.length>l.length?this.clone().ior(l):l.clone().ior(this)},i.prototype.uor=function(l){return this.length>l.length?this.clone().iuor(l):l.clone().iuor(this)},i.prototype.iuand=function(l){var b;this.length>l.length?b=l:b=this;for(var d=0;d<b.length;d++)this.words[d]=this.words[d]&l.words[d];return this.length=b.length,this.strip()},i.prototype.iand=function(l){return t((this.negative|l.negative)===0),this.iuand(l)},i.prototype.and=function(l){return this.length>l.length?this.clone().iand(l):l.clone().iand(this)},i.prototype.uand=function(l){return this.length>l.length?this.clone().iuand(l):l.clone().iuand(this)},i.prototype.iuxor=function(l){var b,d;this.length>l.length?(b=this,d=l):(b=l,d=this);for(var a=0;a<d.length;a++)this.words[a]=b.words[a]^d.words[a];if(this!==b)for(;a<b.length;a++)this.words[a]=b.words[a];return this.length=b.length,this.strip()},i.prototype.ixor=function(l){return t((this.negative|l.negative)===0),this.iuxor(l)},i.prototype.xor=function(l){return this.length>l.length?this.clone().ixor(l):l.clone().ixor(this)},i.prototype.uxor=function(l){return this.length>l.length?this.clone().iuxor(l):l.clone().iuxor(this)},i.prototype.inotn=function(l){t(typeof l=="number"&&l>=0);var b=Math.ceil(l/26)|0,d=l%26;this._expand(b),d>0&&b--;for(var a=0;a<b;a++)this.words[a]=~this.words[a]&67108863;return d>0&&(this.words[a]=~this.words[a]&67108863>>26-d),this.strip()},i.prototype.notn=function(l){return this.clone().inotn(l)},i.prototype.setn=function(l,b){t(typeof l=="number"&&l>=0);var d=l/26|0,a=l%26;return this._expand(d+1),b?this.words[d]=this.words[d]|1<<a:this.words[d]=this.words[d]&~(1<<a),this.strip()},i.prototype.iadd=function(l){var b;if(this.negative!==0&&l.negative===0)return this.negative=0,b=this.isub(l),this.negative^=1,this._normSign();if(this.negative===0&&l.negative!==0)return l.negative=0,b=this.isub(l),l.negative=1,b._normSign();var d,a;this.length>l.length?(d=this,a=l):(d=l,a=this);for(var u=0,v=0;v<a.length;v++)b=(d.words[v]|0)+(a.words[v]|0)+u,this.words[v]=b&67108863,u=b>>>26;for(;u!==0&&v<d.length;v++)b=(d.words[v]|0)+u,this.words[v]=b&67108863,u=b>>>26;if(this.length=d.length,u!==0)this.words[this.length]=u,this.length++;else if(d!==this)for(;v<d.length;v++)this.words[v]=d.words[v];return this},i.prototype.add=function(l){var b;return l.negative!==0&&this.negative===0?(l.negative=0,b=this.sub(l),l.negative^=1,b):l.negative===0&&this.negative!==0?(this.negative=0,b=l.sub(this),this.negative=1,b):this.length>l.length?this.clone().iadd(l):l.clone().iadd(this)},i.prototype.isub=function(l){if(l.negative!==0){l.negative=0;var b=this.iadd(l);return l.negative=1,b._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(l),this.negative=1,this._normSign();var d=this.cmp(l);if(d===0)return this.negative=0,this.length=1,this.words[0]=0,this;var a,u;d>0?(a=this,u=l):(a=l,u=this);for(var v=0,F=0;F<u.length;F++)b=(a.words[F]|0)-(u.words[F]|0)+v,v=b>>26,this.words[F]=b&67108863;for(;v!==0&&F<a.length;F++)b=(a.words[F]|0)+v,v=b>>26,this.words[F]=b&67108863;if(v===0&&F<a.length&&a!==this)for(;F<a.length;F++)this.words[F]=a.words[F];return this.length=Math.max(this.length,F),a!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(l){return this.clone().isub(l)};function A(L,l,b){b.negative=l.negative^L.negative;var d=L.length+l.length|0;b.length=d,d=d-1|0;var a=L.words[0]|0,u=l.words[0]|0,v=a*u,F=v&67108863,p=v/67108864|0;b.words[0]=F;for(var c=1;c<d;c++){for(var E=p>>>26,M=p&67108863,y=Math.min(c,l.length-1),_=Math.max(0,c-L.length+1);_<=y;_++){var ne=c-_|0;a=L.words[ne]|0,u=l.words[_]|0,v=a*u+M,E+=v/67108864|0,M=v&67108863}b.words[c]=M|0,p=E|0}return p!==0?b.words[c]=p|0:b.length--,b.strip()}var C=function(l,b,d){var a=l.words,u=b.words,v=d.words,F=0,p,c,E,M=a[0]|0,y=M&8191,_=M>>>13,ne=a[1]|0,ie=ne&8191,ce=ne>>>13,he=a[2]|0,re=he&8191,m=he>>>13,w=a[3]|0,S=w&8191,N=w>>>13,R=a[4]|0,P=R&8191,D=R>>>13,B=a[5]|0,O=B&8191,k=B>>>13,U=a[6]|0,W=U&8191,Y=U>>>13,Q=a[7]|0,te=Q&8191,fe=Q>>>13,ge=a[8]|0,ae=ge&8191,ue=ge>>>13,Se=a[9]|0,ye=Se&8191,be=Se>>>13,Je=u[0]|0,pe=Je&8191,me=Je>>>13,Fe=u[1]|0,de=Fe&8191,le=Fe>>>13,ht=u[2]|0,ve=ht&8191,we=ht>>>13,dt=u[3]|0,xe=dt&8191,_e=dt>>>13,pt=u[4]|0,Te=pt&8191,Me=pt>>>13,Rs=u[5]|0,Ie=Rs&8191,Ce=Rs>>>13,Ps=u[6]|0,Be=Ps&8191,Oe=Ps>>>13,Ns=u[7]|0,Re=Ns&8191,Pe=Ns>>>13,ks=u[8]|0,Ne=ks&8191,ke=ks>>>13,Ls=u[9]|0,Le=Ls&8191,De=Ls>>>13;d.negative=l.negative^b.negative,d.length=19,p=Math.imul(y,pe),c=Math.imul(y,me),c=c+Math.imul(_,pe)|0,E=Math.imul(_,me);var _o=(F+p|0)+((c&8191)<<13)|0;F=(E+(c>>>13)|0)+(_o>>>26)|0,_o&=67108863,p=Math.imul(ie,pe),c=Math.imul(ie,me),c=c+Math.imul(ce,pe)|0,E=Math.imul(ce,me),p=p+Math.imul(y,de)|0,c=c+Math.imul(y,le)|0,c=c+Math.imul(_,de)|0,E=E+Math.imul(_,le)|0;var st=(F+p|0)+((c&8191)<<13)|0;F=(E+(c>>>13)|0)+(st>>>26)|0,st&=67108863,p=Math.imul(re,pe),c=Math.imul(re,me),c=c+Math.imul(m,pe)|0,E=Math.imul(m,me),p=p+Math.imul(ie,de)|0,c=c+Math.imul(ie,le)|0,c=c+Math.imul(ce,de)|0,E=E+Math.imul(ce,le)|0,p=p+Math.imul(y,ve)|0,c=c+Math.imul(y,we)|0,c=c+Math.imul(_,ve)|0,E=E+Math.imul(_,we)|0;var at=(F+p|0)+((c&8191)<<13)|0;F=(E+(c>>>13)|0)+(at>>>26)|0,at&=67108863,p=Math.imul(S,pe),c=Math.imul(S,me),c=c+Math.imul(N,pe)|0,E=Math.imul(N,me),p=p+Math.imul(re,de)|0,c=c+Math.imul(re,le)|0,c=c+Math.imul(m,de)|0,E=E+Math.imul(m,le)|0,p=p+Math.imul(ie,ve)|0,c=c+Math.imul(ie,we)|0,c=c+Math.imul(ce,ve)|0,E=E+Math.imul(ce,we)|0,p=p+Math.imul(y,xe)|0,c=c+Math.imul(y,_e)|0,c=c+Math.imul(_,xe)|0,E=E+Math.imul(_,_e)|0;var ii=(F+p|0)+((c&8191)<<13)|0;F=(E+(c>>>13)|0)+(ii>>>26)|0,ii&=67108863,p=Math.imul(P,pe),c=Math.imul(P,me),c=c+Math.imul(D,pe)|0,E=Math.imul(D,me),p=p+Math.imul(S,de)|0,c=c+Math.imul(S,le)|0,c=c+Math.imul(N,de)|0,E=E+Math.imul(N,le)|0,p=p+Math.imul(re,ve)|0,c=c+Math.imul(re,we)|0,c=c+Math.imul(m,ve)|0,E=E+Math.imul(m,we)|0,p=p+Math.imul(ie,xe)|0,c=c+Math.imul(ie,_e)|0,c=c+Math.imul(ce,xe)|0,E=E+Math.imul(ce,_e)|0,p=p+Math.imul(y,Te)|0,c=c+Math.imul(y,Me)|0,c=c+Math.imul(_,Te)|0,E=E+Math.imul(_,Me)|0;var oi=(F+p|0)+((c&8191)<<13)|0;F=(E+(c>>>13)|0)+(oi>>>26)|0,oi&=67108863,p=Math.imul(O,pe),c=Math.imul(O,me),c=c+Math.imul(k,pe)|0,E=Math.imul(k,me),p=p+Math.imul(P,de)|0,c=c+Math.imul(P,le)|0,c=c+Math.imul(D,de)|0,E=E+Math.imul(D,le)|0,p=p+Math.imul(S,ve)|0,c=c+Math.imul(S,we)|0,c=c+Math.imul(N,ve)|0,E=E+Math.imul(N,we)|0,p=p+Math.imul(re,xe)|0,c=c+Math.imul(re,_e)|0,c=c+Math.imul(m,xe)|0,E=E+Math.imul(m,_e)|0,p=p+Math.imul(ie,Te)|0,c=c+Math.imul(ie,Me)|0,c=c+Math.imul(ce,Te)|0,E=E+Math.imul(ce,Me)|0,p=p+Math.imul(y,Ie)|0,c=c+Math.imul(y,Ce)|0,c=c+Math.imul(_,Ie)|0,E=E+Math.imul(_,Ce)|0;var si=(F+p|0)+((c&8191)<<13)|0;F=(E+(c>>>13)|0)+(si>>>26)|0,si&=67108863,p=Math.imul(W,pe),c=Math.imul(W,me),c=c+Math.imul(Y,pe)|0,E=Math.imul(Y,me),p=p+Math.imul(O,de)|0,c=c+Math.imul(O,le)|0,c=c+Math.imul(k,de)|0,E=E+Math.imul(k,le)|0,p=p+Math.imul(P,ve)|0,c=c+Math.imul(P,we)|0,c=c+Math.imul(D,ve)|0,E=E+Math.imul(D,we)|0,p=p+Math.imul(S,xe)|0,c=c+Math.imul(S,_e)|0,c=c+Math.imul(N,xe)|0,E=E+Math.imul(N,_e)|0,p=p+Math.imul(re,Te)|0,c=c+Math.imul(re,Me)|0,c=c+Math.imul(m,Te)|0,E=E+Math.imul(m,Me)|0,p=p+Math.imul(ie,Ie)|0,c=c+Math.imul(ie,Ce)|0,c=c+Math.imul(ce,Ie)|0,E=E+Math.imul(ce,Ce)|0,p=p+Math.imul(y,Be)|0,c=c+Math.imul(y,Oe)|0,c=c+Math.imul(_,Be)|0,E=E+Math.imul(_,Oe)|0;var ai=(F+p|0)+((c&8191)<<13)|0;F=(E+(c>>>13)|0)+(ai>>>26)|0,ai&=67108863,p=Math.imul(te,pe),c=Math.imul(te,me),c=c+Math.imul(fe,pe)|0,E=Math.imul(fe,me),p=p+Math.imul(W,de)|0,c=c+Math.imul(W,le)|0,c=c+Math.imul(Y,de)|0,E=E+Math.imul(Y,le)|0,p=p+Math.imul(O,ve)|0,c=c+Math.imul(O,we)|0,c=c+Math.imul(k,ve)|0,E=E+Math.imul(k,we)|0,p=p+Math.imul(P,xe)|0,c=c+Math.imul(P,_e)|0,c=c+Math.imul(D,xe)|0,E=E+Math.imul(D,_e)|0,p=p+Math.imul(S,Te)|0,c=c+Math.imul(S,Me)|0,c=c+Math.imul(N,Te)|0,E=E+Math.imul(N,Me)|0,p=p+Math.imul(re,Ie)|0,c=c+Math.imul(re,Ce)|0,c=c+Math.imul(m,Ie)|0,E=E+Math.imul(m,Ce)|0,p=p+Math.imul(ie,Be)|0,c=c+Math.imul(ie,Oe)|0,c=c+Math.imul(ce,Be)|0,E=E+Math.imul(ce,Oe)|0,p=p+Math.imul(y,Re)|0,c=c+Math.imul(y,Pe)|0,c=c+Math.imul(_,Re)|0,E=E+Math.imul(_,Pe)|0;var fi=(F+p|0)+((c&8191)<<13)|0;F=(E+(c>>>13)|0)+(fi>>>26)|0,fi&=67108863,p=Math.imul(ae,pe),c=Math.imul(ae,me),c=c+Math.imul(ue,pe)|0,E=Math.imul(ue,me),p=p+Math.imul(te,de)|0,c=c+Math.imul(te,le)|0,c=c+Math.imul(fe,de)|0,E=E+Math.imul(fe,le)|0,p=p+Math.imul(W,ve)|0,c=c+Math.imul(W,we)|0,c=c+Math.imul(Y,ve)|0,E=E+Math.imul(Y,we)|0,p=p+Math.imul(O,xe)|0,c=c+Math.imul(O,_e)|0,c=c+Math.imul(k,xe)|0,E=E+Math.imul(k,_e)|0,p=p+Math.imul(P,Te)|0,c=c+Math.imul(P,Me)|0,c=c+Math.imul(D,Te)|0,E=E+Math.imul(D,Me)|0,p=p+Math.imul(S,Ie)|0,c=c+Math.imul(S,Ce)|0,c=c+Math.imul(N,Ie)|0,E=E+Math.imul(N,Ce)|0,p=p+Math.imul(re,Be)|0,c=c+Math.imul(re,Oe)|0,c=c+Math.imul(m,Be)|0,E=E+Math.imul(m,Oe)|0,p=p+Math.imul(ie,Re)|0,c=c+Math.imul(ie,Pe)|0,c=c+Math.imul(ce,Re)|0,E=E+Math.imul(ce,Pe)|0,p=p+Math.imul(y,Ne)|0,c=c+Math.imul(y,ke)|0,c=c+Math.imul(_,Ne)|0,E=E+Math.imul(_,ke)|0;var ci=(F+p|0)+((c&8191)<<13)|0;F=(E+(c>>>13)|0)+(ci>>>26)|0,ci&=67108863,p=Math.imul(ye,pe),c=Math.imul(ye,me),c=c+Math.imul(be,pe)|0,E=Math.imul(be,me),p=p+Math.imul(ae,de)|0,c=c+Math.imul(ae,le)|0,c=c+Math.imul(ue,de)|0,E=E+Math.imul(ue,le)|0,p=p+Math.imul(te,ve)|0,c=c+Math.imul(te,we)|0,c=c+Math.imul(fe,ve)|0,E=E+Math.imul(fe,we)|0,p=p+Math.imul(W,xe)|0,c=c+Math.imul(W,_e)|0,c=c+Math.imul(Y,xe)|0,E=E+Math.imul(Y,_e)|0,p=p+Math.imul(O,Te)|0,c=c+Math.imul(O,Me)|0,c=c+Math.imul(k,Te)|0,E=E+Math.imul(k,Me)|0,p=p+Math.imul(P,Ie)|0,c=c+Math.imul(P,Ce)|0,c=c+Math.imul(D,Ie)|0,E=E+Math.imul(D,Ce)|0,p=p+Math.imul(S,Be)|0,c=c+Math.imul(S,Oe)|0,c=c+Math.imul(N,Be)|0,E=E+Math.imul(N,Oe)|0,p=p+Math.imul(re,Re)|0,c=c+Math.imul(re,Pe)|0,c=c+Math.imul(m,Re)|0,E=E+Math.imul(m,Pe)|0,p=p+Math.imul(ie,Ne)|0,c=c+Math.imul(ie,ke)|0,c=c+Math.imul(ce,Ne)|0,E=E+Math.imul(ce,ke)|0,p=p+Math.imul(y,Le)|0,c=c+Math.imul(y,De)|0,c=c+Math.imul(_,Le)|0,E=E+Math.imul(_,De)|0;var ui=(F+p|0)+((c&8191)<<13)|0;F=(E+(c>>>13)|0)+(ui>>>26)|0,ui&=67108863,p=Math.imul(ye,de),c=Math.imul(ye,le),c=c+Math.imul(be,de)|0,E=Math.imul(be,le),p=p+Math.imul(ae,ve)|0,c=c+Math.imul(ae,we)|0,c=c+Math.imul(ue,ve)|0,E=E+Math.imul(ue,we)|0,p=p+Math.imul(te,xe)|0,c=c+Math.imul(te,_e)|0,c=c+Math.imul(fe,xe)|0,E=E+Math.imul(fe,_e)|0,p=p+Math.imul(W,Te)|0,c=c+Math.imul(W,Me)|0,c=c+Math.imul(Y,Te)|0,E=E+Math.imul(Y,Me)|0,p=p+Math.imul(O,Ie)|0,c=c+Math.imul(O,Ce)|0,c=c+Math.imul(k,Ie)|0,E=E+Math.imul(k,Ce)|0,p=p+Math.imul(P,Be)|0,c=c+Math.imul(P,Oe)|0,c=c+Math.imul(D,Be)|0,E=E+Math.imul(D,Oe)|0,p=p+Math.imul(S,Re)|0,c=c+Math.imul(S,Pe)|0,c=c+Math.imul(N,Re)|0,E=E+Math.imul(N,Pe)|0,p=p+Math.imul(re,Ne)|0,c=c+Math.imul(re,ke)|0,c=c+Math.imul(m,Ne)|0,E=E+Math.imul(m,ke)|0,p=p+Math.imul(ie,Le)|0,c=c+Math.imul(ie,De)|0,c=c+Math.imul(ce,Le)|0,E=E+Math.imul(ce,De)|0;var li=(F+p|0)+((c&8191)<<13)|0;F=(E+(c>>>13)|0)+(li>>>26)|0,li&=67108863,p=Math.imul(ye,ve),c=Math.imul(ye,we),c=c+Math.imul(be,ve)|0,E=Math.imul(be,we),p=p+Math.imul(ae,xe)|0,c=c+Math.imul(ae,_e)|0,c=c+Math.imul(ue,xe)|0,E=E+Math.imul(ue,_e)|0,p=p+Math.imul(te,Te)|0,c=c+Math.imul(te,Me)|0,c=c+Math.imul(fe,Te)|0,E=E+Math.imul(fe,Me)|0,p=p+Math.imul(W,Ie)|0,c=c+Math.imul(W,Ce)|0,c=c+Math.imul(Y,Ie)|0,E=E+Math.imul(Y,Ce)|0,p=p+Math.imul(O,Be)|0,c=c+Math.imul(O,Oe)|0,c=c+Math.imul(k,Be)|0,E=E+Math.imul(k,Oe)|0,p=p+Math.imul(P,Re)|0,c=c+Math.imul(P,Pe)|0,c=c+Math.imul(D,Re)|0,E=E+Math.imul(D,Pe)|0,p=p+Math.imul(S,Ne)|0,c=c+Math.imul(S,ke)|0,c=c+Math.imul(N,Ne)|0,E=E+Math.imul(N,ke)|0,p=p+Math.imul(re,Le)|0,c=c+Math.imul(re,De)|0,c=c+Math.imul(m,Le)|0,E=E+Math.imul(m,De)|0;var hi=(F+p|0)+((c&8191)<<13)|0;F=(E+(c>>>13)|0)+(hi>>>26)|0,hi&=67108863,p=Math.imul(ye,xe),c=Math.imul(ye,_e),c=c+Math.imul(be,xe)|0,E=Math.imul(be,_e),p=p+Math.imul(ae,Te)|0,c=c+Math.imul(ae,Me)|0,c=c+Math.imul(ue,Te)|0,E=E+Math.imul(ue,Me)|0,p=p+Math.imul(te,Ie)|0,c=c+Math.imul(te,Ce)|0,c=c+Math.imul(fe,Ie)|0,E=E+Math.imul(fe,Ce)|0,p=p+Math.imul(W,Be)|0,c=c+Math.imul(W,Oe)|0,c=c+Math.imul(Y,Be)|0,E=E+Math.imul(Y,Oe)|0,p=p+Math.imul(O,Re)|0,c=c+Math.imul(O,Pe)|0,c=c+Math.imul(k,Re)|0,E=E+Math.imul(k,Pe)|0,p=p+Math.imul(P,Ne)|0,c=c+Math.imul(P,ke)|0,c=c+Math.imul(D,Ne)|0,E=E+Math.imul(D,ke)|0,p=p+Math.imul(S,Le)|0,c=c+Math.imul(S,De)|0,c=c+Math.imul(N,Le)|0,E=E+Math.imul(N,De)|0;var di=(F+p|0)+((c&8191)<<13)|0;F=(E+(c>>>13)|0)+(di>>>26)|0,di&=67108863,p=Math.imul(ye,Te),c=Math.imul(ye,Me),c=c+Math.imul(be,Te)|0,E=Math.imul(be,Me),p=p+Math.imul(ae,Ie)|0,c=c+Math.imul(ae,Ce)|0,c=c+Math.imul(ue,Ie)|0,E=E+Math.imul(ue,Ce)|0,p=p+Math.imul(te,Be)|0,c=c+Math.imul(te,Oe)|0,c=c+Math.imul(fe,Be)|0,E=E+Math.imul(fe,Oe)|0,p=p+Math.imul(W,Re)|0,c=c+Math.imul(W,Pe)|0,c=c+Math.imul(Y,Re)|0,E=E+Math.imul(Y,Pe)|0,p=p+Math.imul(O,Ne)|0,c=c+Math.imul(O,ke)|0,c=c+Math.imul(k,Ne)|0,E=E+Math.imul(k,ke)|0,p=p+Math.imul(P,Le)|0,c=c+Math.imul(P,De)|0,c=c+Math.imul(D,Le)|0,E=E+Math.imul(D,De)|0;var pi=(F+p|0)+((c&8191)<<13)|0;F=(E+(c>>>13)|0)+(pi>>>26)|0,pi&=67108863,p=Math.imul(ye,Ie),c=Math.imul(ye,Ce),c=c+Math.imul(be,Ie)|0,E=Math.imul(be,Ce),p=p+Math.imul(ae,Be)|0,c=c+Math.imul(ae,Oe)|0,c=c+Math.imul(ue,Be)|0,E=E+Math.imul(ue,Oe)|0,p=p+Math.imul(te,Re)|0,c=c+Math.imul(te,Pe)|0,c=c+Math.imul(fe,Re)|0,E=E+Math.imul(fe,Pe)|0,p=p+Math.imul(W,Ne)|0,c=c+Math.imul(W,ke)|0,c=c+Math.imul(Y,Ne)|0,E=E+Math.imul(Y,ke)|0,p=p+Math.imul(O,Le)|0,c=c+Math.imul(O,De)|0,c=c+Math.imul(k,Le)|0,E=E+Math.imul(k,De)|0;var gi=(F+p|0)+((c&8191)<<13)|0;F=(E+(c>>>13)|0)+(gi>>>26)|0,gi&=67108863,p=Math.imul(ye,Be),c=Math.imul(ye,Oe),c=c+Math.imul(be,Be)|0,E=Math.imul(be,Oe),p=p+Math.imul(ae,Re)|0,c=c+Math.imul(ae,Pe)|0,c=c+Math.imul(ue,Re)|0,E=E+Math.imul(ue,Pe)|0,p=p+Math.imul(te,Ne)|0,c=c+Math.imul(te,ke)|0,c=c+Math.imul(fe,Ne)|0,E=E+Math.imul(fe,ke)|0,p=p+Math.imul(W,Le)|0,c=c+Math.imul(W,De)|0,c=c+Math.imul(Y,Le)|0,E=E+Math.imul(Y,De)|0;var mi=(F+p|0)+((c&8191)<<13)|0;F=(E+(c>>>13)|0)+(mi>>>26)|0,mi&=67108863,p=Math.imul(ye,Re),c=Math.imul(ye,Pe),c=c+Math.imul(be,Re)|0,E=Math.imul(be,Pe),p=p+Math.imul(ae,Ne)|0,c=c+Math.imul(ae,ke)|0,c=c+Math.imul(ue,Ne)|0,E=E+Math.imul(ue,ke)|0,p=p+Math.imul(te,Le)|0,c=c+Math.imul(te,De)|0,c=c+Math.imul(fe,Le)|0,E=E+Math.imul(fe,De)|0;var yi=(F+p|0)+((c&8191)<<13)|0;F=(E+(c>>>13)|0)+(yi>>>26)|0,yi&=67108863,p=Math.imul(ye,Ne),c=Math.imul(ye,ke),c=c+Math.imul(be,Ne)|0,E=Math.imul(be,ke),p=p+Math.imul(ae,Le)|0,c=c+Math.imul(ae,De)|0,c=c+Math.imul(ue,Le)|0,E=E+Math.imul(ue,De)|0;var bi=(F+p|0)+((c&8191)<<13)|0;F=(E+(c>>>13)|0)+(bi>>>26)|0,bi&=67108863,p=Math.imul(ye,Le),c=Math.imul(ye,De),c=c+Math.imul(be,Le)|0,E=Math.imul(be,De);var vi=(F+p|0)+((c&8191)<<13)|0;return F=(E+(c>>>13)|0)+(vi>>>26)|0,vi&=67108863,v[0]=_o,v[1]=st,v[2]=at,v[3]=ii,v[4]=oi,v[5]=si,v[6]=ai,v[7]=fi,v[8]=ci,v[9]=ui,v[10]=li,v[11]=hi,v[12]=di,v[13]=pi,v[14]=gi,v[15]=mi,v[16]=yi,v[17]=bi,v[18]=vi,F!==0&&(v[19]=F,d.length++),d};Math.imul||(C=A);function j(L,l,b){b.negative=l.negative^L.negative,b.length=L.length+l.length;for(var d=0,a=0,u=0;u<b.length-1;u++){var v=a;a=0;for(var F=d&67108863,p=Math.min(u,l.length-1),c=Math.max(0,u-L.length+1);c<=p;c++){var E=u-c,M=L.words[E]|0,y=l.words[c]|0,_=M*y,ne=_&67108863;v=v+(_/67108864|0)|0,ne=ne+F|0,F=ne&67108863,v=v+(ne>>>26)|0,a+=v>>>26,v&=67108863}b.words[u]=F,d=v,v=a}return d!==0?b.words[u]=d:b.length--,b.strip()}function G(L,l,b){var d=new $;return d.mulp(L,l,b)}i.prototype.mulTo=function(l,b){var d,a=this.length+l.length;return this.length===10&&l.length===10?d=C(this,l,b):a<63?d=A(this,l,b):a<1024?d=j(this,l,b):d=G(this,l,b),d};function $(L,l){this.x=L,this.y=l}$.prototype.makeRBT=function(l){for(var b=new Array(l),d=i.prototype._countBits(l)-1,a=0;a<l;a++)b[a]=this.revBin(a,d,l);return b},$.prototype.revBin=function(l,b,d){if(l===0||l===d-1)return l;for(var a=0,u=0;u<b;u++)a|=(l&1)<<b-u-1,l>>=1;return a},$.prototype.permute=function(l,b,d,a,u,v){for(var F=0;F<v;F++)a[F]=b[l[F]],u[F]=d[l[F]]},$.prototype.transform=function(l,b,d,a,u,v){this.permute(v,l,b,d,a,u);for(var F=1;F<u;F<<=1)for(var p=F<<1,c=Math.cos(2*Math.PI/p),E=Math.sin(2*Math.PI/p),M=0;M<u;M+=p)for(var y=c,_=E,ne=0;ne<F;ne++){var ie=d[M+ne],ce=a[M+ne],he=d[M+ne+F],re=a[M+ne+F],m=y*he-_*re;re=y*re+_*he,he=m,d[M+ne]=ie+he,a[M+ne]=ce+re,d[M+ne+F]=ie-he,a[M+ne+F]=ce-re,ne!==p&&(m=c*y-E*_,_=c*_+E*y,y=m)}},$.prototype.guessLen13b=function(l,b){var d=Math.max(b,l)|1,a=d&1,u=0;for(d=d/2|0;d;d=d>>>1)u++;return 1<<u+1+a},$.prototype.conjugate=function(l,b,d){if(!(d<=1))for(var a=0;a<d/2;a++){var u=l[a];l[a]=l[d-a-1],l[d-a-1]=u,u=b[a],b[a]=-b[d-a-1],b[d-a-1]=-u}},$.prototype.normalize13b=function(l,b){for(var d=0,a=0;a<b/2;a++){var u=Math.round(l[2*a+1]/b)*8192+Math.round(l[2*a]/b)+d;l[a]=u&67108863,u<67108864?d=0:d=u/67108864|0}return l},$.prototype.convert13b=function(l,b,d,a){for(var u=0,v=0;v<b;v++)u=u+(l[v]|0),d[2*v]=u&8191,u=u>>>13,d[2*v+1]=u&8191,u=u>>>13;for(v=2*b;v<a;++v)d[v]=0;t(u===0),t((u&-8192)===0)},$.prototype.stub=function(l){for(var b=new Array(l),d=0;d<l;d++)b[d]=0;return b},$.prototype.mulp=function(l,b,d){var a=2*this.guessLen13b(l.length,b.length),u=this.makeRBT(a),v=this.stub(a),F=new Array(a),p=new Array(a),c=new Array(a),E=new Array(a),M=new Array(a),y=new Array(a),_=d.words;_.length=a,this.convert13b(l.words,l.length,F,a),this.convert13b(b.words,b.length,E,a),this.transform(F,v,p,c,a,u),this.transform(E,v,M,y,a,u);for(var ne=0;ne<a;ne++){var ie=p[ne]*M[ne]-c[ne]*y[ne];c[ne]=p[ne]*y[ne]+c[ne]*M[ne],p[ne]=ie}return this.conjugate(p,c,a),this.transform(p,c,_,v,a,u),this.conjugate(_,v,a),this.normalize13b(_,a),d.negative=l.negative^b.negative,d.length=l.length+b.length,d.strip()},i.prototype.mul=function(l){var b=new i(null);return b.words=new Array(this.length+l.length),this.mulTo(l,b)},i.prototype.mulf=function(l){var b=new i(null);return b.words=new Array(this.length+l.length),G(this,l,b)},i.prototype.imul=function(l){return this.clone().mulTo(l,this)},i.prototype.imuln=function(l){t(typeof l=="number"),t(l<67108864);for(var b=0,d=0;d<this.length;d++){var a=(this.words[d]|0)*l,u=(a&67108863)+(b&67108863);b>>=26,b+=a/67108864|0,b+=u>>>26,this.words[d]=u&67108863}return b!==0&&(this.words[d]=b,this.length++),this},i.prototype.muln=function(l){return this.clone().imuln(l)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(l){var b=I(l);if(b.length===0)return new i(1);for(var d=this,a=0;a<b.length&&b[a]===0;a++,d=d.sqr());if(++a<b.length)for(var u=d.sqr();a<b.length;a++,u=u.sqr())b[a]!==0&&(d=d.mul(u));return d},i.prototype.iushln=function(l){t(typeof l=="number"&&l>=0);var b=l%26,d=(l-b)/26,a=67108863>>>26-b<<26-b,u;if(b!==0){var v=0;for(u=0;u<this.length;u++){var F=this.words[u]&a,p=(this.words[u]|0)-F<<b;this.words[u]=p|v,v=F>>>26-b}v&&(this.words[u]=v,this.length++)}if(d!==0){for(u=this.length-1;u>=0;u--)this.words[u+d]=this.words[u];for(u=0;u<d;u++)this.words[u]=0;this.length+=d}return this.strip()},i.prototype.ishln=function(l){return t(this.negative===0),this.iushln(l)},i.prototype.iushrn=function(l,b,d){t(typeof l=="number"&&l>=0);var a;b?a=(b-b%26)/26:a=0;var u=l%26,v=Math.min((l-u)/26,this.length),F=67108863^67108863>>>u<<u,p=d;if(a-=v,a=Math.max(0,a),p){for(var c=0;c<v;c++)p.words[c]=this.words[c];p.length=v}if(v!==0)if(this.length>v)for(this.length-=v,c=0;c<this.length;c++)this.words[c]=this.words[c+v];else this.words[0]=0,this.length=1;var E=0;for(c=this.length-1;c>=0&&(E!==0||c>=a);c--){var M=this.words[c]|0;this.words[c]=E<<26-u|M>>>u,E=M&F}return p&&E!==0&&(p.words[p.length++]=E),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(l,b,d){return t(this.negative===0),this.iushrn(l,b,d)},i.prototype.shln=function(l){return this.clone().ishln(l)},i.prototype.ushln=function(l){return this.clone().iushln(l)},i.prototype.shrn=function(l){return this.clone().ishrn(l)},i.prototype.ushrn=function(l){return this.clone().iushrn(l)},i.prototype.testn=function(l){t(typeof l=="number"&&l>=0);var b=l%26,d=(l-b)/26,a=1<<b;if(this.length<=d)return!1;var u=this.words[d];return!!(u&a)},i.prototype.imaskn=function(l){t(typeof l=="number"&&l>=0);var b=l%26,d=(l-b)/26;if(t(this.negative===0,"imaskn works only with positive numbers"),this.length<=d)return this;if(b!==0&&d++,this.length=Math.min(d,this.length),b!==0){var a=67108863^67108863>>>b<<b;this.words[this.length-1]&=a}return this.strip()},i.prototype.maskn=function(l){return this.clone().imaskn(l)},i.prototype.iaddn=function(l){return t(typeof l=="number"),t(l<67108864),l<0?this.isubn(-l):this.negative!==0?this.length===1&&(this.words[0]|0)<l?(this.words[0]=l-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(l),this.negative=1,this):this._iaddn(l)},i.prototype._iaddn=function(l){this.words[0]+=l;for(var b=0;b<this.length&&this.words[b]>=67108864;b++)this.words[b]-=67108864,b===this.length-1?this.words[b+1]=1:this.words[b+1]++;return this.length=Math.max(this.length,b+1),this},i.prototype.isubn=function(l){if(t(typeof l=="number"),t(l<67108864),l<0)return this.iaddn(-l);if(this.negative!==0)return this.negative=0,this.iaddn(l),this.negative=1,this;if(this.words[0]-=l,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var b=0;b<this.length&&this.words[b]<0;b++)this.words[b]+=67108864,this.words[b+1]-=1;return this.strip()},i.prototype.addn=function(l){return this.clone().iaddn(l)},i.prototype.subn=function(l){return this.clone().isubn(l)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(l,b,d){var a=l.length+d,u;this._expand(a);var v,F=0;for(u=0;u<l.length;u++){v=(this.words[u+d]|0)+F;var p=(l.words[u]|0)*b;v-=p&67108863,F=(v>>26)-(p/67108864|0),this.words[u+d]=v&67108863}for(;u<this.length-d;u++)v=(this.words[u+d]|0)+F,F=v>>26,this.words[u+d]=v&67108863;if(F===0)return this.strip();for(t(F===-1),F=0,u=0;u<this.length;u++)v=-(this.words[u]|0)+F,F=v>>26,this.words[u]=v&67108863;return this.negative=1,this.strip()},i.prototype._wordDiv=function(l,b){var d=this.length-l.length,a=this.clone(),u=l,v=u.words[u.length-1]|0,F=this._countBits(v);d=26-F,d!==0&&(u=u.ushln(d),a.iushln(d),v=u.words[u.length-1]|0);var p=a.length-u.length,c;if(b!=="mod"){c=new i(null),c.length=p+1,c.words=new Array(c.length);for(var E=0;E<c.length;E++)c.words[E]=0}var M=a.clone()._ishlnsubmul(u,1,p);M.negative===0&&(a=M,c&&(c.words[p]=1));for(var y=p-1;y>=0;y--){var _=(a.words[u.length+y]|0)*67108864+(a.words[u.length+y-1]|0);for(_=Math.min(_/v|0,67108863),a._ishlnsubmul(u,_,y);a.negative!==0;)_--,a.negative=0,a._ishlnsubmul(u,1,y),a.isZero()||(a.negative^=1);c&&(c.words[y]=_)}return c&&c.strip(),a.strip(),b!=="div"&&d!==0&&a.iushrn(d),{div:c||null,mod:a}},i.prototype.divmod=function(l,b,d){if(t(!l.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var a,u,v;return this.negative!==0&&l.negative===0?(v=this.neg().divmod(l,b),b!=="mod"&&(a=v.div.neg()),b!=="div"&&(u=v.mod.neg(),d&&u.negative!==0&&u.iadd(l)),{div:a,mod:u}):this.negative===0&&l.negative!==0?(v=this.divmod(l.neg(),b),b!=="mod"&&(a=v.div.neg()),{div:a,mod:v.mod}):(this.negative&l.negative)!==0?(v=this.neg().divmod(l.neg(),b),b!=="div"&&(u=v.mod.neg(),d&&u.negative!==0&&u.isub(l)),{div:v.div,mod:u}):l.length>this.length||this.cmp(l)<0?{div:new i(0),mod:this}:l.length===1?b==="div"?{div:this.divn(l.words[0]),mod:null}:b==="mod"?{div:null,mod:new i(this.modn(l.words[0]))}:{div:this.divn(l.words[0]),mod:new i(this.modn(l.words[0]))}:this._wordDiv(l,b)},i.prototype.div=function(l){return this.divmod(l,"div",!1).div},i.prototype.mod=function(l){return this.divmod(l,"mod",!1).mod},i.prototype.umod=function(l){return this.divmod(l,"mod",!0).mod},i.prototype.divRound=function(l){var b=this.divmod(l);if(b.mod.isZero())return b.div;var d=b.div.negative!==0?b.mod.isub(l):b.mod,a=l.ushrn(1),u=l.andln(1),v=d.cmp(a);return v<0||u===1&&v===0?b.div:b.div.negative!==0?b.div.isubn(1):b.div.iaddn(1)},i.prototype.modn=function(l){t(l<=67108863);for(var b=(1<<26)%l,d=0,a=this.length-1;a>=0;a--)d=(b*d+(this.words[a]|0))%l;return d},i.prototype.idivn=function(l){t(l<=67108863);for(var b=0,d=this.length-1;d>=0;d--){var a=(this.words[d]|0)+b*67108864;this.words[d]=a/l|0,b=a%l}return this.strip()},i.prototype.divn=function(l){return this.clone().idivn(l)},i.prototype.egcd=function(l){t(l.negative===0),t(!l.isZero());var b=this,d=l.clone();b.negative!==0?b=b.umod(l):b=b.clone();for(var a=new i(1),u=new i(0),v=new i(0),F=new i(1),p=0;b.isEven()&&d.isEven();)b.iushrn(1),d.iushrn(1),++p;for(var c=d.clone(),E=b.clone();!b.isZero();){for(var M=0,y=1;(b.words[0]&y)===0&&M<26;++M,y<<=1);if(M>0)for(b.iushrn(M);M-- >0;)(a.isOdd()||u.isOdd())&&(a.iadd(c),u.isub(E)),a.iushrn(1),u.iushrn(1);for(var _=0,ne=1;(d.words[0]&ne)===0&&_<26;++_,ne<<=1);if(_>0)for(d.iushrn(_);_-- >0;)(v.isOdd()||F.isOdd())&&(v.iadd(c),F.isub(E)),v.iushrn(1),F.iushrn(1);b.cmp(d)>=0?(b.isub(d),a.isub(v),u.isub(F)):(d.isub(b),v.isub(a),F.isub(u))}return{a:v,b:F,gcd:d.iushln(p)}},i.prototype._invmp=function(l){t(l.negative===0),t(!l.isZero());var b=this,d=l.clone();b.negative!==0?b=b.umod(l):b=b.clone();for(var a=new i(1),u=new i(0),v=d.clone();b.cmpn(1)>0&&d.cmpn(1)>0;){for(var F=0,p=1;(b.words[0]&p)===0&&F<26;++F,p<<=1);if(F>0)for(b.iushrn(F);F-- >0;)a.isOdd()&&a.iadd(v),a.iushrn(1);for(var c=0,E=1;(d.words[0]&E)===0&&c<26;++c,E<<=1);if(c>0)for(d.iushrn(c);c-- >0;)u.isOdd()&&u.iadd(v),u.iushrn(1);b.cmp(d)>=0?(b.isub(d),a.isub(u)):(d.isub(b),u.isub(a))}var M;return b.cmpn(1)===0?M=a:M=u,M.cmpn(0)<0&&M.iadd(l),M},i.prototype.gcd=function(l){if(this.isZero())return l.abs();if(l.isZero())return this.abs();var b=this.clone(),d=l.clone();b.negative=0,d.negative=0;for(var a=0;b.isEven()&&d.isEven();a++)b.iushrn(1),d.iushrn(1);do{for(;b.isEven();)b.iushrn(1);for(;d.isEven();)d.iushrn(1);var u=b.cmp(d);if(u<0){var v=b;b=d,d=v}else if(u===0||d.cmpn(1)===0)break;b.isub(d)}while(!0);return d.iushln(a)},i.prototype.invm=function(l){return this.egcd(l).a.umod(l)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(l){return this.words[0]&l},i.prototype.bincn=function(l){t(typeof l=="number");var b=l%26,d=(l-b)/26,a=1<<b;if(this.length<=d)return this._expand(d+1),this.words[d]|=a,this;for(var u=a,v=d;u!==0&&v<this.length;v++){var F=this.words[v]|0;F+=u,u=F>>>26,F&=67108863,this.words[v]=F}return u!==0&&(this.words[v]=u,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(l){var b=l<0;if(this.negative!==0&&!b)return-1;if(this.negative===0&&b)return 1;this.strip();var d;if(this.length>1)d=1;else{b&&(l=-l),t(l<=67108863,"Number is too big");var a=this.words[0]|0;d=a===l?0:a<l?-1:1}return this.negative!==0?-d|0:d},i.prototype.cmp=function(l){if(this.negative!==0&&l.negative===0)return-1;if(this.negative===0&&l.negative!==0)return 1;var b=this.ucmp(l);return this.negative!==0?-b|0:b},i.prototype.ucmp=function(l){if(this.length>l.length)return 1;if(this.length<l.length)return-1;for(var b=0,d=this.length-1;d>=0;d--){var a=this.words[d]|0,u=l.words[d]|0;if(a!==u){a<u?b=-1:a>u&&(b=1);break}}return b},i.prototype.gtn=function(l){return this.cmpn(l)===1},i.prototype.gt=function(l){return this.cmp(l)===1},i.prototype.gten=function(l){return this.cmpn(l)>=0},i.prototype.gte=function(l){return this.cmp(l)>=0},i.prototype.ltn=function(l){return this.cmpn(l)===-1},i.prototype.lt=function(l){return this.cmp(l)===-1},i.prototype.lten=function(l){return this.cmpn(l)<=0},i.prototype.lte=function(l){return this.cmp(l)<=0},i.prototype.eqn=function(l){return this.cmpn(l)===0},i.prototype.eq=function(l){return this.cmp(l)===0},i.red=function(l){return new J(l)},i.prototype.toRed=function(l){return t(!this.red,"Already a number in reduction context"),t(this.negative===0,"red works only with positives"),l.convertTo(this)._forceRed(l)},i.prototype.fromRed=function(){return t(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(l){return this.red=l,this},i.prototype.forceRed=function(l){return t(!this.red,"Already a number in reduction context"),this._forceRed(l)},i.prototype.redAdd=function(l){return t(this.red,"redAdd works only with red numbers"),this.red.add(this,l)},i.prototype.redIAdd=function(l){return t(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,l)},i.prototype.redSub=function(l){return t(this.red,"redSub works only with red numbers"),this.red.sub(this,l)},i.prototype.redISub=function(l){return t(this.red,"redISub works only with red numbers"),this.red.isub(this,l)},i.prototype.redShl=function(l){return t(this.red,"redShl works only with red numbers"),this.red.shl(this,l)},i.prototype.redMul=function(l){return t(this.red,"redMul works only with red numbers"),this.red._verify2(this,l),this.red.mul(this,l)},i.prototype.redIMul=function(l){return t(this.red,"redMul works only with red numbers"),this.red._verify2(this,l),this.red.imul(this,l)},i.prototype.redSqr=function(){return t(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return t(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return t(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return t(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return t(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(l){return t(this.red&&!l.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,l)};var Z={k256:null,p224:null,p192:null,p25519:null};function ee(L,l){this.name=L,this.p=new i(l,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}ee.prototype._tmp=function(){var l=new i(null);return l.words=new Array(Math.ceil(this.n/13)),l},ee.prototype.ireduce=function(l){var b=l,d;do this.split(b,this.tmp),b=this.imulK(b),b=b.iadd(this.tmp),d=b.bitLength();while(d>this.n);var a=d<this.n?-1:b.ucmp(this.p);return a===0?(b.words[0]=0,b.length=1):a>0?b.isub(this.p):b.strip!==void 0?b.strip():b._strip(),b},ee.prototype.split=function(l,b){l.iushrn(this.n,0,b)},ee.prototype.imulK=function(l){return l.imul(this.k)};function se(){ee.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}n(se,ee),se.prototype.split=function(l,b){for(var d=4194303,a=Math.min(l.length,9),u=0;u<a;u++)b.words[u]=l.words[u];if(b.length=a,l.length<=9){l.words[0]=0,l.length=1;return}var v=l.words[9];for(b.words[b.length++]=v&d,u=10;u<l.length;u++){var F=l.words[u]|0;l.words[u-10]=(F&d)<<4|v>>>22,v=F}v>>>=22,l.words[u-10]=v,v===0&&l.length>10?l.length-=10:l.length-=9},se.prototype.imulK=function(l){l.words[l.length]=0,l.words[l.length+1]=0,l.length+=2;for(var b=0,d=0;d<l.length;d++){var a=l.words[d]|0;b+=a*977,l.words[d]=b&67108863,b=a*64+(b/67108864|0)}return l.words[l.length-1]===0&&(l.length--,l.words[l.length-1]===0&&l.length--),l};function V(){ee.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}n(V,ee);function q(){ee.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}n(q,ee);function z(){ee.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}n(z,ee),z.prototype.imulK=function(l){for(var b=0,d=0;d<l.length;d++){var a=(l.words[d]|0)*19+b,u=a&67108863;a>>>=26,l.words[d]=u,b=a}return b!==0&&(l.words[l.length++]=b),l},i._prime=function(l){if(Z[l])return Z[l];var b;if(l==="k256")b=new se;else if(l==="p224")b=new V;else if(l==="p192")b=new q;else if(l==="p25519")b=new z;else throw new Error("Unknown prime "+l);return Z[l]=b,b};function J(L){if(typeof L=="string"){var l=i._prime(L);this.m=l.p,this.prime=l}else t(L.gtn(1),"modulus must be greater than 1"),this.m=L,this.prime=null}J.prototype._verify1=function(l){t(l.negative===0,"red works only with positives"),t(l.red,"red works only with red numbers")},J.prototype._verify2=function(l,b){t((l.negative|b.negative)===0,"red works only with positives"),t(l.red&&l.red===b.red,"red works only with red numbers")},J.prototype.imod=function(l){return this.prime?this.prime.ireduce(l)._forceRed(this):l.umod(this.m)._forceRed(this)},J.prototype.neg=function(l){return l.isZero()?l.clone():this.m.sub(l)._forceRed(this)},J.prototype.add=function(l,b){this._verify2(l,b);var d=l.add(b);return d.cmp(this.m)>=0&&d.isub(this.m),d._forceRed(this)},J.prototype.iadd=function(l,b){this._verify2(l,b);var d=l.iadd(b);return d.cmp(this.m)>=0&&d.isub(this.m),d},J.prototype.sub=function(l,b){this._verify2(l,b);var d=l.sub(b);return d.cmpn(0)<0&&d.iadd(this.m),d._forceRed(this)},J.prototype.isub=function(l,b){this._verify2(l,b);var d=l.isub(b);return d.cmpn(0)<0&&d.iadd(this.m),d},J.prototype.shl=function(l,b){return this._verify1(l),this.imod(l.ushln(b))},J.prototype.imul=function(l,b){return this._verify2(l,b),this.imod(l.imul(b))},J.prototype.mul=function(l,b){return this._verify2(l,b),this.imod(l.mul(b))},J.prototype.isqr=function(l){return this.imul(l,l.clone())},J.prototype.sqr=function(l){return this.mul(l,l)},J.prototype.sqrt=function(l){if(l.isZero())return l.clone();var b=this.m.andln(3);if(t(b%2===1),b===3){var d=this.m.add(new i(1)).iushrn(2);return this.pow(l,d)}for(var a=this.m.subn(1),u=0;!a.isZero()&&a.andln(1)===0;)u++,a.iushrn(1);t(!a.isZero());var v=new i(1).toRed(this),F=v.redNeg(),p=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new i(2*c*c).toRed(this);this.pow(c,p).cmp(F)!==0;)c.redIAdd(F);for(var E=this.pow(c,a),M=this.pow(l,a.addn(1).iushrn(1)),y=this.pow(l,a),_=u;y.cmp(v)!==0;){for(var ne=y,ie=0;ne.cmp(v)!==0;ie++)ne=ne.redSqr();t(ie<_);var ce=this.pow(E,new i(1).iushln(_-ie-1));M=M.redMul(ce),E=ce.redSqr(),y=y.redMul(E),_=ie}return M},J.prototype.invm=function(l){var b=l._invmp(this.m);return b.negative!==0?(b.negative=0,this.imod(b).redNeg()):this.imod(b)},J.prototype.pow=function(l,b){if(b.isZero())return new i(1).toRed(this);if(b.cmpn(1)===0)return l.clone();var d=4,a=new Array(1<<d);a[0]=new i(1).toRed(this),a[1]=l;for(var u=2;u<a.length;u++)a[u]=this.mul(a[u-1],l);var v=a[0],F=0,p=0,c=b.bitLength()%26;for(c===0&&(c=26),u=b.length-1;u>=0;u--){for(var E=b.words[u],M=c-1;M>=0;M--){var y=E>>M&1;if(v!==a[0]&&(v=this.sqr(v)),y===0&&F===0){p=0;continue}F<<=1,F|=y,p++,!(p!==d&&(u!==0||M!==0))&&(v=this.mul(v,a[F]),p=0,F=0)}c=26}return v},J.prototype.convertTo=function(l){var b=l.umod(this.m);return b===l?b.clone():b},J.prototype.convertFrom=function(l){var b=l.clone();return b.red=null,b},i.mont=function(l){return new H(l)};function H(L){J.call(this,L),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}n(H,J),H.prototype.convertTo=function(l){return this.imod(l.ushln(this.shift))},H.prototype.convertFrom=function(l){var b=this.imod(l.mul(this.rinv));return b.red=null,b},H.prototype.imul=function(l,b){if(l.isZero()||b.isZero())return l.words[0]=0,l.length=1,l;var d=l.imul(b),a=d.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),u=d.isub(a).iushrn(this.shift),v=u;return u.cmp(this.m)>=0?v=u.isub(this.m):u.cmpn(0)<0&&(v=u.iadd(this.m)),v._forceRed(this)},H.prototype.mul=function(l,b){if(l.isZero()||b.isZero())return new i(0)._forceRed(this);var d=l.mul(b),a=d.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),u=d.isub(a).iushrn(this.shift),v=u;return u.cmp(this.m)>=0?v=u.isub(this.m):u.cmpn(0)<0&&(v=u.iadd(this.m)),v._forceRed(this)},H.prototype.invm=function(l){var b=this.imod(l._invmp(this.m).mul(this.r2));return b._forceRed(this)}})(typeof C0>"u"||C0,Jb)});var Kc=X((_I,Yb)=>{"use strict";var Hc=Tn(),es=Hc.Buffer,hr={},dr;for(dr in Hc)!Hc.hasOwnProperty(dr)||dr==="SlowBuffer"||dr==="Buffer"||(hr[dr]=Hc[dr]);var ts=hr.Buffer={};for(dr in es)!es.hasOwnProperty(dr)||dr==="allocUnsafe"||dr==="allocUnsafeSlow"||(ts[dr]=es[dr]);hr.Buffer.prototype=es.prototype;(!ts.from||ts.from===Uint8Array.from)&&(ts.from=function(r,e,t){if(typeof r=="number")throw new TypeError('The "value" argument must not be of type number. Received type '+typeof r);if(r&&typeof r.length>"u")throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r);return es(r,e,t)});ts.alloc||(ts.alloc=function(r,e,t){if(typeof r!="number")throw new TypeError('The "size" argument must be of type number. Received type '+typeof r);if(r<0||r>=2*(1<<30))throw new RangeError('The value "'+r+'" is invalid for option "size"');var n=es(r);return!e||e.length===0?n.fill(0):typeof t=="string"?n.fill(e,t):n.fill(e),n});if(!hr.kStringMaxLength)try{hr.kStringMaxLength=process.binding("buffer").kStringMaxLength}catch{}hr.constants||(hr.constants={MAX_LENGTH:hr.kMaxLength},hr.kStringMaxLength&&(hr.constants.MAX_STRING_LENGTH=hr.kStringMaxLength));Yb.exports=hr});var zc=X(Qb=>{"use strict";var yS=Qt();function pr(r){this._reporterState={obj:null,path:[],options:r||{},errors:[]}}Qb.Reporter=pr;pr.prototype.isError=function(e){return e instanceof rs};pr.prototype.save=function(){let e=this._reporterState;return{obj:e.obj,pathLen:e.path.length}};pr.prototype.restore=function(e){let t=this._reporterState;t.obj=e.obj,t.path=t.path.slice(0,e.pathLen)};pr.prototype.enterKey=function(e){return this._reporterState.path.push(e)};pr.prototype.exitKey=function(e){let t=this._reporterState;t.path=t.path.slice(0,e-1)};pr.prototype.leaveKey=function(e,t,n){let i=this._reporterState;this.exitKey(e),i.obj!==null&&(i.obj[t]=n)};pr.prototype.path=function(){return this._reporterState.path.join("/")};pr.prototype.enterObject=function(){let e=this._reporterState,t=e.obj;return e.obj={},t};pr.prototype.leaveObject=function(e){let t=this._reporterState,n=t.obj;return t.obj=e,n};pr.prototype.error=function(e){let t,n=this._reporterState,i=e instanceof rs;if(i?t=e:t=new rs(n.path.map(function(o){return"["+JSON.stringify(o)+"]"}).join(""),e.message||e,e.stack),!n.options.partial)throw t;return i||n.errors.push(t),t};pr.prototype.wrapResult=function(e){let t=this._reporterState;return t.options.partial?{result:this.isError(e)?null:e,errors:t.errors}:e};function rs(r,e){this.path=r,this.rethrow(e)}yS(rs,Error);rs.prototype.rethrow=function(e){if(this.message=e+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,rs),!this.stack)try{throw new Error(this.message)}catch(t){this.stack=t.stack}return this}});var os=X(B0=>{"use strict";var bS=Qt(),Gc=zc().Reporter,ns=Kc().Buffer;function gr(r,e){if(Gc.call(this,e),!ns.isBuffer(r)){this.error("Input not Buffer");return}this.base=r,this.offset=0,this.length=r.length}bS(gr,Gc);B0.DecoderBuffer=gr;gr.isDecoderBuffer=function(e){return e instanceof gr?!0:typeof e=="object"&&ns.isBuffer(e.base)&&e.constructor.name==="DecoderBuffer"&&typeof e.offset=="number"&&typeof e.length=="number"&&typeof e.save=="function"&&typeof e.restore=="function"&&typeof e.isEmpty=="function"&&typeof e.readUInt8=="function"&&typeof e.skip=="function"&&typeof e.raw=="function"};gr.prototype.save=function(){return{offset:this.offset,reporter:Gc.prototype.save.call(this)}};gr.prototype.restore=function(e){let t=new gr(this.base);return t.offset=e.offset,t.length=this.offset,this.offset=e.offset,Gc.prototype.restore.call(this,e.reporter),t};gr.prototype.isEmpty=function(){return this.offset===this.length};gr.prototype.readUInt8=function(e){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(e||"DecoderBuffer overrun")};gr.prototype.skip=function(e,t){if(!(this.offset+e<=this.length))return this.error(t||"DecoderBuffer overrun");let n=new gr(this.base);return n._reporterState=this._reporterState,n.offset=this.offset,n.length=this.offset+e,this.offset+=e,n};gr.prototype.raw=function(e){return this.base.slice(e?e.offset:this.offset,this.length)};function is(r,e){if(Array.isArray(r))this.length=0,this.value=r.map(function(t){return is.isEncoderBuffer(t)||(t=new is(t,e)),this.length+=t.length,t},this);else if(typeof r=="number"){if(!(0<=r&&r<=255))return e.error("non-byte EncoderBuffer value");this.value=r,this.length=1}else if(typeof r=="string")this.value=r,this.length=ns.byteLength(r);else if(ns.isBuffer(r))this.value=r,this.length=r.length;else return e.error("Unsupported type: "+typeof r)}B0.EncoderBuffer=is;is.isEncoderBuffer=function(e){return e instanceof is?!0:typeof e=="object"&&e.constructor.name==="EncoderBuffer"&&typeof e.length=="number"&&typeof e.join=="function"};is.prototype.join=function(e,t){return e||(e=ns.alloc(this.length)),t||(t=0),this.length===0||(Array.isArray(this.value)?this.value.forEach(function(n){n.join(e,t),t+=n.length}):(typeof this.value=="number"?e[t]=this.value:typeof this.value=="string"?e.write(this.value,t):ns.isBuffer(this.value)&&this.value.copy(e,t),t+=this.length)),e}});var pn=X((AI,ev)=>{ev.exports=Zb;function Zb(r,e){if(!r)throw new Error(e||"Assertion failed")}Zb.equal=function(e,t,n){if(e!=t)throw new Error(n||"Assertion failed: "+e+" != "+t)}});var Vc=X((FI,rv)=>{"use strict";var vS=zc().Reporter,wS=os().EncoderBuffer,xS=os().DecoderBuffer,Pt=pn(),tv=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],_S=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(tv),SS=["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"];function Ze(r,e,t){let n={};this._baseState=n,n.name=t,n.enc=r,n.parent=e||null,n.children=null,n.tag=null,n.args=null,n.reverseArgs=null,n.choice=null,n.optional=!1,n.any=!1,n.obj=!1,n.use=null,n.useDecoder=null,n.key=null,n.default=null,n.explicit=null,n.implicit=null,n.contains=null,n.parent||(n.children=[],this._wrap())}rv.exports=Ze;var ES=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];Ze.prototype.clone=function(){let e=this._baseState,t={};ES.forEach(function(i){t[i]=e[i]});let n=new this.constructor(t.parent);return n._baseState=t,n};Ze.prototype._wrap=function(){let e=this._baseState;_S.forEach(function(t){this[t]=function(){let i=new this.constructor(this);return e.children.push(i),i[t].apply(i,arguments)}},this)};Ze.prototype._init=function(e){let t=this._baseState;Pt(t.parent===null),e.call(this),t.children=t.children.filter(function(n){return n._baseState.parent===this},this),Pt.equal(t.children.length,1,"Root node can have only one child")};Ze.prototype._useArgs=function(e){let t=this._baseState,n=e.filter(function(i){return i instanceof this.constructor},this);e=e.filter(function(i){return!(i instanceof this.constructor)},this),n.length!==0&&(Pt(t.children===null),t.children=n,n.forEach(function(i){i._baseState.parent=this},this)),e.length!==0&&(Pt(t.args===null),t.args=e,t.reverseArgs=e.map(function(i){if(typeof i!="object"||i.constructor!==Object)return i;let o={};return Object.keys(i).forEach(function(s){s==(s|0)&&(s|=0);let f=i[s];o[f]=s}),o}))};SS.forEach(function(r){Ze.prototype[r]=function(){let t=this._baseState;throw new Error(r+" not implemented for encoding: "+t.enc)}});tv.forEach(function(r){Ze.prototype[r]=function(){let t=this._baseState,n=Array.prototype.slice.call(arguments);return Pt(t.tag===null),t.tag=r,this._useArgs(n),this}});Ze.prototype.use=function(e){Pt(e);let t=this._baseState;return Pt(t.use===null),t.use=e,this};Ze.prototype.optional=function(){let e=this._baseState;return e.optional=!0,this};Ze.prototype.def=function(e){let t=this._baseState;return Pt(t.default===null),t.default=e,t.optional=!0,this};Ze.prototype.explicit=function(e){let t=this._baseState;return Pt(t.explicit===null&&t.implicit===null),t.explicit=e,this};Ze.prototype.implicit=function(e){let t=this._baseState;return Pt(t.explicit===null&&t.implicit===null),t.implicit=e,this};Ze.prototype.obj=function(){let e=this._baseState,t=Array.prototype.slice.call(arguments);return e.obj=!0,t.length!==0&&this._useArgs(t),this};Ze.prototype.key=function(e){let t=this._baseState;return Pt(t.key===null),t.key=e,this};Ze.prototype.any=function(){let e=this._baseState;return e.any=!0,this};Ze.prototype.choice=function(e){let t=this._baseState;return Pt(t.choice===null),t.choice=e,this._useArgs(Object.keys(e).map(function(n){return e[n]})),this};Ze.prototype.contains=function(e){let t=this._baseState;return Pt(t.use===null),t.contains=e,this};Ze.prototype._decode=function(e,t){let n=this._baseState;if(n.parent===null)return e.wrapResult(n.children[0]._decode(e,t));let i=n.default,o=!0,s=null;if(n.key!==null&&(s=e.enterKey(n.key)),n.optional){let h=null;if(n.explicit!==null?h=n.explicit:n.implicit!==null?h=n.implicit:n.tag!==null&&(h=n.tag),h===null&&!n.any){let g=e.save();try{n.choice===null?this._decodeGeneric(n.tag,e,t):this._decodeChoice(e,t),o=!0}catch{o=!1}e.restore(g)}else if(o=this._peekTag(e,h,n.any),e.isError(o))return o}let f;if(n.obj&&o&&(f=e.enterObject()),o){if(n.explicit!==null){let g=this._decodeTag(e,n.explicit);if(e.isError(g))return g;e=g}let h=e.offset;if(n.use===null&&n.choice===null){let g;n.any&&(g=e.save());let x=this._decodeTag(e,n.implicit!==null?n.implicit:n.tag,n.any);if(e.isError(x))return x;n.any?i=e.raw(g):e=x}if(t&&t.track&&n.tag!==null&&t.track(e.path(),h,e.length,"tagged"),t&&t.track&&n.tag!==null&&t.track(e.path(),e.offset,e.length,"content"),n.any||(n.choice===null?i=this._decodeGeneric(n.tag,e,t):i=this._decodeChoice(e,t)),e.isError(i))return i;if(!n.any&&n.choice===null&&n.children!==null&&n.children.forEach(function(x){x._decode(e,t)}),n.contains&&(n.tag==="octstr"||n.tag==="bitstr")){let g=new xS(i);i=this._getUse(n.contains,e._reporterState.obj)._decode(g,t)}}return n.obj&&o&&(i=e.leaveObject(f)),n.key!==null&&(i!==null||o===!0)?e.leaveKey(s,n.key,i):s!==null&&e.exitKey(s),i};Ze.prototype._decodeGeneric=function(e,t,n){let i=this._baseState;return e==="seq"||e==="set"?null:e==="seqof"||e==="setof"?this._decodeList(t,e,i.args[0],n):/str$/.test(e)?this._decodeStr(t,e,n):e==="objid"&&i.args?this._decodeObjid(t,i.args[0],i.args[1],n):e==="objid"?this._decodeObjid(t,null,null,n):e==="gentime"||e==="utctime"?this._decodeTime(t,e,n):e==="null_"?this._decodeNull(t,n):e==="bool"?this._decodeBool(t,n):e==="objDesc"?this._decodeStr(t,e,n):e==="int"||e==="enum"?this._decodeInt(t,i.args&&i.args[0],n):i.use!==null?this._getUse(i.use,t._reporterState.obj)._decode(t,n):t.error("unknown tag: "+e)};Ze.prototype._getUse=function(e,t){let n=this._baseState;return n.useDecoder=this._use(e,t),Pt(n.useDecoder._baseState.parent===null),n.useDecoder=n.useDecoder._baseState.children[0],n.implicit!==n.useDecoder._baseState.implicit&&(n.useDecoder=n.useDecoder.clone(),n.useDecoder._baseState.implicit=n.implicit),n.useDecoder};Ze.prototype._decodeChoice=function(e,t){let n=this._baseState,i=null,o=!1;return Object.keys(n.choice).some(function(s){let f=e.save(),h=n.choice[s];try{let g=h._decode(e,t);if(e.isError(g))return!1;i={type:s,value:g},o=!0}catch{return e.restore(f),!1}return!0},this),o?i:e.error("Choice not matched")};Ze.prototype._createEncoderBuffer=function(e){return new wS(e,this.reporter)};Ze.prototype._encode=function(e,t,n){let i=this._baseState;if(i.default!==null&&i.default===e)return;let o=this._encodeValue(e,t,n);if(o!==void 0&&!this._skipDefault(o,t,n))return o};Ze.prototype._encodeValue=function(e,t,n){let i=this._baseState;if(i.parent===null)return i.children[0]._encode(e,t||new vS);let o=null;if(this.reporter=t,i.optional&&e===void 0)if(i.default!==null)e=i.default;else return;let s=null,f=!1;if(i.any)o=this._createEncoderBuffer(e);else if(i.choice)o=this._encodeChoice(e,t);else if(i.contains)s=this._getUse(i.contains,n)._encode(e,t),f=!0;else if(i.children)s=i.children.map(function(h){if(h._baseState.tag==="null_")return h._encode(null,t,e);if(h._baseState.key===null)return t.error("Child should have a key");let g=t.enterKey(h._baseState.key);if(typeof e!="object")return t.error("Child expected, but input is not object");let x=h._encode(e[h._baseState.key],t,e);return t.leaveKey(g),x},this).filter(function(h){return h}),s=this._createEncoderBuffer(s);else if(i.tag==="seqof"||i.tag==="setof"){if(!(i.args&&i.args.length===1))return t.error("Too many args for : "+i.tag);if(!Array.isArray(e))return t.error("seqof/setof, but data is not Array");let h=this.clone();h._baseState.implicit=null,s=this._createEncoderBuffer(e.map(function(g){let x=this._baseState;return this._getUse(x.args[0],e)._encode(g,t)},h))}else i.use!==null?o=this._getUse(i.use,n)._encode(e,t):(s=this._encodePrimitive(i.tag,e),f=!0);if(!i.any&&i.choice===null){let h=i.implicit!==null?i.implicit:i.tag,g=i.implicit===null?"universal":"context";h===null?i.use===null&&t.error("Tag could be omitted only for .use()"):i.use===null&&(o=this._encodeComposite(h,f,g,s))}return i.explicit!==null&&(o=this._encodeComposite(i.explicit,!1,"context",o)),o};Ze.prototype._encodeChoice=function(e,t){let n=this._baseState,i=n.choice[e.type];return i||Pt(!1,e.type+" not found in "+JSON.stringify(Object.keys(n.choice))),i._encode(e.value,t)};Ze.prototype._encodePrimitive=function(e,t){let n=this._baseState;if(/str$/.test(e))return this._encodeStr(t,e);if(e==="objid"&&n.args)return this._encodeObjid(t,n.reverseArgs[0],n.args[1]);if(e==="objid")return this._encodeObjid(t,null,null);if(e==="gentime"||e==="utctime")return this._encodeTime(t,e);if(e==="null_")return this._encodeNull();if(e==="int"||e==="enum")return this._encodeInt(t,n.args&&n.reverseArgs[0]);if(e==="bool")return this._encodeBool(t);if(e==="objDesc")return this._encodeStr(t,e);throw new Error("Unsupported tag: "+e)};Ze.prototype._isNumstr=function(e){return/^[0-9 ]*$/.test(e)};Ze.prototype._isPrintstr=function(e){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(e)}});var Xc=X(Ji=>{"use strict";function nv(r){let e={};return Object.keys(r).forEach(function(t){(t|0)==t&&(t=t|0);let n=r[t];e[n]=t}),e}Ji.tagClass={0:"universal",1:"application",2:"context",3:"private"};Ji.tagClassByName=nv(Ji.tagClass);Ji.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"};Ji.tagByName=nv(Ji.tag)});var R0=X((MI,sv)=>{"use strict";var AS=Qt(),gn=Kc().Buffer,iv=Vc(),O0=Xc();function ov(r){this.enc="der",this.name=r.name,this.entity=r,this.tree=new Fr,this.tree._init(r.body)}sv.exports=ov;ov.prototype.encode=function(e,t){return this.tree._encode(e,t).join()};function Fr(r){iv.call(this,"der",r)}AS(Fr,iv);Fr.prototype._encodeComposite=function(e,t,n,i){let o=FS(e,t,n,this.reporter);if(i.length<128){let h=gn.alloc(2);return h[0]=o,h[1]=i.length,this._createEncoderBuffer([h,i])}let s=1;for(let h=i.length;h>=256;h>>=8)s++;let f=gn.alloc(1+1+s);f[0]=o,f[1]=128|s;for(let h=1+s,g=i.length;g>0;h--,g>>=8)f[h]=g&255;return this._createEncoderBuffer([f,i])};Fr.prototype._encodeStr=function(e,t){if(t==="bitstr")return this._createEncoderBuffer([e.unused|0,e.data]);if(t==="bmpstr"){let n=gn.alloc(e.length*2);for(let i=0;i<e.length;i++)n.writeUInt16BE(e.charCodeAt(i),i*2);return this._createEncoderBuffer(n)}else return t==="numstr"?this._isNumstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: numstr supports only digits and space"):t==="printstr"?this._isPrintstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(t)?this._createEncoderBuffer(e):t==="objDesc"?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: "+t+" unsupported")};Fr.prototype._encodeObjid=function(e,t,n){if(typeof e=="string"){if(!t)return this.reporter.error("string objid given, but no values map found");if(!t.hasOwnProperty(e))return this.reporter.error("objid not found in values map");e=t[e].split(/[\s.]+/g);for(let f=0;f<e.length;f++)e[f]|=0}else if(Array.isArray(e)){e=e.slice();for(let f=0;f<e.length;f++)e[f]|=0}if(!Array.isArray(e))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(e));if(!n){if(e[1]>=40)return this.reporter.error("Second objid identifier OOB");e.splice(0,2,e[0]*40+e[1])}let i=0;for(let f=0;f<e.length;f++){let h=e[f];for(i++;h>=128;h>>=7)i++}let o=gn.alloc(i),s=o.length-1;for(let f=e.length-1;f>=0;f--){let h=e[f];for(o[s--]=h&127;(h>>=7)>0;)o[s--]=128|h&127}return this._createEncoderBuffer(o)};function mr(r){return r<10?"0"+r:r}Fr.prototype._encodeTime=function(e,t){let n,i=new Date(e);return t==="gentime"?n=[mr(i.getUTCFullYear()),mr(i.getUTCMonth()+1),mr(i.getUTCDate()),mr(i.getUTCHours()),mr(i.getUTCMinutes()),mr(i.getUTCSeconds()),"Z"].join(""):t==="utctime"?n=[mr(i.getUTCFullYear()%100),mr(i.getUTCMonth()+1),mr(i.getUTCDate()),mr(i.getUTCHours()),mr(i.getUTCMinutes()),mr(i.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+t+" time is not supported yet"),this._encodeStr(n,"octstr")};Fr.prototype._encodeNull=function(){return this._createEncoderBuffer("")};Fr.prototype._encodeInt=function(e,t){if(typeof e=="string"){if(!t)return this.reporter.error("String int or enum given, but no values map");if(!t.hasOwnProperty(e))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(e));e=t[e]}if(typeof e!="number"&&!gn.isBuffer(e)){let o=e.toArray();!e.sign&&o[0]&128&&o.unshift(0),e=gn.from(o)}if(gn.isBuffer(e)){let o=e.length;e.length===0&&o++;let s=gn.alloc(o);return e.copy(s),e.length===0&&(s[0]=0),this._createEncoderBuffer(s)}if(e<128)return this._createEncoderBuffer(e);if(e<256)return this._createEncoderBuffer([0,e]);let n=1;for(let o=e;o>=256;o>>=8)n++;let i=new Array(n);for(let o=i.length-1;o>=0;o--)i[o]=e&255,e>>=8;return i[0]&128&&i.unshift(0),this._createEncoderBuffer(gn.from(i))};Fr.prototype._encodeBool=function(e){return this._createEncoderBuffer(e?255:0)};Fr.prototype._use=function(e,t){return typeof e=="function"&&(e=e(t)),e._getEncoder("der").tree};Fr.prototype._skipDefault=function(e,t,n){let i=this._baseState,o;if(i.default===null)return!1;let s=e.join();if(i.defaultBuffer===void 0&&(i.defaultBuffer=this._encodeValue(i.default,t,n).join()),s.length!==i.defaultBuffer.length)return!1;for(o=0;o<s.length;o++)if(s[o]!==i.defaultBuffer[o])return!1;return!0};function FS(r,e,t,n){let i;if(r==="seqof"?r="seq":r==="setof"&&(r="set"),O0.tagByName.hasOwnProperty(r))i=O0.tagByName[r];else if(typeof r=="number"&&(r|0)===r)i=r;else return n.error("Unknown tag: "+r);return i>=31?n.error("Multi-octet tag encoding unsupported"):(e||(i|=32),i|=O0.tagClassByName[t||"universal"]<<6,i)}});var fv=X((II,av)=>{"use strict";var TS=Qt(),P0=R0();function N0(r){P0.call(this,r),this.enc="pem"}TS(N0,P0);av.exports=N0;N0.prototype.encode=function(e,t){let i=P0.prototype.encode.call(this,e).toString("base64"),o=["-----BEGIN "+t.label+"-----"];for(let s=0;s<i.length;s+=64)o.push(i.slice(s,s+64));return o.push("-----END "+t.label+"-----"),o.join(`
`)}});var k0=X(uv=>{"use strict";var cv=uv;cv.der=R0();cv.pem=fv()});var D0=X((BI,mv)=>{"use strict";var MS=Qt(),IS=jt(),lv=os().DecoderBuffer,dv=Vc(),hv=Xc();function pv(r){this.enc="der",this.name=r.name,this.entity=r,this.tree=new er,this.tree._init(r.body)}mv.exports=pv;pv.prototype.decode=function(e,t){return lv.isDecoderBuffer(e)||(e=new lv(e,t)),this.tree._decode(e,t)};function er(r){dv.call(this,"der",r)}MS(er,dv);er.prototype._peekTag=function(e,t,n){if(e.isEmpty())return!1;let i=e.save(),o=L0(e,'Failed to peek tag: "'+t+'"');return e.isError(o)?o:(e.restore(i),o.tag===t||o.tagStr===t||o.tagStr+"of"===t||n)};er.prototype._decodeTag=function(e,t,n){let i=L0(e,'Failed to decode tag of "'+t+'"');if(e.isError(i))return i;let o=gv(e,i.primitive,'Failed to get length of "'+t+'"');if(e.isError(o))return o;if(!n&&i.tag!==t&&i.tagStr!==t&&i.tagStr+"of"!==t)return e.error('Failed to match tag: "'+t+'"');if(i.primitive||o!==null)return e.skip(o,'Failed to match body of: "'+t+'"');let s=e.save(),f=this._skipUntilEnd(e,'Failed to skip indefinite length body: "'+this.tag+'"');return e.isError(f)?f:(o=e.offset-s.offset,e.restore(s),e.skip(o,'Failed to match body of: "'+t+'"'))};er.prototype._skipUntilEnd=function(e,t){for(;;){let n=L0(e,t);if(e.isError(n))return n;let i=gv(e,n.primitive,t);if(e.isError(i))return i;let o;if(n.primitive||i!==null?o=e.skip(i):o=this._skipUntilEnd(e,t),e.isError(o))return o;if(n.tagStr==="end")break}};er.prototype._decodeList=function(e,t,n,i){let o=[];for(;!e.isEmpty();){let s=this._peekTag(e,"end");if(e.isError(s))return s;let f=n.decode(e,"der",i);if(e.isError(f)&&s)break;o.push(f)}return o};er.prototype._decodeStr=function(e,t){if(t==="bitstr"){let n=e.readUInt8();return e.isError(n)?n:{unused:n,data:e.raw()}}else if(t==="bmpstr"){let n=e.raw();if(n.length%2===1)return e.error("Decoding of string type: bmpstr length mismatch");let i="";for(let o=0;o<n.length/2;o++)i+=String.fromCharCode(n.readUInt16BE(o*2));return i}else if(t==="numstr"){let n=e.raw().toString("ascii");return this._isNumstr(n)?n:e.error("Decoding of string type: numstr unsupported characters")}else{if(t==="octstr")return e.raw();if(t==="objDesc")return e.raw();if(t==="printstr"){let n=e.raw().toString("ascii");return this._isPrintstr(n)?n:e.error("Decoding of string type: printstr unsupported characters")}else return/str$/.test(t)?e.raw().toString():e.error("Decoding of string type: "+t+" unsupported")}};er.prototype._decodeObjid=function(e,t,n){let i,o=[],s=0,f=0;for(;!e.isEmpty();)f=e.readUInt8(),s<<=7,s|=f&127,(f&128)===0&&(o.push(s),s=0);f&128&&o.push(s);let h=o[0]/40|0,g=o[0]%40;if(n?i=o:i=[h,g].concat(o.slice(1)),t){let x=t[i.join(" ")];x===void 0&&(x=t[i.join(".")]),x!==void 0&&(i=x)}return i};er.prototype._decodeTime=function(e,t){let n=e.raw().toString(),i,o,s,f,h,g;if(t==="gentime")i=n.slice(0,4)|0,o=n.slice(4,6)|0,s=n.slice(6,8)|0,f=n.slice(8,10)|0,h=n.slice(10,12)|0,g=n.slice(12,14)|0;else if(t==="utctime")i=n.slice(0,2)|0,o=n.slice(2,4)|0,s=n.slice(4,6)|0,f=n.slice(6,8)|0,h=n.slice(8,10)|0,g=n.slice(10,12)|0,i<70?i=2e3+i:i=1900+i;else return e.error("Decoding "+t+" time is not supported yet");return Date.UTC(i,o-1,s,f,h,g,0)};er.prototype._decodeNull=function(){return null};er.prototype._decodeBool=function(e){let t=e.readUInt8();return e.isError(t)?t:t!==0};er.prototype._decodeInt=function(e,t){let n=e.raw(),i=new IS(n);return t&&(i=t[i.toString(10)]||i),i};er.prototype._use=function(e,t){return typeof e=="function"&&(e=e(t)),e._getDecoder("der").tree};function L0(r,e){let t=r.readUInt8(e);if(r.isError(t))return t;let n=hv.tagClass[t>>6],i=(t&32)===0;if((t&31)===31){let s=t;for(t=0;(s&128)===128;){if(s=r.readUInt8(e),r.isError(s))return s;t<<=7,t|=s&127}}else t&=31;let o=hv.tag[t];return{cls:n,primitive:i,tag:t,tagStr:o}}function gv(r,e,t){let n=r.readUInt8(t);if(r.isError(n))return n;if(!e&&n===128)return null;if((n&128)===0)return n;let i=n&127;if(i>4)return r.error("length octect is too long");n=0;for(let o=0;o<i;o++){n<<=8;let s=r.readUInt8(t);if(r.isError(s))return s;n|=s}return n}});var bv=X((OI,yv)=>{"use strict";var CS=Qt(),BS=Kc().Buffer,U0=D0();function q0(r){U0.call(this,r),this.enc="pem"}CS(q0,U0);yv.exports=q0;q0.prototype.decode=function(e,t){let n=e.toString().split(/[\r\n]+/g),i=t.label.toUpperCase(),o=/^-----(BEGIN|END) ([^-]+)-----$/,s=-1,f=-1;for(let x=0;x<n.length;x++){let T=n[x].match(o);if(T!==null&&T[2]===i)if(s===-1){if(T[1]!=="BEGIN")break;s=x}else{if(T[1]!=="END")break;f=x;break}}if(s===-1||f===-1)throw new Error("PEM section not found for: "+i);let h=n.slice(s+1,f).join("");h.replace(/[^a-z0-9+/=]+/gi,"");let g=BS.from(h,"base64");return U0.prototype.decode.call(this,g,t)}});var j0=X(wv=>{"use strict";var vv=wv;vv.der=D0();vv.pem=bv()});var _v=X(xv=>{"use strict";var OS=k0(),RS=j0(),PS=Qt(),NS=xv;NS.define=function(e,t){return new ss(e,t)};function ss(r,e){this.name=r,this.body=e,this.decoders={},this.encoders={}}ss.prototype._createNamed=function(e){let t=this.name;function n(i){this._initNamed(i,t)}return PS(n,e),n.prototype._initNamed=function(o,s){e.call(this,o,s)},new n(this)};ss.prototype._getDecoder=function(e){return e=e||"der",this.decoders.hasOwnProperty(e)||(this.decoders[e]=this._createNamed(RS[e])),this.decoders[e]};ss.prototype.decode=function(e,t,n){return this._getDecoder(t).decode(e,n)};ss.prototype._getEncoder=function(e){return e=e||"der",this.encoders.hasOwnProperty(e)||(this.encoders[e]=this._createNamed(OS[e])),this.encoders[e]};ss.prototype.encode=function(e,t,n){return this._getEncoder(t).encode(e,n)}});var Ev=X(Sv=>{"use strict";var Jc=Sv;Jc.Reporter=zc().Reporter;Jc.DecoderBuffer=os().DecoderBuffer;Jc.EncoderBuffer=os().EncoderBuffer;Jc.Node=Vc()});var Tv=X(Fv=>{"use strict";var Av=Fv;Av._reverse=function(e){let t={};return Object.keys(e).forEach(function(n){(n|0)==n&&(n=n|0);let i=e[n];t[i]=n}),t};Av.der=Xc()});var Iv=X(Mv=>{"use strict";var as=Mv;as.bignum=jt();as.define=_v().define;as.base=Ev();as.constants=Tv();as.decoders=j0();as.encoders=k0()});var Lv=X(yr=>{"use strict";var kS=yr&&yr.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),LS=yr&&yr.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),DS=yr&&yr.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&kS(e,r,t);return LS(e,r),e};Object.defineProperty(yr,"__esModule",{value:!0});yr.jwkTopem=yr.pemTojwk=void 0;var mn=DS(Iv());function US(r){return r.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function W0(r){return US(Buffer.from(r,"hex").toString("base64"))}var Cv=mn.define("RSAPublicKey",function(){this.seq().obj(this.key("n").int(),this.key("e").int())}),Bv=mn.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional().any())}),qS=mn.define("PublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(Bv),this.key("publicKey").bitstr())}),Ov=mn.define("Version",function(){this.int({0:"two-prime",1:"multi"})}),jS=mn.define("OtherPrimeInfos",function(){this.seq().obj(this.key("ri").int(),this.key("di").int(),this.key("ti").int())}),Rv=mn.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").use(Ov),this.key("n").int(),this.key("e").int(),this.key("d").int(),this.key("p").int(),this.key("q").int(),this.key("dp").int(),this.key("dq").int(),this.key("qi").int(),this.key("other").optional().use(jS))}),WS=mn.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").use(Ov),this.key("algorithm").use(Bv),this.key("privateKey").bitstr())});function Pv(r,e){return e=e||{},Object.keys(e).forEach(function(t){r[t]=e[t]}),r}function $0(r){return r.length%2===1?"0"+r:r}function Nv(r,e){var t=Cv.decode(r,"der"),n=$0(t.e.toString(16)),i={kty:"RSA",n:zn(t.n),e:W0(n)};return Pv(i,e)}function kv(r,e){var t=Rv.decode(r,"der"),n=$0(t.e.toString(16)),i={kty:"RSA",n:zn(t.n),e:W0(n),d:zn(t.d),p:zn(t.p),q:zn(t.q),dp:zn(t.dp),dq:zn(t.dq),qi:zn(t.qi)};return Pv(i,e)}function $S(r,e){var t=qS.decode(r,"der");return Nv(t.publicKey.data,e)}function HS(r,e){var t=WS.decode(r,"der");return kv(t.privateKey.data,e)}function KS(r){var e=/^-----BEGIN (RSA )?(PUBLIC|PRIVATE) KEY-----$/.exec(r);if(!e)return null;var t=!!e[1],n=e[2]==="PRIVATE";return n?t?kv:HS:t?Nv:$S}function zS(r){return{n:Kn(r.n),e:Kn(r.e),d:r.d&&Kn(r.d),p:r.p&&Kn(r.p),q:r.q&&Kn(r.q),dp:r.dp&&Kn(r.dp),dq:r.dq&&Kn(r.dq),qi:r.qi&&Kn(r.qi)}}function zn(r){return W0($0(r.toString(16)))}function GS(r){return new mn.bignum(Buffer.from(r,"base64"))}function Kn(r){return/^[0-9]+$/.test(r)?new mn.bignum(r,10):GS(r)}function VS(r,e){var t=r.toString().split(/(\r\n|\r|\n)+/g);t=t.filter(function(i){return i.trim().length!==0});var n=KS(t[0]);return t=t.slice(1,-1).join(""),n(Buffer.from(t.replace(/[^\w\d\+\/=]+/g,""),"base64"),e)}yr.pemTojwk=VS;function XS(r){var e=zS(r),t=!!e.d,n=t?"PRIVATE":"PUBLIC",i="-----BEGIN RSA "+n+` KEY-----
`,o=`
-----END RSA `+n+` KEY-----
`,s=Buffer.alloc(0);t?(e.version="two-prime",s=Rv.encode(e,"der")):s=Cv.encode(e,"der");var f=s.toString("base64").match(/.{1,64}/g).join(`
`);return i+f+o}yr.jwkTopem=XS});var Oa=X(()=>{});var Dv=X(()=>{});var Wv=X(yn=>{"use strict";var JS=yn&&yn.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),YS=yn&&yn.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),jv=yn&&yn.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&JS(e,r,t);return YS(e,r),e};Object.defineProperty(yn,"__esModule",{value:!0});var Uv=Lv(),Hr=jv(Oa()),qv=jv(Dv()),H0=class{constructor(){this.keyLength=4096,this.publicExponent=65537,this.hashAlgorithm="sha256",this.encryptionAlgorithm="aes-256-cbc"}generateJWK(){if(typeof Hr.generateKeyPair!="function")throw new Error("Keypair generation not supported in this version of Node, only supported in versions 10+");return new Promise((e,t)=>{Hr.generateKeyPair("rsa",{modulusLength:this.keyLength,publicExponent:this.publicExponent,privateKeyEncoding:{type:"pkcs1",format:"pem"},publicKeyEncoding:{type:"pkcs1",format:"pem"}},(n,i,o)=>{n&&t(n),e(this.pemToJWK(o))})})}sign(e,t,{saltLength:n}={}){return new Promise((i,o)=>{i(Hr.createSign(this.hashAlgorithm).update(t).sign({key:this.jwkToPem(e),padding:qv.RSA_PKCS1_PSS_PADDING,saltLength:n}))})}verify(e,t,n){return new Promise((i,o)=>{let s={kty:"RSA",e:"AQAB",n:e},f=this.jwkToPem(s);i(Hr.createVerify(this.hashAlgorithm).update(t).verify({key:f,padding:qv.RSA_PKCS1_PSS_PADDING},n))})}hash(e,t="SHA-256"){return new Promise((n,i)=>{n(Hr.createHash(this.parseHashAlgorithm(t)).update(e).digest())})}async encrypt(e,t,n){let i=Hr.pbkdf2Sync(t,n=n||"salt",1e5,32,this.hashAlgorithm),o=Hr.randomBytes(16),s=Hr.createCipheriv(this.encryptionAlgorithm,i,o);return Buffer.concat([o,s.update(e),s.final()])}async decrypt(e,t,n){try{let i=Hr.pbkdf2Sync(t,n=n||"salt",1e5,32,this.hashAlgorithm),o=e.slice(0,16),s=e.slice(16),f=Hr.createDecipheriv(this.encryptionAlgorithm,i,o);return Buffer.concat([f.update(s),f.final()])}catch{throw new Error("Failed to decrypt")}}jwkToPem(e){return(0,Uv.jwkTopem)(e)}pemToJWK(e){return(0,Uv.pemTojwk)(e)}parseHashAlgorithm(e){switch(e){case"SHA-256":return"sha256";case"SHA-384":return"sha384";default:throw new Error(`Algorithm not supported: ${e}`)}}};yn.default=H0});var $v=X(z0=>{"use strict";Object.defineProperty(z0,"__esModule",{value:!0});var K0=class{constructor(e){this.api=e}getInfo(){return this.api.get("info").then(e=>e.data)}getPeers(){return this.api.get("peers").then(e=>e.data)}};z0.default=K0});var Pa=X(Ra=>{"use strict";Object.defineProperty(Ra,"__esModule",{value:!0});Ra.getError=void 0;var G0=class extends Error{constructor(e,t={}){t.message?super(t.message):super(),this.type=e,this.response=t.response}getType(){return this.type}};Ra.default=G0;function QS(r){let e=r.data;if(typeof r.data=="string")try{e=JSON.parse(r.data)}catch{}if(r.data instanceof ArrayBuffer||r.data instanceof Uint8Array)try{e=JSON.parse(e.toString())}catch{}return e?e.error||e:r.statusText||"unknown"}Ra.getError=QS});var Z0=X(je=>{"use strict";var ZS=je&&je.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(je,"__esModule",{value:!0});je.debug=je.validatePath=je.arrayCompare=je.bufferToInt=je.intToBuffer=je.arrayFlatten=je.generateProofs=je.buildLayers=je.generateTransactionChunks=je.generateTree=je.computeRootHash=je.generateLeaves=je.chunkData=je.MIN_CHUNK_SIZE=je.MAX_CHUNK_SIZE=void 0;var Yc=ZS(ed()),Hv=dn();je.MAX_CHUNK_SIZE=256*1024;je.MIN_CHUNK_SIZE=32*1024;var ka=32,fs=32;async function X0(r){let e=[],t=r,n=0;for(;t.byteLength>=je.MAX_CHUNK_SIZE;){let i=je.MAX_CHUNK_SIZE,o=t.byteLength-je.MAX_CHUNK_SIZE;o>0&&o<je.MIN_CHUNK_SIZE&&(i=Math.ceil(t.byteLength/2));let s=t.slice(0,i),f=await Yc.default.crypto.hash(s);n+=s.byteLength,e.push({dataHash:f,minByteRange:n-s.byteLength,maxByteRange:n}),t=t.slice(i)}return e.push({dataHash:await Yc.default.crypto.hash(t),minByteRange:n,maxByteRange:n+t.byteLength}),e}je.chunkData=X0;async function J0(r){return Promise.all(r.map(async({dataHash:e,minByteRange:t,maxByteRange:n})=>({type:"leaf",id:await xt(await Promise.all([xt(e),xt(La(n))])),dataHash:e,minByteRange:t,maxByteRange:n})))}je.generateLeaves=J0;async function eE(r){return(await Kv(r)).id}je.computeRootHash=eE;async function Kv(r){return await Qc(await J0(await X0(r)))}je.generateTree=Kv;async function tE(r){let e=await X0(r),t=await J0(e),n=await Qc(t),i=await zv(n),o=e.slice(-1)[0];return o.maxByteRange-o.minByteRange===0&&(e.splice(e.length-1,1),i.splice(i.length-1,1)),{data_root:n.id,chunks:e,proofs:i}}je.generateTransactionChunks=tE;async function Qc(r,e=0){if(r.length<2)return r[0];let t=[];for(let n=0;n<r.length;n+=2)t.push(await rE(r[n],r[n+1]));return Qc(t,e+1)}je.buildLayers=Qc;function zv(r){let e=V0(r);return Array.isArray(e)?Y0(e):[e]}je.generateProofs=zv;function V0(r,e=new Uint8Array,t=0){if(r.type=="leaf")return{offset:r.maxByteRange-1,proof:(0,Hv.concatBuffers)([e,r.dataHash,La(r.maxByteRange)])};if(r.type=="branch"){let n=(0,Hv.concatBuffers)([e,r.leftChild.id,r.rightChild.id,La(r.byteRange)]);return[V0(r.leftChild,n,t+1),V0(r.rightChild,n,t+1)]}throw new Error("Unexpected node type")}function Y0(r){let e=[];return r.forEach(t=>{Array.isArray(t)?e.push(...Y0(t)):e.push(t)}),e}je.arrayFlatten=Y0;async function rE(r,e){return e?{type:"branch",id:await xt([await xt(r.id),await xt(e.id),await xt(La(r.maxByteRange))]),byteRange:r.maxByteRange,maxByteRange:e.maxByteRange,leftChild:r,rightChild:e}:r}async function xt(r){return Array.isArray(r)&&(r=Yc.default.utils.concatBuffers(r)),new Uint8Array(await Yc.default.crypto.hash(r))}function La(r){let e=new Uint8Array(ka);for(var t=e.length-1;t>=0;t--){var n=r%256;e[t]=n,r=(r-n)/256}return e}je.intToBuffer=La;function Q0(r){let e=0;for(var t=0;t<r.length;t++)e*=256,e+=r[t];return e}je.bufferToInt=Q0;var nE=(r,e)=>r.every((t,n)=>e[n]===t);je.arrayCompare=nE;async function Na(r,e,t,n,i){if(n<=0)return!1;if(e>=n)return Na(r,0,n-1,n,i);if(e<0)return Na(r,0,0,n,i);if(i.length==fs+ka){let T=i.slice(0,fs),I=i.slice(T.length,T.length+ka),A=await xt([await xt(T),await xt(I)]);return(0,je.arrayCompare)(r,A)?{offset:n-1,leftBound:t,rightBound:n,chunkSize:n-t}:!1}let o=i.slice(0,fs),s=i.slice(o.length,o.length+fs),f=i.slice(o.length+s.length,o.length+s.length+ka),h=Q0(f),g=i.slice(o.length+s.length+f.length),x=await xt([await xt(o),await xt(s),await xt(f)]);return(0,je.arrayCompare)(r,x)?e<h?await Na(o,e,t,Math.min(n,h),g):await Na(s,e,Math.max(t,h),n,g):!1}je.validatePath=Na;async function Gv(r,e=""){if(r.byteLength<1)return e;let t=r.slice(0,fs),n=r.slice(t.length,t.length+fs),i=r.slice(t.length+n.length,t.length+n.length+ka),o=Q0(i),s=r.slice(t.length+n.length+i.length),f=await xt([await xt(t),await xt(n),await xt(i)]),h=`${e}
${JSON.stringify(Buffer.from(t))},${JSON.stringify(Buffer.from(n))},${o} => ${JSON.stringify(f)}`;return Gv(s,h)}je.debug=Gv});var Yv=X(br=>{"use strict";var iE=br&&br.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),oE=br&&br.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),sE=br&&br.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&iE(e,r,t);return oE(e,r),e},aE=br&&br.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(br,"__esModule",{value:!0});br.TransactionUploader=void 0;var Vv=aE(cs()),fE=sE(dn()),td=Pa(),cE=Z0(),Xv=1,uE=["invalid_json","chunk_too_big","data_path_too_big","offset_too_big","data_size_too_big","chunk_proof_ratio_not_attractive","invalid_proof"],Jv=1e3*40,Da=class{constructor(e,t){if(this.api=e,this.chunkIndex=0,this.txPosted=!1,this.lastRequestTimeEnd=0,this.totalErrors=0,this.lastResponseStatus=0,this.lastResponseError="",!t.id)throw new Error("Transaction is not signed");if(!t.chunks)throw new Error("Transaction chunks not prepared");this.data=t.data,this.transaction=new Vv.default(Object.assign({},t,{data:new Uint8Array(0)}))}get isComplete(){return this.txPosted&&this.chunkIndex===this.transaction.chunks.chunks.length}get totalChunks(){return this.transaction.chunks.chunks.length}get uploadedChunks(){return this.chunkIndex}get pctComplete(){return Math.trunc(this.uploadedChunks/this.totalChunks*100)}async uploadChunk(e){if(this.isComplete)throw new Error("Upload is already complete");if(this.lastResponseError!==""?this.totalErrors++:this.totalErrors=0,this.totalErrors===100)throw new Error(`Unable to complete upload: ${this.lastResponseStatus}: ${this.lastResponseError}`);let t=this.lastResponseError===""?0:Math.max(this.lastRequestTimeEnd+Jv-Date.now(),Jv);if(t>0&&(t=t-t*Math.random()*.3,await new Promise(s=>setTimeout(s,t))),this.lastResponseError="",!this.txPosted){await this.postTransaction();return}e&&(this.chunkIndex=e);let n=this.transaction.getChunk(e||this.chunkIndex,this.data);if(!await(0,cE.validatePath)(this.transaction.chunks.data_root,parseInt(n.offset),0,parseInt(n.data_size),fE.b64UrlToBuffer(n.data_path)))throw new Error(`Unable to validate chunk ${this.chunkIndex}`);let o=await this.api.post("chunk",this.transaction.getChunk(this.chunkIndex,this.data)).catch(s=>(console.error(s.message),{status:-1,data:{error:s.message}}));if(this.lastRequestTimeEnd=Date.now(),this.lastResponseStatus=o.status,this.lastResponseStatus==200)this.chunkIndex++;else if(this.lastResponseError=(0,td.getError)(o),uE.includes(this.lastResponseError))throw new Error(`Fatal error uploading chunk ${this.chunkIndex}: ${this.lastResponseError}`)}static async fromSerialized(e,t,n){if(!t||typeof t.chunkIndex!="number"||typeof t.transaction!="object")throw new Error("Serialized object does not match expected format.");var i=new Vv.default(t.transaction);i.chunks||await i.prepareChunks(n);let o=new Da(e,i);if(o.chunkIndex=t.chunkIndex,o.lastRequestTimeEnd=t.lastRequestTimeEnd,o.lastResponseError=t.lastResponseError,o.lastResponseStatus=t.lastResponseStatus,o.txPosted=t.txPosted,o.data=n,o.transaction.data_root!==t.transaction.data_root)throw new Error("Data mismatch: Uploader doesn't match provided data.");return o}static async fromTransactionId(e,t){let n=await e.get(`tx/${t}`);if(n.status!==200)throw new Error(`Tx ${t} not found: ${n.status}`);let i=n.data;return i.data=new Uint8Array(0),{txPosted:!0,chunkIndex:0,lastResponseError:"",lastRequestTimeEnd:0,lastResponseStatus:0,transaction:i}}toJSON(){return{chunkIndex:this.chunkIndex,transaction:this.transaction,lastRequestTimeEnd:this.lastRequestTimeEnd,lastResponseStatus:this.lastResponseStatus,lastResponseError:this.lastResponseError,txPosted:this.txPosted}}async postTransaction(){if(this.totalChunks<=Xv){this.transaction.data=this.data;let n=await this.api.post("tx",this.transaction).catch(i=>(console.error(i),{status:-1,data:{error:i.message}}));if(this.lastRequestTimeEnd=Date.now(),this.lastResponseStatus=n.status,this.transaction.data=new Uint8Array(0),n.status>=200&&n.status<300){this.txPosted=!0,this.chunkIndex=Xv;return}throw this.lastResponseError=(0,td.getError)(n),new Error(`Unable to upload transaction: ${n.status}, ${this.lastResponseError}`)}let t=await this.api.post("tx",this.transaction);if(this.lastRequestTimeEnd=Date.now(),this.lastResponseStatus=t.status,!(t.status>=200&&t.status<300))throw this.lastResponseError=(0,td.getError)(t),new Error(`Unable to upload transaction: ${t.status}, ${this.lastResponseError}`);this.txPosted=!0}};br.TransactionUploader=Da});var Zv=X(Nt=>{"use strict";var lE=Nt&&Nt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),hE=Nt&&Nt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),dE=Nt&&Nt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&lE(e,r,t);return hE(e,r),e},Yi=Nt&&Nt.__await||function(r){return this instanceof Yi?(this.v=r,this):new Yi(r)},pE=Nt&&Nt.__asyncGenerator||function(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(r,e||[]),i,o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(I){n[I]&&(i[I]=function(A){return new Promise(function(C,j){o.push([I,A,C,j])>1||f(I,A)})})}function f(I,A){try{h(n[I](A))}catch(C){T(o[0][3],C)}}function h(I){I.value instanceof Yi?Promise.resolve(I.value.v).then(g,x):T(o[0][2],I)}function g(I){f("next",I)}function x(I){f("throw",I)}function T(I,A){I(A),o.shift(),o.length&&f(o[0][0],o[0][1])}},Qv=Nt&&Nt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Nt,"__esModule",{value:!0});var rd=Qv(Pa()),bn=Qv(cs()),Ua=dE(dn()),nd=Yv();Gi();var id=class{constructor(e,t,n){this.api=e,this.crypto=t,this.chunks=n}getTransactionAnchor(){return this.api.get("tx_anchor",{transformResponse:[]}).then(e=>e.data)}getPrice(e,t){let n=t?`price/${e}/${t}`:`price/${e}`;return this.api.get(n,{transformResponse:[function(i){return i}]}).then(i=>i.data)}async get(e){let t=await this.api.get(`tx/${e}`);if(t.status==200){let n=parseInt(t.data.data_size);if(t.data.format>=2&&n>0&&n<=1024*1024*12){let i=await this.getData(e);return new bn.default(Object.assign(Object.assign({},t.data),{data:i}))}return new bn.default(Object.assign(Object.assign({},t.data),{format:t.data.format||1}))}throw t.status==404?new rd.default("TX_NOT_FOUND"):t.status==410?new rd.default("TX_FAILED"):new rd.default("TX_INVALID")}fromRaw(e){return new bn.default(e)}async search(e,t){return this.api.post("arql",{op:"equals",expr1:e,expr2:t}).then(n=>n.data?n.data:[])}getStatus(e){return this.api.get(`tx/${e}/status`).then(t=>t.status==200?{status:200,confirmed:t.data}:{status:t.status,confirmed:null})}async getData(e,t){let n;try{n=await this.chunks.downloadChunkedData(e)}catch(i){console.error(`Error while trying to download chunked data for ${e}`),console.error(i)}if(!n){console.warn(`Falling back to gateway cache for ${e}`);try{n=(await this.api.get(`/${e}`)).data}catch(i){console.error(`Error while trying to download contiguous data from gateway cache for ${e}`),console.error(i)}}if(!n)throw new Error(`${e} was not found!`);return t&&t.decode&&!t.string?n:t&&t.decode&&t.string?Ua.bufferToString(n):Ua.bufferTob64Url(n)}async sign(e,t,n){if(!t&&(typeof window>"u"||!window.arweaveWallet))throw new Error("A new Arweave transaction must provide the jwk parameter.");if(!t||t==="use_wallet"){try{(await window.arweaveWallet.getPermissions()).includes("SIGN_TRANSACTION")||await window.arweaveWallet.connect(["SIGN_TRANSACTION"])}catch{}let i=await window.arweaveWallet.sign(e,n);e.setSignature({id:i.id,owner:i.owner,reward:i.reward,tags:i.tags,signature:i.signature})}else{e.setOwner(t.n);let i=await e.getSignatureData(),o=await this.crypto.sign(t,i,n),s=await this.crypto.hash(o);e.setSignature({id:Ua.bufferTob64Url(s),owner:t.n,signature:Ua.bufferTob64Url(o)})}}async verify(e){let t=await e.getSignatureData(),n=e.get("signature",{decode:!0,string:!1}),i=Ua.bufferTob64Url(await this.crypto.hash(n));if(e.id!==i)throw new Error("Invalid transaction signature or ID! The transaction ID doesn't match the expected SHA-256 hash of the signature.");return this.crypto.verify(e.owner,t,n)}async post(e){if(typeof e=="string"?e=new bn.default(JSON.parse(e)):typeof e.readInt32BE=="function"?e=new bn.default(JSON.parse(e.toString())):typeof e=="object"&&!(e instanceof bn.default)&&(e=new bn.default(e)),!(e instanceof bn.default))throw new Error("Must be Transaction object");e.chunks||await e.prepareChunks(e.data);let t=await this.getUploader(e,e.data);try{for(;!t.isComplete;)await t.uploadChunk()}catch(n){if(t.lastResponseStatus>0)return{status:t.lastResponseStatus,statusText:t.lastResponseError,data:{error:t.lastResponseError}};throw n}return{status:200,statusText:"OK",data:{}}}async getUploader(e,t){let n;if(t instanceof ArrayBuffer&&(t=new Uint8Array(t)),e instanceof bn.default){if(t||(t=e.data),!(t instanceof Uint8Array))throw new Error("Data format is invalid");e.chunks||await e.prepareChunks(t),n=new nd.TransactionUploader(this.api,e),(!n.data||n.data.length===0)&&(n.data=t)}else{if(typeof e=="string"&&(e=await nd.TransactionUploader.fromTransactionId(this.api,e)),!t||!(t instanceof Uint8Array))throw new Error("Must provide data when resuming upload");n=await nd.TransactionUploader.fromSerialized(this.api,e,t)}return n}upload(e,t){return pE(this,arguments,function*(){let i=yield Yi(this.getUploader(e,t));for(;!i.isComplete;)yield Yi(i.uploadChunk()),yield yield Yi(i);return yield Yi(i)})}};Nt.default=id});var tw=X(vn=>{"use strict";var gE=vn&&vn.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),mE=vn&&vn.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),yE=vn&&vn.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&gE(e,r,t);return mE(e,r),e};Object.defineProperty(vn,"__esModule",{value:!0});var ew=yE(dn());Gi();var od=class{constructor(e,t){this.api=e,this.crypto=t}getBalance(e){return this.api.get(`wallet/${e}/balance`,{transformResponse:[function(t){return t}]}).then(t=>t.data)}getLastTransactionID(e){return this.api.get(`wallet/${e}/last_tx`).then(t=>t.data)}generate(){return this.crypto.generateJWK()}async jwkToAddress(e){return!e||e==="use_wallet"?this.getAddress():this.getAddress(e)}async getAddress(e){if(!e||e==="use_wallet"){try{await window.arweaveWallet.connect(["ACCESS_ADDRESS"])}catch{}return window.arweaveWallet.getActiveAddress()}else return this.ownerToAddress(e.n)}async ownerToAddress(e){return ew.bufferTob64Url(await this.crypto.hash(ew.b64UrlToBuffer(e)))}};vn.default=od});var nw=X(Tr=>{"use strict";var bE=Tr&&Tr.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),vE=Tr&&Tr.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),wE=Tr&&Tr.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&bE(e,r,t);return vE(e,r),e};Object.defineProperty(Tr,"__esModule",{value:!0});Tr.SiloResource=void 0;var rw=wE(dn()),sd=class{constructor(e,t,n){this.api=e,this.crypto=t,this.transactions=n}async get(e){if(!e)throw new Error("No Silo URI specified");let t=await this.parseUri(e),n=await this.transactions.search("Silo-Name",t.getAccessKey());if(n.length==0)throw new Error(`No data could be found for the Silo URI: ${e}`);let i=await this.transactions.get(n[0]);if(!i)throw new Error(`No data could be found for the Silo URI: ${e}`);let o=i.get("data",{decode:!0,string:!1});return this.crypto.decrypt(o,t.getEncryptionKey())}async readTransactionData(e,t){if(!t)throw new Error("No Silo URI specified");let n=await this.parseUri(t),i=e.get("data",{decode:!0,string:!1});return this.crypto.decrypt(i,n.getEncryptionKey())}async parseUri(e){let t=e.match(/^([a-z0-9-_]+)\.([0-9]+)/i);if(!t)throw new Error("Invalid Silo name, must be a name in the format of [a-z0-9]+.[0-9]+, e.g. 'bubble.7'");let n=t[1],i=Math.pow(2,parseInt(t[2])),o=await this.hash(rw.stringToBuffer(n),i),s=rw.bufferTob64(o.slice(0,15)),f=await this.hash(o.slice(16,31),1);return new Zc(e,s,f)}async hash(e,t){let n=await this.crypto.hash(e);for(let i=0;i<t-1;i++)n=await this.crypto.hash(n);return n}};Tr.default=sd;var Zc=class{constructor(e,t,n){this.uri=e,this.accessKey=t,this.encryptionKey=n}getUri(){return this.uri}getAccessKey(){return this.accessKey}getEncryptionKey(){return this.encryptionKey}};Tr.SiloResource=Zc});var ow=X(wn=>{"use strict";var xE=wn&&wn.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),_E=wn&&wn.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),SE=wn&&wn.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&xE(e,r,t);return _E(e,r),e};Object.defineProperty(wn,"__esModule",{value:!0});var iw=Pa(),EE=SE(dn()),ad=class{constructor(e){this.api=e}async getTransactionOffset(e){let t=await this.api.get(`tx/${e}/offset`);if(t.status===200)return t.data;throw new Error(`Unable to get transaction offset: ${(0,iw.getError)(t)}`)}async getChunk(e){let t=await this.api.get(`chunk/${e}`);if(t.status===200)return t.data;throw new Error(`Unable to get chunk: ${(0,iw.getError)(t)}`)}async getChunkData(e){let t=await this.getChunk(e);return EE.b64UrlToBuffer(t.chunk)}firstChunkOffset(e){return parseInt(e.offset)-parseInt(e.size)+1}async downloadChunkedData(e){let t=await this.getTransactionOffset(e),n=parseInt(t.size),o=parseInt(t.offset)-n+1,s=new Uint8Array(n),f=0;for(;f<n;){this.api.config.logging&&console.log(`[chunk] ${f}/${n}`);let h;try{h=await this.getChunkData(o+f)}catch{console.error(`[chunk] Failed to fetch chunk at offset ${o+f}`),console.error("[chunk] This could indicate that the chunk wasn't uploaded or hasn't yet seeded properly to a particular gateway/node")}if(h)s.set(h,f),f+=h.length;else throw new Error(`Couldn't complete data download at ${f}/${n}`)}return s}};wn.default=ad});var sw=X(qa=>{"use strict";var AE=qa&&qa.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(qa,"__esModule",{value:!0});var FE=AE(Pa());Gi();var us=class{constructor(e,t){this.api=e,this.network=t}async get(e){let t=await this.api.get(`${us.ENDPOINT}${e}`);if(t.status===200)return t.data;throw t.status===404?new FE.default("BLOCK_NOT_FOUND"):new Error(`Error while loading block data: ${t}`)}async getCurrent(){let{current:e}=await this.network.getInfo();return await this.get(e)}};qa.default=us;us.ENDPOINT="block/hash/"});var ed=X(Mr=>{"use strict";var TE=Mr&&Mr.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),ME=Mr&&Mr.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),IE=Mr&&Mr.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&TE(e,r,t);return ME(e,r),e},zr=Mr&&Mr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Mr,"__esModule",{value:!0});var CE=zr(Vb()),BE=zr(Xb()),OE=zr(Wv()),RE=zr($v()),PE=zr(Zv()),NE=zr(tw()),aw=zr(cs()),ja=IE(dn()),kE=zr(nw()),LE=zr(ow()),DE=zr(sw()),Kr=class{constructor(e){this.api=new BE.default(e),this.wallets=new NE.default(this.api,Kr.crypto),this.chunks=new LE.default(this.api),this.transactions=new PE.default(this.api,Kr.crypto,this.chunks),this.silo=new kE.default(this.api,this.crypto,this.transactions),this.network=new RE.default(this.api),this.blocks=new DE.default(this.api,this.network),this.ar=new CE.default}get crypto(){return Kr.crypto}get utils(){return Kr.utils}getConfig(){return{api:this.api.getConfig(),crypto:null}}async createTransaction(e,t){let n={};if(Object.assign(n,e),!e.data&&!(e.target&&e.quantity))throw new Error("A new Arweave transaction must have a 'data' value, or 'target' and 'quantity' values.");if(e.owner==null&&t&&t!=="use_wallet"&&(n.owner=t.n),e.last_tx==null&&(n.last_tx=await this.transactions.getTransactionAnchor()),typeof e.data=="string"&&(e.data=ja.stringToBuffer(e.data)),e.data instanceof ArrayBuffer&&(e.data=new Uint8Array(e.data)),e.data&&!(e.data instanceof Uint8Array))throw new Error("Expected data to be a string, Uint8Array or ArrayBuffer");if(e.reward==null){let o=e.data?e.data.byteLength:0;n.reward=await this.transactions.getPrice(o,n.target)}n.data_root="",n.data_size=e.data?e.data.byteLength.toString():"0",n.data=e.data||new Uint8Array(0);let i=new aw.default(n);return await i.getSignatureData(),i}async createSiloTransaction(e,t,n){let i={};if(Object.assign(i,e),!e.data)throw new Error("Silo transactions must have a 'data' value");if(!n)throw new Error("No Silo URI specified.");if(e.target||e.quantity)throw new Error("Silo transactions can only be used for storing data, sending AR to other wallets isn't supported.");if(e.owner==null){if(!t||!t.n)throw new Error("A new Arweave transaction must either have an 'owner' attribute, or you must provide the jwk parameter.");i.owner=t.n}e.last_tx==null&&(i.last_tx=await this.transactions.getTransactionAnchor());let o=await this.silo.parseUri(n);if(typeof e.data=="string"){let f=await this.crypto.encrypt(ja.stringToBuffer(e.data),o.getEncryptionKey());i.reward=await this.transactions.getPrice(f.byteLength),i.data=ja.bufferTob64Url(f)}if(e.data instanceof Uint8Array){let f=await this.crypto.encrypt(e.data,o.getEncryptionKey());i.reward=await this.transactions.getPrice(f.byteLength),i.data=ja.bufferTob64Url(f)}let s=new aw.default(i);return s.addTag("Silo-Name",o.getAccessKey()),s.addTag("Silo-Version","0.1.0"),s}arql(e){return this.api.post("/arql",e).then(t=>t.data||[])}};Mr.default=Kr;Kr.crypto=new OE.default;Kr.utils=ja});var uw=X(Wa=>{"use strict";var UE=Wa&&Wa.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Wa,"__esModule",{value:!0});var tr=UE(ed());async function fw(r){if(Array.isArray(r)){let n=tr.default.utils.concatBuffers([tr.default.utils.stringToBuffer("list"),tr.default.utils.stringToBuffer(r.length.toString())]);return await cw(r,await tr.default.crypto.hash(n,"SHA-384"))}let e=tr.default.utils.concatBuffers([tr.default.utils.stringToBuffer("blob"),tr.default.utils.stringToBuffer(r.byteLength.toString())]),t=tr.default.utils.concatBuffers([await tr.default.crypto.hash(e,"SHA-384"),await tr.default.crypto.hash(r,"SHA-384")]);return await tr.default.crypto.hash(t,"SHA-384")}Wa.default=fw;async function cw(r,e){if(r.length<1)return e;let t=tr.default.utils.concatBuffers([e,await fw(r[0])]),n=await tr.default.crypto.hash(t,"SHA-384");return await cw(r.slice(1),n)}});var cs=X(rr=>{"use strict";var qE=rr&&rr.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,n,i)}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),jE=rr&&rr.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),WE=rr&&rr.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&qE(e,r,t);return jE(e,r),e},$E=rr&&rr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(rr,"__esModule",{value:!0});rr.Tag=void 0;var mt=WE(dn()),HE=$E(uw()),KE=Z0(),eu=class{get(e,t){if(!Object.getOwnPropertyNames(this).includes(e))throw new Error(`Field "${e}" is not a property of the Arweave Transaction class.`);return this[e]instanceof Uint8Array?t&&t.decode&&t.string?mt.bufferToString(this[e]):t&&t.decode&&!t.string?this[e]:mt.bufferTob64Url(this[e]):t&&t.decode==!0?t&&t.string?mt.b64UrlToString(this[e]):mt.b64UrlToBuffer(this[e]):this[e]}},$a=class extends eu{constructor(e,t,n=!1){super(),this.name=e,this.value=t}};rr.Tag=$a;var fd=class extends eu{constructor(e={}){super(),this.format=2,this.id="",this.last_tx="",this.owner="",this.tags=[],this.target="",this.quantity="0",this.data_size="0",this.data=new Uint8Array,this.data_root="",this.reward="0",this.signature="",Object.assign(this,e),typeof this.data=="string"&&(this.data=mt.b64UrlToBuffer(this.data)),e.tags&&(this.tags=e.tags.map(t=>new $a(t.name,t.value)))}addTag(e,t){this.tags.push(new $a(mt.stringToB64Url(e),mt.stringToB64Url(t)))}toJSON(){return{format:this.format,id:this.id,last_tx:this.last_tx,owner:this.owner,tags:this.tags,target:this.target,quantity:this.quantity,data:mt.bufferTob64Url(this.data),data_size:this.data_size,data_root:this.data_root,data_tree:this.data_tree,reward:this.reward,signature:this.signature}}setOwner(e){this.owner=e}setSignature({id:e,owner:t,reward:n,tags:i,signature:o}){this.id=e,this.owner=t,n&&(this.reward=n),i&&(this.tags=i),this.signature=o}async prepareChunks(e){!this.chunks&&e.byteLength>0&&(this.chunks=await(0,KE.generateTransactionChunks)(e),this.data_root=mt.bufferTob64Url(this.chunks.data_root)),!this.chunks&&e.byteLength===0&&(this.chunks={chunks:[],data_root:new Uint8Array,proofs:[]},this.data_root="")}getChunk(e,t){if(!this.chunks)throw new Error("Chunks have not been prepared");let n=this.chunks.proofs[e],i=this.chunks.chunks[e];return{data_root:this.data_root,data_size:this.data_size,data_path:mt.bufferTob64Url(n.proof),offset:n.offset.toString(),chunk:mt.bufferTob64Url(t.slice(i.minByteRange,i.maxByteRange))}}async getSignatureData(){switch(this.format){case 1:let e=this.tags.reduce((n,i)=>mt.concatBuffers([n,i.get("name",{decode:!0,string:!1}),i.get("value",{decode:!0,string:!1})]),new Uint8Array);return mt.concatBuffers([this.get("owner",{decode:!0,string:!1}),this.get("target",{decode:!0,string:!1}),this.get("data",{decode:!0,string:!1}),mt.stringToBuffer(this.quantity),mt.stringToBuffer(this.reward),this.get("last_tx",{decode:!0,string:!1}),e]);case 2:this.data_root||await this.prepareChunks(this.data);let t=this.tags.map(n=>[n.get("name",{decode:!0,string:!1}),n.get("value",{decode:!0,string:!1})]);return await(0,HE.default)([mt.stringToBuffer(this.format.toString()),this.get("owner",{decode:!0,string:!1}),this.get("target",{decode:!0,string:!1}),mt.stringToBuffer(this.quantity),mt.stringToBuffer(this.reward),this.get("last_tx",{decode:!0,string:!1}),t,mt.stringToBuffer(this.data_size),this.get("data_root",{decode:!0,string:!1})]);default:throw new Error(`Unexpected transaction format: ${this.format}`)}}};rr.default=fd});var ls=X((rC,lw)=>{window.global=window;global.fetch=window.fetch;lw.exports.Buffer=Tn().Buffer});var Aw=X((dC,N7)=>{N7.exports={name:"elliptic",version:"6.5.4",description:"EC cryptography",main:"lib/elliptic.js",files:["lib"],scripts:{lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},repository:{type:"git",url:"git@github.com:indutny/elliptic"},keywords:["EC","Elliptic","curve","Cryptography"],author:"Fedor Indutny <fedor@indutny.com>",license:"MIT",bugs:{url:"https://github.com/indutny/elliptic/issues"},homepage:"https://github.com/indutny/elliptic",devDependencies:{brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},dependencies:{"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"}}});var bd=X(Mw=>{"use strict";var iu=Mw;function k7(r,e){if(Array.isArray(r))return r.slice();if(!r)return[];var t=[];if(typeof r!="string"){for(var n=0;n<r.length;n++)t[n]=r[n]|0;return t}if(e==="hex"){r=r.replace(/[^a-z0-9]+/ig,""),r.length%2!==0&&(r="0"+r);for(var n=0;n<r.length;n+=2)t.push(parseInt(r[n]+r[n+1],16))}else for(var n=0;n<r.length;n++){var i=r.charCodeAt(n),o=i>>8,s=i&255;o?t.push(o,s):t.push(s)}return t}iu.toArray=k7;function Fw(r){return r.length===1?"0"+r:r}iu.zero2=Fw;function Tw(r){for(var e="",t=0;t<r.length;t++)e+=Fw(r[t].toString(16));return e}iu.toHex=Tw;iu.encode=function(e,t){return t==="hex"?Tw(e):e}});var nr=X(Iw=>{"use strict";var Cr=Iw,L7=jt(),D7=pn(),ou=bd();Cr.assert=D7;Cr.toArray=ou.toArray;Cr.zero2=ou.zero2;Cr.toHex=ou.toHex;Cr.encode=ou.encode;function U7(r,e,t){var n=new Array(Math.max(r.bitLength(),t)+1);n.fill(0);for(var i=1<<e+1,o=r.clone(),s=0;s<n.length;s++){var f,h=o.andln(i-1);o.isOdd()?(h>(i>>1)-1?f=(i>>1)-h:f=h,o.isubn(f)):f=0,n[s]=f,o.iushrn(1)}return n}Cr.getNAF=U7;function q7(r,e){var t=[[],[]];r=r.clone(),e=e.clone();for(var n=0,i=0,o;r.cmpn(-n)>0||e.cmpn(-i)>0;){var s=r.andln(3)+n&3,f=e.andln(3)+i&3;s===3&&(s=-1),f===3&&(f=-1);var h;(s&1)===0?h=0:(o=r.andln(7)+n&7,(o===3||o===5)&&f===2?h=-s:h=s),t[0].push(h);var g;(f&1)===0?g=0:(o=e.andln(7)+i&7,(o===3||o===5)&&s===2?g=-f:g=f),t[1].push(g),2*n===h+1&&(n=1-n),2*i===g+1&&(i=1-i),r.iushrn(1),e.iushrn(1)}return t}Cr.getJSF=q7;function j7(r,e,t){var n="_"+e;r.prototype[e]=function(){return this[n]!==void 0?this[n]:this[n]=t.call(this)}}Cr.cachedProperty=j7;function W7(r){return typeof r=="string"?Cr.toArray(r,"hex"):r}Cr.parseBytes=W7;function $7(r){return new L7(r,"hex","le")}Cr.intFromLE=$7});var _d=X((mC,xd)=>{var vd;xd.exports=function(e){return vd||(vd=new Vn(null)),vd.generate(e)};function Vn(r){this.rand=r}xd.exports.Rand=Vn;Vn.prototype.generate=function(e){return this._rand(e)};Vn.prototype._rand=function(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var t=new Uint8Array(e),n=0;n<t.length;n++)t[n]=this.rand.getByte();return t};if(typeof self=="object")self.crypto&&self.crypto.getRandomValues?Vn.prototype._rand=function(e){var t=new Uint8Array(e);return self.crypto.getRandomValues(t),t}:self.msCrypto&&self.msCrypto.getRandomValues?Vn.prototype._rand=function(e){var t=new Uint8Array(e);return self.msCrypto.getRandomValues(t),t}:typeof window=="object"&&(Vn.prototype._rand=function(){throw new Error("Not implemented yet")});else try{if(wd=Oa(),typeof wd.randomBytes!="function")throw new Error("Not supported");Vn.prototype._rand=function(e){return wd.randomBytes(e)}}catch{}var wd});var Va=X((yC,Cw)=>{"use strict";var Qi=jt(),Ga=nr(),su=Ga.getNAF,H7=Ga.getJSF,au=Ga.assert;function Xn(r,e){this.type=r,this.p=new Qi(e.p,16),this.red=e.prime?Qi.red(e.prime):Qi.mont(this.p),this.zero=new Qi(0).toRed(this.red),this.one=new Qi(1).toRed(this.red),this.two=new Qi(2).toRed(this.red),this.n=e.n&&new Qi(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var t=this.n&&this.p.div(this.n);!t||t.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}Cw.exports=Xn;Xn.prototype.point=function(){throw new Error("Not implemented")};Xn.prototype.validate=function(){throw new Error("Not implemented")};Xn.prototype._fixedNafMul=function(e,t){au(e.precomputed);var n=e._getDoubles(),i=su(t,1,this._bitLength),o=(1<<n.step+1)-(n.step%2===0?2:1);o/=3;var s=[],f,h;for(f=0;f<i.length;f+=n.step){h=0;for(var g=f+n.step-1;g>=f;g--)h=(h<<1)+i[g];s.push(h)}for(var x=this.jpoint(null,null,null),T=this.jpoint(null,null,null),I=o;I>0;I--){for(f=0;f<s.length;f++)h=s[f],h===I?T=T.mixedAdd(n.points[f]):h===-I&&(T=T.mixedAdd(n.points[f].neg()));x=x.add(T)}return x.toP()};Xn.prototype._wnafMul=function(e,t){var n=4,i=e._getNAFPoints(n);n=i.wnd;for(var o=i.points,s=su(t,n,this._bitLength),f=this.jpoint(null,null,null),h=s.length-1;h>=0;h--){for(var g=0;h>=0&&s[h]===0;h--)g++;if(h>=0&&g++,f=f.dblp(g),h<0)break;var x=s[h];au(x!==0),e.type==="affine"?x>0?f=f.mixedAdd(o[x-1>>1]):f=f.mixedAdd(o[-x-1>>1].neg()):x>0?f=f.add(o[x-1>>1]):f=f.add(o[-x-1>>1].neg())}return e.type==="affine"?f.toP():f};Xn.prototype._wnafMulAdd=function(e,t,n,i,o){var s=this._wnafT1,f=this._wnafT2,h=this._wnafT3,g=0,x,T,I;for(x=0;x<i;x++){I=t[x];var A=I._getNAFPoints(e);s[x]=A.wnd,f[x]=A.points}for(x=i-1;x>=1;x-=2){var C=x-1,j=x;if(s[C]!==1||s[j]!==1){h[C]=su(n[C],s[C],this._bitLength),h[j]=su(n[j],s[j],this._bitLength),g=Math.max(h[C].length,g),g=Math.max(h[j].length,g);continue}var G=[t[C],null,null,t[j]];t[C].y.cmp(t[j].y)===0?(G[1]=t[C].add(t[j]),G[2]=t[C].toJ().mixedAdd(t[j].neg())):t[C].y.cmp(t[j].y.redNeg())===0?(G[1]=t[C].toJ().mixedAdd(t[j]),G[2]=t[C].add(t[j].neg())):(G[1]=t[C].toJ().mixedAdd(t[j]),G[2]=t[C].toJ().mixedAdd(t[j].neg()));var $=[-3,-1,-5,-7,0,7,5,1,3],Z=H7(n[C],n[j]);for(g=Math.max(Z[0].length,g),h[C]=new Array(g),h[j]=new Array(g),T=0;T<g;T++){var ee=Z[0][T]|0,se=Z[1][T]|0;h[C][T]=$[(ee+1)*3+(se+1)],h[j][T]=0,f[C]=G}}var V=this.jpoint(null,null,null),q=this._wnafT4;for(x=g;x>=0;x--){for(var z=0;x>=0;){var J=!0;for(T=0;T<i;T++)q[T]=h[T][x]|0,q[T]!==0&&(J=!1);if(!J)break;z++,x--}if(x>=0&&z++,V=V.dblp(z),x<0)break;for(T=0;T<i;T++){var H=q[T];H!==0&&(H>0?I=f[T][H-1>>1]:H<0&&(I=f[T][-H-1>>1].neg()),I.type==="affine"?V=V.mixedAdd(I):V=V.add(I))}}for(x=0;x<i;x++)f[x]=null;return o?V:V.toP()};function vr(r,e){this.curve=r,this.type=e,this.precomputed=null}Xn.BasePoint=vr;vr.prototype.eq=function(){throw new Error("Not implemented")};vr.prototype.validate=function(){return this.curve.validate(this)};Xn.prototype.decodePoint=function(e,t){e=Ga.toArray(e,t);var n=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*n){e[0]===6?au(e[e.length-1]%2===0):e[0]===7&&au(e[e.length-1]%2===1);var i=this.point(e.slice(1,1+n),e.slice(1+n,1+2*n));return i}else if((e[0]===2||e[0]===3)&&e.length-1===n)return this.pointFromX(e.slice(1,1+n),e[0]===3);throw new Error("Unknown point format")};vr.prototype.encodeCompressed=function(e){return this.encode(e,!0)};vr.prototype._encode=function(e){var t=this.curve.p.byteLength(),n=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",t))};vr.prototype.encode=function(e,t){return Ga.encode(this._encode(t),e)};vr.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this};vr.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return t?t.points.length>=Math.ceil((e.bitLength()+1)/t.step):!1};vr.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],i=this,o=0;o<t;o+=e){for(var s=0;s<e;s++)i=i.dbl();n.push(i)}return{step:e,points:n}};vr.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],n=(1<<e)-1,i=n===1?null:this.dbl(),o=1;o<n;o++)t[o]=t[o-1].add(i);return{wnd:e,points:t}};vr.prototype._getBeta=function(){return null};vr.prototype.dblp=function(e){for(var t=this,n=0;n<e;n++)t=t.dbl();return t}});var Ow=X((bC,Bw)=>{"use strict";var K7=nr(),lt=jt(),Sd=Qt(),ds=Va(),z7=K7.assert;function wr(r){ds.call(this,"short",r),this.a=new lt(r.a,16).toRed(this.red),this.b=new lt(r.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(r),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}Sd(wr,ds);Bw.exports=wr;wr.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var t,n;if(e.beta)t=new lt(e.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);t=i[0].cmp(i[1])<0?i[0]:i[1],t=t.toRed(this.red)}if(e.lambda)n=new lt(e.lambda,16);else{var o=this._getEndoRoots(this.n);this.g.mul(o[0]).x.cmp(this.g.x.redMul(t))===0?n=o[0]:(n=o[1],z7(this.g.mul(n).x.cmp(this.g.x.redMul(t))===0))}var s;return e.basis?s=e.basis.map(function(f){return{a:new lt(f.a,16),b:new lt(f.b,16)}}):s=this._getEndoBasis(n),{beta:t,lambda:n,basis:s}}};wr.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:lt.mont(e),n=new lt(2).toRed(t).redInvm(),i=n.redNeg(),o=new lt(3).toRed(t).redNeg().redSqrt().redMul(n),s=i.redAdd(o).fromRed(),f=i.redSub(o).fromRed();return[s,f]};wr.prototype._getEndoBasis=function(e){for(var t=this.n.ushrn(Math.floor(this.n.bitLength()/2)),n=e,i=this.n.clone(),o=new lt(1),s=new lt(0),f=new lt(0),h=new lt(1),g,x,T,I,A,C,j,G=0,$,Z;n.cmpn(0)!==0;){var ee=i.div(n);$=i.sub(ee.mul(n)),Z=f.sub(ee.mul(o));var se=h.sub(ee.mul(s));if(!T&&$.cmp(t)<0)g=j.neg(),x=o,T=$.neg(),I=Z;else if(T&&++G===2)break;j=$,i=n,n=$,f=o,o=Z,h=s,s=se}A=$.neg(),C=Z;var V=T.sqr().add(I.sqr()),q=A.sqr().add(C.sqr());return q.cmp(V)>=0&&(A=g,C=x),T.negative&&(T=T.neg(),I=I.neg()),A.negative&&(A=A.neg(),C=C.neg()),[{a:T,b:I},{a:A,b:C}]};wr.prototype._endoSplit=function(e){var t=this.endo.basis,n=t[0],i=t[1],o=i.b.mul(e).divRound(this.n),s=n.b.neg().mul(e).divRound(this.n),f=o.mul(n.a),h=s.mul(i.a),g=o.mul(n.b),x=s.mul(i.b),T=e.sub(f).sub(h),I=g.add(x).neg();return{k1:T,k2:I}};wr.prototype.pointFromX=function(e,t){e=new lt(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),i=n.redSqrt();if(i.redSqr().redSub(n).cmp(this.zero)!==0)throw new Error("invalid point");var o=i.fromRed().isOdd();return(t&&!o||!t&&o)&&(i=i.redNeg()),this.point(e,i)};wr.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,n=e.y,i=this.a.redMul(t),o=t.redSqr().redMul(t).redIAdd(i).redIAdd(this.b);return n.redSqr().redISub(o).cmpn(0)===0};wr.prototype._endoWnafMulAdd=function(e,t,n){for(var i=this._endoWnafT1,o=this._endoWnafT2,s=0;s<e.length;s++){var f=this._endoSplit(t[s]),h=e[s],g=h._getBeta();f.k1.negative&&(f.k1.ineg(),h=h.neg(!0)),f.k2.negative&&(f.k2.ineg(),g=g.neg(!0)),i[s*2]=h,i[s*2+1]=g,o[s*2]=f.k1,o[s*2+1]=f.k2}for(var x=this._wnafMulAdd(1,i,o,s*2,n),T=0;T<s*2;T++)i[T]=null,o[T]=null;return x};function _t(r,e,t,n){ds.BasePoint.call(this,r,"affine"),e===null&&t===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new lt(e,16),this.y=new lt(t,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}Sd(_t,ds.BasePoint);wr.prototype.point=function(e,t,n){return new _t(this,e,t,n)};wr.prototype.pointFromJSON=function(e,t){return _t.fromJSON(this,e,t)};_t.prototype._getBeta=function(){if(!!this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var n=this.curve,i=function(o){return n.point(o.x.redMul(n.endo.beta),o.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(i)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(i)}}}return t}};_t.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};_t.fromJSON=function(e,t,n){typeof t=="string"&&(t=JSON.parse(t));var i=e.point(t[0],t[1],n);if(!t[2])return i;function o(f){return e.point(f[0],f[1],n)}var s=t[2];return i.precomputed={beta:null,doubles:s.doubles&&{step:s.doubles.step,points:[i].concat(s.doubles.points.map(o))},naf:s.naf&&{wnd:s.naf.wnd,points:[i].concat(s.naf.points.map(o))}},i};_t.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};_t.prototype.isInfinity=function(){return this.inf};_t.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var t=this.y.redSub(e.y);t.cmpn(0)!==0&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var n=t.redSqr().redISub(this.x).redISub(e.x),i=t.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,i)};_t.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var t=this.curve.a,n=this.x.redSqr(),i=e.redInvm(),o=n.redAdd(n).redIAdd(n).redIAdd(t).redMul(i),s=o.redSqr().redISub(this.x.redAdd(this.x)),f=o.redMul(this.x.redSub(s)).redISub(this.y);return this.curve.point(s,f)};_t.prototype.getX=function(){return this.x.fromRed()};_t.prototype.getY=function(){return this.y.fromRed()};_t.prototype.mul=function(e){return e=new lt(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};_t.prototype.mulAdd=function(e,t,n){var i=[this,t],o=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,o):this.curve._wnafMulAdd(1,i,o,2)};_t.prototype.jmulAdd=function(e,t,n){var i=[this,t],o=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,o,!0):this.curve._wnafMulAdd(1,i,o,2,!0)};_t.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};_t.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var n=this.precomputed,i=function(o){return o.neg()};t.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(i)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(i)}}}return t};_t.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function Ft(r,e,t,n){ds.BasePoint.call(this,r,"jacobian"),e===null&&t===null&&n===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new lt(0)):(this.x=new lt(e,16),this.y=new lt(t,16),this.z=new lt(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}Sd(Ft,ds.BasePoint);wr.prototype.jpoint=function(e,t,n){return new Ft(this,e,t,n)};Ft.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),n=this.x.redMul(t),i=this.y.redMul(t).redMul(e);return this.curve.point(n,i)};Ft.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};Ft.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),n=this.z.redSqr(),i=this.x.redMul(t),o=e.x.redMul(n),s=this.y.redMul(t.redMul(e.z)),f=e.y.redMul(n.redMul(this.z)),h=i.redSub(o),g=s.redSub(f);if(h.cmpn(0)===0)return g.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var x=h.redSqr(),T=x.redMul(h),I=i.redMul(x),A=g.redSqr().redIAdd(T).redISub(I).redISub(I),C=g.redMul(I.redISub(A)).redISub(s.redMul(T)),j=this.z.redMul(e.z).redMul(h);return this.curve.jpoint(A,C,j)};Ft.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),n=this.x,i=e.x.redMul(t),o=this.y,s=e.y.redMul(t).redMul(this.z),f=n.redSub(i),h=o.redSub(s);if(f.cmpn(0)===0)return h.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var g=f.redSqr(),x=g.redMul(f),T=n.redMul(g),I=h.redSqr().redIAdd(x).redISub(T).redISub(T),A=h.redMul(T.redISub(I)).redISub(o.redMul(x)),C=this.z.redMul(f);return this.curve.jpoint(I,A,C)};Ft.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var n=this;for(t=0;t<e;t++)n=n.dbl();return n}var i=this.curve.a,o=this.curve.tinv,s=this.x,f=this.y,h=this.z,g=h.redSqr().redSqr(),x=f.redAdd(f);for(t=0;t<e;t++){var T=s.redSqr(),I=x.redSqr(),A=I.redSqr(),C=T.redAdd(T).redIAdd(T).redIAdd(i.redMul(g)),j=s.redMul(I),G=C.redSqr().redISub(j.redAdd(j)),$=j.redISub(G),Z=C.redMul($);Z=Z.redIAdd(Z).redISub(A);var ee=x.redMul(h);t+1<e&&(g=g.redMul(A)),s=G,h=ee,x=Z}return this.curve.jpoint(s,x.redMul(o),h)};Ft.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};Ft.prototype._zeroDbl=function(){var e,t,n;if(this.zOne){var i=this.x.redSqr(),o=this.y.redSqr(),s=o.redSqr(),f=this.x.redAdd(o).redSqr().redISub(i).redISub(s);f=f.redIAdd(f);var h=i.redAdd(i).redIAdd(i),g=h.redSqr().redISub(f).redISub(f),x=s.redIAdd(s);x=x.redIAdd(x),x=x.redIAdd(x),e=g,t=h.redMul(f.redISub(g)).redISub(x),n=this.y.redAdd(this.y)}else{var T=this.x.redSqr(),I=this.y.redSqr(),A=I.redSqr(),C=this.x.redAdd(I).redSqr().redISub(T).redISub(A);C=C.redIAdd(C);var j=T.redAdd(T).redIAdd(T),G=j.redSqr(),$=A.redIAdd(A);$=$.redIAdd($),$=$.redIAdd($),e=G.redISub(C).redISub(C),t=j.redMul(C.redISub(e)).redISub($),n=this.y.redMul(this.z),n=n.redIAdd(n)}return this.curve.jpoint(e,t,n)};Ft.prototype._threeDbl=function(){var e,t,n;if(this.zOne){var i=this.x.redSqr(),o=this.y.redSqr(),s=o.redSqr(),f=this.x.redAdd(o).redSqr().redISub(i).redISub(s);f=f.redIAdd(f);var h=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),g=h.redSqr().redISub(f).redISub(f);e=g;var x=s.redIAdd(s);x=x.redIAdd(x),x=x.redIAdd(x),t=h.redMul(f.redISub(g)).redISub(x),n=this.y.redAdd(this.y)}else{var T=this.z.redSqr(),I=this.y.redSqr(),A=this.x.redMul(I),C=this.x.redSub(T).redMul(this.x.redAdd(T));C=C.redAdd(C).redIAdd(C);var j=A.redIAdd(A);j=j.redIAdd(j);var G=j.redAdd(j);e=C.redSqr().redISub(G),n=this.y.redAdd(this.z).redSqr().redISub(I).redISub(T);var $=I.redSqr();$=$.redIAdd($),$=$.redIAdd($),$=$.redIAdd($),t=C.redMul(j.redISub(e)).redISub($)}return this.curve.jpoint(e,t,n)};Ft.prototype._dbl=function(){var e=this.curve.a,t=this.x,n=this.y,i=this.z,o=i.redSqr().redSqr(),s=t.redSqr(),f=n.redSqr(),h=s.redAdd(s).redIAdd(s).redIAdd(e.redMul(o)),g=t.redAdd(t);g=g.redIAdd(g);var x=g.redMul(f),T=h.redSqr().redISub(x.redAdd(x)),I=x.redISub(T),A=f.redSqr();A=A.redIAdd(A),A=A.redIAdd(A),A=A.redIAdd(A);var C=h.redMul(I).redISub(A),j=n.redAdd(n).redMul(i);return this.curve.jpoint(T,C,j)};Ft.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),n=this.z.redSqr(),i=t.redSqr(),o=e.redAdd(e).redIAdd(e),s=o.redSqr(),f=this.x.redAdd(t).redSqr().redISub(e).redISub(i);f=f.redIAdd(f),f=f.redAdd(f).redIAdd(f),f=f.redISub(s);var h=f.redSqr(),g=i.redIAdd(i);g=g.redIAdd(g),g=g.redIAdd(g),g=g.redIAdd(g);var x=o.redIAdd(f).redSqr().redISub(s).redISub(h).redISub(g),T=t.redMul(x);T=T.redIAdd(T),T=T.redIAdd(T);var I=this.x.redMul(h).redISub(T);I=I.redIAdd(I),I=I.redIAdd(I);var A=this.y.redMul(x.redMul(g.redISub(x)).redISub(f.redMul(h)));A=A.redIAdd(A),A=A.redIAdd(A),A=A.redIAdd(A);var C=this.z.redAdd(f).redSqr().redISub(n).redISub(h);return this.curve.jpoint(I,A,C)};Ft.prototype.mul=function(e,t){return e=new lt(e,t),this.curve._wnafMul(this,e)};Ft.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),n=e.z.redSqr();if(this.x.redMul(n).redISub(e.x.redMul(t)).cmpn(0)!==0)return!1;var i=t.redMul(this.z),o=n.redMul(e.z);return this.y.redMul(o).redISub(e.y.redMul(i)).cmpn(0)===0};Ft.prototype.eqXToP=function(e){var t=this.z.redSqr(),n=e.toRed(this.curve.red).redMul(t);if(this.x.cmp(n)===0)return!0;for(var i=e.clone(),o=this.curve.redN.redMul(t);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(o),this.x.cmp(n)===0)return!0}};Ft.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};Ft.prototype.isInfinity=function(){return this.z.cmpn(0)===0}});var Nw=X((vC,Pw)=>{"use strict";var ps=jt(),Rw=Qt(),fu=Va(),G7=nr();function gs(r){fu.call(this,"mont",r),this.a=new ps(r.a,16).toRed(this.red),this.b=new ps(r.b,16).toRed(this.red),this.i4=new ps(4).toRed(this.red).redInvm(),this.two=new ps(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}Rw(gs,fu);Pw.exports=gs;gs.prototype.validate=function(e){var t=e.normalize().x,n=t.redSqr(),i=n.redMul(t).redAdd(n.redMul(this.a)).redAdd(t),o=i.redSqrt();return o.redSqr().cmp(i)===0};function St(r,e,t){fu.BasePoint.call(this,r,"projective"),e===null&&t===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new ps(e,16),this.z=new ps(t,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}Rw(St,fu.BasePoint);gs.prototype.decodePoint=function(e,t){return this.point(G7.toArray(e,t),1)};gs.prototype.point=function(e,t){return new St(this,e,t)};gs.prototype.pointFromJSON=function(e){return St.fromJSON(this,e)};St.prototype.precompute=function(){};St.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())};St.fromJSON=function(e,t){return new St(e,t[0],t[1]||e.one)};St.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};St.prototype.isInfinity=function(){return this.z.cmpn(0)===0};St.prototype.dbl=function(){var e=this.x.redAdd(this.z),t=e.redSqr(),n=this.x.redSub(this.z),i=n.redSqr(),o=t.redSub(i),s=t.redMul(i),f=o.redMul(i.redAdd(this.curve.a24.redMul(o)));return this.curve.point(s,f)};St.prototype.add=function(){throw new Error("Not supported on Montgomery curve")};St.prototype.diffAdd=function(e,t){var n=this.x.redAdd(this.z),i=this.x.redSub(this.z),o=e.x.redAdd(e.z),s=e.x.redSub(e.z),f=s.redMul(n),h=o.redMul(i),g=t.z.redMul(f.redAdd(h).redSqr()),x=t.x.redMul(f.redISub(h).redSqr());return this.curve.point(g,x)};St.prototype.mul=function(e){for(var t=e.clone(),n=this,i=this.curve.point(null,null),o=this,s=[];t.cmpn(0)!==0;t.iushrn(1))s.push(t.andln(1));for(var f=s.length-1;f>=0;f--)s[f]===0?(n=n.diffAdd(i,o),i=i.dbl()):(i=n.diffAdd(i,o),n=n.dbl());return i};St.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")};St.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")};St.prototype.eq=function(e){return this.getX().cmp(e.getX())===0};St.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this};St.prototype.getX=function(){return this.normalize(),this.x.fromRed()}});var Dw=X((wC,Lw)=>{"use strict";var V7=nr(),xn=jt(),kw=Qt(),cu=Va(),X7=V7.assert;function Gr(r){this.twisted=(r.a|0)!==1,this.mOneA=this.twisted&&(r.a|0)===-1,this.extended=this.mOneA,cu.call(this,"edwards",r),this.a=new xn(r.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new xn(r.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new xn(r.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),X7(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(r.c|0)===1}kw(Gr,cu);Lw.exports=Gr;Gr.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)};Gr.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)};Gr.prototype.jpoint=function(e,t,n,i){return this.point(e,t,n,i)};Gr.prototype.pointFromX=function(e,t){e=new xn(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr(),i=this.c2.redSub(this.a.redMul(n)),o=this.one.redSub(this.c2.redMul(this.d).redMul(n)),s=i.redMul(o.redInvm()),f=s.redSqrt();if(f.redSqr().redSub(s).cmp(this.zero)!==0)throw new Error("invalid point");var h=f.fromRed().isOdd();return(t&&!h||!t&&h)&&(f=f.redNeg()),this.point(e,f)};Gr.prototype.pointFromY=function(e,t){e=new xn(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr(),i=n.redSub(this.c2),o=n.redMul(this.d).redMul(this.c2).redSub(this.a),s=i.redMul(o.redInvm());if(s.cmp(this.zero)===0){if(t)throw new Error("invalid point");return this.point(this.zero,e)}var f=s.redSqrt();if(f.redSqr().redSub(s).cmp(this.zero)!==0)throw new Error("invalid point");return f.fromRed().isOdd()!==t&&(f=f.redNeg()),this.point(f,e)};Gr.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var t=e.x.redSqr(),n=e.y.redSqr(),i=t.redMul(this.a).redAdd(n),o=this.c2.redMul(this.one.redAdd(this.d.redMul(t).redMul(n)));return i.cmp(o)===0};function nt(r,e,t,n,i){cu.BasePoint.call(this,r,"projective"),e===null&&t===null&&n===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new xn(e,16),this.y=new xn(t,16),this.z=n?new xn(n,16):this.curve.one,this.t=i&&new xn(i,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}kw(nt,cu.BasePoint);Gr.prototype.pointFromJSON=function(e){return nt.fromJSON(this,e)};Gr.prototype.point=function(e,t,n,i){return new nt(this,e,t,n,i)};nt.fromJSON=function(e,t){return new nt(e,t[0],t[1],t[2])};nt.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};nt.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)};nt.prototype._extDbl=function(){var e=this.x.redSqr(),t=this.y.redSqr(),n=this.z.redSqr();n=n.redIAdd(n);var i=this.curve._mulA(e),o=this.x.redAdd(this.y).redSqr().redISub(e).redISub(t),s=i.redAdd(t),f=s.redSub(n),h=i.redSub(t),g=o.redMul(f),x=s.redMul(h),T=o.redMul(h),I=f.redMul(s);return this.curve.point(g,x,I,T)};nt.prototype._projDbl=function(){var e=this.x.redAdd(this.y).redSqr(),t=this.x.redSqr(),n=this.y.redSqr(),i,o,s,f,h,g;if(this.curve.twisted){f=this.curve._mulA(t);var x=f.redAdd(n);this.zOne?(i=e.redSub(t).redSub(n).redMul(x.redSub(this.curve.two)),o=x.redMul(f.redSub(n)),s=x.redSqr().redSub(x).redSub(x)):(h=this.z.redSqr(),g=x.redSub(h).redISub(h),i=e.redSub(t).redISub(n).redMul(g),o=x.redMul(f.redSub(n)),s=x.redMul(g))}else f=t.redAdd(n),h=this.curve._mulC(this.z).redSqr(),g=f.redSub(h).redSub(h),i=this.curve._mulC(e.redISub(f)).redMul(g),o=this.curve._mulC(f).redMul(t.redISub(n)),s=f.redMul(g);return this.curve.point(i,o,s)};nt.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()};nt.prototype._extAdd=function(e){var t=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),n=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),i=this.t.redMul(this.curve.dd).redMul(e.t),o=this.z.redMul(e.z.redAdd(e.z)),s=n.redSub(t),f=o.redSub(i),h=o.redAdd(i),g=n.redAdd(t),x=s.redMul(f),T=h.redMul(g),I=s.redMul(g),A=f.redMul(h);return this.curve.point(x,T,A,I)};nt.prototype._projAdd=function(e){var t=this.z.redMul(e.z),n=t.redSqr(),i=this.x.redMul(e.x),o=this.y.redMul(e.y),s=this.curve.d.redMul(i).redMul(o),f=n.redSub(s),h=n.redAdd(s),g=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(i).redISub(o),x=t.redMul(f).redMul(g),T,I;return this.curve.twisted?(T=t.redMul(h).redMul(o.redSub(this.curve._mulA(i))),I=f.redMul(h)):(T=t.redMul(h).redMul(o.redSub(i)),I=this.curve._mulC(f).redMul(h)),this.curve.point(x,T,I)};nt.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)};nt.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)};nt.prototype.mulAdd=function(e,t,n){return this.curve._wnafMulAdd(1,[this,t],[e,n],2,!1)};nt.prototype.jmulAdd=function(e,t,n){return this.curve._wnafMulAdd(1,[this,t],[e,n],2,!0)};nt.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this};nt.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())};nt.prototype.getX=function(){return this.normalize(),this.x.fromRed()};nt.prototype.getY=function(){return this.normalize(),this.y.fromRed()};nt.prototype.eq=function(e){return this===e||this.getX().cmp(e.getX())===0&&this.getY().cmp(e.getY())===0};nt.prototype.eqXToP=function(e){var t=e.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(t)===0)return!0;for(var n=e.clone(),i=this.curve.redN.redMul(this.z);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(t.redIAdd(i),this.x.cmp(t)===0)return!0}};nt.prototype.toP=nt.prototype.normalize;nt.prototype.mixedAdd=nt.prototype.add});var Ed=X(Uw=>{"use strict";var uu=Uw;uu.base=Va();uu.short=Ow();uu.mont=Nw();uu.edwards=Dw()});var Br=X(tt=>{"use strict";var J7=pn(),Y7=Qt();tt.inherits=Y7;function Q7(r,e){return(r.charCodeAt(e)&64512)!==55296||e<0||e+1>=r.length?!1:(r.charCodeAt(e+1)&64512)===56320}function Z7(r,e){if(Array.isArray(r))return r.slice();if(!r)return[];var t=[];if(typeof r=="string")if(e){if(e==="hex")for(r=r.replace(/[^a-z0-9]+/ig,""),r.length%2!==0&&(r="0"+r),i=0;i<r.length;i+=2)t.push(parseInt(r[i]+r[i+1],16))}else for(var n=0,i=0;i<r.length;i++){var o=r.charCodeAt(i);o<128?t[n++]=o:o<2048?(t[n++]=o>>6|192,t[n++]=o&63|128):Q7(r,i)?(o=65536+((o&1023)<<10)+(r.charCodeAt(++i)&1023),t[n++]=o>>18|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128,t[n++]=o&63|128):(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=o&63|128)}else for(i=0;i<r.length;i++)t[i]=r[i]|0;return t}tt.toArray=Z7;function e9(r){for(var e="",t=0;t<r.length;t++)e+=jw(r[t].toString(16));return e}tt.toHex=e9;function qw(r){var e=r>>>24|r>>>8&65280|r<<8&16711680|(r&255)<<24;return e>>>0}tt.htonl=qw;function t9(r,e){for(var t="",n=0;n<r.length;n++){var i=r[n];e==="little"&&(i=qw(i)),t+=Ww(i.toString(16))}return t}tt.toHex32=t9;function jw(r){return r.length===1?"0"+r:r}tt.zero2=jw;function Ww(r){return r.length===7?"0"+r:r.length===6?"00"+r:r.length===5?"000"+r:r.length===4?"0000"+r:r.length===3?"00000"+r:r.length===2?"000000"+r:r.length===1?"0000000"+r:r}tt.zero8=Ww;function r9(r,e,t,n){var i=t-e;J7(i%4===0);for(var o=new Array(i/4),s=0,f=e;s<o.length;s++,f+=4){var h;n==="big"?h=r[f]<<24|r[f+1]<<16|r[f+2]<<8|r[f+3]:h=r[f+3]<<24|r[f+2]<<16|r[f+1]<<8|r[f],o[s]=h>>>0}return o}tt.join32=r9;function n9(r,e){for(var t=new Array(r.length*4),n=0,i=0;n<r.length;n++,i+=4){var o=r[n];e==="big"?(t[i]=o>>>24,t[i+1]=o>>>16&255,t[i+2]=o>>>8&255,t[i+3]=o&255):(t[i+3]=o>>>24,t[i+2]=o>>>16&255,t[i+1]=o>>>8&255,t[i]=o&255)}return t}tt.split32=n9;function i9(r,e){return r>>>e|r<<32-e}tt.rotr32=i9;function o9(r,e){return r<<e|r>>>32-e}tt.rotl32=o9;function s9(r,e){return r+e>>>0}tt.sum32=s9;function a9(r,e,t){return r+e+t>>>0}tt.sum32_3=a9;function f9(r,e,t,n){return r+e+t+n>>>0}tt.sum32_4=f9;function c9(r,e,t,n,i){return r+e+t+n+i>>>0}tt.sum32_5=c9;function u9(r,e,t,n){var i=r[e],o=r[e+1],s=n+o>>>0,f=(s<n?1:0)+t+i;r[e]=f>>>0,r[e+1]=s}tt.sum64=u9;function l9(r,e,t,n){var i=e+n>>>0,o=(i<e?1:0)+r+t;return o>>>0}tt.sum64_hi=l9;function h9(r,e,t,n){var i=e+n;return i>>>0}tt.sum64_lo=h9;function d9(r,e,t,n,i,o,s,f){var h=0,g=e;g=g+n>>>0,h+=g<e?1:0,g=g+o>>>0,h+=g<o?1:0,g=g+f>>>0,h+=g<f?1:0;var x=r+t+i+s+h;return x>>>0}tt.sum64_4_hi=d9;function p9(r,e,t,n,i,o,s,f){var h=e+n+o+f;return h>>>0}tt.sum64_4_lo=p9;function g9(r,e,t,n,i,o,s,f,h,g){var x=0,T=e;T=T+n>>>0,x+=T<e?1:0,T=T+o>>>0,x+=T<o?1:0,T=T+f>>>0,x+=T<f?1:0,T=T+g>>>0,x+=T<g?1:0;var I=r+t+i+s+h+x;return I>>>0}tt.sum64_5_hi=g9;function m9(r,e,t,n,i,o,s,f,h,g){var x=e+n+o+f+g;return x>>>0}tt.sum64_5_lo=m9;function y9(r,e,t){var n=e<<32-t|r>>>t;return n>>>0}tt.rotr64_hi=y9;function b9(r,e,t){var n=r<<32-t|e>>>t;return n>>>0}tt.rotr64_lo=b9;function v9(r,e,t){return r>>>t}tt.shr64_hi=v9;function w9(r,e,t){var n=r<<32-t|e>>>t;return n>>>0}tt.shr64_lo=w9});var ms=X(Hw=>{"use strict";var $w=Br(),x9=pn();function lu(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}Hw.BlockHash=lu;lu.prototype.update=function(e,t){if(e=$w.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){e=this.pending;var n=e.length%this._delta8;this.pending=e.slice(e.length-n,e.length),this.pending.length===0&&(this.pending=null),e=$w.join32(e,0,e.length-n,this.endian);for(var i=0;i<e.length;i+=this._delta32)this._update(e,i,i+this._delta32)}return this};lu.prototype.digest=function(e){return this.update(this._pad()),x9(this.pending===null),this._digest(e)};lu.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,n=t-(e+this.padLength)%t,i=new Array(n+this.padLength);i[0]=128;for(var o=1;o<n;o++)i[o]=0;if(e<<=3,this.endian==="big"){for(var s=8;s<this.padLength;s++)i[o++]=0;i[o++]=0,i[o++]=0,i[o++]=0,i[o++]=0,i[o++]=e>>>24&255,i[o++]=e>>>16&255,i[o++]=e>>>8&255,i[o++]=e&255}else for(i[o++]=e&255,i[o++]=e>>>8&255,i[o++]=e>>>16&255,i[o++]=e>>>24&255,i[o++]=0,i[o++]=0,i[o++]=0,i[o++]=0,s=8;s<this.padLength;s++)i[o++]=0;return i}});var Ad=X(_n=>{"use strict";var _9=Br(),Vr=_9.rotr32;function S9(r,e,t,n){if(r===0)return Kw(e,t,n);if(r===1||r===3)return Gw(e,t,n);if(r===2)return zw(e,t,n)}_n.ft_1=S9;function Kw(r,e,t){return r&e^~r&t}_n.ch32=Kw;function zw(r,e,t){return r&e^r&t^e&t}_n.maj32=zw;function Gw(r,e,t){return r^e^t}_n.p32=Gw;function E9(r){return Vr(r,2)^Vr(r,13)^Vr(r,22)}_n.s0_256=E9;function A9(r){return Vr(r,6)^Vr(r,11)^Vr(r,25)}_n.s1_256=A9;function F9(r){return Vr(r,7)^Vr(r,18)^r>>>3}_n.g0_256=F9;function T9(r){return Vr(r,17)^Vr(r,19)^r>>>10}_n.g1_256=T9});var Jw=X((AC,Xw)=>{"use strict";var ys=Br(),M9=ms(),I9=Ad(),Fd=ys.rotl32,Xa=ys.sum32,C9=ys.sum32_5,B9=I9.ft_1,Vw=M9.BlockHash,O9=[1518500249,1859775393,2400959708,3395469782];function Xr(){if(!(this instanceof Xr))return new Xr;Vw.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}ys.inherits(Xr,Vw);Xw.exports=Xr;Xr.blockSize=512;Xr.outSize=160;Xr.hmacStrength=80;Xr.padLength=64;Xr.prototype._update=function(e,t){for(var n=this.W,i=0;i<16;i++)n[i]=e[t+i];for(;i<n.length;i++)n[i]=Fd(n[i-3]^n[i-8]^n[i-14]^n[i-16],1);var o=this.h[0],s=this.h[1],f=this.h[2],h=this.h[3],g=this.h[4];for(i=0;i<n.length;i++){var x=~~(i/20),T=C9(Fd(o,5),B9(x,s,f,h),g,n[i],O9[x]);g=h,h=f,f=Fd(s,30),s=o,o=T}this.h[0]=Xa(this.h[0],o),this.h[1]=Xa(this.h[1],s),this.h[2]=Xa(this.h[2],f),this.h[3]=Xa(this.h[3],h),this.h[4]=Xa(this.h[4],g)};Xr.prototype._digest=function(e){return e==="hex"?ys.toHex32(this.h,"big"):ys.split32(this.h,"big")}});var Td=X((FC,Qw)=>{"use strict";var bs=Br(),R9=ms(),vs=Ad(),P9=pn(),Or=bs.sum32,N9=bs.sum32_4,k9=bs.sum32_5,L9=vs.ch32,D9=vs.maj32,U9=vs.s0_256,q9=vs.s1_256,j9=vs.g0_256,W9=vs.g1_256,Yw=R9.BlockHash,$9=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Jr(){if(!(this instanceof Jr))return new Jr;Yw.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=$9,this.W=new Array(64)}bs.inherits(Jr,Yw);Qw.exports=Jr;Jr.blockSize=512;Jr.outSize=256;Jr.hmacStrength=192;Jr.padLength=64;Jr.prototype._update=function(e,t){for(var n=this.W,i=0;i<16;i++)n[i]=e[t+i];for(;i<n.length;i++)n[i]=N9(W9(n[i-2]),n[i-7],j9(n[i-15]),n[i-16]);var o=this.h[0],s=this.h[1],f=this.h[2],h=this.h[3],g=this.h[4],x=this.h[5],T=this.h[6],I=this.h[7];for(P9(this.k.length===n.length),i=0;i<n.length;i++){var A=k9(I,q9(g),L9(g,x,T),this.k[i],n[i]),C=Or(U9(o),D9(o,s,f));I=T,T=x,x=g,g=Or(h,A),h=f,f=s,s=o,o=Or(A,C)}this.h[0]=Or(this.h[0],o),this.h[1]=Or(this.h[1],s),this.h[2]=Or(this.h[2],f),this.h[3]=Or(this.h[3],h),this.h[4]=Or(this.h[4],g),this.h[5]=Or(this.h[5],x),this.h[6]=Or(this.h[6],T),this.h[7]=Or(this.h[7],I)};Jr.prototype._digest=function(e){return e==="hex"?bs.toHex32(this.h,"big"):bs.split32(this.h,"big")}});var t2=X((TC,e2)=>{"use strict";var Md=Br(),Zw=Td();function Sn(){if(!(this instanceof Sn))return new Sn;Zw.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}Md.inherits(Sn,Zw);e2.exports=Sn;Sn.blockSize=512;Sn.outSize=224;Sn.hmacStrength=192;Sn.padLength=64;Sn.prototype._digest=function(e){return e==="hex"?Md.toHex32(this.h.slice(0,7),"big"):Md.split32(this.h.slice(0,7),"big")}});var Bd=X((MC,o2)=>{"use strict";var Wt=Br(),H9=ms(),K9=pn(),Yr=Wt.rotr64_hi,Qr=Wt.rotr64_lo,r2=Wt.shr64_hi,n2=Wt.shr64_lo,Jn=Wt.sum64,Id=Wt.sum64_hi,Cd=Wt.sum64_lo,z9=Wt.sum64_4_hi,G9=Wt.sum64_4_lo,V9=Wt.sum64_5_hi,X9=Wt.sum64_5_lo,i2=H9.BlockHash,J9=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Rr(){if(!(this instanceof Rr))return new Rr;i2.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=J9,this.W=new Array(160)}Wt.inherits(Rr,i2);o2.exports=Rr;Rr.blockSize=1024;Rr.outSize=512;Rr.hmacStrength=192;Rr.padLength=128;Rr.prototype._prepareBlock=function(e,t){for(var n=this.W,i=0;i<32;i++)n[i]=e[t+i];for(;i<n.length;i+=2){var o=aA(n[i-4],n[i-3]),s=fA(n[i-4],n[i-3]),f=n[i-14],h=n[i-13],g=oA(n[i-30],n[i-29]),x=sA(n[i-30],n[i-29]),T=n[i-32],I=n[i-31];n[i]=z9(o,s,f,h,g,x,T,I),n[i+1]=G9(o,s,f,h,g,x,T,I)}};Rr.prototype._update=function(e,t){this._prepareBlock(e,t);var n=this.W,i=this.h[0],o=this.h[1],s=this.h[2],f=this.h[3],h=this.h[4],g=this.h[5],x=this.h[6],T=this.h[7],I=this.h[8],A=this.h[9],C=this.h[10],j=this.h[11],G=this.h[12],$=this.h[13],Z=this.h[14],ee=this.h[15];K9(this.k.length===n.length);for(var se=0;se<n.length;se+=2){var V=Z,q=ee,z=nA(I,A),J=iA(I,A),H=Y9(I,A,C,j,G,$),L=Q9(I,A,C,j,G,$),l=this.k[se],b=this.k[se+1],d=n[se],a=n[se+1],u=V9(V,q,z,J,H,L,l,b,d,a),v=X9(V,q,z,J,H,L,l,b,d,a);V=tA(i,o),q=rA(i,o),z=Z9(i,o,s,f,h,g),J=eA(i,o,s,f,h,g);var F=Id(V,q,z,J),p=Cd(V,q,z,J);Z=G,ee=$,G=C,$=j,C=I,j=A,I=Id(x,T,u,v),A=Cd(T,T,u,v),x=h,T=g,h=s,g=f,s=i,f=o,i=Id(u,v,F,p),o=Cd(u,v,F,p)}Jn(this.h,0,i,o),Jn(this.h,2,s,f),Jn(this.h,4,h,g),Jn(this.h,6,x,T),Jn(this.h,8,I,A),Jn(this.h,10,C,j),Jn(this.h,12,G,$),Jn(this.h,14,Z,ee)};Rr.prototype._digest=function(e){return e==="hex"?Wt.toHex32(this.h,"big"):Wt.split32(this.h,"big")};function Y9(r,e,t,n,i){var o=r&t^~r&i;return o<0&&(o+=4294967296),o}function Q9(r,e,t,n,i,o){var s=e&n^~e&o;return s<0&&(s+=4294967296),s}function Z9(r,e,t,n,i){var o=r&t^r&i^t&i;return o<0&&(o+=4294967296),o}function eA(r,e,t,n,i,o){var s=e&n^e&o^n&o;return s<0&&(s+=4294967296),s}function tA(r,e){var t=Yr(r,e,28),n=Yr(e,r,2),i=Yr(e,r,7),o=t^n^i;return o<0&&(o+=4294967296),o}function rA(r,e){var t=Qr(r,e,28),n=Qr(e,r,2),i=Qr(e,r,7),o=t^n^i;return o<0&&(o+=4294967296),o}function nA(r,e){var t=Yr(r,e,14),n=Yr(r,e,18),i=Yr(e,r,9),o=t^n^i;return o<0&&(o+=4294967296),o}function iA(r,e){var t=Qr(r,e,14),n=Qr(r,e,18),i=Qr(e,r,9),o=t^n^i;return o<0&&(o+=4294967296),o}function oA(r,e){var t=Yr(r,e,1),n=Yr(r,e,8),i=r2(r,e,7),o=t^n^i;return o<0&&(o+=4294967296),o}function sA(r,e){var t=Qr(r,e,1),n=Qr(r,e,8),i=n2(r,e,7),o=t^n^i;return o<0&&(o+=4294967296),o}function aA(r,e){var t=Yr(r,e,19),n=Yr(e,r,29),i=r2(r,e,6),o=t^n^i;return o<0&&(o+=4294967296),o}function fA(r,e){var t=Qr(r,e,19),n=Qr(e,r,29),i=n2(r,e,6),o=t^n^i;return o<0&&(o+=4294967296),o}});var f2=X((IC,a2)=>{"use strict";var Od=Br(),s2=Bd();function En(){if(!(this instanceof En))return new En;s2.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}Od.inherits(En,s2);a2.exports=En;En.blockSize=1024;En.outSize=384;En.hmacStrength=192;En.padLength=128;En.prototype._digest=function(e){return e==="hex"?Od.toHex32(this.h.slice(0,12),"big"):Od.split32(this.h.slice(0,12),"big")}});var c2=X(ws=>{"use strict";ws.sha1=Jw();ws.sha224=t2();ws.sha256=Td();ws.sha384=f2();ws.sha512=Bd()});var g2=X(p2=>{"use strict";var Zi=Br(),cA=ms(),hu=Zi.rotl32,u2=Zi.sum32,Ja=Zi.sum32_3,l2=Zi.sum32_4,d2=cA.BlockHash;function Zr(){if(!(this instanceof Zr))return new Zr;d2.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}Zi.inherits(Zr,d2);p2.ripemd160=Zr;Zr.blockSize=512;Zr.outSize=160;Zr.hmacStrength=192;Zr.padLength=64;Zr.prototype._update=function(e,t){for(var n=this.h[0],i=this.h[1],o=this.h[2],s=this.h[3],f=this.h[4],h=n,g=i,x=o,T=s,I=f,A=0;A<80;A++){var C=u2(hu(l2(n,h2(A,i,o,s),e[hA[A]+t],uA(A)),pA[A]),f);n=f,f=s,s=hu(o,10),o=i,i=C,C=u2(hu(l2(h,h2(79-A,g,x,T),e[dA[A]+t],lA(A)),gA[A]),I),h=I,I=T,T=hu(x,10),x=g,g=C}C=Ja(this.h[1],o,T),this.h[1]=Ja(this.h[2],s,I),this.h[2]=Ja(this.h[3],f,h),this.h[3]=Ja(this.h[4],n,g),this.h[4]=Ja(this.h[0],i,x),this.h[0]=C};Zr.prototype._digest=function(e){return e==="hex"?Zi.toHex32(this.h,"little"):Zi.split32(this.h,"little")};function h2(r,e,t,n){return r<=15?e^t^n:r<=31?e&t|~e&n:r<=47?(e|~t)^n:r<=63?e&n|t&~n:e^(t|~n)}function uA(r){return r<=15?0:r<=31?1518500249:r<=47?1859775393:r<=63?2400959708:2840853838}function lA(r){return r<=15?1352829926:r<=31?1548603684:r<=47?1836072691:r<=63?2053994217:0}var hA=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],dA=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],pA=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],gA=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]});var y2=X((OC,m2)=>{"use strict";var mA=Br(),yA=pn();function xs(r,e,t){if(!(this instanceof xs))return new xs(r,e,t);this.Hash=r,this.blockSize=r.blockSize/8,this.outSize=r.outSize/8,this.inner=null,this.outer=null,this._init(mA.toArray(e,t))}m2.exports=xs;xs.prototype._init=function(e){e.length>this.blockSize&&(e=new this.Hash().update(e).digest()),yA(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=new this.Hash().update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=new this.Hash().update(e)};xs.prototype.update=function(e,t){return this.inner.update(e,t),this};xs.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)}});var du=X(b2=>{var Tt=b2;Tt.utils=Br();Tt.common=ms();Tt.sha=c2();Tt.ripemd=g2();Tt.hmac=y2();Tt.sha1=Tt.sha.sha1;Tt.sha256=Tt.sha.sha256;Tt.sha224=Tt.sha.sha224;Tt.sha384=Tt.sha.sha384;Tt.sha512=Tt.sha.sha512;Tt.ripemd160=Tt.ripemd.ripemd160});var w2=X((PC,v2)=>{v2.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}});var pu=X(S2=>{"use strict";var Pd=S2,Yn=du(),Rd=Ed(),bA=nr(),x2=bA.assert;function _2(r){r.type==="short"?this.curve=new Rd.short(r):r.type==="edwards"?this.curve=new Rd.edwards(r):this.curve=new Rd.mont(r),this.g=this.curve.g,this.n=this.curve.n,this.hash=r.hash,x2(this.g.validate(),"Invalid curve"),x2(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}Pd.PresetCurve=_2;function Qn(r,e){Object.defineProperty(Pd,r,{configurable:!0,enumerable:!0,get:function(){var t=new _2(e);return Object.defineProperty(Pd,r,{configurable:!0,enumerable:!0,value:t}),t}})}Qn("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:Yn.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]});Qn("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:Yn.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]});Qn("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:Yn.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]});Qn("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:Yn.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]});Qn("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:Yn.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]});Qn("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Yn.sha256,gRed:!1,g:["9"]});Qn("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Yn.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var Nd;try{Nd=w2()}catch{Nd=void 0}Qn("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:Yn.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",Nd]})});var F2=X((kC,A2)=>{"use strict";var vA=du(),eo=bd(),E2=pn();function Zn(r){if(!(this instanceof Zn))return new Zn(r);this.hash=r.hash,this.predResist=!!r.predResist,this.outLen=this.hash.outSize,this.minEntropy=r.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=eo.toArray(r.entropy,r.entropyEnc||"hex"),t=eo.toArray(r.nonce,r.nonceEnc||"hex"),n=eo.toArray(r.pers,r.persEnc||"hex");E2(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,t,n)}A2.exports=Zn;Zn.prototype._init=function(e,t,n){var i=e.concat(t).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var o=0;o<this.V.length;o++)this.K[o]=0,this.V[o]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656};Zn.prototype._hmac=function(){return new vA.hmac(this.hash,this.K)};Zn.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};Zn.prototype.reseed=function(e,t,n,i){typeof t!="string"&&(i=n,n=t,t=null),e=eo.toArray(e,t),n=eo.toArray(n,i),E2(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(n||[])),this._reseed=1};Zn.prototype.generate=function(e,t,n,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof t!="string"&&(i=n,n=t,t=null),n&&(n=eo.toArray(n,i||"hex"),this._update(n));for(var o=[];o.length<e;)this.V=this._hmac().update(this.V).digest(),o=o.concat(this.V);var s=o.slice(0,e);return this._update(n),this._reseed++,eo.encode(s,t)}});var M2=X((LC,T2)=>{"use strict";var wA=jt(),xA=nr(),kd=xA.assert;function Ct(r,e){this.ec=r,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}T2.exports=Ct;Ct.fromPublic=function(e,t,n){return t instanceof Ct?t:new Ct(e,{pub:t,pubEnc:n})};Ct.fromPrivate=function(e,t,n){return t instanceof Ct?t:new Ct(e,{priv:t,privEnc:n})};Ct.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};Ct.prototype.getPublic=function(e,t){return typeof e=="string"&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub};Ct.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};Ct.prototype._importPrivate=function(e,t){this.priv=new wA(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)};Ct.prototype._importPublic=function(e,t){if(e.x||e.y){this.ec.curve.type==="mont"?kd(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&kd(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,t)};Ct.prototype.derive=function(e){return e.validate()||kd(e.validate(),"public point not validated"),e.mul(this.priv).getX()};Ct.prototype.sign=function(e,t,n){return this.ec.sign(e,this,t,n)};Ct.prototype.verify=function(e,t){return this.ec.verify(e,t,this)};Ct.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}});var B2=X((DC,C2)=>{"use strict";var gu=jt(),Ud=nr(),_A=Ud.assert;function mu(r,e){if(r instanceof mu)return r;this._importDER(r,e)||(_A(r.r&&r.s,"Signature without r or s"),this.r=new gu(r.r,16),this.s=new gu(r.s,16),r.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=r.recoveryParam)}C2.exports=mu;function SA(){this.place=0}function Ld(r,e){var t=r[e.place++];if(!(t&128))return t;var n=t&15;if(n===0||n>4)return!1;for(var i=0,o=0,s=e.place;o<n;o++,s++)i<<=8,i|=r[s],i>>>=0;return i<=127?!1:(e.place=s,i)}function I2(r){for(var e=0,t=r.length-1;!r[e]&&!(r[e+1]&128)&&e<t;)e++;return e===0?r:r.slice(e)}mu.prototype._importDER=function(e,t){e=Ud.toArray(e,t);var n=new SA;if(e[n.place++]!==48)return!1;var i=Ld(e,n);if(i===!1||i+n.place!==e.length||e[n.place++]!==2)return!1;var o=Ld(e,n);if(o===!1)return!1;var s=e.slice(n.place,o+n.place);if(n.place+=o,e[n.place++]!==2)return!1;var f=Ld(e,n);if(f===!1||e.length!==f+n.place)return!1;var h=e.slice(n.place,f+n.place);if(s[0]===0)if(s[1]&128)s=s.slice(1);else return!1;if(h[0]===0)if(h[1]&128)h=h.slice(1);else return!1;return this.r=new gu(s),this.s=new gu(h),this.recoveryParam=null,!0};function Dd(r,e){if(e<128){r.push(e);return}var t=1+(Math.log(e)/Math.LN2>>>3);for(r.push(t|128);--t;)r.push(e>>>(t<<3)&255);r.push(e)}mu.prototype.toDER=function(e){var t=this.r.toArray(),n=this.s.toArray();for(t[0]&128&&(t=[0].concat(t)),n[0]&128&&(n=[0].concat(n)),t=I2(t),n=I2(n);!n[0]&&!(n[1]&128);)n=n.slice(1);var i=[2];Dd(i,t.length),i=i.concat(t),i.push(2),Dd(i,n.length);var o=i.concat(n),s=[48];return Dd(s,o.length),s=s.concat(o),Ud.encode(s,e)}});var N2=X((UC,P2)=>{"use strict";var to=jt(),O2=F2(),EA=nr(),qd=pu(),AA=_d(),R2=EA.assert,jd=M2(),yu=B2();function xr(r){if(!(this instanceof xr))return new xr(r);typeof r=="string"&&(R2(Object.prototype.hasOwnProperty.call(qd,r),"Unknown curve "+r),r=qd[r]),r instanceof qd.PresetCurve&&(r={curve:r}),this.curve=r.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=r.curve.g,this.g.precompute(r.curve.n.bitLength()+1),this.hash=r.hash||r.curve.hash}P2.exports=xr;xr.prototype.keyPair=function(e){return new jd(this,e)};xr.prototype.keyFromPrivate=function(e,t){return jd.fromPrivate(this,e,t)};xr.prototype.keyFromPublic=function(e,t){return jd.fromPublic(this,e,t)};xr.prototype.genKeyPair=function(e){e||(e={});for(var t=new O2({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||AA(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),i=this.n.sub(new to(2));;){var o=new to(t.generate(n));if(!(o.cmp(i)>0))return o.iaddn(1),this.keyFromPrivate(o)}};xr.prototype._truncateToN=function(e,t){var n=e.byteLength()*8-this.n.bitLength();return n>0&&(e=e.ushrn(n)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e};xr.prototype.sign=function(e,t,n,i){typeof n=="object"&&(i=n,n=null),i||(i={}),t=this.keyFromPrivate(t,n),e=this._truncateToN(new to(e,16));for(var o=this.n.byteLength(),s=t.getPrivate().toArray("be",o),f=e.toArray("be",o),h=new O2({hash:this.hash,entropy:s,nonce:f,pers:i.pers,persEnc:i.persEnc||"utf8"}),g=this.n.sub(new to(1)),x=0;;x++){var T=i.k?i.k(x):new to(h.generate(this.n.byteLength()));if(T=this._truncateToN(T,!0),!(T.cmpn(1)<=0||T.cmp(g)>=0)){var I=this.g.mul(T);if(!I.isInfinity()){var A=I.getX(),C=A.umod(this.n);if(C.cmpn(0)!==0){var j=T.invm(this.n).mul(C.mul(t.getPrivate()).iadd(e));if(j=j.umod(this.n),j.cmpn(0)!==0){var G=(I.getY().isOdd()?1:0)|(A.cmp(C)!==0?2:0);return i.canonical&&j.cmp(this.nh)>0&&(j=this.n.sub(j),G^=1),new yu({r:C,s:j,recoveryParam:G})}}}}}};xr.prototype.verify=function(e,t,n,i){e=this._truncateToN(new to(e,16)),n=this.keyFromPublic(n,i),t=new yu(t,"hex");var o=t.r,s=t.s;if(o.cmpn(1)<0||o.cmp(this.n)>=0||s.cmpn(1)<0||s.cmp(this.n)>=0)return!1;var f=s.invm(this.n),h=f.mul(e).umod(this.n),g=f.mul(o).umod(this.n),x;return this.curve._maxwellTrick?(x=this.g.jmulAdd(h,n.getPublic(),g),x.isInfinity()?!1:x.eqXToP(o)):(x=this.g.mulAdd(h,n.getPublic(),g),x.isInfinity()?!1:x.getX().umod(this.n).cmp(o)===0)};xr.prototype.recoverPubKey=function(r,e,t,n){R2((3&t)===t,"The recovery param is more than two bits"),e=new yu(e,n);var i=this.n,o=new to(r),s=e.r,f=e.s,h=t&1,g=t>>1;if(s.cmp(this.curve.p.umod(this.curve.n))>=0&&g)throw new Error("Unable to find sencond key candinate");g?s=this.curve.pointFromX(s.add(this.curve.n),h):s=this.curve.pointFromX(s,h);var x=e.r.invm(i),T=i.sub(o).mul(x).umod(i),I=f.mul(x).umod(i);return this.g.mulAdd(T,s,I)};xr.prototype.getKeyRecoveryParam=function(r,e,t,n){if(e=new yu(e,n),e.recoveryParam!==null)return e.recoveryParam;for(var i=0;i<4;i++){var o;try{o=this.recoverPubKey(r,e,i)}catch{continue}if(o.eq(t))return i}throw new Error("Unable to find valid recovery factor")}});var U2=X((qC,D2)=>{"use strict";var Ya=nr(),L2=Ya.assert,k2=Ya.parseBytes,_s=Ya.cachedProperty;function Et(r,e){this.eddsa=r,this._secret=k2(e.secret),r.isPoint(e.pub)?this._pub=e.pub:this._pubBytes=k2(e.pub)}Et.fromPublic=function(e,t){return t instanceof Et?t:new Et(e,{pub:t})};Et.fromSecret=function(e,t){return t instanceof Et?t:new Et(e,{secret:t})};Et.prototype.secret=function(){return this._secret};_s(Et,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())});_s(Et,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())});_s(Et,"privBytes",function(){var e=this.eddsa,t=this.hash(),n=e.encodingLength-1,i=t.slice(0,e.encodingLength);return i[0]&=248,i[n]&=127,i[n]|=64,i});_s(Et,"priv",function(){return this.eddsa.decodeInt(this.privBytes())});_s(Et,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()});_s(Et,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)});Et.prototype.sign=function(e){return L2(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)};Et.prototype.verify=function(e,t){return this.eddsa.verify(e,t,this)};Et.prototype.getSecret=function(e){return L2(this._secret,"KeyPair is public only"),Ya.encode(this.secret(),e)};Et.prototype.getPublic=function(e){return Ya.encode(this.pubBytes(),e)};D2.exports=Et});var j2=X((jC,q2)=>{"use strict";var FA=jt(),bu=nr(),TA=bu.assert,vu=bu.cachedProperty,MA=bu.parseBytes;function ro(r,e){this.eddsa=r,typeof e!="object"&&(e=MA(e)),Array.isArray(e)&&(e={R:e.slice(0,r.encodingLength),S:e.slice(r.encodingLength)}),TA(e.R&&e.S,"Signature without R or S"),r.isPoint(e.R)&&(this._R=e.R),e.S instanceof FA&&(this._S=e.S),this._Rencoded=Array.isArray(e.R)?e.R:e.Rencoded,this._Sencoded=Array.isArray(e.S)?e.S:e.Sencoded}vu(ro,"S",function(){return this.eddsa.decodeInt(this.Sencoded())});vu(ro,"R",function(){return this.eddsa.decodePoint(this.Rencoded())});vu(ro,"Rencoded",function(){return this.eddsa.encodePoint(this.R())});vu(ro,"Sencoded",function(){return this.eddsa.encodeInt(this.S())});ro.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())};ro.prototype.toHex=function(){return bu.encode(this.toBytes(),"hex").toUpperCase()};q2.exports=ro});var z2=X((WC,K2)=>{"use strict";var IA=du(),CA=pu(),Ss=nr(),BA=Ss.assert,$2=Ss.parseBytes,H2=U2(),W2=j2();function $t(r){if(BA(r==="ed25519","only tested with ed25519 so far"),!(this instanceof $t))return new $t(r);r=CA[r].curve,this.curve=r,this.g=r.g,this.g.precompute(r.n.bitLength()+1),this.pointClass=r.point().constructor,this.encodingLength=Math.ceil(r.n.bitLength()/8),this.hash=IA.sha512}K2.exports=$t;$t.prototype.sign=function(e,t){e=$2(e);var n=this.keyFromSecret(t),i=this.hashInt(n.messagePrefix(),e),o=this.g.mul(i),s=this.encodePoint(o),f=this.hashInt(s,n.pubBytes(),e).mul(n.priv()),h=i.add(f).umod(this.curve.n);return this.makeSignature({R:o,S:h,Rencoded:s})};$t.prototype.verify=function(e,t,n){e=$2(e),t=this.makeSignature(t);var i=this.keyFromPublic(n),o=this.hashInt(t.Rencoded(),i.pubBytes(),e),s=this.g.mul(t.S()),f=t.R().add(i.pub().mul(o));return f.eq(s)};$t.prototype.hashInt=function(){for(var e=this.hash(),t=0;t<arguments.length;t++)e.update(arguments[t]);return Ss.intFromLE(e.digest()).umod(this.curve.n)};$t.prototype.keyFromPublic=function(e){return H2.fromPublic(this,e)};$t.prototype.keyFromSecret=function(e){return H2.fromSecret(this,e)};$t.prototype.makeSignature=function(e){return e instanceof W2?e:new W2(this,e)};$t.prototype.encodePoint=function(e){var t=e.getY().toArray("le",this.encodingLength);return t[this.encodingLength-1]|=e.getX().isOdd()?128:0,t};$t.prototype.decodePoint=function(e){e=Ss.parseBytes(e);var t=e.length-1,n=e.slice(0,t).concat(e[t]&-129),i=(e[t]&128)!==0,o=Ss.intFromLE(n);return this.curve.pointFromY(o,i)};$t.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)};$t.prototype.decodeInt=function(e){return Ss.intFromLE(e)};$t.prototype.isPoint=function(e){return e instanceof this.pointClass}});var wu=X(G2=>{"use strict";var no=G2;no.version=Aw().version;no.utils=nr();no.rand=_d();no.curve=Ed();no.curves=pu();no.ec=N2();no.eddsa=z2()});var X2=X((V2,Wd)=>{(function(r,e){"use strict";function t(d,a){if(!d)throw new Error(a||"Assertion failed")}function n(d,a){d.super_=a;var u=function(){};u.prototype=a.prototype,d.prototype=new u,d.prototype.constructor=d}function i(d,a,u){if(i.isBN(d))return d;this.negative=0,this.words=null,this.length=0,this.red=null,d!==null&&((a==="le"||a==="be")&&(u=a,a=10),this._init(d||0,a||10,u||"be"))}typeof r=="object"?r.exports=i:e.BN=i,i.BN=i,i.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=I0().Buffer}catch{}i.isBN=function(a){return a instanceof i?!0:a!==null&&typeof a=="object"&&a.constructor.wordSize===i.wordSize&&Array.isArray(a.words)},i.max=function(a,u){return a.cmp(u)>0?a:u},i.min=function(a,u){return a.cmp(u)<0?a:u},i.prototype._init=function(a,u,v){if(typeof a=="number")return this._initNumber(a,u,v);if(typeof a=="object")return this._initArray(a,u,v);u==="hex"&&(u=16),t(u===(u|0)&&u>=2&&u<=36),a=a.toString().replace(/\s+/g,"");var F=0;a[0]==="-"&&(F++,this.negative=1),F<a.length&&(u===16?this._parseHex(a,F,v):(this._parseBase(a,u,F),v==="le"&&this._initArray(this.toArray(),u,v)))},i.prototype._initNumber=function(a,u,v){a<0&&(this.negative=1,a=-a),a<67108864?(this.words=[a&67108863],this.length=1):a<4503599627370496?(this.words=[a&67108863,a/67108864&67108863],this.length=2):(t(a<9007199254740992),this.words=[a&67108863,a/67108864&67108863,1],this.length=3),v==="le"&&this._initArray(this.toArray(),u,v)},i.prototype._initArray=function(a,u,v){if(t(typeof a.length=="number"),a.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(a.length/3),this.words=new Array(this.length);for(var F=0;F<this.length;F++)this.words[F]=0;var p,c,E=0;if(v==="be")for(F=a.length-1,p=0;F>=0;F-=3)c=a[F]|a[F-1]<<8|a[F-2]<<16,this.words[p]|=c<<E&67108863,this.words[p+1]=c>>>26-E&67108863,E+=24,E>=26&&(E-=26,p++);else if(v==="le")for(F=0,p=0;F<a.length;F+=3)c=a[F]|a[F+1]<<8|a[F+2]<<16,this.words[p]|=c<<E&67108863,this.words[p+1]=c>>>26-E&67108863,E+=24,E>=26&&(E-=26,p++);return this._strip()};function s(d,a){var u=d.charCodeAt(a);if(u>=48&&u<=57)return u-48;if(u>=65&&u<=70)return u-55;if(u>=97&&u<=102)return u-87;t(!1,"Invalid character in "+d)}function f(d,a,u){var v=s(d,u);return u-1>=a&&(v|=s(d,u-1)<<4),v}i.prototype._parseHex=function(a,u,v){this.length=Math.ceil((a.length-u)/6),this.words=new Array(this.length);for(var F=0;F<this.length;F++)this.words[F]=0;var p=0,c=0,E;if(v==="be")for(F=a.length-1;F>=u;F-=2)E=f(a,u,F)<<p,this.words[c]|=E&67108863,p>=18?(p-=18,c+=1,this.words[c]|=E>>>26):p+=8;else{var M=a.length-u;for(F=M%2===0?u+1:u;F<a.length;F+=2)E=f(a,u,F)<<p,this.words[c]|=E&67108863,p>=18?(p-=18,c+=1,this.words[c]|=E>>>26):p+=8}this._strip()};function h(d,a,u,v){for(var F=0,p=0,c=Math.min(d.length,u),E=a;E<c;E++){var M=d.charCodeAt(E)-48;F*=v,M>=49?p=M-49+10:M>=17?p=M-17+10:p=M,t(M>=0&&p<v,"Invalid character"),F+=p}return F}i.prototype._parseBase=function(a,u,v){this.words=[0],this.length=1;for(var F=0,p=1;p<=67108863;p*=u)F++;F--,p=p/u|0;for(var c=a.length-v,E=c%F,M=Math.min(c,c-E)+v,y=0,_=v;_<M;_+=F)y=h(a,_,_+F,u),this.imuln(p),this.words[0]+y<67108864?this.words[0]+=y:this._iaddn(y);if(E!==0){var ne=1;for(y=h(a,_,a.length,u),_=0;_<E;_++)ne*=u;this.imuln(ne),this.words[0]+y<67108864?this.words[0]+=y:this._iaddn(y)}this._strip()},i.prototype.copy=function(a){a.words=new Array(this.length);for(var u=0;u<this.length;u++)a.words[u]=this.words[u];a.length=this.length,a.negative=this.negative,a.red=this.red};function g(d,a){d.words=a.words,d.length=a.length,d.negative=a.negative,d.red=a.red}if(i.prototype._move=function(a){g(a,this)},i.prototype.clone=function(){var a=new i(null);return this.copy(a),a},i.prototype._expand=function(a){for(;this.length<a;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=x}catch{i.prototype.inspect=x}else i.prototype.inspect=x;function x(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var T=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],I=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],A=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(a,u){a=a||10,u=u|0||1;var v;if(a===16||a==="hex"){v="";for(var F=0,p=0,c=0;c<this.length;c++){var E=this.words[c],M=((E<<F|p)&16777215).toString(16);p=E>>>24-F&16777215,F+=2,F>=26&&(F-=26,c--),p!==0||c!==this.length-1?v=T[6-M.length]+M+v:v=M+v}for(p!==0&&(v=p.toString(16)+v);v.length%u!==0;)v="0"+v;return this.negative!==0&&(v="-"+v),v}if(a===(a|0)&&a>=2&&a<=36){var y=I[a],_=A[a];v="";var ne=this.clone();for(ne.negative=0;!ne.isZero();){var ie=ne.modrn(_).toString(a);ne=ne.idivn(_),ne.isZero()?v=ie+v:v=T[y-ie.length]+ie+v}for(this.isZero()&&(v="0"+v);v.length%u!==0;)v="0"+v;return this.negative!==0&&(v="-"+v),v}t(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var a=this.words[0];return this.length===2?a+=this.words[1]*67108864:this.length===3&&this.words[2]===1?a+=4503599627370496+this.words[1]*67108864:this.length>2&&t(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-a:a},i.prototype.toJSON=function(){return this.toString(16,2)},o&&(i.prototype.toBuffer=function(a,u){return this.toArrayLike(o,a,u)}),i.prototype.toArray=function(a,u){return this.toArrayLike(Array,a,u)};var C=function(a,u){return a.allocUnsafe?a.allocUnsafe(u):new a(u)};i.prototype.toArrayLike=function(a,u,v){this._strip();var F=this.byteLength(),p=v||Math.max(1,F);t(F<=p,"byte array longer than desired length"),t(p>0,"Requested array length <= 0");var c=C(a,p),E=u==="le"?"LE":"BE";return this["_toArrayLike"+E](c,F),c},i.prototype._toArrayLikeLE=function(a,u){for(var v=0,F=0,p=0,c=0;p<this.length;p++){var E=this.words[p]<<c|F;a[v++]=E&255,v<a.length&&(a[v++]=E>>8&255),v<a.length&&(a[v++]=E>>16&255),c===6?(v<a.length&&(a[v++]=E>>24&255),F=0,c=0):(F=E>>>24,c+=2)}if(v<a.length)for(a[v++]=F;v<a.length;)a[v++]=0},i.prototype._toArrayLikeBE=function(a,u){for(var v=a.length-1,F=0,p=0,c=0;p<this.length;p++){var E=this.words[p]<<c|F;a[v--]=E&255,v>=0&&(a[v--]=E>>8&255),v>=0&&(a[v--]=E>>16&255),c===6?(v>=0&&(a[v--]=E>>24&255),F=0,c=0):(F=E>>>24,c+=2)}if(v>=0)for(a[v--]=F;v>=0;)a[v--]=0},Math.clz32?i.prototype._countBits=function(a){return 32-Math.clz32(a)}:i.prototype._countBits=function(a){var u=a,v=0;return u>=4096&&(v+=13,u>>>=13),u>=64&&(v+=7,u>>>=7),u>=8&&(v+=4,u>>>=4),u>=2&&(v+=2,u>>>=2),v+u},i.prototype._zeroBits=function(a){if(a===0)return 26;var u=a,v=0;return(u&8191)===0&&(v+=13,u>>>=13),(u&127)===0&&(v+=7,u>>>=7),(u&15)===0&&(v+=4,u>>>=4),(u&3)===0&&(v+=2,u>>>=2),(u&1)===0&&v++,v},i.prototype.bitLength=function(){var a=this.words[this.length-1],u=this._countBits(a);return(this.length-1)*26+u};function j(d){for(var a=new Array(d.bitLength()),u=0;u<a.length;u++){var v=u/26|0,F=u%26;a[u]=d.words[v]>>>F&1}return a}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var a=0,u=0;u<this.length;u++){var v=this._zeroBits(this.words[u]);if(a+=v,v!==26)break}return a},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(a){return this.negative!==0?this.abs().inotn(a).iaddn(1):this.clone()},i.prototype.fromTwos=function(a){return this.testn(a-1)?this.notn(a).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(a){for(;this.length<a.length;)this.words[this.length++]=0;for(var u=0;u<a.length;u++)this.words[u]=this.words[u]|a.words[u];return this._strip()},i.prototype.ior=function(a){return t((this.negative|a.negative)===0),this.iuor(a)},i.prototype.or=function(a){return this.length>a.length?this.clone().ior(a):a.clone().ior(this)},i.prototype.uor=function(a){return this.length>a.length?this.clone().iuor(a):a.clone().iuor(this)},i.prototype.iuand=function(a){var u;this.length>a.length?u=a:u=this;for(var v=0;v<u.length;v++)this.words[v]=this.words[v]&a.words[v];return this.length=u.length,this._strip()},i.prototype.iand=function(a){return t((this.negative|a.negative)===0),this.iuand(a)},i.prototype.and=function(a){return this.length>a.length?this.clone().iand(a):a.clone().iand(this)},i.prototype.uand=function(a){return this.length>a.length?this.clone().iuand(a):a.clone().iuand(this)},i.prototype.iuxor=function(a){var u,v;this.length>a.length?(u=this,v=a):(u=a,v=this);for(var F=0;F<v.length;F++)this.words[F]=u.words[F]^v.words[F];if(this!==u)for(;F<u.length;F++)this.words[F]=u.words[F];return this.length=u.length,this._strip()},i.prototype.ixor=function(a){return t((this.negative|a.negative)===0),this.iuxor(a)},i.prototype.xor=function(a){return this.length>a.length?this.clone().ixor(a):a.clone().ixor(this)},i.prototype.uxor=function(a){return this.length>a.length?this.clone().iuxor(a):a.clone().iuxor(this)},i.prototype.inotn=function(a){t(typeof a=="number"&&a>=0);var u=Math.ceil(a/26)|0,v=a%26;this._expand(u),v>0&&u--;for(var F=0;F<u;F++)this.words[F]=~this.words[F]&67108863;return v>0&&(this.words[F]=~this.words[F]&67108863>>26-v),this._strip()},i.prototype.notn=function(a){return this.clone().inotn(a)},i.prototype.setn=function(a,u){t(typeof a=="number"&&a>=0);var v=a/26|0,F=a%26;return this._expand(v+1),u?this.words[v]=this.words[v]|1<<F:this.words[v]=this.words[v]&~(1<<F),this._strip()},i.prototype.iadd=function(a){var u;if(this.negative!==0&&a.negative===0)return this.negative=0,u=this.isub(a),this.negative^=1,this._normSign();if(this.negative===0&&a.negative!==0)return a.negative=0,u=this.isub(a),a.negative=1,u._normSign();var v,F;this.length>a.length?(v=this,F=a):(v=a,F=this);for(var p=0,c=0;c<F.length;c++)u=(v.words[c]|0)+(F.words[c]|0)+p,this.words[c]=u&67108863,p=u>>>26;for(;p!==0&&c<v.length;c++)u=(v.words[c]|0)+p,this.words[c]=u&67108863,p=u>>>26;if(this.length=v.length,p!==0)this.words[this.length]=p,this.length++;else if(v!==this)for(;c<v.length;c++)this.words[c]=v.words[c];return this},i.prototype.add=function(a){var u;return a.negative!==0&&this.negative===0?(a.negative=0,u=this.sub(a),a.negative^=1,u):a.negative===0&&this.negative!==0?(this.negative=0,u=a.sub(this),this.negative=1,u):this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},i.prototype.isub=function(a){if(a.negative!==0){a.negative=0;var u=this.iadd(a);return a.negative=1,u._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(a),this.negative=1,this._normSign();var v=this.cmp(a);if(v===0)return this.negative=0,this.length=1,this.words[0]=0,this;var F,p;v>0?(F=this,p=a):(F=a,p=this);for(var c=0,E=0;E<p.length;E++)u=(F.words[E]|0)-(p.words[E]|0)+c,c=u>>26,this.words[E]=u&67108863;for(;c!==0&&E<F.length;E++)u=(F.words[E]|0)+c,c=u>>26,this.words[E]=u&67108863;if(c===0&&E<F.length&&F!==this)for(;E<F.length;E++)this.words[E]=F.words[E];return this.length=Math.max(this.length,E),F!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(a){return this.clone().isub(a)};function G(d,a,u){u.negative=a.negative^d.negative;var v=d.length+a.length|0;u.length=v,v=v-1|0;var F=d.words[0]|0,p=a.words[0]|0,c=F*p,E=c&67108863,M=c/67108864|0;u.words[0]=E;for(var y=1;y<v;y++){for(var _=M>>>26,ne=M&67108863,ie=Math.min(y,a.length-1),ce=Math.max(0,y-d.length+1);ce<=ie;ce++){var he=y-ce|0;F=d.words[he]|0,p=a.words[ce]|0,c=F*p+ne,_+=c/67108864|0,ne=c&67108863}u.words[y]=ne|0,M=_|0}return M!==0?u.words[y]=M|0:u.length--,u._strip()}var $=function(a,u,v){var F=a.words,p=u.words,c=v.words,E=0,M,y,_,ne=F[0]|0,ie=ne&8191,ce=ne>>>13,he=F[1]|0,re=he&8191,m=he>>>13,w=F[2]|0,S=w&8191,N=w>>>13,R=F[3]|0,P=R&8191,D=R>>>13,B=F[4]|0,O=B&8191,k=B>>>13,U=F[5]|0,W=U&8191,Y=U>>>13,Q=F[6]|0,te=Q&8191,fe=Q>>>13,ge=F[7]|0,ae=ge&8191,ue=ge>>>13,Se=F[8]|0,ye=Se&8191,be=Se>>>13,Je=F[9]|0,pe=Je&8191,me=Je>>>13,Fe=p[0]|0,de=Fe&8191,le=Fe>>>13,ht=p[1]|0,ve=ht&8191,we=ht>>>13,dt=p[2]|0,xe=dt&8191,_e=dt>>>13,pt=p[3]|0,Te=pt&8191,Me=pt>>>13,Rs=p[4]|0,Ie=Rs&8191,Ce=Rs>>>13,Ps=p[5]|0,Be=Ps&8191,Oe=Ps>>>13,Ns=p[6]|0,Re=Ns&8191,Pe=Ns>>>13,ks=p[7]|0,Ne=ks&8191,ke=ks>>>13,Ls=p[8]|0,Le=Ls&8191,De=Ls>>>13,_o=p[9]|0,st=_o&8191,at=_o>>>13;v.negative=a.negative^u.negative,v.length=19,M=Math.imul(ie,de),y=Math.imul(ie,le),y=y+Math.imul(ce,de)|0,_=Math.imul(ce,le);var ii=(E+M|0)+((y&8191)<<13)|0;E=(_+(y>>>13)|0)+(ii>>>26)|0,ii&=67108863,M=Math.imul(re,de),y=Math.imul(re,le),y=y+Math.imul(m,de)|0,_=Math.imul(m,le),M=M+Math.imul(ie,ve)|0,y=y+Math.imul(ie,we)|0,y=y+Math.imul(ce,ve)|0,_=_+Math.imul(ce,we)|0;var oi=(E+M|0)+((y&8191)<<13)|0;E=(_+(y>>>13)|0)+(oi>>>26)|0,oi&=67108863,M=Math.imul(S,de),y=Math.imul(S,le),y=y+Math.imul(N,de)|0,_=Math.imul(N,le),M=M+Math.imul(re,ve)|0,y=y+Math.imul(re,we)|0,y=y+Math.imul(m,ve)|0,_=_+Math.imul(m,we)|0,M=M+Math.imul(ie,xe)|0,y=y+Math.imul(ie,_e)|0,y=y+Math.imul(ce,xe)|0,_=_+Math.imul(ce,_e)|0;var si=(E+M|0)+((y&8191)<<13)|0;E=(_+(y>>>13)|0)+(si>>>26)|0,si&=67108863,M=Math.imul(P,de),y=Math.imul(P,le),y=y+Math.imul(D,de)|0,_=Math.imul(D,le),M=M+Math.imul(S,ve)|0,y=y+Math.imul(S,we)|0,y=y+Math.imul(N,ve)|0,_=_+Math.imul(N,we)|0,M=M+Math.imul(re,xe)|0,y=y+Math.imul(re,_e)|0,y=y+Math.imul(m,xe)|0,_=_+Math.imul(m,_e)|0,M=M+Math.imul(ie,Te)|0,y=y+Math.imul(ie,Me)|0,y=y+Math.imul(ce,Te)|0,_=_+Math.imul(ce,Me)|0;var ai=(E+M|0)+((y&8191)<<13)|0;E=(_+(y>>>13)|0)+(ai>>>26)|0,ai&=67108863,M=Math.imul(O,de),y=Math.imul(O,le),y=y+Math.imul(k,de)|0,_=Math.imul(k,le),M=M+Math.imul(P,ve)|0,y=y+Math.imul(P,we)|0,y=y+Math.imul(D,ve)|0,_=_+Math.imul(D,we)|0,M=M+Math.imul(S,xe)|0,y=y+Math.imul(S,_e)|0,y=y+Math.imul(N,xe)|0,_=_+Math.imul(N,_e)|0,M=M+Math.imul(re,Te)|0,y=y+Math.imul(re,Me)|0,y=y+Math.imul(m,Te)|0,_=_+Math.imul(m,Me)|0,M=M+Math.imul(ie,Ie)|0,y=y+Math.imul(ie,Ce)|0,y=y+Math.imul(ce,Ie)|0,_=_+Math.imul(ce,Ce)|0;var fi=(E+M|0)+((y&8191)<<13)|0;E=(_+(y>>>13)|0)+(fi>>>26)|0,fi&=67108863,M=Math.imul(W,de),y=Math.imul(W,le),y=y+Math.imul(Y,de)|0,_=Math.imul(Y,le),M=M+Math.imul(O,ve)|0,y=y+Math.imul(O,we)|0,y=y+Math.imul(k,ve)|0,_=_+Math.imul(k,we)|0,M=M+Math.imul(P,xe)|0,y=y+Math.imul(P,_e)|0,y=y+Math.imul(D,xe)|0,_=_+Math.imul(D,_e)|0,M=M+Math.imul(S,Te)|0,y=y+Math.imul(S,Me)|0,y=y+Math.imul(N,Te)|0,_=_+Math.imul(N,Me)|0,M=M+Math.imul(re,Ie)|0,y=y+Math.imul(re,Ce)|0,y=y+Math.imul(m,Ie)|0,_=_+Math.imul(m,Ce)|0,M=M+Math.imul(ie,Be)|0,y=y+Math.imul(ie,Oe)|0,y=y+Math.imul(ce,Be)|0,_=_+Math.imul(ce,Oe)|0;var ci=(E+M|0)+((y&8191)<<13)|0;E=(_+(y>>>13)|0)+(ci>>>26)|0,ci&=67108863,M=Math.imul(te,de),y=Math.imul(te,le),y=y+Math.imul(fe,de)|0,_=Math.imul(fe,le),M=M+Math.imul(W,ve)|0,y=y+Math.imul(W,we)|0,y=y+Math.imul(Y,ve)|0,_=_+Math.imul(Y,we)|0,M=M+Math.imul(O,xe)|0,y=y+Math.imul(O,_e)|0,y=y+Math.imul(k,xe)|0,_=_+Math.imul(k,_e)|0,M=M+Math.imul(P,Te)|0,y=y+Math.imul(P,Me)|0,y=y+Math.imul(D,Te)|0,_=_+Math.imul(D,Me)|0,M=M+Math.imul(S,Ie)|0,y=y+Math.imul(S,Ce)|0,y=y+Math.imul(N,Ie)|0,_=_+Math.imul(N,Ce)|0,M=M+Math.imul(re,Be)|0,y=y+Math.imul(re,Oe)|0,y=y+Math.imul(m,Be)|0,_=_+Math.imul(m,Oe)|0,M=M+Math.imul(ie,Re)|0,y=y+Math.imul(ie,Pe)|0,y=y+Math.imul(ce,Re)|0,_=_+Math.imul(ce,Pe)|0;var ui=(E+M|0)+((y&8191)<<13)|0;E=(_+(y>>>13)|0)+(ui>>>26)|0,ui&=67108863,M=Math.imul(ae,de),y=Math.imul(ae,le),y=y+Math.imul(ue,de)|0,_=Math.imul(ue,le),M=M+Math.imul(te,ve)|0,y=y+Math.imul(te,we)|0,y=y+Math.imul(fe,ve)|0,_=_+Math.imul(fe,we)|0,M=M+Math.imul(W,xe)|0,y=y+Math.imul(W,_e)|0,y=y+Math.imul(Y,xe)|0,_=_+Math.imul(Y,_e)|0,M=M+Math.imul(O,Te)|0,y=y+Math.imul(O,Me)|0,y=y+Math.imul(k,Te)|0,_=_+Math.imul(k,Me)|0,M=M+Math.imul(P,Ie)|0,y=y+Math.imul(P,Ce)|0,y=y+Math.imul(D,Ie)|0,_=_+Math.imul(D,Ce)|0,M=M+Math.imul(S,Be)|0,y=y+Math.imul(S,Oe)|0,y=y+Math.imul(N,Be)|0,_=_+Math.imul(N,Oe)|0,M=M+Math.imul(re,Re)|0,y=y+Math.imul(re,Pe)|0,y=y+Math.imul(m,Re)|0,_=_+Math.imul(m,Pe)|0,M=M+Math.imul(ie,Ne)|0,y=y+Math.imul(ie,ke)|0,y=y+Math.imul(ce,Ne)|0,_=_+Math.imul(ce,ke)|0;var li=(E+M|0)+((y&8191)<<13)|0;E=(_+(y>>>13)|0)+(li>>>26)|0,li&=67108863,M=Math.imul(ye,de),y=Math.imul(ye,le),y=y+Math.imul(be,de)|0,_=Math.imul(be,le),M=M+Math.imul(ae,ve)|0,y=y+Math.imul(ae,we)|0,y=y+Math.imul(ue,ve)|0,_=_+Math.imul(ue,we)|0,M=M+Math.imul(te,xe)|0,y=y+Math.imul(te,_e)|0,y=y+Math.imul(fe,xe)|0,_=_+Math.imul(fe,_e)|0,M=M+Math.imul(W,Te)|0,y=y+Math.imul(W,Me)|0,y=y+Math.imul(Y,Te)|0,_=_+Math.imul(Y,Me)|0,M=M+Math.imul(O,Ie)|0,y=y+Math.imul(O,Ce)|0,y=y+Math.imul(k,Ie)|0,_=_+Math.imul(k,Ce)|0,M=M+Math.imul(P,Be)|0,y=y+Math.imul(P,Oe)|0,y=y+Math.imul(D,Be)|0,_=_+Math.imul(D,Oe)|0,M=M+Math.imul(S,Re)|0,y=y+Math.imul(S,Pe)|0,y=y+Math.imul(N,Re)|0,_=_+Math.imul(N,Pe)|0,M=M+Math.imul(re,Ne)|0,y=y+Math.imul(re,ke)|0,y=y+Math.imul(m,Ne)|0,_=_+Math.imul(m,ke)|0,M=M+Math.imul(ie,Le)|0,y=y+Math.imul(ie,De)|0,y=y+Math.imul(ce,Le)|0,_=_+Math.imul(ce,De)|0;var hi=(E+M|0)+((y&8191)<<13)|0;E=(_+(y>>>13)|0)+(hi>>>26)|0,hi&=67108863,M=Math.imul(pe,de),y=Math.imul(pe,le),y=y+Math.imul(me,de)|0,_=Math.imul(me,le),M=M+Math.imul(ye,ve)|0,y=y+Math.imul(ye,we)|0,y=y+Math.imul(be,ve)|0,_=_+Math.imul(be,we)|0,M=M+Math.imul(ae,xe)|0,y=y+Math.imul(ae,_e)|0,y=y+Math.imul(ue,xe)|0,_=_+Math.imul(ue,_e)|0,M=M+Math.imul(te,Te)|0,y=y+Math.imul(te,Me)|0,y=y+Math.imul(fe,Te)|0,_=_+Math.imul(fe,Me)|0,M=M+Math.imul(W,Ie)|0,y=y+Math.imul(W,Ce)|0,y=y+Math.imul(Y,Ie)|0,_=_+Math.imul(Y,Ce)|0,M=M+Math.imul(O,Be)|0,y=y+Math.imul(O,Oe)|0,y=y+Math.imul(k,Be)|0,_=_+Math.imul(k,Oe)|0,M=M+Math.imul(P,Re)|0,y=y+Math.imul(P,Pe)|0,y=y+Math.imul(D,Re)|0,_=_+Math.imul(D,Pe)|0,M=M+Math.imul(S,Ne)|0,y=y+Math.imul(S,ke)|0,y=y+Math.imul(N,Ne)|0,_=_+Math.imul(N,ke)|0,M=M+Math.imul(re,Le)|0,y=y+Math.imul(re,De)|0,y=y+Math.imul(m,Le)|0,_=_+Math.imul(m,De)|0,M=M+Math.imul(ie,st)|0,y=y+Math.imul(ie,at)|0,y=y+Math.imul(ce,st)|0,_=_+Math.imul(ce,at)|0;var di=(E+M|0)+((y&8191)<<13)|0;E=(_+(y>>>13)|0)+(di>>>26)|0,di&=67108863,M=Math.imul(pe,ve),y=Math.imul(pe,we),y=y+Math.imul(me,ve)|0,_=Math.imul(me,we),M=M+Math.imul(ye,xe)|0,y=y+Math.imul(ye,_e)|0,y=y+Math.imul(be,xe)|0,_=_+Math.imul(be,_e)|0,M=M+Math.imul(ae,Te)|0,y=y+Math.imul(ae,Me)|0,y=y+Math.imul(ue,Te)|0,_=_+Math.imul(ue,Me)|0,M=M+Math.imul(te,Ie)|0,y=y+Math.imul(te,Ce)|0,y=y+Math.imul(fe,Ie)|0,_=_+Math.imul(fe,Ce)|0,M=M+Math.imul(W,Be)|0,y=y+Math.imul(W,Oe)|0,y=y+Math.imul(Y,Be)|0,_=_+Math.imul(Y,Oe)|0,M=M+Math.imul(O,Re)|0,y=y+Math.imul(O,Pe)|0,y=y+Math.imul(k,Re)|0,_=_+Math.imul(k,Pe)|0,M=M+Math.imul(P,Ne)|0,y=y+Math.imul(P,ke)|0,y=y+Math.imul(D,Ne)|0,_=_+Math.imul(D,ke)|0,M=M+Math.imul(S,Le)|0,y=y+Math.imul(S,De)|0,y=y+Math.imul(N,Le)|0,_=_+Math.imul(N,De)|0,M=M+Math.imul(re,st)|0,y=y+Math.imul(re,at)|0,y=y+Math.imul(m,st)|0,_=_+Math.imul(m,at)|0;var pi=(E+M|0)+((y&8191)<<13)|0;E=(_+(y>>>13)|0)+(pi>>>26)|0,pi&=67108863,M=Math.imul(pe,xe),y=Math.imul(pe,_e),y=y+Math.imul(me,xe)|0,_=Math.imul(me,_e),M=M+Math.imul(ye,Te)|0,y=y+Math.imul(ye,Me)|0,y=y+Math.imul(be,Te)|0,_=_+Math.imul(be,Me)|0,M=M+Math.imul(ae,Ie)|0,y=y+Math.imul(ae,Ce)|0,y=y+Math.imul(ue,Ie)|0,_=_+Math.imul(ue,Ce)|0,M=M+Math.imul(te,Be)|0,y=y+Math.imul(te,Oe)|0,y=y+Math.imul(fe,Be)|0,_=_+Math.imul(fe,Oe)|0,M=M+Math.imul(W,Re)|0,y=y+Math.imul(W,Pe)|0,y=y+Math.imul(Y,Re)|0,_=_+Math.imul(Y,Pe)|0,M=M+Math.imul(O,Ne)|0,y=y+Math.imul(O,ke)|0,y=y+Math.imul(k,Ne)|0,_=_+Math.imul(k,ke)|0,M=M+Math.imul(P,Le)|0,y=y+Math.imul(P,De)|0,y=y+Math.imul(D,Le)|0,_=_+Math.imul(D,De)|0,M=M+Math.imul(S,st)|0,y=y+Math.imul(S,at)|0,y=y+Math.imul(N,st)|0,_=_+Math.imul(N,at)|0;var gi=(E+M|0)+((y&8191)<<13)|0;E=(_+(y>>>13)|0)+(gi>>>26)|0,gi&=67108863,M=Math.imul(pe,Te),y=Math.imul(pe,Me),y=y+Math.imul(me,Te)|0,_=Math.imul(me,Me),M=M+Math.imul(ye,Ie)|0,y=y+Math.imul(ye,Ce)|0,y=y+Math.imul(be,Ie)|0,_=_+Math.imul(be,Ce)|0,M=M+Math.imul(ae,Be)|0,y=y+Math.imul(ae,Oe)|0,y=y+Math.imul(ue,Be)|0,_=_+Math.imul(ue,Oe)|0,M=M+Math.imul(te,Re)|0,y=y+Math.imul(te,Pe)|0,y=y+Math.imul(fe,Re)|0,_=_+Math.imul(fe,Pe)|0,M=M+Math.imul(W,Ne)|0,y=y+Math.imul(W,ke)|0,y=y+Math.imul(Y,Ne)|0,_=_+Math.imul(Y,ke)|0,M=M+Math.imul(O,Le)|0,y=y+Math.imul(O,De)|0,y=y+Math.imul(k,Le)|0,_=_+Math.imul(k,De)|0,M=M+Math.imul(P,st)|0,y=y+Math.imul(P,at)|0,y=y+Math.imul(D,st)|0,_=_+Math.imul(D,at)|0;var mi=(E+M|0)+((y&8191)<<13)|0;E=(_+(y>>>13)|0)+(mi>>>26)|0,mi&=67108863,M=Math.imul(pe,Ie),y=Math.imul(pe,Ce),y=y+Math.imul(me,Ie)|0,_=Math.imul(me,Ce),M=M+Math.imul(ye,Be)|0,y=y+Math.imul(ye,Oe)|0,y=y+Math.imul(be,Be)|0,_=_+Math.imul(be,Oe)|0,M=M+Math.imul(ae,Re)|0,y=y+Math.imul(ae,Pe)|0,y=y+Math.imul(ue,Re)|0,_=_+Math.imul(ue,Pe)|0,M=M+Math.imul(te,Ne)|0,y=y+Math.imul(te,ke)|0,y=y+Math.imul(fe,Ne)|0,_=_+Math.imul(fe,ke)|0,M=M+Math.imul(W,Le)|0,y=y+Math.imul(W,De)|0,y=y+Math.imul(Y,Le)|0,_=_+Math.imul(Y,De)|0,M=M+Math.imul(O,st)|0,y=y+Math.imul(O,at)|0,y=y+Math.imul(k,st)|0,_=_+Math.imul(k,at)|0;var yi=(E+M|0)+((y&8191)<<13)|0;E=(_+(y>>>13)|0)+(yi>>>26)|0,yi&=67108863,M=Math.imul(pe,Be),y=Math.imul(pe,Oe),y=y+Math.imul(me,Be)|0,_=Math.imul(me,Oe),M=M+Math.imul(ye,Re)|0,y=y+Math.imul(ye,Pe)|0,y=y+Math.imul(be,Re)|0,_=_+Math.imul(be,Pe)|0,M=M+Math.imul(ae,Ne)|0,y=y+Math.imul(ae,ke)|0,y=y+Math.imul(ue,Ne)|0,_=_+Math.imul(ue,ke)|0,M=M+Math.imul(te,Le)|0,y=y+Math.imul(te,De)|0,y=y+Math.imul(fe,Le)|0,_=_+Math.imul(fe,De)|0,M=M+Math.imul(W,st)|0,y=y+Math.imul(W,at)|0,y=y+Math.imul(Y,st)|0,_=_+Math.imul(Y,at)|0;var bi=(E+M|0)+((y&8191)<<13)|0;E=(_+(y>>>13)|0)+(bi>>>26)|0,bi&=67108863,M=Math.imul(pe,Re),y=Math.imul(pe,Pe),y=y+Math.imul(me,Re)|0,_=Math.imul(me,Pe),M=M+Math.imul(ye,Ne)|0,y=y+Math.imul(ye,ke)|0,y=y+Math.imul(be,Ne)|0,_=_+Math.imul(be,ke)|0,M=M+Math.imul(ae,Le)|0,y=y+Math.imul(ae,De)|0,y=y+Math.imul(ue,Le)|0,_=_+Math.imul(ue,De)|0,M=M+Math.imul(te,st)|0,y=y+Math.imul(te,at)|0,y=y+Math.imul(fe,st)|0,_=_+Math.imul(fe,at)|0;var vi=(E+M|0)+((y&8191)<<13)|0;E=(_+(y>>>13)|0)+(vi>>>26)|0,vi&=67108863,M=Math.imul(pe,Ne),y=Math.imul(pe,ke),y=y+Math.imul(me,Ne)|0,_=Math.imul(me,ke),M=M+Math.imul(ye,Le)|0,y=y+Math.imul(ye,De)|0,y=y+Math.imul(be,Le)|0,_=_+Math.imul(be,De)|0,M=M+Math.imul(ae,st)|0,y=y+Math.imul(ae,at)|0,y=y+Math.imul(ue,st)|0,_=_+Math.imul(ue,at)|0;var Ku=(E+M|0)+((y&8191)<<13)|0;E=(_+(y>>>13)|0)+(Ku>>>26)|0,Ku&=67108863,M=Math.imul(pe,Le),y=Math.imul(pe,De),y=y+Math.imul(me,Le)|0,_=Math.imul(me,De),M=M+Math.imul(ye,st)|0,y=y+Math.imul(ye,at)|0,y=y+Math.imul(be,st)|0,_=_+Math.imul(be,at)|0;var zu=(E+M|0)+((y&8191)<<13)|0;E=(_+(y>>>13)|0)+(zu>>>26)|0,zu&=67108863,M=Math.imul(pe,st),y=Math.imul(pe,at),y=y+Math.imul(me,st)|0,_=Math.imul(me,at);var Gu=(E+M|0)+((y&8191)<<13)|0;return E=(_+(y>>>13)|0)+(Gu>>>26)|0,Gu&=67108863,c[0]=ii,c[1]=oi,c[2]=si,c[3]=ai,c[4]=fi,c[5]=ci,c[6]=ui,c[7]=li,c[8]=hi,c[9]=di,c[10]=pi,c[11]=gi,c[12]=mi,c[13]=yi,c[14]=bi,c[15]=vi,c[16]=Ku,c[17]=zu,c[18]=Gu,E!==0&&(c[19]=E,v.length++),v};Math.imul||($=G);function Z(d,a,u){u.negative=a.negative^d.negative,u.length=d.length+a.length;for(var v=0,F=0,p=0;p<u.length-1;p++){var c=F;F=0;for(var E=v&67108863,M=Math.min(p,a.length-1),y=Math.max(0,p-d.length+1);y<=M;y++){var _=p-y,ne=d.words[_]|0,ie=a.words[y]|0,ce=ne*ie,he=ce&67108863;c=c+(ce/67108864|0)|0,he=he+E|0,E=he&67108863,c=c+(he>>>26)|0,F+=c>>>26,c&=67108863}u.words[p]=E,v=c,c=F}return v!==0?u.words[p]=v:u.length--,u._strip()}function ee(d,a,u){return Z(d,a,u)}i.prototype.mulTo=function(a,u){var v,F=this.length+a.length;return this.length===10&&a.length===10?v=$(this,a,u):F<63?v=G(this,a,u):F<1024?v=Z(this,a,u):v=ee(this,a,u),v};function se(d,a){this.x=d,this.y=a}se.prototype.makeRBT=function(a){for(var u=new Array(a),v=i.prototype._countBits(a)-1,F=0;F<a;F++)u[F]=this.revBin(F,v,a);return u},se.prototype.revBin=function(a,u,v){if(a===0||a===v-1)return a;for(var F=0,p=0;p<u;p++)F|=(a&1)<<u-p-1,a>>=1;return F},se.prototype.permute=function(a,u,v,F,p,c){for(var E=0;E<c;E++)F[E]=u[a[E]],p[E]=v[a[E]]},se.prototype.transform=function(a,u,v,F,p,c){this.permute(c,a,u,v,F,p);for(var E=1;E<p;E<<=1)for(var M=E<<1,y=Math.cos(2*Math.PI/M),_=Math.sin(2*Math.PI/M),ne=0;ne<p;ne+=M)for(var ie=y,ce=_,he=0;he<E;he++){var re=v[ne+he],m=F[ne+he],w=v[ne+he+E],S=F[ne+he+E],N=ie*w-ce*S;S=ie*S+ce*w,w=N,v[ne+he]=re+w,F[ne+he]=m+S,v[ne+he+E]=re-w,F[ne+he+E]=m-S,he!==M&&(N=y*ie-_*ce,ce=y*ce+_*ie,ie=N)}},se.prototype.guessLen13b=function(a,u){var v=Math.max(u,a)|1,F=v&1,p=0;for(v=v/2|0;v;v=v>>>1)p++;return 1<<p+1+F},se.prototype.conjugate=function(a,u,v){if(!(v<=1))for(var F=0;F<v/2;F++){var p=a[F];a[F]=a[v-F-1],a[v-F-1]=p,p=u[F],u[F]=-u[v-F-1],u[v-F-1]=-p}},se.prototype.normalize13b=function(a,u){for(var v=0,F=0;F<u/2;F++){var p=Math.round(a[2*F+1]/u)*8192+Math.round(a[2*F]/u)+v;a[F]=p&67108863,p<67108864?v=0:v=p/67108864|0}return a},se.prototype.convert13b=function(a,u,v,F){for(var p=0,c=0;c<u;c++)p=p+(a[c]|0),v[2*c]=p&8191,p=p>>>13,v[2*c+1]=p&8191,p=p>>>13;for(c=2*u;c<F;++c)v[c]=0;t(p===0),t((p&-8192)===0)},se.prototype.stub=function(a){for(var u=new Array(a),v=0;v<a;v++)u[v]=0;return u},se.prototype.mulp=function(a,u,v){var F=2*this.guessLen13b(a.length,u.length),p=this.makeRBT(F),c=this.stub(F),E=new Array(F),M=new Array(F),y=new Array(F),_=new Array(F),ne=new Array(F),ie=new Array(F),ce=v.words;ce.length=F,this.convert13b(a.words,a.length,E,F),this.convert13b(u.words,u.length,_,F),this.transform(E,c,M,y,F,p),this.transform(_,c,ne,ie,F,p);for(var he=0;he<F;he++){var re=M[he]*ne[he]-y[he]*ie[he];y[he]=M[he]*ie[he]+y[he]*ne[he],M[he]=re}return this.conjugate(M,y,F),this.transform(M,y,ce,c,F,p),this.conjugate(ce,c,F),this.normalize13b(ce,F),v.negative=a.negative^u.negative,v.length=a.length+u.length,v._strip()},i.prototype.mul=function(a){var u=new i(null);return u.words=new Array(this.length+a.length),this.mulTo(a,u)},i.prototype.mulf=function(a){var u=new i(null);return u.words=new Array(this.length+a.length),ee(this,a,u)},i.prototype.imul=function(a){return this.clone().mulTo(a,this)},i.prototype.imuln=function(a){var u=a<0;u&&(a=-a),t(typeof a=="number"),t(a<67108864);for(var v=0,F=0;F<this.length;F++){var p=(this.words[F]|0)*a,c=(p&67108863)+(v&67108863);v>>=26,v+=p/67108864|0,v+=c>>>26,this.words[F]=c&67108863}return v!==0&&(this.words[F]=v,this.length++),u?this.ineg():this},i.prototype.muln=function(a){return this.clone().imuln(a)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(a){var u=j(a);if(u.length===0)return new i(1);for(var v=this,F=0;F<u.length&&u[F]===0;F++,v=v.sqr());if(++F<u.length)for(var p=v.sqr();F<u.length;F++,p=p.sqr())u[F]!==0&&(v=v.mul(p));return v},i.prototype.iushln=function(a){t(typeof a=="number"&&a>=0);var u=a%26,v=(a-u)/26,F=67108863>>>26-u<<26-u,p;if(u!==0){var c=0;for(p=0;p<this.length;p++){var E=this.words[p]&F,M=(this.words[p]|0)-E<<u;this.words[p]=M|c,c=E>>>26-u}c&&(this.words[p]=c,this.length++)}if(v!==0){for(p=this.length-1;p>=0;p--)this.words[p+v]=this.words[p];for(p=0;p<v;p++)this.words[p]=0;this.length+=v}return this._strip()},i.prototype.ishln=function(a){return t(this.negative===0),this.iushln(a)},i.prototype.iushrn=function(a,u,v){t(typeof a=="number"&&a>=0);var F;u?F=(u-u%26)/26:F=0;var p=a%26,c=Math.min((a-p)/26,this.length),E=67108863^67108863>>>p<<p,M=v;if(F-=c,F=Math.max(0,F),M){for(var y=0;y<c;y++)M.words[y]=this.words[y];M.length=c}if(c!==0)if(this.length>c)for(this.length-=c,y=0;y<this.length;y++)this.words[y]=this.words[y+c];else this.words[0]=0,this.length=1;var _=0;for(y=this.length-1;y>=0&&(_!==0||y>=F);y--){var ne=this.words[y]|0;this.words[y]=_<<26-p|ne>>>p,_=ne&E}return M&&_!==0&&(M.words[M.length++]=_),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(a,u,v){return t(this.negative===0),this.iushrn(a,u,v)},i.prototype.shln=function(a){return this.clone().ishln(a)},i.prototype.ushln=function(a){return this.clone().iushln(a)},i.prototype.shrn=function(a){return this.clone().ishrn(a)},i.prototype.ushrn=function(a){return this.clone().iushrn(a)},i.prototype.testn=function(a){t(typeof a=="number"&&a>=0);var u=a%26,v=(a-u)/26,F=1<<u;if(this.length<=v)return!1;var p=this.words[v];return!!(p&F)},i.prototype.imaskn=function(a){t(typeof a=="number"&&a>=0);var u=a%26,v=(a-u)/26;if(t(this.negative===0,"imaskn works only with positive numbers"),this.length<=v)return this;if(u!==0&&v++,this.length=Math.min(v,this.length),u!==0){var F=67108863^67108863>>>u<<u;this.words[this.length-1]&=F}return this._strip()},i.prototype.maskn=function(a){return this.clone().imaskn(a)},i.prototype.iaddn=function(a){return t(typeof a=="number"),t(a<67108864),a<0?this.isubn(-a):this.negative!==0?this.length===1&&(this.words[0]|0)<=a?(this.words[0]=a-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(a),this.negative=1,this):this._iaddn(a)},i.prototype._iaddn=function(a){this.words[0]+=a;for(var u=0;u<this.length&&this.words[u]>=67108864;u++)this.words[u]-=67108864,u===this.length-1?this.words[u+1]=1:this.words[u+1]++;return this.length=Math.max(this.length,u+1),this},i.prototype.isubn=function(a){if(t(typeof a=="number"),t(a<67108864),a<0)return this.iaddn(-a);if(this.negative!==0)return this.negative=0,this.iaddn(a),this.negative=1,this;if(this.words[0]-=a,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var u=0;u<this.length&&this.words[u]<0;u++)this.words[u]+=67108864,this.words[u+1]-=1;return this._strip()},i.prototype.addn=function(a){return this.clone().iaddn(a)},i.prototype.subn=function(a){return this.clone().isubn(a)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(a,u,v){var F=a.length+v,p;this._expand(F);var c,E=0;for(p=0;p<a.length;p++){c=(this.words[p+v]|0)+E;var M=(a.words[p]|0)*u;c-=M&67108863,E=(c>>26)-(M/67108864|0),this.words[p+v]=c&67108863}for(;p<this.length-v;p++)c=(this.words[p+v]|0)+E,E=c>>26,this.words[p+v]=c&67108863;if(E===0)return this._strip();for(t(E===-1),E=0,p=0;p<this.length;p++)c=-(this.words[p]|0)+E,E=c>>26,this.words[p]=c&67108863;return this.negative=1,this._strip()},i.prototype._wordDiv=function(a,u){var v=this.length-a.length,F=this.clone(),p=a,c=p.words[p.length-1]|0,E=this._countBits(c);v=26-E,v!==0&&(p=p.ushln(v),F.iushln(v),c=p.words[p.length-1]|0);var M=F.length-p.length,y;if(u!=="mod"){y=new i(null),y.length=M+1,y.words=new Array(y.length);for(var _=0;_<y.length;_++)y.words[_]=0}var ne=F.clone()._ishlnsubmul(p,1,M);ne.negative===0&&(F=ne,y&&(y.words[M]=1));for(var ie=M-1;ie>=0;ie--){var ce=(F.words[p.length+ie]|0)*67108864+(F.words[p.length+ie-1]|0);for(ce=Math.min(ce/c|0,67108863),F._ishlnsubmul(p,ce,ie);F.negative!==0;)ce--,F.negative=0,F._ishlnsubmul(p,1,ie),F.isZero()||(F.negative^=1);y&&(y.words[ie]=ce)}return y&&y._strip(),F._strip(),u!=="div"&&v!==0&&F.iushrn(v),{div:y||null,mod:F}},i.prototype.divmod=function(a,u,v){if(t(!a.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var F,p,c;return this.negative!==0&&a.negative===0?(c=this.neg().divmod(a,u),u!=="mod"&&(F=c.div.neg()),u!=="div"&&(p=c.mod.neg(),v&&p.negative!==0&&p.iadd(a)),{div:F,mod:p}):this.negative===0&&a.negative!==0?(c=this.divmod(a.neg(),u),u!=="mod"&&(F=c.div.neg()),{div:F,mod:c.mod}):(this.negative&a.negative)!==0?(c=this.neg().divmod(a.neg(),u),u!=="div"&&(p=c.mod.neg(),v&&p.negative!==0&&p.isub(a)),{div:c.div,mod:p}):a.length>this.length||this.cmp(a)<0?{div:new i(0),mod:this}:a.length===1?u==="div"?{div:this.divn(a.words[0]),mod:null}:u==="mod"?{div:null,mod:new i(this.modrn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new i(this.modrn(a.words[0]))}:this._wordDiv(a,u)},i.prototype.div=function(a){return this.divmod(a,"div",!1).div},i.prototype.mod=function(a){return this.divmod(a,"mod",!1).mod},i.prototype.umod=function(a){return this.divmod(a,"mod",!0).mod},i.prototype.divRound=function(a){var u=this.divmod(a);if(u.mod.isZero())return u.div;var v=u.div.negative!==0?u.mod.isub(a):u.mod,F=a.ushrn(1),p=a.andln(1),c=v.cmp(F);return c<0||p===1&&c===0?u.div:u.div.negative!==0?u.div.isubn(1):u.div.iaddn(1)},i.prototype.modrn=function(a){var u=a<0;u&&(a=-a),t(a<=67108863);for(var v=(1<<26)%a,F=0,p=this.length-1;p>=0;p--)F=(v*F+(this.words[p]|0))%a;return u?-F:F},i.prototype.modn=function(a){return this.modrn(a)},i.prototype.idivn=function(a){var u=a<0;u&&(a=-a),t(a<=67108863);for(var v=0,F=this.length-1;F>=0;F--){var p=(this.words[F]|0)+v*67108864;this.words[F]=p/a|0,v=p%a}return this._strip(),u?this.ineg():this},i.prototype.divn=function(a){return this.clone().idivn(a)},i.prototype.egcd=function(a){t(a.negative===0),t(!a.isZero());var u=this,v=a.clone();u.negative!==0?u=u.umod(a):u=u.clone();for(var F=new i(1),p=new i(0),c=new i(0),E=new i(1),M=0;u.isEven()&&v.isEven();)u.iushrn(1),v.iushrn(1),++M;for(var y=v.clone(),_=u.clone();!u.isZero();){for(var ne=0,ie=1;(u.words[0]&ie)===0&&ne<26;++ne,ie<<=1);if(ne>0)for(u.iushrn(ne);ne-- >0;)(F.isOdd()||p.isOdd())&&(F.iadd(y),p.isub(_)),F.iushrn(1),p.iushrn(1);for(var ce=0,he=1;(v.words[0]&he)===0&&ce<26;++ce,he<<=1);if(ce>0)for(v.iushrn(ce);ce-- >0;)(c.isOdd()||E.isOdd())&&(c.iadd(y),E.isub(_)),c.iushrn(1),E.iushrn(1);u.cmp(v)>=0?(u.isub(v),F.isub(c),p.isub(E)):(v.isub(u),c.isub(F),E.isub(p))}return{a:c,b:E,gcd:v.iushln(M)}},i.prototype._invmp=function(a){t(a.negative===0),t(!a.isZero());var u=this,v=a.clone();u.negative!==0?u=u.umod(a):u=u.clone();for(var F=new i(1),p=new i(0),c=v.clone();u.cmpn(1)>0&&v.cmpn(1)>0;){for(var E=0,M=1;(u.words[0]&M)===0&&E<26;++E,M<<=1);if(E>0)for(u.iushrn(E);E-- >0;)F.isOdd()&&F.iadd(c),F.iushrn(1);for(var y=0,_=1;(v.words[0]&_)===0&&y<26;++y,_<<=1);if(y>0)for(v.iushrn(y);y-- >0;)p.isOdd()&&p.iadd(c),p.iushrn(1);u.cmp(v)>=0?(u.isub(v),F.isub(p)):(v.isub(u),p.isub(F))}var ne;return u.cmpn(1)===0?ne=F:ne=p,ne.cmpn(0)<0&&ne.iadd(a),ne},i.prototype.gcd=function(a){if(this.isZero())return a.abs();if(a.isZero())return this.abs();var u=this.clone(),v=a.clone();u.negative=0,v.negative=0;for(var F=0;u.isEven()&&v.isEven();F++)u.iushrn(1),v.iushrn(1);do{for(;u.isEven();)u.iushrn(1);for(;v.isEven();)v.iushrn(1);var p=u.cmp(v);if(p<0){var c=u;u=v,v=c}else if(p===0||v.cmpn(1)===0)break;u.isub(v)}while(!0);return v.iushln(F)},i.prototype.invm=function(a){return this.egcd(a).a.umod(a)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(a){return this.words[0]&a},i.prototype.bincn=function(a){t(typeof a=="number");var u=a%26,v=(a-u)/26,F=1<<u;if(this.length<=v)return this._expand(v+1),this.words[v]|=F,this;for(var p=F,c=v;p!==0&&c<this.length;c++){var E=this.words[c]|0;E+=p,p=E>>>26,E&=67108863,this.words[c]=E}return p!==0&&(this.words[c]=p,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(a){var u=a<0;if(this.negative!==0&&!u)return-1;if(this.negative===0&&u)return 1;this._strip();var v;if(this.length>1)v=1;else{u&&(a=-a),t(a<=67108863,"Number is too big");var F=this.words[0]|0;v=F===a?0:F<a?-1:1}return this.negative!==0?-v|0:v},i.prototype.cmp=function(a){if(this.negative!==0&&a.negative===0)return-1;if(this.negative===0&&a.negative!==0)return 1;var u=this.ucmp(a);return this.negative!==0?-u|0:u},i.prototype.ucmp=function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var u=0,v=this.length-1;v>=0;v--){var F=this.words[v]|0,p=a.words[v]|0;if(F!==p){F<p?u=-1:F>p&&(u=1);break}}return u},i.prototype.gtn=function(a){return this.cmpn(a)===1},i.prototype.gt=function(a){return this.cmp(a)===1},i.prototype.gten=function(a){return this.cmpn(a)>=0},i.prototype.gte=function(a){return this.cmp(a)>=0},i.prototype.ltn=function(a){return this.cmpn(a)===-1},i.prototype.lt=function(a){return this.cmp(a)===-1},i.prototype.lten=function(a){return this.cmpn(a)<=0},i.prototype.lte=function(a){return this.cmp(a)<=0},i.prototype.eqn=function(a){return this.cmpn(a)===0},i.prototype.eq=function(a){return this.cmp(a)===0},i.red=function(a){return new l(a)},i.prototype.toRed=function(a){return t(!this.red,"Already a number in reduction context"),t(this.negative===0,"red works only with positives"),a.convertTo(this)._forceRed(a)},i.prototype.fromRed=function(){return t(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(a){return this.red=a,this},i.prototype.forceRed=function(a){return t(!this.red,"Already a number in reduction context"),this._forceRed(a)},i.prototype.redAdd=function(a){return t(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},i.prototype.redIAdd=function(a){return t(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},i.prototype.redSub=function(a){return t(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},i.prototype.redISub=function(a){return t(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},i.prototype.redShl=function(a){return t(this.red,"redShl works only with red numbers"),this.red.shl(this,a)},i.prototype.redMul=function(a){return t(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},i.prototype.redIMul=function(a){return t(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},i.prototype.redSqr=function(){return t(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return t(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return t(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return t(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return t(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(a){return t(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)};var V={k256:null,p224:null,p192:null,p25519:null};function q(d,a){this.name=d,this.p=new i(a,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}q.prototype._tmp=function(){var a=new i(null);return a.words=new Array(Math.ceil(this.n/13)),a},q.prototype.ireduce=function(a){var u=a,v;do this.split(u,this.tmp),u=this.imulK(u),u=u.iadd(this.tmp),v=u.bitLength();while(v>this.n);var F=v<this.n?-1:u.ucmp(this.p);return F===0?(u.words[0]=0,u.length=1):F>0?u.isub(this.p):u.strip!==void 0?u.strip():u._strip(),u},q.prototype.split=function(a,u){a.iushrn(this.n,0,u)},q.prototype.imulK=function(a){return a.imul(this.k)};function z(){q.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}n(z,q),z.prototype.split=function(a,u){for(var v=4194303,F=Math.min(a.length,9),p=0;p<F;p++)u.words[p]=a.words[p];if(u.length=F,a.length<=9){a.words[0]=0,a.length=1;return}var c=a.words[9];for(u.words[u.length++]=c&v,p=10;p<a.length;p++){var E=a.words[p]|0;a.words[p-10]=(E&v)<<4|c>>>22,c=E}c>>>=22,a.words[p-10]=c,c===0&&a.length>10?a.length-=10:a.length-=9},z.prototype.imulK=function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var u=0,v=0;v<a.length;v++){var F=a.words[v]|0;u+=F*977,a.words[v]=u&67108863,u=F*64+(u/67108864|0)}return a.words[a.length-1]===0&&(a.length--,a.words[a.length-1]===0&&a.length--),a};function J(){q.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}n(J,q);function H(){q.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}n(H,q);function L(){q.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}n(L,q),L.prototype.imulK=function(a){for(var u=0,v=0;v<a.length;v++){var F=(a.words[v]|0)*19+u,p=F&67108863;F>>>=26,a.words[v]=p,u=F}return u!==0&&(a.words[a.length++]=u),a},i._prime=function(a){if(V[a])return V[a];var u;if(a==="k256")u=new z;else if(a==="p224")u=new J;else if(a==="p192")u=new H;else if(a==="p25519")u=new L;else throw new Error("Unknown prime "+a);return V[a]=u,u};function l(d){if(typeof d=="string"){var a=i._prime(d);this.m=a.p,this.prime=a}else t(d.gtn(1),"modulus must be greater than 1"),this.m=d,this.prime=null}l.prototype._verify1=function(a){t(a.negative===0,"red works only with positives"),t(a.red,"red works only with red numbers")},l.prototype._verify2=function(a,u){t((a.negative|u.negative)===0,"red works only with positives"),t(a.red&&a.red===u.red,"red works only with red numbers")},l.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):(g(a,a.umod(this.m)._forceRed(this)),a)},l.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},l.prototype.add=function(a,u){this._verify2(a,u);var v=a.add(u);return v.cmp(this.m)>=0&&v.isub(this.m),v._forceRed(this)},l.prototype.iadd=function(a,u){this._verify2(a,u);var v=a.iadd(u);return v.cmp(this.m)>=0&&v.isub(this.m),v},l.prototype.sub=function(a,u){this._verify2(a,u);var v=a.sub(u);return v.cmpn(0)<0&&v.iadd(this.m),v._forceRed(this)},l.prototype.isub=function(a,u){this._verify2(a,u);var v=a.isub(u);return v.cmpn(0)<0&&v.iadd(this.m),v},l.prototype.shl=function(a,u){return this._verify1(a),this.imod(a.ushln(u))},l.prototype.imul=function(a,u){return this._verify2(a,u),this.imod(a.imul(u))},l.prototype.mul=function(a,u){return this._verify2(a,u),this.imod(a.mul(u))},l.prototype.isqr=function(a){return this.imul(a,a.clone())},l.prototype.sqr=function(a){return this.mul(a,a)},l.prototype.sqrt=function(a){if(a.isZero())return a.clone();var u=this.m.andln(3);if(t(u%2===1),u===3){var v=this.m.add(new i(1)).iushrn(2);return this.pow(a,v)}for(var F=this.m.subn(1),p=0;!F.isZero()&&F.andln(1)===0;)p++,F.iushrn(1);t(!F.isZero());var c=new i(1).toRed(this),E=c.redNeg(),M=this.m.subn(1).iushrn(1),y=this.m.bitLength();for(y=new i(2*y*y).toRed(this);this.pow(y,M).cmp(E)!==0;)y.redIAdd(E);for(var _=this.pow(y,F),ne=this.pow(a,F.addn(1).iushrn(1)),ie=this.pow(a,F),ce=p;ie.cmp(c)!==0;){for(var he=ie,re=0;he.cmp(c)!==0;re++)he=he.redSqr();t(re<ce);var m=this.pow(_,new i(1).iushln(ce-re-1));ne=ne.redMul(m),_=m.redSqr(),ie=ie.redMul(_),ce=re}return ne},l.prototype.invm=function(a){var u=a._invmp(this.m);return u.negative!==0?(u.negative=0,this.imod(u).redNeg()):this.imod(u)},l.prototype.pow=function(a,u){if(u.isZero())return new i(1).toRed(this);if(u.cmpn(1)===0)return a.clone();var v=4,F=new Array(1<<v);F[0]=new i(1).toRed(this),F[1]=a;for(var p=2;p<F.length;p++)F[p]=this.mul(F[p-1],a);var c=F[0],E=0,M=0,y=u.bitLength()%26;for(y===0&&(y=26),p=u.length-1;p>=0;p--){for(var _=u.words[p],ne=y-1;ne>=0;ne--){var ie=_>>ne&1;if(c!==F[0]&&(c=this.sqr(c)),ie===0&&E===0){M=0;continue}E<<=1,E|=ie,M++,!(M!==v&&(p!==0||ne!==0))&&(c=this.mul(c,F[E]),M=0,E=0)}y=26}return c},l.prototype.convertTo=function(a){var u=a.umod(this.m);return u===a?u.clone():u},l.prototype.convertFrom=function(a){var u=a.clone();return u.red=null,u},i.mont=function(a){return new b(a)};function b(d){l.call(this,d),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}n(b,l),b.prototype.convertTo=function(a){return this.imod(a.ushln(this.shift))},b.prototype.convertFrom=function(a){var u=this.imod(a.mul(this.rinv));return u.red=null,u},b.prototype.imul=function(a,u){if(a.isZero()||u.isZero())return a.words[0]=0,a.length=1,a;var v=a.imul(u),F=v.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),p=v.isub(F).iushrn(this.shift),c=p;return p.cmp(this.m)>=0?c=p.isub(this.m):p.cmpn(0)<0&&(c=p.iadd(this.m)),c._forceRed(this)},b.prototype.mul=function(a,u){if(a.isZero()||u.isZero())return new i(0)._forceRed(this);var v=a.mul(u),F=v.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),p=v.isub(F).iushrn(this.shift),c=p;return p.cmp(this.m)>=0?c=p.isub(this.m):p.cmpn(0)<0&&(c=p.iadd(this.m)),c._forceRed(this)},b.prototype.invm=function(a){var u=this.imod(a._invmp(this.m).mul(this.r2));return u._forceRed(this)}})(typeof Wd>"u"||Wd,V2)});var J2=X((exports,module)=>{(function(){"use strict";var ERROR="input is invalid type",WINDOW=typeof window=="object",root=WINDOW?window:{};root.JS_SHA256_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&typeof self=="object",NODE_JS=!root.JS_SHA256_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;NODE_JS?root=global:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_SHA256_NO_COMMON_JS&&typeof module=="object"&&module.exports,AMD=typeof define=="function"&&define.amd,ARRAY_BUFFER=!root.JS_SHA256_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",HEX_CHARS="0123456789abcdef".split(""),EXTRA=[-2147483648,8388608,32768,128],SHIFT=[24,16,8,0],K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],OUTPUT_TYPES=["hex","array","digest","arrayBuffer"],blocks=[];(root.JS_SHA256_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(r){return Object.prototype.toString.call(r)==="[object Array]"}),ARRAY_BUFFER&&(root.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(r){return typeof r=="object"&&r.buffer&&r.buffer.constructor===ArrayBuffer});var createOutputMethod=function(r,e){return function(t){return new Sha256(e,!0).update(t)[r]()}},createMethod=function(r){var e=createOutputMethod("hex",r);NODE_JS&&(e=nodeWrap(e,r)),e.create=function(){return new Sha256(r)},e.update=function(i){return e.create().update(i)};for(var t=0;t<OUTPUT_TYPES.length;++t){var n=OUTPUT_TYPES[t];e[n]=createOutputMethod(n,r)}return e},nodeWrap=function(method,is224){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),algorithm=is224?"sha224":"sha256",nodeMethod=function(r){if(typeof r=="string")return crypto.createHash(algorithm).update(r,"utf8").digest("hex");if(r==null)throw new Error(ERROR);return r.constructor===ArrayBuffer&&(r=new Uint8Array(r)),Array.isArray(r)||ArrayBuffer.isView(r)||r.constructor===Buffer?crypto.createHash(algorithm).update(new Buffer(r)).digest("hex"):method(r)};return nodeMethod},createHmacOutputMethod=function(r,e){return function(t,n){return new HmacSha256(t,e,!0).update(n)[r]()}},createHmacMethod=function(r){var e=createHmacOutputMethod("hex",r);e.create=function(i){return new HmacSha256(i,r)},e.update=function(i,o){return e.create(i).update(o)};for(var t=0;t<OUTPUT_TYPES.length;++t){var n=OUTPUT_TYPES[t];e[n]=createHmacOutputMethod(n,r)}return e};function Sha256(r,e){e?(blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],r?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=r}Sha256.prototype.update=function(r){if(!this.finalized){var e,t=typeof r;if(t!=="string"){if(t==="object"){if(r===null)throw new Error(ERROR);if(ARRAY_BUFFER&&r.constructor===ArrayBuffer)r=new Uint8Array(r);else if(!Array.isArray(r)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(r)))throw new Error(ERROR)}else throw new Error(ERROR);e=!0}for(var n,i=0,o,s=r.length,f=this.blocks;i<s;){if(this.hashed&&(this.hashed=!1,f[0]=this.block,f[16]=f[1]=f[2]=f[3]=f[4]=f[5]=f[6]=f[7]=f[8]=f[9]=f[10]=f[11]=f[12]=f[13]=f[14]=f[15]=0),e)for(o=this.start;i<s&&o<64;++i)f[o>>2]|=r[i]<<SHIFT[o++&3];else for(o=this.start;i<s&&o<64;++i)n=r.charCodeAt(i),n<128?f[o>>2]|=n<<SHIFT[o++&3]:n<2048?(f[o>>2]|=(192|n>>6)<<SHIFT[o++&3],f[o>>2]|=(128|n&63)<<SHIFT[o++&3]):n<55296||n>=57344?(f[o>>2]|=(224|n>>12)<<SHIFT[o++&3],f[o>>2]|=(128|n>>6&63)<<SHIFT[o++&3],f[o>>2]|=(128|n&63)<<SHIFT[o++&3]):(n=65536+((n&1023)<<10|r.charCodeAt(++i)&1023),f[o>>2]|=(240|n>>18)<<SHIFT[o++&3],f[o>>2]|=(128|n>>12&63)<<SHIFT[o++&3],f[o>>2]|=(128|n>>6&63)<<SHIFT[o++&3],f[o>>2]|=(128|n&63)<<SHIFT[o++&3]);this.lastByteIndex=o,this.bytes+=o-this.start,o>=64?(this.block=f[16],this.start=o-64,this.hash(),this.hashed=!0):this.start=o}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Sha256.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var r=this.blocks,e=this.lastByteIndex;r[16]=this.block,r[e>>2]|=EXTRA[e&3],this.block=r[16],e>=56&&(this.hashed||this.hash(),r[0]=this.block,r[16]=r[1]=r[2]=r[3]=r[4]=r[5]=r[6]=r[7]=r[8]=r[9]=r[10]=r[11]=r[12]=r[13]=r[14]=r[15]=0),r[14]=this.hBytes<<3|this.bytes>>>29,r[15]=this.bytes<<3,this.hash()}},Sha256.prototype.hash=function(){var r=this.h0,e=this.h1,t=this.h2,n=this.h3,i=this.h4,o=this.h5,s=this.h6,f=this.h7,h=this.blocks,g,x,T,I,A,C,j,G,$,Z,ee;for(g=16;g<64;++g)A=h[g-15],x=(A>>>7|A<<25)^(A>>>18|A<<14)^A>>>3,A=h[g-2],T=(A>>>17|A<<15)^(A>>>19|A<<13)^A>>>10,h[g]=h[g-16]+x+h[g-7]+T<<0;for(ee=e&t,g=0;g<64;g+=4)this.first?(this.is224?(G=300032,A=h[0]-1413257819,f=A-150054599<<0,n=A+24177077<<0):(G=704751109,A=h[0]-210244248,f=A-1521486534<<0,n=A+143694565<<0),this.first=!1):(x=(r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10),T=(i>>>6|i<<26)^(i>>>11|i<<21)^(i>>>25|i<<7),G=r&e,I=G^r&t^ee,j=i&o^~i&s,A=f+T+j+K[g]+h[g],C=x+I,f=n+A<<0,n=A+C<<0),x=(n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10),T=(f>>>6|f<<26)^(f>>>11|f<<21)^(f>>>25|f<<7),$=n&r,I=$^n&e^G,j=f&i^~f&o,A=s+T+j+K[g+1]+h[g+1],C=x+I,s=t+A<<0,t=A+C<<0,x=(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10),T=(s>>>6|s<<26)^(s>>>11|s<<21)^(s>>>25|s<<7),Z=t&n,I=Z^t&r^$,j=s&f^~s&i,A=o+T+j+K[g+2]+h[g+2],C=x+I,o=e+A<<0,e=A+C<<0,x=(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10),T=(o>>>6|o<<26)^(o>>>11|o<<21)^(o>>>25|o<<7),ee=e&t,I=ee^e&n^Z,j=o&s^~o&f,A=i+T+j+K[g+3]+h[g+3],C=x+I,i=r+A<<0,r=A+C<<0;this.h0=this.h0+r<<0,this.h1=this.h1+e<<0,this.h2=this.h2+t<<0,this.h3=this.h3+n<<0,this.h4=this.h4+i<<0,this.h5=this.h5+o<<0,this.h6=this.h6+s<<0,this.h7=this.h7+f<<0},Sha256.prototype.hex=function(){this.finalize();var r=this.h0,e=this.h1,t=this.h2,n=this.h3,i=this.h4,o=this.h5,s=this.h6,f=this.h7,h=HEX_CHARS[r>>28&15]+HEX_CHARS[r>>24&15]+HEX_CHARS[r>>20&15]+HEX_CHARS[r>>16&15]+HEX_CHARS[r>>12&15]+HEX_CHARS[r>>8&15]+HEX_CHARS[r>>4&15]+HEX_CHARS[r&15]+HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>4&15]+HEX_CHARS[e&15]+HEX_CHARS[t>>28&15]+HEX_CHARS[t>>24&15]+HEX_CHARS[t>>20&15]+HEX_CHARS[t>>16&15]+HEX_CHARS[t>>12&15]+HEX_CHARS[t>>8&15]+HEX_CHARS[t>>4&15]+HEX_CHARS[t&15]+HEX_CHARS[n>>28&15]+HEX_CHARS[n>>24&15]+HEX_CHARS[n>>20&15]+HEX_CHARS[n>>16&15]+HEX_CHARS[n>>12&15]+HEX_CHARS[n>>8&15]+HEX_CHARS[n>>4&15]+HEX_CHARS[n&15]+HEX_CHARS[i>>28&15]+HEX_CHARS[i>>24&15]+HEX_CHARS[i>>20&15]+HEX_CHARS[i>>16&15]+HEX_CHARS[i>>12&15]+HEX_CHARS[i>>8&15]+HEX_CHARS[i>>4&15]+HEX_CHARS[i&15]+HEX_CHARS[o>>28&15]+HEX_CHARS[o>>24&15]+HEX_CHARS[o>>20&15]+HEX_CHARS[o>>16&15]+HEX_CHARS[o>>12&15]+HEX_CHARS[o>>8&15]+HEX_CHARS[o>>4&15]+HEX_CHARS[o&15]+HEX_CHARS[s>>28&15]+HEX_CHARS[s>>24&15]+HEX_CHARS[s>>20&15]+HEX_CHARS[s>>16&15]+HEX_CHARS[s>>12&15]+HEX_CHARS[s>>8&15]+HEX_CHARS[s>>4&15]+HEX_CHARS[s&15];return this.is224||(h+=HEX_CHARS[f>>28&15]+HEX_CHARS[f>>24&15]+HEX_CHARS[f>>20&15]+HEX_CHARS[f>>16&15]+HEX_CHARS[f>>12&15]+HEX_CHARS[f>>8&15]+HEX_CHARS[f>>4&15]+HEX_CHARS[f&15]),h},Sha256.prototype.toString=Sha256.prototype.hex,Sha256.prototype.digest=function(){this.finalize();var r=this.h0,e=this.h1,t=this.h2,n=this.h3,i=this.h4,o=this.h5,s=this.h6,f=this.h7,h=[r>>24&255,r>>16&255,r>>8&255,r&255,e>>24&255,e>>16&255,e>>8&255,e&255,t>>24&255,t>>16&255,t>>8&255,t&255,n>>24&255,n>>16&255,n>>8&255,n&255,i>>24&255,i>>16&255,i>>8&255,i&255,o>>24&255,o>>16&255,o>>8&255,o&255,s>>24&255,s>>16&255,s>>8&255,s&255];return this.is224||h.push(f>>24&255,f>>16&255,f>>8&255,f&255),h},Sha256.prototype.array=Sha256.prototype.digest,Sha256.prototype.arrayBuffer=function(){this.finalize();var r=new ArrayBuffer(this.is224?28:32),e=new DataView(r);return e.setUint32(0,this.h0),e.setUint32(4,this.h1),e.setUint32(8,this.h2),e.setUint32(12,this.h3),e.setUint32(16,this.h4),e.setUint32(20,this.h5),e.setUint32(24,this.h6),this.is224||e.setUint32(28,this.h7),r};function HmacSha256(r,e,t){var n,i=typeof r;if(i==="string"){var o=[],s=r.length,f=0,h;for(n=0;n<s;++n)h=r.charCodeAt(n),h<128?o[f++]=h:h<2048?(o[f++]=192|h>>6,o[f++]=128|h&63):h<55296||h>=57344?(o[f++]=224|h>>12,o[f++]=128|h>>6&63,o[f++]=128|h&63):(h=65536+((h&1023)<<10|r.charCodeAt(++n)&1023),o[f++]=240|h>>18,o[f++]=128|h>>12&63,o[f++]=128|h>>6&63,o[f++]=128|h&63);r=o}else if(i==="object"){if(r===null)throw new Error(ERROR);if(ARRAY_BUFFER&&r.constructor===ArrayBuffer)r=new Uint8Array(r);else if(!Array.isArray(r)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(r)))throw new Error(ERROR)}else throw new Error(ERROR);r.length>64&&(r=new Sha256(e,!0).update(r).array());var g=[],x=[];for(n=0;n<64;++n){var T=r[n]||0;g[n]=92^T,x[n]=54^T}Sha256.call(this,e,t),this.update(x),this.oKeyPad=g,this.inner=!0,this.sharedMemory=t}HmacSha256.prototype=new Sha256,HmacSha256.prototype.finalize=function(){if(Sha256.prototype.finalize.call(this),this.inner){this.inner=!1;var r=this.array();Sha256.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(r),Sha256.prototype.finalize.call(this)}};var exports=createMethod();exports.sha256=exports,exports.sha224=createMethod(!0),exports.sha256.hmac=createHmacMethod(),exports.sha224.hmac=createHmacMethod(!0),COMMON_JS?module.exports=exports:(root.sha256=exports.sha256,root.sha224=exports.sha224,AMD&&define(function(){return exports}))})()});var Y2=X((HC,xu)=>{(function(){"use strict";var r="input is invalid type",e="finalize already called",t=typeof window=="object",n=t?window:{};n.JS_SHA512_NO_WINDOW&&(t=!1);var i=!t&&typeof self=="object",o=!n.JS_SHA512_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;o?n=global:i&&(n=self);var s=!n.JS_SHA512_NO_COMMON_JS&&typeof xu=="object"&&xu.exports,f=typeof define=="function"&&define.amd,h=!n.JS_SHA512_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",g="0123456789abcdef".split(""),x=[-2147483648,8388608,32768,128],T=[24,16,8,0],I=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],A=["hex","array","digest","arrayBuffer"],C=[];(n.JS_SHA512_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(q){return Object.prototype.toString.call(q)==="[object Array]"}),h&&(n.JS_SHA512_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(q){return typeof q=="object"&&q.buffer&&q.buffer.constructor===ArrayBuffer});var j=function(q,z){return function(J){return new ee(z,!0).update(J)[q]()}},G=function(q){var z=j("hex",q);z.create=function(){return new ee(q)},z.update=function(L){return z.create().update(L)};for(var J=0;J<A.length;++J){var H=A[J];z[H]=j(H,q)}return z},$=function(q,z){return function(J,H){return new se(J,z,!0).update(H)[q]()}},Z=function(q){var z=$("hex",q);z.create=function(L){return new se(L,q)},z.update=function(L,l){return z.create(L).update(l)};for(var J=0;J<A.length;++J){var H=A[J];z[H]=$(H,q)}return z};function ee(q,z){z?(C[0]=C[1]=C[2]=C[3]=C[4]=C[5]=C[6]=C[7]=C[8]=C[9]=C[10]=C[11]=C[12]=C[13]=C[14]=C[15]=C[16]=C[17]=C[18]=C[19]=C[20]=C[21]=C[22]=C[23]=C[24]=C[25]=C[26]=C[27]=C[28]=C[29]=C[30]=C[31]=C[32]=0,this.blocks=C):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],q==384?(this.h0h=3418070365,this.h0l=3238371032,this.h1h=1654270250,this.h1l=914150663,this.h2h=2438529370,this.h2l=812702999,this.h3h=355462360,this.h3l=4144912697,this.h4h=1731405415,this.h4l=4290775857,this.h5h=2394180231,this.h5l=1750603025,this.h6h=3675008525,this.h6l=1694076839,this.h7h=1203062813,this.h7l=3204075428):q==256?(this.h0h=573645204,this.h0l=4230739756,this.h1h=2673172387,this.h1l=3360449730,this.h2h=596883563,this.h2l=1867755857,this.h3h=2520282905,this.h3l=1497426621,this.h4h=2519219938,this.h4l=2827943907,this.h5h=3193839141,this.h5l=1401305490,this.h6h=721525244,this.h6l=746961066,this.h7h=246885852,this.h7l=2177182882):q==224?(this.h0h=2352822216,this.h0l=424955298,this.h1h=1944164710,this.h1l=2312950998,this.h2h=502970286,this.h2l=855612546,this.h3h=1738396948,this.h3l=1479516111,this.h4h=258812777,this.h4l=2077511080,this.h5h=2011393907,this.h5l=79989058,this.h6h=1067287976,this.h6l=1780299464,this.h7h=286451373,this.h7l=2446758561):(this.h0h=1779033703,this.h0l=4089235720,this.h1h=3144134277,this.h1l=2227873595,this.h2h=1013904242,this.h2l=4271175723,this.h3h=2773480762,this.h3l=1595750129,this.h4h=1359893119,this.h4l=2917565137,this.h5h=2600822924,this.h5l=725511199,this.h6h=528734635,this.h6l=4215389547,this.h7h=1541459225,this.h7l=327033209),this.bits=q,this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1}ee.prototype.update=function(q){if(this.finalized)throw new Error(e);var z,J=typeof q;if(J!=="string"){if(J==="object"){if(q===null)throw new Error(r);if(h&&q.constructor===ArrayBuffer)q=new Uint8Array(q);else if(!Array.isArray(q)&&(!h||!ArrayBuffer.isView(q)))throw new Error(r)}else throw new Error(r);z=!0}for(var H,L=0,l,b=q.length,d=this.blocks;L<b;){if(this.hashed&&(this.hashed=!1,d[0]=this.block,d[1]=d[2]=d[3]=d[4]=d[5]=d[6]=d[7]=d[8]=d[9]=d[10]=d[11]=d[12]=d[13]=d[14]=d[15]=d[16]=d[17]=d[18]=d[19]=d[20]=d[21]=d[22]=d[23]=d[24]=d[25]=d[26]=d[27]=d[28]=d[29]=d[30]=d[31]=d[32]=0),z)for(l=this.start;L<b&&l<128;++L)d[l>>2]|=q[L]<<T[l++&3];else for(l=this.start;L<b&&l<128;++L)H=q.charCodeAt(L),H<128?d[l>>2]|=H<<T[l++&3]:H<2048?(d[l>>2]|=(192|H>>6)<<T[l++&3],d[l>>2]|=(128|H&63)<<T[l++&3]):H<55296||H>=57344?(d[l>>2]|=(224|H>>12)<<T[l++&3],d[l>>2]|=(128|H>>6&63)<<T[l++&3],d[l>>2]|=(128|H&63)<<T[l++&3]):(H=65536+((H&1023)<<10|q.charCodeAt(++L)&1023),d[l>>2]|=(240|H>>18)<<T[l++&3],d[l>>2]|=(128|H>>12&63)<<T[l++&3],d[l>>2]|=(128|H>>6&63)<<T[l++&3],d[l>>2]|=(128|H&63)<<T[l++&3]);this.lastByteIndex=l,this.bytes+=l-this.start,l>=128?(this.block=d[32],this.start=l-128,this.hash(),this.hashed=!0):this.start=l}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this},ee.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var q=this.blocks,z=this.lastByteIndex;q[32]=this.block,q[z>>2]|=x[z&3],this.block=q[32],z>=112&&(this.hashed||this.hash(),q[0]=this.block,q[1]=q[2]=q[3]=q[4]=q[5]=q[6]=q[7]=q[8]=q[9]=q[10]=q[11]=q[12]=q[13]=q[14]=q[15]=q[16]=q[17]=q[18]=q[19]=q[20]=q[21]=q[22]=q[23]=q[24]=q[25]=q[26]=q[27]=q[28]=q[29]=q[30]=q[31]=q[32]=0),q[30]=this.hBytes<<3|this.bytes>>>29,q[31]=this.bytes<<3,this.hash()}},ee.prototype.hash=function(){var q=this.h0h,z=this.h0l,J=this.h1h,H=this.h1l,L=this.h2h,l=this.h2l,b=this.h3h,d=this.h3l,a=this.h4h,u=this.h4l,v=this.h5h,F=this.h5l,p=this.h6h,c=this.h6l,E=this.h7h,M=this.h7l,y=this.blocks,_,ne,ie,ce,he,re,m,w,S,N,R,P,D,B,O,k,U,W,Y,Q,te,fe,ge,ae,ue;for(_=32;_<160;_+=2)Q=y[_-30],te=y[_-29],ne=(Q>>>1|te<<31)^(Q>>>8|te<<24)^Q>>>7,ie=(te>>>1|Q<<31)^(te>>>8|Q<<24)^(te>>>7|Q<<25),Q=y[_-4],te=y[_-3],ce=(Q>>>19|te<<13)^(te>>>29|Q<<3)^Q>>>6,he=(te>>>19|Q<<13)^(Q>>>29|te<<3)^(te>>>6|Q<<26),Q=y[_-32],te=y[_-31],fe=y[_-14],ge=y[_-13],re=(ge&65535)+(te&65535)+(ie&65535)+(he&65535),m=(ge>>>16)+(te>>>16)+(ie>>>16)+(he>>>16)+(re>>>16),w=(fe&65535)+(Q&65535)+(ne&65535)+(ce&65535)+(m>>>16),S=(fe>>>16)+(Q>>>16)+(ne>>>16)+(ce>>>16)+(w>>>16),y[_]=S<<16|w&65535,y[_+1]=m<<16|re&65535;var Se=q,ye=z,be=J,Je=H,pe=L,me=l,Fe=b,de=d,le=a,ht=u,ve=v,we=F,dt=p,xe=c,_e=E,pt=M;for(k=be&pe,U=Je&me,_=0;_<160;_+=8)ne=(Se>>>28|ye<<4)^(ye>>>2|Se<<30)^(ye>>>7|Se<<25),ie=(ye>>>28|Se<<4)^(Se>>>2|ye<<30)^(Se>>>7|ye<<25),ce=(le>>>14|ht<<18)^(le>>>18|ht<<14)^(ht>>>9|le<<23),he=(ht>>>14|le<<18)^(ht>>>18|le<<14)^(le>>>9|ht<<23),N=Se&be,R=ye&Je,W=N^Se&pe^k,Y=R^ye&me^U,ae=le&ve^~le&dt,ue=ht&we^~ht&xe,Q=y[_],te=y[_+1],fe=I[_],ge=I[_+1],re=(ge&65535)+(te&65535)+(ue&65535)+(he&65535)+(pt&65535),m=(ge>>>16)+(te>>>16)+(ue>>>16)+(he>>>16)+(pt>>>16)+(re>>>16),w=(fe&65535)+(Q&65535)+(ae&65535)+(ce&65535)+(_e&65535)+(m>>>16),S=(fe>>>16)+(Q>>>16)+(ae>>>16)+(ce>>>16)+(_e>>>16)+(w>>>16),Q=S<<16|w&65535,te=m<<16|re&65535,re=(Y&65535)+(ie&65535),m=(Y>>>16)+(ie>>>16)+(re>>>16),w=(W&65535)+(ne&65535)+(m>>>16),S=(W>>>16)+(ne>>>16)+(w>>>16),fe=S<<16|w&65535,ge=m<<16|re&65535,re=(de&65535)+(te&65535),m=(de>>>16)+(te>>>16)+(re>>>16),w=(Fe&65535)+(Q&65535)+(m>>>16),S=(Fe>>>16)+(Q>>>16)+(w>>>16),_e=S<<16|w&65535,pt=m<<16|re&65535,re=(ge&65535)+(te&65535),m=(ge>>>16)+(te>>>16)+(re>>>16),w=(fe&65535)+(Q&65535)+(m>>>16),S=(fe>>>16)+(Q>>>16)+(w>>>16),Fe=S<<16|w&65535,de=m<<16|re&65535,ne=(Fe>>>28|de<<4)^(de>>>2|Fe<<30)^(de>>>7|Fe<<25),ie=(de>>>28|Fe<<4)^(Fe>>>2|de<<30)^(Fe>>>7|de<<25),ce=(_e>>>14|pt<<18)^(_e>>>18|pt<<14)^(pt>>>9|_e<<23),he=(pt>>>14|_e<<18)^(pt>>>18|_e<<14)^(_e>>>9|pt<<23),P=Fe&Se,D=de&ye,W=P^Fe&be^N,Y=D^de&Je^R,ae=_e&le^~_e&ve,ue=pt&ht^~pt&we,Q=y[_+2],te=y[_+3],fe=I[_+2],ge=I[_+3],re=(ge&65535)+(te&65535)+(ue&65535)+(he&65535)+(xe&65535),m=(ge>>>16)+(te>>>16)+(ue>>>16)+(he>>>16)+(xe>>>16)+(re>>>16),w=(fe&65535)+(Q&65535)+(ae&65535)+(ce&65535)+(dt&65535)+(m>>>16),S=(fe>>>16)+(Q>>>16)+(ae>>>16)+(ce>>>16)+(dt>>>16)+(w>>>16),Q=S<<16|w&65535,te=m<<16|re&65535,re=(Y&65535)+(ie&65535),m=(Y>>>16)+(ie>>>16)+(re>>>16),w=(W&65535)+(ne&65535)+(m>>>16),S=(W>>>16)+(ne>>>16)+(w>>>16),fe=S<<16|w&65535,ge=m<<16|re&65535,re=(me&65535)+(te&65535),m=(me>>>16)+(te>>>16)+(re>>>16),w=(pe&65535)+(Q&65535)+(m>>>16),S=(pe>>>16)+(Q>>>16)+(w>>>16),dt=S<<16|w&65535,xe=m<<16|re&65535,re=(ge&65535)+(te&65535),m=(ge>>>16)+(te>>>16)+(re>>>16),w=(fe&65535)+(Q&65535)+(m>>>16),S=(fe>>>16)+(Q>>>16)+(w>>>16),pe=S<<16|w&65535,me=m<<16|re&65535,ne=(pe>>>28|me<<4)^(me>>>2|pe<<30)^(me>>>7|pe<<25),ie=(me>>>28|pe<<4)^(pe>>>2|me<<30)^(pe>>>7|me<<25),ce=(dt>>>14|xe<<18)^(dt>>>18|xe<<14)^(xe>>>9|dt<<23),he=(xe>>>14|dt<<18)^(xe>>>18|dt<<14)^(dt>>>9|xe<<23),B=pe&Fe,O=me&de,W=B^pe&Se^P,Y=O^me&ye^D,ae=dt&_e^~dt&le,ue=xe&pt^~xe&ht,Q=y[_+4],te=y[_+5],fe=I[_+4],ge=I[_+5],re=(ge&65535)+(te&65535)+(ue&65535)+(he&65535)+(we&65535),m=(ge>>>16)+(te>>>16)+(ue>>>16)+(he>>>16)+(we>>>16)+(re>>>16),w=(fe&65535)+(Q&65535)+(ae&65535)+(ce&65535)+(ve&65535)+(m>>>16),S=(fe>>>16)+(Q>>>16)+(ae>>>16)+(ce>>>16)+(ve>>>16)+(w>>>16),Q=S<<16|w&65535,te=m<<16|re&65535,re=(Y&65535)+(ie&65535),m=(Y>>>16)+(ie>>>16)+(re>>>16),w=(W&65535)+(ne&65535)+(m>>>16),S=(W>>>16)+(ne>>>16)+(w>>>16),fe=S<<16|w&65535,ge=m<<16|re&65535,re=(Je&65535)+(te&65535),m=(Je>>>16)+(te>>>16)+(re>>>16),w=(be&65535)+(Q&65535)+(m>>>16),S=(be>>>16)+(Q>>>16)+(w>>>16),ve=S<<16|w&65535,we=m<<16|re&65535,re=(ge&65535)+(te&65535),m=(ge>>>16)+(te>>>16)+(re>>>16),w=(fe&65535)+(Q&65535)+(m>>>16),S=(fe>>>16)+(Q>>>16)+(w>>>16),be=S<<16|w&65535,Je=m<<16|re&65535,ne=(be>>>28|Je<<4)^(Je>>>2|be<<30)^(Je>>>7|be<<25),ie=(Je>>>28|be<<4)^(be>>>2|Je<<30)^(be>>>7|Je<<25),ce=(ve>>>14|we<<18)^(ve>>>18|we<<14)^(we>>>9|ve<<23),he=(we>>>14|ve<<18)^(we>>>18|ve<<14)^(ve>>>9|we<<23),k=be&pe,U=Je&me,W=k^be&Fe^B,Y=U^Je&de^O,ae=ve&dt^~ve&_e,ue=we&xe^~we&pt,Q=y[_+6],te=y[_+7],fe=I[_+6],ge=I[_+7],re=(ge&65535)+(te&65535)+(ue&65535)+(he&65535)+(ht&65535),m=(ge>>>16)+(te>>>16)+(ue>>>16)+(he>>>16)+(ht>>>16)+(re>>>16),w=(fe&65535)+(Q&65535)+(ae&65535)+(ce&65535)+(le&65535)+(m>>>16),S=(fe>>>16)+(Q>>>16)+(ae>>>16)+(ce>>>16)+(le>>>16)+(w>>>16),Q=S<<16|w&65535,te=m<<16|re&65535,re=(Y&65535)+(ie&65535),m=(Y>>>16)+(ie>>>16)+(re>>>16),w=(W&65535)+(ne&65535)+(m>>>16),S=(W>>>16)+(ne>>>16)+(w>>>16),fe=S<<16|w&65535,ge=m<<16|re&65535,re=(ye&65535)+(te&65535),m=(ye>>>16)+(te>>>16)+(re>>>16),w=(Se&65535)+(Q&65535)+(m>>>16),S=(Se>>>16)+(Q>>>16)+(w>>>16),le=S<<16|w&65535,ht=m<<16|re&65535,re=(ge&65535)+(te&65535),m=(ge>>>16)+(te>>>16)+(re>>>16),w=(fe&65535)+(Q&65535)+(m>>>16),S=(fe>>>16)+(Q>>>16)+(w>>>16),Se=S<<16|w&65535,ye=m<<16|re&65535;re=(z&65535)+(ye&65535),m=(z>>>16)+(ye>>>16)+(re>>>16),w=(q&65535)+(Se&65535)+(m>>>16),S=(q>>>16)+(Se>>>16)+(w>>>16),this.h0h=S<<16|w&65535,this.h0l=m<<16|re&65535,re=(H&65535)+(Je&65535),m=(H>>>16)+(Je>>>16)+(re>>>16),w=(J&65535)+(be&65535)+(m>>>16),S=(J>>>16)+(be>>>16)+(w>>>16),this.h1h=S<<16|w&65535,this.h1l=m<<16|re&65535,re=(l&65535)+(me&65535),m=(l>>>16)+(me>>>16)+(re>>>16),w=(L&65535)+(pe&65535)+(m>>>16),S=(L>>>16)+(pe>>>16)+(w>>>16),this.h2h=S<<16|w&65535,this.h2l=m<<16|re&65535,re=(d&65535)+(de&65535),m=(d>>>16)+(de>>>16)+(re>>>16),w=(b&65535)+(Fe&65535)+(m>>>16),S=(b>>>16)+(Fe>>>16)+(w>>>16),this.h3h=S<<16|w&65535,this.h3l=m<<16|re&65535,re=(u&65535)+(ht&65535),m=(u>>>16)+(ht>>>16)+(re>>>16),w=(a&65535)+(le&65535)+(m>>>16),S=(a>>>16)+(le>>>16)+(w>>>16),this.h4h=S<<16|w&65535,this.h4l=m<<16|re&65535,re=(F&65535)+(we&65535),m=(F>>>16)+(we>>>16)+(re>>>16),w=(v&65535)+(ve&65535)+(m>>>16),S=(v>>>16)+(ve>>>16)+(w>>>16),this.h5h=S<<16|w&65535,this.h5l=m<<16|re&65535,re=(c&65535)+(xe&65535),m=(c>>>16)+(xe>>>16)+(re>>>16),w=(p&65535)+(dt&65535)+(m>>>16),S=(p>>>16)+(dt>>>16)+(w>>>16),this.h6h=S<<16|w&65535,this.h6l=m<<16|re&65535,re=(M&65535)+(pt&65535),m=(M>>>16)+(pt>>>16)+(re>>>16),w=(E&65535)+(_e&65535)+(m>>>16),S=(E>>>16)+(_e>>>16)+(w>>>16),this.h7h=S<<16|w&65535,this.h7l=m<<16|re&65535},ee.prototype.hex=function(){this.finalize();var q=this.h0h,z=this.h0l,J=this.h1h,H=this.h1l,L=this.h2h,l=this.h2l,b=this.h3h,d=this.h3l,a=this.h4h,u=this.h4l,v=this.h5h,F=this.h5l,p=this.h6h,c=this.h6l,E=this.h7h,M=this.h7l,y=this.bits,_=g[q>>28&15]+g[q>>24&15]+g[q>>20&15]+g[q>>16&15]+g[q>>12&15]+g[q>>8&15]+g[q>>4&15]+g[q&15]+g[z>>28&15]+g[z>>24&15]+g[z>>20&15]+g[z>>16&15]+g[z>>12&15]+g[z>>8&15]+g[z>>4&15]+g[z&15]+g[J>>28&15]+g[J>>24&15]+g[J>>20&15]+g[J>>16&15]+g[J>>12&15]+g[J>>8&15]+g[J>>4&15]+g[J&15]+g[H>>28&15]+g[H>>24&15]+g[H>>20&15]+g[H>>16&15]+g[H>>12&15]+g[H>>8&15]+g[H>>4&15]+g[H&15]+g[L>>28&15]+g[L>>24&15]+g[L>>20&15]+g[L>>16&15]+g[L>>12&15]+g[L>>8&15]+g[L>>4&15]+g[L&15]+g[l>>28&15]+g[l>>24&15]+g[l>>20&15]+g[l>>16&15]+g[l>>12&15]+g[l>>8&15]+g[l>>4&15]+g[l&15]+g[b>>28&15]+g[b>>24&15]+g[b>>20&15]+g[b>>16&15]+g[b>>12&15]+g[b>>8&15]+g[b>>4&15]+g[b&15];return y>=256&&(_+=g[d>>28&15]+g[d>>24&15]+g[d>>20&15]+g[d>>16&15]+g[d>>12&15]+g[d>>8&15]+g[d>>4&15]+g[d&15]),y>=384&&(_+=g[a>>28&15]+g[a>>24&15]+g[a>>20&15]+g[a>>16&15]+g[a>>12&15]+g[a>>8&15]+g[a>>4&15]+g[a&15]+g[u>>28&15]+g[u>>24&15]+g[u>>20&15]+g[u>>16&15]+g[u>>12&15]+g[u>>8&15]+g[u>>4&15]+g[u&15]+g[v>>28&15]+g[v>>24&15]+g[v>>20&15]+g[v>>16&15]+g[v>>12&15]+g[v>>8&15]+g[v>>4&15]+g[v&15]+g[F>>28&15]+g[F>>24&15]+g[F>>20&15]+g[F>>16&15]+g[F>>12&15]+g[F>>8&15]+g[F>>4&15]+g[F&15]),y==512&&(_+=g[p>>28&15]+g[p>>24&15]+g[p>>20&15]+g[p>>16&15]+g[p>>12&15]+g[p>>8&15]+g[p>>4&15]+g[p&15]+g[c>>28&15]+g[c>>24&15]+g[c>>20&15]+g[c>>16&15]+g[c>>12&15]+g[c>>8&15]+g[c>>4&15]+g[c&15]+g[E>>28&15]+g[E>>24&15]+g[E>>20&15]+g[E>>16&15]+g[E>>12&15]+g[E>>8&15]+g[E>>4&15]+g[E&15]+g[M>>28&15]+g[M>>24&15]+g[M>>20&15]+g[M>>16&15]+g[M>>12&15]+g[M>>8&15]+g[M>>4&15]+g[M&15]),_},ee.prototype.toString=ee.prototype.hex,ee.prototype.digest=function(){this.finalize();var q=this.h0h,z=this.h0l,J=this.h1h,H=this.h1l,L=this.h2h,l=this.h2l,b=this.h3h,d=this.h3l,a=this.h4h,u=this.h4l,v=this.h5h,F=this.h5l,p=this.h6h,c=this.h6l,E=this.h7h,M=this.h7l,y=this.bits,_=[q>>24&255,q>>16&255,q>>8&255,q&255,z>>24&255,z>>16&255,z>>8&255,z&255,J>>24&255,J>>16&255,J>>8&255,J&255,H>>24&255,H>>16&255,H>>8&255,H&255,L>>24&255,L>>16&255,L>>8&255,L&255,l>>24&255,l>>16&255,l>>8&255,l&255,b>>24&255,b>>16&255,b>>8&255,b&255];return y>=256&&_.push(d>>24&255,d>>16&255,d>>8&255,d&255),y>=384&&_.push(a>>24&255,a>>16&255,a>>8&255,a&255,u>>24&255,u>>16&255,u>>8&255,u&255,v>>24&255,v>>16&255,v>>8&255,v&255,F>>24&255,F>>16&255,F>>8&255,F&255),y==512&&_.push(p>>24&255,p>>16&255,p>>8&255,p&255,c>>24&255,c>>16&255,c>>8&255,c&255,E>>24&255,E>>16&255,E>>8&255,E&255,M>>24&255,M>>16&255,M>>8&255,M&255),_},ee.prototype.array=ee.prototype.digest,ee.prototype.arrayBuffer=function(){this.finalize();var q=this.bits,z=new ArrayBuffer(q/8),J=new DataView(z);return J.setUint32(0,this.h0h),J.setUint32(4,this.h0l),J.setUint32(8,this.h1h),J.setUint32(12,this.h1l),J.setUint32(16,this.h2h),J.setUint32(20,this.h2l),J.setUint32(24,this.h3h),q>=256&&J.setUint32(28,this.h3l),q>=384&&(J.setUint32(32,this.h4h),J.setUint32(36,this.h4l),J.setUint32(40,this.h5h),J.setUint32(44,this.h5l)),q==512&&(J.setUint32(48,this.h6h),J.setUint32(52,this.h6l),J.setUint32(56,this.h7h),J.setUint32(60,this.h7l)),z},ee.prototype.clone=function(){var q=new ee(this.bits,!1);return this.copyTo(q),q},ee.prototype.copyTo=function(q){var z=0,J=["h0h","h0l","h1h","h1l","h2h","h2l","h3h","h3l","h4h","h4l","h5h","h5l","h6h","h6l","h7h","h7l","start","bytes","hBytes","finalized","hashed","lastByteIndex"];for(z=0;z<J.length;++z)q[J[z]]=this[J[z]];for(z=0;z<this.blocks.length;++z)q.blocks[z]=this.blocks[z]};function se(q,z,J){var H,L=typeof q;if(L!=="string"){if(L==="object"){if(q===null)throw new Error(r);if(h&&q.constructor===ArrayBuffer)q=new Uint8Array(q);else if(!Array.isArray(q)&&(!h||!ArrayBuffer.isView(q)))throw new Error(r)}else throw new Error(r);H=!0}var l=q.length;if(!H){for(var b=[],l=q.length,d=0,a,u=0;u<l;++u)a=q.charCodeAt(u),a<128?b[d++]=a:a<2048?(b[d++]=192|a>>6,b[d++]=128|a&63):a<55296||a>=57344?(b[d++]=224|a>>12,b[d++]=128|a>>6&63,b[d++]=128|a&63):(a=65536+((a&1023)<<10|q.charCodeAt(++u)&1023),b[d++]=240|a>>18,b[d++]=128|a>>12&63,b[d++]=128|a>>6&63,b[d++]=128|a&63);q=b}q.length>128&&(q=new ee(z,!0).update(q).array());for(var v=[],F=[],u=0;u<128;++u){var p=q[u]||0;v[u]=92^p,F[u]=54^p}ee.call(this,z,J),this.update(F),this.oKeyPad=v,this.inner=!0,this.sharedMemory=J}se.prototype=new ee,se.prototype.finalize=function(){if(ee.prototype.finalize.call(this),this.inner){this.inner=!1;var q=this.array();ee.call(this,this.bits,this.sharedMemory),this.update(this.oKeyPad),this.update(q),ee.prototype.finalize.call(this)}},se.prototype.clone=function(){var q=new se([],this.bits,!1);this.copyTo(q),q.inner=this.inner;for(var z=0;z<this.oKeyPad.length;++z)q.oKeyPad[z]=this.oKeyPad[z];return q};var V=G(512);V.sha512=V,V.sha384=G(384),V.sha512_256=G(256),V.sha512_224=G(224),V.sha512.hmac=Z(512),V.sha384.hmac=Z(384),V.sha512_256.hmac=Z(256),V.sha512_224.hmac=Z(224),s?xu.exports=V:(n.sha512=V.sha512,n.sha384=V.sha384,n.sha512_256=V.sha512_256,n.sha512_224=V.sha512_224,f&&define(function(){return V}))})()});var Hd=X((KC,ix)=>{var OA=wu(),$d=X2(),{sha256:Z2}=J2(),{sha512:ex}=Y2(),Bt=new OA.ec("secp256k1");function tx(r){return new Uint8Array([(r&4278190080)>>24,(r&16711680)>>16,(r&65280)>>8,r&255])}var Q2=new $d(1);function RA(r){let e=Bt.n.bitLength()+7>>3;if(Bt.g.mul(10),(r[0]&-2)!=2)return[null,null];if(r.length!=1+e)return[null,null];let t=new $d(r.slice(1,1+e));try{let n=Bt.curve.pointFromX(t);return[n.x,n.y]}catch{return[null,null]}}function rx(r){let e=null,t=null,n=Bt.n.bitLength()+7>>3,i=0;for(;e==null&&i<100;){let s=[2,...ex.array(new Uint8Array([...tx(i),...r]))];[e,t]=RA(s.slice(0,n+1)),i++}return Bt.curve.point(e,t)}function nx(r){let e=Bt.n.bitLength()+7>>3,t=0;for(;;){let n=ex.array(new Uint8Array([...tx(t),...r])),i=new $d(n.slice(0,e));if(i.cmp(Bt.curve.n.sub(Q2))==-1)return i.add(Q2);t++}}function PA(r,e){let t=Bt.keyFromPrivate(r),i=Bt.genKeyPair().getPrivate(),o=rx(e),f=o.mul(r).encode(),h=Bt.curve.g.mul(i),g=o.mul(i),x=[...Bt.curve.g.encode(),...o.encode(),...t.getPublic().encode(),...f,...h.encode(),...g.encode()],T=nx(x),I=i.sub(T.mul(t.getPrivate())).umod(Bt.curve.n),A=Z2.array(new Uint8Array(f)),C=[...new Array(32-T.byteLength()).fill(0),...T.toArray(),...new Array(32-I.byteLength()).fill(0),...I.toArray(),...f];return[A,C]}function NA(r,e,t){let n=Bt.keyFromPublic(r);if(t.length!==64+65)throw new Error("invalid vrf");let i=t.slice(0,32),o=t.slice(32,64),s=t.slice(64,64+65),f=kA(s);if(!f)throw new Error("invalid vrf");let h=Bt.curve.g.mul(o),g=n.getPublic().mul(i),x=h.add(g),T=rx(e),I=T.mul(o),A=f.mul(i),C=I.add(A),j=[...Bt.curve.g.encode(),...T.encode(),...n.getPublic().encode(),...s,...x.encode(),...C.encode()],G=nx(j),$=[...new Array(32-G.byteLength()).fill(0),...G.toArray()],Z=!0;for(let ee=0;ee<$.length;ee++)i[ee]!==$[ee]&&(Z=!1);if(!Z)throw new Error("invalid vrf");return Z2.array(new Uint8Array(s))}function kA(r){try{return Bt.curve.decodePoint(r)}catch{return null}}ix.exports={Evaluate:PA,ProofHoHash:NA}});var wx=X(()=>{});var Ax=X((op,Ex)=>{"use strict";var{hasOwnProperty:Eu}=Object.prototype,fo=ip();fo.configure=ip;fo.stringify=fo;fo.default=fo;op.stringify=fo;op.configure=ip;Ex.exports=fo;var Sx=/[\u0000-\u001f\u0022\u005c\ud800-\udfff]|[\ud800-\udbff](?![\udc00-\udfff])|(?:[^\ud800-\udbff]|^)[\udc00-\udfff]/,VA=new RegExp(Sx,"g"),np=["\\u0000","\\u0001","\\u0002","\\u0003","\\u0004","\\u0005","\\u0006","\\u0007","\\b","\\t","\\n","\\u000b","\\f","\\r","\\u000e","\\u000f","\\u0010","\\u0011","\\u0012","\\u0013","\\u0014","\\u0015","\\u0016","\\u0017","\\u0018","\\u0019","\\u001a","\\u001b","\\u001c","\\u001d","\\u001e","\\u001f","","",'\\"',"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\\\"];function XA(r){if(r.length===2){let t=r.charCodeAt(1);return`${r[0]}\\u${t.toString(16)}`}let e=r.charCodeAt(0);return np.length>e?np[e]:`\\u${e.toString(16)}`}function ei(r){if(r.length<5e3&&!Sx.test(r))return r;if(r.length>100)return r.replace(VA,XA);let e="",t=0;for(let n=0;n<r.length;n++){let i=r.charCodeAt(n);if(i===34||i===92||i<32)e+=`${r.slice(t,n)}${np[i]}`,t=n+1;else if(i>=55296&&i<=57343){if(i<=56319&&n+1<r.length){let o=r.charCodeAt(n+1);if(o>=56320&&o<=57343){n++;continue}}e+=`${r.slice(t,n)}\\u${i.toString(16)}`,t=n+1}}return e+=r.slice(t),e}function ep(r){if(r.length>200)return r.sort();for(let e=1;e<r.length;e++){let t=r[e],n=e;for(;n!==0&&r[n-1]>t;)r[n]=r[n-1],n--;r[n]=t}return r}var JA=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Object.getPrototypeOf(new Int8Array)),Symbol.toStringTag).get;function tp(r){return JA.call(r)!==void 0&&r.length!==0}function rp(r,e,t){r.length<t&&(t=r.length);let n=e===","?"":" ",i=`"0":${n}${r[0]}`;for(let o=1;o<t;o++)i+=`${e}"${o}":${n}${r[o]}`;return i}function YA(r){if(Eu.call(r,"circularValue")){let e=r.circularValue;if(typeof e=="string")return`"${e}"`;if(e==null)return e;if(e===Error||e===TypeError)return{toString(){throw new TypeError("Converting circular structure to JSON")}};throw new TypeError('The "circularValue" argument must be of type string or the value null or undefined')}return'"[Circular]"'}function xx(r,e){let t;if(Eu.call(r,e)&&(t=r[e],typeof t!="boolean"))throw new TypeError(`The "${e}" argument must be of type boolean`);return t===void 0?!0:t}function _x(r,e){let t;if(Eu.call(r,e)){if(t=r[e],typeof t!="number")throw new TypeError(`The "${e}" argument must be of type number`);if(!Number.isInteger(t))throw new TypeError(`The "${e}" argument must be an integer`);if(t<1)throw new RangeError(`The "${e}" argument must be >= 1`)}return t===void 0?1/0:t}function ao(r){return r===1?"1 item":`${r} items`}function QA(r){let e=new Set;for(let t of r)(typeof t=="string"||typeof t=="number")&&e.add(String(t));return e}function ZA(r){if(Eu.call(r,"strict")){let e=r.strict;if(typeof e!="boolean")throw new TypeError('The "strict" argument must be of type boolean');if(e)return t=>{let n=`Object can not safely be stringified. Received type ${typeof t}`;throw typeof t!="function"&&(n+=` (${t.toString()})`),new Error(n)}}}function ip(r){r={...r};let e=ZA(r);e&&(r.bigint===void 0&&(r.bigint=!1),"circularValue"in r||(r.circularValue=Error));let t=YA(r),n=xx(r,"bigint"),i=xx(r,"deterministic"),o=_x(r,"maximumDepth"),s=_x(r,"maximumBreadth");function f(I,A,C,j,G,$){let Z=A[I];switch(typeof Z=="object"&&Z!==null&&typeof Z.toJSON=="function"&&(Z=Z.toJSON(I)),Z=j.call(A,I,Z),typeof Z){case"string":return`"${ei(Z)}"`;case"object":{if(Z===null)return"null";if(C.indexOf(Z)!==-1)return t;let ee="",se=",",V=$;if(Array.isArray(Z)){if(Z.length===0)return"[]";if(o<C.length+1)return'"[Array]"';C.push(Z),G!==""&&($+=G,ee+=`
${$}`,se=`,
${$}`);let l=Math.min(Z.length,s),b=0;for(;b<l-1;b++){let a=f(b,Z,C,j,G,$);ee+=a!==void 0?a:"null",ee+=se}let d=f(b,Z,C,j,G,$);if(ee+=d!==void 0?d:"null",Z.length-1>s){let a=Z.length-s-1;ee+=`${se}"... ${ao(a)} not stringified"`}return G!==""&&(ee+=`
${V}`),C.pop(),`[${ee}]`}let q=Object.keys(Z),z=q.length;if(z===0)return"{}";if(o<C.length+1)return'"[Object]"';let J="",H="";G!==""&&($+=G,se=`,
${$}`,J=" ");let L=Math.min(z,s);tp(Z)&&(ee+=rp(Z,se,s),q=q.slice(Z.length),L-=Z.length,H=se),i&&(q=ep(q)),C.push(Z);for(let l=0;l<L;l++){let b=q[l],d=f(b,Z,C,j,G,$);d!==void 0&&(ee+=`${H}"${ei(b)}":${J}${d}`,H=se)}if(z>s){let l=z-s;ee+=`${H}"...":${J}"${ao(l)} not stringified"`,H=se}return G!==""&&H.length>1&&(ee=`
${$}${ee}
${V}`),C.pop(),`{${ee}}`}case"number":return isFinite(Z)?String(Z):e?e(Z):"null";case"boolean":return Z===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(Z);default:return e?e(Z):void 0}}function h(I,A,C,j,G,$){switch(typeof A=="object"&&A!==null&&typeof A.toJSON=="function"&&(A=A.toJSON(I)),typeof A){case"string":return`"${ei(A)}"`;case"object":{if(A===null)return"null";if(C.indexOf(A)!==-1)return t;let Z=$,ee="",se=",";if(Array.isArray(A)){if(A.length===0)return"[]";if(o<C.length+1)return'"[Array]"';C.push(A),G!==""&&($+=G,ee+=`
${$}`,se=`,
${$}`);let z=Math.min(A.length,s),J=0;for(;J<z-1;J++){let L=h(J,A[J],C,j,G,$);ee+=L!==void 0?L:"null",ee+=se}let H=h(J,A[J],C,j,G,$);if(ee+=H!==void 0?H:"null",A.length-1>s){let L=A.length-s-1;ee+=`${se}"... ${ao(L)} not stringified"`}return G!==""&&(ee+=`
${Z}`),C.pop(),`[${ee}]`}if(j.size===0)return"{}";C.push(A);let V="";G!==""&&($+=G,se=`,
${$}`,V=" ");let q="";for(let z of j){let J=h(z,A[z],C,j,G,$);J!==void 0&&(ee+=`${q}"${ei(z)}":${V}${J}`,q=se)}return G!==""&&q.length>1&&(ee=`
${$}${ee}
${Z}`),C.pop(),`{${ee}}`}case"number":return isFinite(A)?String(A):e?e(A):"null";case"boolean":return A===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(A);default:return e?e(A):void 0}}function g(I,A,C,j,G){switch(typeof A){case"string":return`"${ei(A)}"`;case"object":{if(A===null)return"null";if(typeof A.toJSON=="function"){if(A=A.toJSON(I),typeof A!="object")return g(I,A,C,j,G);if(A===null)return"null"}if(C.indexOf(A)!==-1)return t;let $=G;if(Array.isArray(A)){if(A.length===0)return"[]";if(o<C.length+1)return'"[Array]"';C.push(A),G+=j;let J=`
${G}`,H=`,
${G}`,L=Math.min(A.length,s),l=0;for(;l<L-1;l++){let d=g(l,A[l],C,j,G);J+=d!==void 0?d:"null",J+=H}let b=g(l,A[l],C,j,G);if(J+=b!==void 0?b:"null",A.length-1>s){let d=A.length-s-1;J+=`${H}"... ${ao(d)} not stringified"`}return J+=`
${$}`,C.pop(),`[${J}]`}let Z=Object.keys(A),ee=Z.length;if(ee===0)return"{}";if(o<C.length+1)return'"[Object]"';G+=j;let se=`,
${G}`,V="",q="",z=Math.min(ee,s);tp(A)&&(V+=rp(A,se,s),Z=Z.slice(A.length),z-=A.length,q=se),i&&(Z=ep(Z)),C.push(A);for(let J=0;J<z;J++){let H=Z[J],L=g(H,A[H],C,j,G);L!==void 0&&(V+=`${q}"${ei(H)}": ${L}`,q=se)}if(ee>s){let J=ee-s;V+=`${q}"...": "${ao(J)} not stringified"`,q=se}return q!==""&&(V=`
${G}${V}
${$}`),C.pop(),`{${V}}`}case"number":return isFinite(A)?String(A):e?e(A):"null";case"boolean":return A===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(A);default:return e?e(A):void 0}}function x(I,A,C){switch(typeof A){case"string":return`"${ei(A)}"`;case"object":{if(A===null)return"null";if(typeof A.toJSON=="function"){if(A=A.toJSON(I),typeof A!="object")return x(I,A,C);if(A===null)return"null"}if(C.indexOf(A)!==-1)return t;let j="";if(Array.isArray(A)){if(A.length===0)return"[]";if(o<C.length+1)return'"[Array]"';C.push(A);let se=Math.min(A.length,s),V=0;for(;V<se-1;V++){let z=x(V,A[V],C);j+=z!==void 0?z:"null",j+=","}let q=x(V,A[V],C);if(j+=q!==void 0?q:"null",A.length-1>s){let z=A.length-s-1;j+=`,"... ${ao(z)} not stringified"`}return C.pop(),`[${j}]`}let G=Object.keys(A),$=G.length;if($===0)return"{}";if(o<C.length+1)return'"[Object]"';let Z="",ee=Math.min($,s);tp(A)&&(j+=rp(A,",",s),G=G.slice(A.length),ee-=A.length,Z=","),i&&(G=ep(G)),C.push(A);for(let se=0;se<ee;se++){let V=G[se],q=x(V,A[V],C);q!==void 0&&(j+=`${Z}"${ei(V)}":${q}`,Z=",")}if($>s){let se=$-s;j+=`${Z}"...":"${ao(se)} not stringified"`}return C.pop(),`{${j}}`}case"number":return isFinite(A)?String(A):e?e(A):"null";case"boolean":return A===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(A);default:return e?e(A):void 0}}function T(I,A,C){if(arguments.length>1){let j="";if(typeof C=="number"?j=" ".repeat(Math.min(C,10)):typeof C=="string"&&(j=C.slice(0,10)),A!=null){if(typeof A=="function")return f("",{"":I},[],A,j,"");if(Array.isArray(A))return h("",I,[],QA(A),j,"")}if(j.length!==0)return g("",I,[],j,"")}return x("",I,[])}return T}});var Tx=X((Fx,Au)=>{(function(r){"use strict";var e,t=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,n=Math.ceil,i=Math.floor,o="[BigNumber Error] ",s=o+"Number primitive has more than 15 significant digits: ",f=1e14,h=14,g=9007199254740991,x=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],T=1e7,I=1e9;function A(V){var q,z,J,H=_.prototype={constructor:_,toString:null,valueOf:null},L=new _(1),l=20,b=4,d=-7,a=21,u=-1e7,v=1e7,F=!1,p=1,c=0,E={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"\xA0",suffix:""},M="0123456789abcdefghijklmnopqrstuvwxyz",y=!0;function _(m,w){var S,N,R,P,D,B,O,k,U=this;if(!(U instanceof _))return new _(m,w);if(w==null){if(m&&m._isBigNumber===!0){U.s=m.s,!m.c||m.e>v?U.c=U.e=null:m.e<u?U.c=[U.e=0]:(U.e=m.e,U.c=m.c.slice());return}if((B=typeof m=="number")&&m*0==0){if(U.s=1/m<0?(m=-m,-1):1,m===~~m){for(P=0,D=m;D>=10;D/=10,P++);P>v?U.c=U.e=null:(U.e=P,U.c=[m]);return}k=String(m)}else{if(!t.test(k=String(m)))return J(U,k,B);U.s=k.charCodeAt(0)==45?(k=k.slice(1),-1):1}(P=k.indexOf("."))>-1&&(k=k.replace(".","")),(D=k.search(/e/i))>0?(P<0&&(P=D),P+=+k.slice(D+1),k=k.substring(0,D)):P<0&&(P=k.length)}else{if($(w,2,M.length,"Base"),w==10&&y)return U=new _(m),he(U,l+U.e+1,b);if(k=String(m),B=typeof m=="number"){if(m*0!=0)return J(U,k,B,w);if(U.s=1/m<0?(k=k.slice(1),-1):1,_.DEBUG&&k.replace(/^0\.0*|\./,"").length>15)throw Error(s+m)}else U.s=k.charCodeAt(0)===45?(k=k.slice(1),-1):1;for(S=M.slice(0,w),P=D=0,O=k.length;D<O;D++)if(S.indexOf(N=k.charAt(D))<0){if(N=="."){if(D>P){P=O;continue}}else if(!R&&(k==k.toUpperCase()&&(k=k.toLowerCase())||k==k.toLowerCase()&&(k=k.toUpperCase()))){R=!0,D=-1,P=0;continue}return J(U,String(m),B,w)}B=!1,k=z(k,w,10,U.s),(P=k.indexOf("."))>-1?k=k.replace(".",""):P=k.length}for(D=0;k.charCodeAt(D)===48;D++);for(O=k.length;k.charCodeAt(--O)===48;);if(k=k.slice(D,++O)){if(O-=D,B&&_.DEBUG&&O>15&&(m>g||m!==i(m)))throw Error(s+U.s*m);if((P=P-D-1)>v)U.c=U.e=null;else if(P<u)U.c=[U.e=0];else{if(U.e=P,U.c=[],D=(P+1)%h,P<0&&(D+=h),D<O){for(D&&U.c.push(+k.slice(0,D)),O-=h;D<O;)U.c.push(+k.slice(D,D+=h));D=h-(k=k.slice(D)).length}else D-=O;for(;D--;k+="0");U.c.push(+k)}}else U.c=[U.e=0]}_.clone=A,_.ROUND_UP=0,_.ROUND_DOWN=1,_.ROUND_CEIL=2,_.ROUND_FLOOR=3,_.ROUND_HALF_UP=4,_.ROUND_HALF_DOWN=5,_.ROUND_HALF_EVEN=6,_.ROUND_HALF_CEIL=7,_.ROUND_HALF_FLOOR=8,_.EUCLID=9,_.config=_.set=function(m){var w,S;if(m!=null)if(typeof m=="object"){if(m.hasOwnProperty(w="DECIMAL_PLACES")&&(S=m[w],$(S,0,I,w),l=S),m.hasOwnProperty(w="ROUNDING_MODE")&&(S=m[w],$(S,0,8,w),b=S),m.hasOwnProperty(w="EXPONENTIAL_AT")&&(S=m[w],S&&S.pop?($(S[0],-I,0,w),$(S[1],0,I,w),d=S[0],a=S[1]):($(S,-I,I,w),d=-(a=S<0?-S:S))),m.hasOwnProperty(w="RANGE"))if(S=m[w],S&&S.pop)$(S[0],-I,-1,w),$(S[1],1,I,w),u=S[0],v=S[1];else if($(S,-I,I,w),S)u=-(v=S<0?-S:S);else throw Error(o+w+" cannot be zero: "+S);if(m.hasOwnProperty(w="CRYPTO"))if(S=m[w],S===!!S)if(S)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))F=S;else throw F=!S,Error(o+"crypto unavailable");else F=S;else throw Error(o+w+" not true or false: "+S);if(m.hasOwnProperty(w="MODULO_MODE")&&(S=m[w],$(S,0,9,w),p=S),m.hasOwnProperty(w="POW_PRECISION")&&(S=m[w],$(S,0,I,w),c=S),m.hasOwnProperty(w="FORMAT"))if(S=m[w],typeof S=="object")E=S;else throw Error(o+w+" not an object: "+S);if(m.hasOwnProperty(w="ALPHABET"))if(S=m[w],typeof S=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(S))y=S.slice(0,10)=="0123456789",M=S;else throw Error(o+w+" invalid: "+S)}else throw Error(o+"Object expected: "+m);return{DECIMAL_PLACES:l,ROUNDING_MODE:b,EXPONENTIAL_AT:[d,a],RANGE:[u,v],CRYPTO:F,MODULO_MODE:p,POW_PRECISION:c,FORMAT:E,ALPHABET:M}},_.isBigNumber=function(m){if(!m||m._isBigNumber!==!0)return!1;if(!_.DEBUG)return!0;var w,S,N=m.c,R=m.e,P=m.s;e:if({}.toString.call(N)=="[object Array]"){if((P===1||P===-1)&&R>=-I&&R<=I&&R===i(R)){if(N[0]===0){if(R===0&&N.length===1)return!0;break e}if(w=(R+1)%h,w<1&&(w+=h),String(N[0]).length==w){for(w=0;w<N.length;w++)if(S=N[w],S<0||S>=f||S!==i(S))break e;if(S!==0)return!0}}}else if(N===null&&R===null&&(P===null||P===1||P===-1))return!0;throw Error(o+"Invalid BigNumber: "+m)},_.maximum=_.max=function(){return ie(arguments,H.lt)},_.minimum=_.min=function(){return ie(arguments,H.gt)},_.random=function(){var m=9007199254740992,w=Math.random()*m&2097151?function(){return i(Math.random()*m)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(S){var N,R,P,D,B,O=0,k=[],U=new _(L);if(S==null?S=l:$(S,0,I),D=n(S/h),F)if(crypto.getRandomValues){for(N=crypto.getRandomValues(new Uint32Array(D*=2));O<D;)B=N[O]*131072+(N[O+1]>>>11),B>=9e15?(R=crypto.getRandomValues(new Uint32Array(2)),N[O]=R[0],N[O+1]=R[1]):(k.push(B%1e14),O+=2);O=D/2}else if(crypto.randomBytes){for(N=crypto.randomBytes(D*=7);O<D;)B=(N[O]&31)*281474976710656+N[O+1]*1099511627776+N[O+2]*4294967296+N[O+3]*16777216+(N[O+4]<<16)+(N[O+5]<<8)+N[O+6],B>=9e15?crypto.randomBytes(7).copy(N,O):(k.push(B%1e14),O+=7);O=D/7}else throw F=!1,Error(o+"crypto unavailable");if(!F)for(;O<D;)B=w(),B<9e15&&(k[O++]=B%1e14);for(D=k[--O],S%=h,D&&S&&(B=x[h-S],k[O]=i(D/B)*B);k[O]===0;k.pop(),O--);if(O<0)k=[P=0];else{for(P=-1;k[0]===0;k.splice(0,1),P-=h);for(O=1,B=k[0];B>=10;B/=10,O++);O<h&&(P-=h-O)}return U.e=P,U.c=k,U}}(),_.sum=function(){for(var m=1,w=arguments,S=new _(w[0]);m<w.length;)S=S.plus(w[m++]);return S},z=function(){var m="0123456789";function w(S,N,R,P){for(var D,B=[0],O,k=0,U=S.length;k<U;){for(O=B.length;O--;B[O]*=N);for(B[0]+=P.indexOf(S.charAt(k++)),D=0;D<B.length;D++)B[D]>R-1&&(B[D+1]==null&&(B[D+1]=0),B[D+1]+=B[D]/R|0,B[D]%=R)}return B.reverse()}return function(S,N,R,P,D){var B,O,k,U,W,Y,Q,te,fe=S.indexOf("."),ge=l,ae=b;for(fe>=0&&(U=c,c=0,S=S.replace(".",""),te=new _(N),Y=te.pow(S.length-fe),c=U,te.c=w(se(j(Y.c),Y.e,"0"),10,R,m),te.e=te.c.length),Q=w(S,N,R,D?(B=M,m):(B=m,M)),k=U=Q.length;Q[--U]==0;Q.pop());if(!Q[0])return B.charAt(0);if(fe<0?--k:(Y.c=Q,Y.e=k,Y.s=P,Y=q(Y,te,ge,ae,R),Q=Y.c,W=Y.r,k=Y.e),O=k+ge+1,fe=Q[O],U=R/2,W=W||O<0||Q[O+1]!=null,W=ae<4?(fe!=null||W)&&(ae==0||ae==(Y.s<0?3:2)):fe>U||fe==U&&(ae==4||W||ae==6&&Q[O-1]&1||ae==(Y.s<0?8:7)),O<1||!Q[0])S=W?se(B.charAt(1),-ge,B.charAt(0)):B.charAt(0);else{if(Q.length=O,W)for(--R;++Q[--O]>R;)Q[O]=0,O||(++k,Q=[1].concat(Q));for(U=Q.length;!Q[--U];);for(fe=0,S="";fe<=U;S+=B.charAt(Q[fe++]));S=se(S,k,B.charAt(0))}return S}}(),q=function(){function m(N,R,P){var D,B,O,k,U=0,W=N.length,Y=R%T,Q=R/T|0;for(N=N.slice();W--;)O=N[W]%T,k=N[W]/T|0,D=Q*O+k*Y,B=Y*O+D%T*T+U,U=(B/P|0)+(D/T|0)+Q*k,N[W]=B%P;return U&&(N=[U].concat(N)),N}function w(N,R,P,D){var B,O;if(P!=D)O=P>D?1:-1;else for(B=O=0;B<P;B++)if(N[B]!=R[B]){O=N[B]>R[B]?1:-1;break}return O}function S(N,R,P,D){for(var B=0;P--;)N[P]-=B,B=N[P]<R[P]?1:0,N[P]=B*D+N[P]-R[P];for(;!N[0]&&N.length>1;N.splice(0,1));}return function(N,R,P,D,B){var O,k,U,W,Y,Q,te,fe,ge,ae,ue,Se,ye,be,Je,pe,me,Fe=N.s==R.s?1:-1,de=N.c,le=R.c;if(!de||!de[0]||!le||!le[0])return new _(!N.s||!R.s||(de?le&&de[0]==le[0]:!le)?NaN:de&&de[0]==0||!le?Fe*0:Fe/0);for(fe=new _(Fe),ge=fe.c=[],k=N.e-R.e,Fe=P+k+1,B||(B=f,k=C(N.e/h)-C(R.e/h),Fe=Fe/h|0),U=0;le[U]==(de[U]||0);U++);if(le[U]>(de[U]||0)&&k--,Fe<0)ge.push(1),W=!0;else{for(be=de.length,pe=le.length,U=0,Fe+=2,Y=i(B/(le[0]+1)),Y>1&&(le=m(le,Y,B),de=m(de,Y,B),pe=le.length,be=de.length),ye=pe,ae=de.slice(0,pe),ue=ae.length;ue<pe;ae[ue++]=0);me=le.slice(),me=[0].concat(me),Je=le[0],le[1]>=B/2&&Je++;do{if(Y=0,O=w(le,ae,pe,ue),O<0){if(Se=ae[0],pe!=ue&&(Se=Se*B+(ae[1]||0)),Y=i(Se/Je),Y>1)for(Y>=B&&(Y=B-1),Q=m(le,Y,B),te=Q.length,ue=ae.length;w(Q,ae,te,ue)==1;)Y--,S(Q,pe<te?me:le,te,B),te=Q.length,O=1;else Y==0&&(O=Y=1),Q=le.slice(),te=Q.length;if(te<ue&&(Q=[0].concat(Q)),S(ae,Q,ue,B),ue=ae.length,O==-1)for(;w(le,ae,pe,ue)<1;)Y++,S(ae,pe<ue?me:le,ue,B),ue=ae.length}else O===0&&(Y++,ae=[0]);ge[U++]=Y,ae[0]?ae[ue++]=de[ye]||0:(ae=[de[ye]],ue=1)}while((ye++<be||ae[0]!=null)&&Fe--);W=ae[0]!=null,ge[0]||ge.splice(0,1)}if(B==f){for(U=1,Fe=ge[0];Fe>=10;Fe/=10,U++);he(fe,P+(fe.e=U+k*h-1)+1,D,W)}else fe.e=k,fe.r=+W;return fe}}();function ne(m,w,S,N){var R,P,D,B,O;if(S==null?S=b:$(S,0,8),!m.c)return m.toString();if(R=m.c[0],D=m.e,w==null)O=j(m.c),O=N==1||N==2&&(D<=d||D>=a)?ee(O,D):se(O,D,"0");else if(m=he(new _(m),w,S),P=m.e,O=j(m.c),B=O.length,N==1||N==2&&(w<=P||P<=d)){for(;B<w;O+="0",B++);O=ee(O,P)}else if(w-=D,O=se(O,P,"0"),P+1>B){if(--w>0)for(O+=".";w--;O+="0");}else if(w+=P-B,w>0)for(P+1==B&&(O+=".");w--;O+="0");return m.s<0&&R?"-"+O:O}function ie(m,w){for(var S,N=1,R=new _(m[0]);N<m.length;N++)if(S=new _(m[N]),S.s)w.call(R,S)&&(R=S);else{R=S;break}return R}function ce(m,w,S){for(var N=1,R=w.length;!w[--R];w.pop());for(R=w[0];R>=10;R/=10,N++);return(S=N+S*h-1)>v?m.c=m.e=null:S<u?m.c=[m.e=0]:(m.e=S,m.c=w),m}J=function(){var m=/^(-?)0([xbo])(?=\w[\w.]*$)/i,w=/^([^.]+)\.$/,S=/^\.([^.]+)$/,N=/^-?(Infinity|NaN)$/,R=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(P,D,B,O){var k,U=B?D:D.replace(R,"");if(N.test(U))P.s=isNaN(U)?null:U<0?-1:1;else{if(!B&&(U=U.replace(m,function(W,Y,Q){return k=(Q=Q.toLowerCase())=="x"?16:Q=="b"?2:8,!O||O==k?Y:W}),O&&(k=O,U=U.replace(w,"$1").replace(S,"0.$1")),D!=U))return new _(U,k);if(_.DEBUG)throw Error(o+"Not a"+(O?" base "+O:"")+" number: "+D);P.s=null}P.c=P.e=null}}();function he(m,w,S,N){var R,P,D,B,O,k,U,W=m.c,Y=x;if(W){e:{for(R=1,B=W[0];B>=10;B/=10,R++);if(P=w-R,P<0)P+=h,D=w,O=W[k=0],U=O/Y[R-D-1]%10|0;else if(k=n((P+1)/h),k>=W.length)if(N){for(;W.length<=k;W.push(0));O=U=0,R=1,P%=h,D=P-h+1}else break e;else{for(O=B=W[k],R=1;B>=10;B/=10,R++);P%=h,D=P-h+R,U=D<0?0:O/Y[R-D-1]%10|0}if(N=N||w<0||W[k+1]!=null||(D<0?O:O%Y[R-D-1]),N=S<4?(U||N)&&(S==0||S==(m.s<0?3:2)):U>5||U==5&&(S==4||N||S==6&&(P>0?D>0?O/Y[R-D]:0:W[k-1])%10&1||S==(m.s<0?8:7)),w<1||!W[0])return W.length=0,N?(w-=m.e+1,W[0]=Y[(h-w%h)%h],m.e=-w||0):W[0]=m.e=0,m;if(P==0?(W.length=k,B=1,k--):(W.length=k+1,B=Y[h-P],W[k]=D>0?i(O/Y[R-D]%Y[D])*B:0),N)for(;;)if(k==0){for(P=1,D=W[0];D>=10;D/=10,P++);for(D=W[0]+=B,B=1;D>=10;D/=10,B++);P!=B&&(m.e++,W[0]==f&&(W[0]=1));break}else{if(W[k]+=B,W[k]!=f)break;W[k--]=0,B=1}for(P=W.length;W[--P]===0;W.pop());}m.e>v?m.c=m.e=null:m.e<u&&(m.c=[m.e=0])}return m}function re(m){var w,S=m.e;return S===null?m.toString():(w=j(m.c),w=S<=d||S>=a?ee(w,S):se(w,S,"0"),m.s<0?"-"+w:w)}return H.absoluteValue=H.abs=function(){var m=new _(this);return m.s<0&&(m.s=1),m},H.comparedTo=function(m,w){return G(this,new _(m,w))},H.decimalPlaces=H.dp=function(m,w){var S,N,R,P=this;if(m!=null)return $(m,0,I),w==null?w=b:$(w,0,8),he(new _(P),m+P.e+1,w);if(!(S=P.c))return null;if(N=((R=S.length-1)-C(this.e/h))*h,R=S[R])for(;R%10==0;R/=10,N--);return N<0&&(N=0),N},H.dividedBy=H.div=function(m,w){return q(this,new _(m,w),l,b)},H.dividedToIntegerBy=H.idiv=function(m,w){return q(this,new _(m,w),0,1)},H.exponentiatedBy=H.pow=function(m,w){var S,N,R,P,D,B,O,k,U,W=this;if(m=new _(m),m.c&&!m.isInteger())throw Error(o+"Exponent not an integer: "+re(m));if(w!=null&&(w=new _(w)),B=m.e>14,!W.c||!W.c[0]||W.c[0]==1&&!W.e&&W.c.length==1||!m.c||!m.c[0])return U=new _(Math.pow(+re(W),B?2-Z(m):+re(m))),w?U.mod(w):U;if(O=m.s<0,w){if(w.c?!w.c[0]:!w.s)return new _(NaN);N=!O&&W.isInteger()&&w.isInteger(),N&&(W=W.mod(w))}else{if(m.e>9&&(W.e>0||W.e<-1||(W.e==0?W.c[0]>1||B&&W.c[1]>=24e7:W.c[0]<8e13||B&&W.c[0]<=9999975e7)))return P=W.s<0&&Z(m)?-0:0,W.e>-1&&(P=1/P),new _(O?1/P:P);c&&(P=n(c/h+2))}for(B?(S=new _(.5),O&&(m.s=1),k=Z(m)):(R=Math.abs(+re(m)),k=R%2),U=new _(L);;){if(k){if(U=U.times(W),!U.c)break;P?U.c.length>P&&(U.c.length=P):N&&(U=U.mod(w))}if(R){if(R=i(R/2),R===0)break;k=R%2}else if(m=m.times(S),he(m,m.e+1,1),m.e>14)k=Z(m);else{if(R=+re(m),R===0)break;k=R%2}W=W.times(W),P?W.c&&W.c.length>P&&(W.c.length=P):N&&(W=W.mod(w))}return N?U:(O&&(U=L.div(U)),w?U.mod(w):P?he(U,c,b,D):U)},H.integerValue=function(m){var w=new _(this);return m==null?m=b:$(m,0,8),he(w,w.e+1,m)},H.isEqualTo=H.eq=function(m,w){return G(this,new _(m,w))===0},H.isFinite=function(){return!!this.c},H.isGreaterThan=H.gt=function(m,w){return G(this,new _(m,w))>0},H.isGreaterThanOrEqualTo=H.gte=function(m,w){return(w=G(this,new _(m,w)))===1||w===0},H.isInteger=function(){return!!this.c&&C(this.e/h)>this.c.length-2},H.isLessThan=H.lt=function(m,w){return G(this,new _(m,w))<0},H.isLessThanOrEqualTo=H.lte=function(m,w){return(w=G(this,new _(m,w)))===-1||w===0},H.isNaN=function(){return!this.s},H.isNegative=function(){return this.s<0},H.isPositive=function(){return this.s>0},H.isZero=function(){return!!this.c&&this.c[0]==0},H.minus=function(m,w){var S,N,R,P,D=this,B=D.s;if(m=new _(m,w),w=m.s,!B||!w)return new _(NaN);if(B!=w)return m.s=-w,D.plus(m);var O=D.e/h,k=m.e/h,U=D.c,W=m.c;if(!O||!k){if(!U||!W)return U?(m.s=-w,m):new _(W?D:NaN);if(!U[0]||!W[0])return W[0]?(m.s=-w,m):new _(U[0]?D:b==3?-0:0)}if(O=C(O),k=C(k),U=U.slice(),B=O-k){for((P=B<0)?(B=-B,R=U):(k=O,R=W),R.reverse(),w=B;w--;R.push(0));R.reverse()}else for(N=(P=(B=U.length)<(w=W.length))?B:w,B=w=0;w<N;w++)if(U[w]!=W[w]){P=U[w]<W[w];break}if(P&&(R=U,U=W,W=R,m.s=-m.s),w=(N=W.length)-(S=U.length),w>0)for(;w--;U[S++]=0);for(w=f-1;N>B;){if(U[--N]<W[N]){for(S=N;S&&!U[--S];U[S]=w);--U[S],U[N]+=f}U[N]-=W[N]}for(;U[0]==0;U.splice(0,1),--k);return U[0]?ce(m,U,k):(m.s=b==3?-1:1,m.c=[m.e=0],m)},H.modulo=H.mod=function(m,w){var S,N,R=this;return m=new _(m,w),!R.c||!m.s||m.c&&!m.c[0]?new _(NaN):!m.c||R.c&&!R.c[0]?new _(R):(p==9?(N=m.s,m.s=1,S=q(R,m,0,3),m.s=N,S.s*=N):S=q(R,m,0,p),m=R.minus(S.times(m)),!m.c[0]&&p==1&&(m.s=R.s),m)},H.multipliedBy=H.times=function(m,w){var S,N,R,P,D,B,O,k,U,W,Y,Q,te,fe,ge,ae=this,ue=ae.c,Se=(m=new _(m,w)).c;if(!ue||!Se||!ue[0]||!Se[0])return!ae.s||!m.s||ue&&!ue[0]&&!Se||Se&&!Se[0]&&!ue?m.c=m.e=m.s=null:(m.s*=ae.s,!ue||!Se?m.c=m.e=null:(m.c=[0],m.e=0)),m;for(N=C(ae.e/h)+C(m.e/h),m.s*=ae.s,O=ue.length,W=Se.length,O<W&&(te=ue,ue=Se,Se=te,R=O,O=W,W=R),R=O+W,te=[];R--;te.push(0));for(fe=f,ge=T,R=W;--R>=0;){for(S=0,Y=Se[R]%ge,Q=Se[R]/ge|0,D=O,P=R+D;P>R;)k=ue[--D]%ge,U=ue[D]/ge|0,B=Q*k+U*Y,k=Y*k+B%ge*ge+te[P]+S,S=(k/fe|0)+(B/ge|0)+Q*U,te[P--]=k%fe;te[P]=S}return S?++N:te.splice(0,1),ce(m,te,N)},H.negated=function(){var m=new _(this);return m.s=-m.s||null,m},H.plus=function(m,w){var S,N=this,R=N.s;if(m=new _(m,w),w=m.s,!R||!w)return new _(NaN);if(R!=w)return m.s=-w,N.minus(m);var P=N.e/h,D=m.e/h,B=N.c,O=m.c;if(!P||!D){if(!B||!O)return new _(R/0);if(!B[0]||!O[0])return O[0]?m:new _(B[0]?N:R*0)}if(P=C(P),D=C(D),B=B.slice(),R=P-D){for(R>0?(D=P,S=O):(R=-R,S=B),S.reverse();R--;S.push(0));S.reverse()}for(R=B.length,w=O.length,R-w<0&&(S=O,O=B,B=S,w=R),R=0;w;)R=(B[--w]=B[w]+O[w]+R)/f|0,B[w]=f===B[w]?0:B[w]%f;return R&&(B=[R].concat(B),++D),ce(m,B,D)},H.precision=H.sd=function(m,w){var S,N,R,P=this;if(m!=null&&m!==!!m)return $(m,1,I),w==null?w=b:$(w,0,8),he(new _(P),m,w);if(!(S=P.c))return null;if(R=S.length-1,N=R*h+1,R=S[R]){for(;R%10==0;R/=10,N--);for(R=S[0];R>=10;R/=10,N++);}return m&&P.e+1>N&&(N=P.e+1),N},H.shiftedBy=function(m){return $(m,-g,g),this.times("1e"+m)},H.squareRoot=H.sqrt=function(){var m,w,S,N,R,P=this,D=P.c,B=P.s,O=P.e,k=l+4,U=new _("0.5");if(B!==1||!D||!D[0])return new _(!B||B<0&&(!D||D[0])?NaN:D?P:1/0);if(B=Math.sqrt(+re(P)),B==0||B==1/0?(w=j(D),(w.length+O)%2==0&&(w+="0"),B=Math.sqrt(+w),O=C((O+1)/2)-(O<0||O%2),B==1/0?w="5e"+O:(w=B.toExponential(),w=w.slice(0,w.indexOf("e")+1)+O),S=new _(w)):S=new _(B+""),S.c[0]){for(O=S.e,B=O+k,B<3&&(B=0);;)if(R=S,S=U.times(R.plus(q(P,R,k,1))),j(R.c).slice(0,B)===(w=j(S.c)).slice(0,B))if(S.e<O&&--B,w=w.slice(B-3,B+1),w=="9999"||!N&&w=="4999"){if(!N&&(he(R,R.e+l+2,0),R.times(R).eq(P))){S=R;break}k+=4,B+=4,N=1}else{(!+w||!+w.slice(1)&&w.charAt(0)=="5")&&(he(S,S.e+l+2,1),m=!S.times(S).eq(P));break}}return he(S,S.e+l+1,b,m)},H.toExponential=function(m,w){return m!=null&&($(m,0,I),m++),ne(this,m,w,1)},H.toFixed=function(m,w){return m!=null&&($(m,0,I),m=m+this.e+1),ne(this,m,w)},H.toFormat=function(m,w,S){var N,R=this;if(S==null)m!=null&&w&&typeof w=="object"?(S=w,w=null):m&&typeof m=="object"?(S=m,m=w=null):S=E;else if(typeof S!="object")throw Error(o+"Argument not an object: "+S);if(N=R.toFixed(m,w),R.c){var P,D=N.split("."),B=+S.groupSize,O=+S.secondaryGroupSize,k=S.groupSeparator||"",U=D[0],W=D[1],Y=R.s<0,Q=Y?U.slice(1):U,te=Q.length;if(O&&(P=B,B=O,O=P,te-=P),B>0&&te>0){for(P=te%B||B,U=Q.substr(0,P);P<te;P+=B)U+=k+Q.substr(P,B);O>0&&(U+=k+Q.slice(P)),Y&&(U="-"+U)}N=W?U+(S.decimalSeparator||"")+((O=+S.fractionGroupSize)?W.replace(new RegExp("\\d{"+O+"}\\B","g"),"$&"+(S.fractionGroupSeparator||"")):W):U}return(S.prefix||"")+N+(S.suffix||"")},H.toFraction=function(m){var w,S,N,R,P,D,B,O,k,U,W,Y,Q=this,te=Q.c;if(m!=null&&(B=new _(m),!B.isInteger()&&(B.c||B.s!==1)||B.lt(L)))throw Error(o+"Argument "+(B.isInteger()?"out of range: ":"not an integer: ")+re(B));if(!te)return new _(Q);for(w=new _(L),k=S=new _(L),N=O=new _(L),Y=j(te),P=w.e=Y.length-Q.e-1,w.c[0]=x[(D=P%h)<0?h+D:D],m=!m||B.comparedTo(w)>0?P>0?w:k:B,D=v,v=1/0,B=new _(Y),O.c[0]=0;U=q(B,w,0,1),R=S.plus(U.times(N)),R.comparedTo(m)!=1;)S=N,N=R,k=O.plus(U.times(R=k)),O=R,w=B.minus(U.times(R=w)),B=R;return R=q(m.minus(S),N,0,1),O=O.plus(R.times(k)),S=S.plus(R.times(N)),O.s=k.s=Q.s,P=P*2,W=q(k,N,P,b).minus(Q).abs().comparedTo(q(O,S,P,b).minus(Q).abs())<1?[k,N]:[O,S],v=D,W},H.toNumber=function(){return+re(this)},H.toPrecision=function(m,w){return m!=null&&$(m,1,I),ne(this,m,w,2)},H.toString=function(m){var w,S=this,N=S.s,R=S.e;return R===null?N?(w="Infinity",N<0&&(w="-"+w)):w="NaN":(m==null?w=R<=d||R>=a?ee(j(S.c),R):se(j(S.c),R,"0"):m===10&&y?(S=he(new _(S),l+R+1,b),w=se(j(S.c),S.e,"0")):($(m,2,M.length,"Base"),w=z(se(j(S.c),R,"0"),10,m,N,!0)),N<0&&S.c[0]&&(w="-"+w)),w},H.valueOf=H.toJSON=function(){return re(this)},H._isBigNumber=!0,V!=null&&_.set(V),_}function C(V){var q=V|0;return V>0||V===q?q:q-1}function j(V){for(var q,z,J=1,H=V.length,L=V[0]+"";J<H;){for(q=V[J++]+"",z=h-q.length;z--;q="0"+q);L+=q}for(H=L.length;L.charCodeAt(--H)===48;);return L.slice(0,H+1||1)}function G(V,q){var z,J,H=V.c,L=q.c,l=V.s,b=q.s,d=V.e,a=q.e;if(!l||!b)return null;if(z=H&&!H[0],J=L&&!L[0],z||J)return z?J?0:-b:l;if(l!=b)return l;if(z=l<0,J=d==a,!H||!L)return J?0:!H^z?1:-1;if(!J)return d>a^z?1:-1;for(b=(d=H.length)<(a=L.length)?d:a,l=0;l<b;l++)if(H[l]!=L[l])return H[l]>L[l]^z?1:-1;return d==a?0:d>a^z?1:-1}function $(V,q,z,J){if(V<q||V>z||V!==i(V))throw Error(o+(J||"Argument")+(typeof V=="number"?V<q||V>z?" out of range: ":" not an integer: ":" not a primitive number: ")+String(V))}function Z(V){var q=V.c.length-1;return C(V.e/h)==q&&V.c[q]%2!=0}function ee(V,q){return(V.length>1?V.charAt(0)+"."+V.slice(1):V)+(q<0?"e":"e+")+q}function se(V,q,z){var J,H;if(q<0){for(H=z+".";++q;H+=z);V=H+V}else if(J=V.length,++q>J){for(H=z,q-=J;--q;H+=z);V+=H}else q<J&&(V=V.slice(0,q)+"."+V.slice(q));return V}e=A(),e.default=e.BigNumber=e,typeof define=="function"&&define.amd?define(function(){return e}):typeof Au<"u"&&Au.exports?Au.exports=e:(r||(r=typeof self<"u"&&self?self:window),r.BigNumber=e)})(Fx)});var up=X((cp,Cx)=>{var Mu=Tn(),en=Mu.Buffer;function Ix(r,e){for(var t in r)e[t]=r[t]}en.from&&en.alloc&&en.allocUnsafe&&en.allocUnsafeSlow?Cx.exports=Mu:(Ix(Mu,cp),cp.Buffer=uo);function uo(r,e,t){return en(r,e,t)}uo.prototype=Object.create(en.prototype);Ix(en,uo);uo.from=function(r,e,t){if(typeof r=="number")throw new TypeError("Argument must not be a number");return en(r,e,t)};uo.alloc=function(r,e,t){if(typeof r!="number")throw new TypeError("Argument must be a number");var n=en(r);return e!==void 0?typeof t=="string"?n.fill(e,t):n.fill(e):n.fill(0),n};uo.allocUnsafe=function(r){if(typeof r!="number")throw new TypeError("Argument must be a number");return en(r)};uo.allocUnsafeSlow=function(r){if(typeof r!="number")throw new TypeError("Argument must be a number");return Mu.SlowBuffer(r)}});var hp=X((aO,Bx)=>{var lp=up().Buffer;Bx.exports=class{constructor(e=lp.from([])){this.buffer=e}read(e){let t=this.buffer.subarray(0,e);return this.buffer=this.buffer.subarray(e),t}write(e){e=lp.from(e),this.buffer=lp.concat([this.buffer,e])}}});var Lx=X((fO,kx)=>{var dp=jt(),Ox=hp();kx.exports={encode:tF,decode:rF,read:Rx,readBn:Px,write:Nx};function Rx(r){return Px(r).toString()}function Px(r){let e=new dp(0),t=0,n;for(;n=r.read(1)[0],e.ior(new dp(n&127).shln(t)),n>>7!==0;)t+=7;return e}function Nx(r,e){let t=new dp(r);for(;;){let n=t.maskn(7).toNumber();if(t.ishrn(7),t.isZero()){e.write([n]);break}else e.write([n|128])}}function tF(r){let e=new Ox;return Nx(r,e),e.buffer}function rF(r){let e=new Ox(r);return Rx(e)}});var $x=X((cO,Wx)=>{var pp=jt(),Dx=hp();Wx.exports={encode:nF,decode:iF,write:jx,read:Ux,readBn:qx};function Ux(r){return qx(r).toString()}function qx(r){let e=new pp(0),t=0,n;for(;n=r.read(1)[0],e.ior(new pp(n&127).shln(t)),t+=7,n>>7!==0;);return n&64&&e.setn(t),e.fromTwos(t)}function jx(r,e){let t=new pp(r),n=t.isNeg();for(n&&(t=t.toTwos(t.bitLength()+8));;){let o=t.maskn(7).toNumber();if(t.ishrn(7),i(t)&&(o&64)!==0||t.isZero()&&(o&64)===0){e.write([o]);break}else e.write([o|128])}function i(o){return n&&o.toString(2).indexOf("0")<0}}function nF(r){let e=new Dx;return jx(r,e),e.buffer}function iF(r){let e=new Dx(r);return Ux(e)}});var Iu=X(gp=>{gp.unsigned=Lx();gp.signed=$x()});var Cu=X((hO,Hx)=>{var mp=up().Buffer;Hx.exports=class{constructor(e=mp.from([])){this.buffer=e,this._bytesRead=0,this._bytesWrote=0}read(e){this._bytesRead+=e;let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}write(e){e=mp.from(e),this._bytesWrote+=e.length,this.buffer=mp.concat([this.buffer,e])}get end(){return!this.buffer.length}get bytesRead(){return this._bytesRead}get bytesWrote(){return this._bytesWrote}}});var Bu=X((dO,oF)=>{oF.exports={block:"block_type",loop:"block_type",if:"block_type",br:"varuint32",br_if:"varuint32",br_table:"br_table",call:"varuint32",call_indirect:"call_indirect",get_local:"varuint32",set_local:"varuint32",tee_local:"varuint32",get_global:"varuint32",set_global:"varuint32",load:"memory_immediate",load8_s:"memory_immediate",load8_u:"memory_immediate",load16_s:"memory_immediate",load16_u:"memory_immediate",load32_s:"memory_immediate",load32_u:"memory_immediate",store:"memory_immediate",store8:"memory_immediate",store16:"memory_immediate",store32:"memory_immediate",current_memory:"varuint1",grow_memory:"varuint1",i32:"varint32",i64:"varint64",f32:"uint32",f64:"uint64"}});var yp=X((pO,Gx)=>{var Ue=Iu(),zx=Cu(),sF=Bu(),ot=Gx.exports=(r,e)=>{let t=new zx(r);return ot.parse(t,e)},lo=ot.LANGUAGE_TYPES={127:"i32",126:"i64",125:"f32",124:"f64",112:"anyFunc",96:"func",64:"block_type"},Kx=ot.EXTERNAL_KIND={0:"function",1:"table",2:"memory",3:"global"};ot.parsePreramble=r=>{let e={};return e.name="preramble",e.magic=[...r.read(4)],e.version=[...r.read(4)],e};ot.parseSectionHeader=r=>{let e=r.read(1)[0],t=Ue.unsigned.readBn(r).toNumber();return{id:e,name:fF[e],size:t}};var aF=ot.OPCODES={0:"unreachable",1:"nop",2:"block",3:"loop",4:"if",5:"else",11:"end",12:"br",13:"br_if",14:"br_table",15:"return",16:"call",17:"call_indirect",26:"drop",27:"select",32:"get_local",33:"set_local",34:"tee_local",35:"get_global",36:"set_global",40:"i32.load",41:"i64.load",42:"f32.load",43:"f64.load",44:"i32.load8_s",45:"i32.load8_u",46:"i32.load16_s",47:"i32.load16_u",48:"i64.load8_s",49:"i64.load8_u",50:"i64.load16_s",51:"i64.load16_u",52:"i64.load32_s",53:"i64.load32_u",54:"i32.store",55:"i64.store",56:"f32.store",57:"f64.store",58:"i32.store8",59:"i32.store16",60:"i64.store8",61:"i64.store16",62:"i64.store32",63:"current_memory",64:"grow_memory",65:"i32.const",66:"i64.const",67:"f32.const",68:"f64.const",69:"i32.eqz",70:"i32.eq",71:"i32.ne",72:"i32.lt_s",73:"i32.lt_u",74:"i32.gt_s",75:"i32.gt_u",76:"i32.le_s",77:"i32.le_u",78:"i32.ge_s",79:"i32.ge_u",80:"i64.eqz",81:"i64.eq",82:"i64.ne",83:"i64.lt_s",84:"i64.lt_u",85:"i64.gt_s",86:"i64.gt_u",87:"i64.le_s",88:"i64.le_u",89:"i64.ge_s",90:"i64.ge_u",91:"f32.eq",92:"f32.ne",93:"f32.lt",94:"f32.gt",95:"f32.le",96:"f32.ge",97:"f64.eq",98:"f64.ne",99:"f64.lt",100:"f64.gt",101:"f64.le",102:"f64.ge",103:"i32.clz",104:"i32.ctz",105:"i32.popcnt",106:"i32.add",107:"i32.sub",108:"i32.mul",109:"i32.div_s",110:"i32.div_u",111:"i32.rem_s",112:"i32.rem_u",113:"i32.and",114:"i32.or",115:"i32.xor",116:"i32.shl",117:"i32.shr_s",118:"i32.shr_u",119:"i32.rotl",120:"i32.rotr",121:"i64.clz",122:"i64.ctz",123:"i64.popcnt",124:"i64.add",125:"i64.sub",126:"i64.mul",127:"i64.div_s",128:"i64.div_u",129:"i64.rem_s",130:"i64.rem_u",131:"i64.and",132:"i64.or",133:"i64.xor",134:"i64.shl",135:"i64.shr_s",136:"i64.shr_u",137:"i64.rotl",138:"i64.rotr",139:"f32.abs",140:"f32.neg",141:"f32.ceil",142:"f32.floor",143:"f32.trunc",144:"f32.nearest",145:"f32.sqrt",146:"f32.add",147:"f32.sub",148:"f32.mul",149:"f32.div",150:"f32.min",151:"f32.max",152:"f32.copysign",153:"f64.abs",154:"f64.neg",155:"f64.ceil",156:"f64.floor",157:"f64.trunc",158:"f64.nearest",159:"f64.sqrt",160:"f64.add",161:"f64.sub",162:"f64.mul",163:"f64.div",164:"f64.min",165:"f64.max",166:"f64.copysign",167:"i32.wrap/i64",168:"i32.trunc_s/f32",169:"i32.trunc_u/f32",170:"i32.trunc_s/f64",171:"i32.trunc_u/f64",172:"i64.extend_s/i32",173:"i64.extend_u/i32",174:"i64.trunc_s/f32",175:"i64.trunc_u/f32",176:"i64.trunc_s/f64",177:"i64.trunc_u/f64",178:"f32.convert_s/i32",179:"f32.convert_u/i32",180:"f32.convert_s/i64",181:"f32.convert_u/i64",182:"f32.demote/f64",183:"f64.convert_s/i32",184:"f64.convert_u/i32",185:"f64.convert_s/i64",186:"f64.convert_u/i64",187:"f64.promote/f32",188:"i32.reinterpret/f32",189:"i64.reinterpret/f64",190:"f32.reinterpret/i32",191:"f64.reinterpret/i64"},fF=ot.SECTION_IDS={0:"custom",1:"type",2:"import",3:"function",4:"table",5:"memory",6:"global",7:"export",8:"start",9:"element",10:"code",11:"data"};ot.immediataryParsers={varuint1:r=>r.read(1)[0],varuint32:r=>Ue.unsigned.read(r),varint32:r=>Ue.signed.read(r),varint64:r=>Ue.signed.read(r),uint32:r=>[...r.read(4)],uint64:r=>[...r.read(8)],block_type:r=>{let e=r.read(1)[0];return lo[e]},br_table:r=>{let e={targets:[]},t=Ue.unsigned.readBn(r).toNumber();for(let n=0;n<t;n++){let i=Ue.unsigned.readBn(r).toNumber();e.targets.push(i)}return e.defaultTarget=Ue.unsigned.readBn(r).toNumber(),e},call_indirect:r=>{let e={};return e.index=Ue.unsigned.readBn(r).toNumber(),e.reserved=r.read(1)[0],e},memory_immediate:r=>{let e={};return e.flags=Ue.unsigned.readBn(r).toNumber(),e.offset=Ue.unsigned.readBn(r).toNumber(),e}};ot.typeParsers={function:r=>Ue.unsigned.readBn(r).toNumber(),table:r=>{let e={},t=r.read(1)[0];return e.elementType=lo[t],e.limits=ot.typeParsers.memory(r),e},global:r=>{let e={},t=r.read(1)[0];return e.contentType=lo[t],e.mutability=r.read(1)[0],e},memory:r=>{let e={};return e.flags=Ue.unsigned.readBn(r).toNumber(),e.intial=Ue.unsigned.readBn(r).toNumber(),e.flags===1&&(e.maximum=Ue.unsigned.readBn(r).toNumber()),e},initExpr:r=>{let e=ot.parseOp(r);return r.read(1),e}};var cF=ot.sectionParsers={custom:(r,e)=>{let t={name:"custom"},n=new zx(r.read(e.size)),i=Ue.unsigned.readBn(n).toNumber(),o=n.read(i);return t.sectionName=Buffer.from(o).toString(),t.payload=[...n.buffer],t},type:r=>{let e=Ue.unsigned.readBn(r).toNumber(),t={name:"type",entries:[]};for(let n=0;n<e;n++){let i=r.read(1)[0],o={form:lo[i],params:[]},s=Ue.unsigned.readBn(r).toNumber();for(let h=0;h<s;h++){let g=r.read(1)[0];o.params.push(lo[g])}Ue.unsigned.readBn(r).toNumber()&&(i=r.read(1)[0],o.return_type=lo[i]),t.entries.push(o)}return t},import:r=>{let e=Ue.unsigned.readBn(r).toNumber(),t={name:"import",entries:[]};for(let n=0;n<e;n++){let i={},o=Ue.unsigned.readBn(r).toNumber();i.moduleStr=Buffer.from(r.read(o)).toString();let s=Ue.unsigned.readBn(r).toNumber();i.fieldStr=Buffer.from(r.read(s)).toString();let f=r.read(1)[0];i.kind=Kx[f],i.type=ot.typeParsers[i.kind](r),t.entries.push(i)}return t},function:r=>{let e=Ue.unsigned.readBn(r).toNumber(),t={name:"function",entries:[]};for(let n=0;n<e;n++){let i=Ue.unsigned.readBn(r).toNumber();t.entries.push(i)}return t},table:r=>{let e=Ue.unsigned.readBn(r).toNumber(),t={name:"table",entries:[]};for(let n=0;n<e;n++){let i=ot.typeParsers.table(r);t.entries.push(i)}return t},memory:r=>{let e=Ue.unsigned.readBn(r).toNumber(),t={name:"memory",entries:[]};for(let n=0;n<e;n++){let i=ot.typeParsers.memory(r);t.entries.push(i)}return t},global:r=>{let e=Ue.unsigned.readBn(r).toNumber(),t={name:"global",entries:[]};for(let n=0;n<e;n++){let i={};i.type=ot.typeParsers.global(r),i.init=ot.typeParsers.initExpr(r),t.entries.push(i)}return t},export:r=>{let e=Ue.unsigned.readBn(r).toNumber(),t={name:"export",entries:[]};for(let n=0;n<e;n++){let i=Ue.unsigned.readBn(r).toNumber(),o={};o.field_str=Buffer.from(r.read(i)).toString();let s=r.read(1)[0];o.kind=Kx[s],o.index=Ue.unsigned.readBn(r).toNumber(),t.entries.push(o)}return t},start:r=>{let e={name:"start"};return e.index=Ue.unsigned.readBn(r).toNumber(),e},element:r=>{let e=Ue.unsigned.readBn(r).toNumber(),t={name:"element",entries:[]};for(let n=0;n<e;n++){let i={elements:[]};i.index=Ue.unsigned.readBn(r).toNumber(),i.offset=ot.typeParsers.initExpr(r);let o=Ue.unsigned.readBn(r).toNumber();for(let s=0;s<o;s++){let f=Ue.unsigned.readBn(r).toNumber();i.elements.push(f)}t.entries.push(i)}return t},code:r=>{let e=Ue.unsigned.readBn(r).toNumber(),t={name:"code",entries:[]};for(let n=0;n<e;n++){let i={locals:[],code:[]},o=Ue.unsigned.readBn(r).toNumber(),s=r.bytesRead+o,f=Ue.unsigned.readBn(r).toNumber();for(let h=0;h<f;h++){let g={};g.count=Ue.unsigned.readBn(r).toNumber();let x=r.read(1)[0];g.type=lo[x],i.locals.push(g)}for(;r.bytesRead<s;){let h=ot.parseOp(r);i.code.push(h)}t.entries.push(i)}return t},data:r=>{let e=Ue.unsigned.readBn(r).toNumber(),t={name:"data",entries:[]};for(let n=0;n<e;n++){let i={};i.index=Ue.unsigned.readBn(r).toNumber(),i.offset=ot.typeParsers.initExpr(r);let o=Ue.unsigned.readBn(r).toNumber();i.data=[...r.read(o)],t.entries.push(i)}return t}};ot.parseOp=r=>{let e={},t=r.read(1)[0],n=aF[t],[i,o]=n.split(".");o===void 0?o=i:e.return_type=i,e.name=o;let s=sF[o==="const"?i:o];return s&&(e.immediates=ot.immediataryParsers[s](r)),e};ot.parse=(r,e)=>{let n=[ot.parsePreramble(r)];for(;!r.end;){let i=ot.parseSectionHeader(r);n.push(cF[i.name](r,i))}return n}});var bp=X((gO,Vx)=>{global.fetch=window.fetch;Vx.exports.buffer=Tn().Buffer});var vp=X((mO,Yx)=>{var uF=bp().Buffer,Xe=Iu(),Ht=Cu(),lF=Bu(),it=Yx.exports=r=>it.generate(r).buffer,ho=it.LANGUAGE_TYPES={i32:127,i64:126,f32:125,f64:124,anyFunc:112,func:96,block_type:64},Xx=it.EXTERNAL_KIND={function:0,table:1,memory:2,global:3},hF=it.SECTION_IDS={custom:0,type:1,import:2,function:3,table:4,memory:5,global:6,export:7,start:8,element:9,code:10,data:11},dF=it.OPCODES={unreachable:0,nop:1,block:2,loop:3,if:4,else:5,end:11,br:12,br_if:13,br_table:14,return:15,call:16,call_indirect:17,drop:26,select:27,get_local:32,set_local:33,tee_local:34,get_global:35,set_global:36,"i32.load":40,"i64.load":41,"f32.load":42,"f64.load":43,"i32.load8_s":44,"i32.load8_u":45,"i32.load16_s":46,"i32.load16_u":47,"i64.load8_s":48,"i64.load8_u":49,"i64.load16_s":50,"i64.load16_u":51,"i64.load32_s":52,"i64.load32_u":53,"i32.store":54,"i64.store":55,"f32.store":56,"f64.store":57,"i32.store8":58,"i32.store16":59,"i64.store8":60,"i64.store16":61,"i64.store32":62,current_memory:63,grow_memory:64,"i32.const":65,"i64.const":66,"f32.const":67,"f64.const":68,"i32.eqz":69,"i32.eq":70,"i32.ne":71,"i32.lt_s":72,"i32.lt_u":73,"i32.gt_s":74,"i32.gt_u":75,"i32.le_s":76,"i32.le_u":77,"i32.ge_s":78,"i32.ge_u":79,"i64.eqz":80,"i64.eq":81,"i64.ne":82,"i64.lt_s":83,"i64.lt_u":84,"i64.gt_s":85,"i64.gt_u":86,"i64.le_s":87,"i64.le_u":88,"i64.ge_s":89,"i64.ge_u":90,"f32.eq":91,"f32.ne":92,"f32.lt":93,"f32.gt":94,"f32.le":95,"f32.ge":96,"f64.eq":97,"f64.ne":98,"f64.lt":99,"f64.gt":100,"f64.le":101,"f64.ge":102,"i32.clz":103,"i32.ctz":104,"i32.popcnt":105,"i32.add":106,"i32.sub":107,"i32.mul":108,"i32.div_s":109,"i32.div_u":110,"i32.rem_s":111,"i32.rem_u":112,"i32.and":113,"i32.or":114,"i32.xor":115,"i32.shl":116,"i32.shr_s":117,"i32.shr_u":118,"i32.rotl":119,"i32.rotr":120,"i64.clz":121,"i64.ctz":122,"i64.popcnt":123,"i64.add":124,"i64.sub":125,"i64.mul":126,"i64.div_s":127,"i64.div_u":128,"i64.rem_s":129,"i64.rem_u":130,"i64.and":131,"i64.or":132,"i64.xor":133,"i64.shl":134,"i64.shr_s":135,"i64.shr_u":136,"i64.rotl":137,"i64.rotr":138,"f32.abs":139,"f32.neg":140,"f32.ceil":141,"f32.floor":142,"f32.trunc":143,"f32.nearest":144,"f32.sqrt":145,"f32.add":146,"f32.sub":147,"f32.mul":148,"f32.div":149,"f32.min":150,"f32.max":151,"f32.copysign":152,"f64.abs":153,"f64.neg":154,"f64.ceil":155,"f64.floor":156,"f64.trunc":157,"f64.nearest":158,"f64.sqrt":159,"f64.add":160,"f64.sub":161,"f64.mul":162,"f64.div":163,"f64.min":164,"f64.max":165,"f64.copysign":166,"i32.wrap/i64":167,"i32.trunc_s/f32":168,"i32.trunc_u/f32":169,"i32.trunc_s/f64":170,"i32.trunc_u/f64":171,"i64.extend_s/i32":172,"i64.extend_u/i32":173,"i64.trunc_s/f32":174,"i64.trunc_u/f32":175,"i64.trunc_s/f64":176,"i64.trunc_u/f64":177,"f32.convert_s/i32":178,"f32.convert_u/i32":179,"f32.convert_s/i64":180,"f32.convert_u/i64":181,"f32.demote/f64":182,"f64.convert_s/i32":183,"f64.convert_u/i32":184,"f64.convert_s/i64":185,"f64.convert_u/i64":186,"f64.promote/f32":187,"i32.reinterpret/f32":188,"i64.reinterpret/f64":189,"f32.reinterpret/i32":190,"f64.reinterpret/i64":191};it.typeGenerators={function:(r,e)=>{Xe.unsigned.write(r,e)},table:(r,e)=>{e.write([ho[r.elementType]]),it.typeGenerators.memory(r.limits,e)},global:(r,e)=>{e.write([ho[r.contentType]]),e.write([r.mutability])},memory:(r,e)=>{Xe.unsigned.write(Number(r.maximum!==void 0),e),Xe.unsigned.write(r.intial,e),r.maximum!==void 0&&Xe.unsigned.write(r.maximum,e)},initExpr:(r,e)=>{it.generateOp(r,e),it.generateOp({name:"end",type:"void"},e)}};it.immediataryGenerators={varuint1:(r,e)=>(e.write([r]),e),varuint32:(r,e)=>(Xe.unsigned.write(r,e),e),varint32:(r,e)=>(Xe.signed.write(r,e),e),varint64:(r,e)=>(Xe.signed.write(r,e),e),uint32:(r,e)=>(e.write(r),e),uint64:(r,e)=>(e.write(r),e),block_type:(r,e)=>(e.write([ho[r]]),e),br_table:(r,e)=>{Xe.unsigned.write(r.targets.length,e);for(let t of r.targets)Xe.unsigned.write(t,e);return Xe.unsigned.write(r.defaultTarget,e),e},call_indirect:(r,e)=>(Xe.unsigned.write(r.index,e),e.write([r.reserved]),e),memory_immediate:(r,e)=>(Xe.unsigned.write(r.flags,e),Xe.unsigned.write(r.offset,e),e)};var Jx={type:(r,e=new Ht)=>{e.write([ho[r.form]]);let t=r.params.length;return Xe.unsigned.write(t,e),t!==0&&e.write(r.params.map(n=>ho[n])),e.write([r.return_type?1:0]),r.return_type&&e.write([ho[r.return_type]]),e.buffer},import:(r,e=new Ht)=>{Xe.unsigned.write(r.moduleStr.length,e),e.write(r.moduleStr),Xe.unsigned.write(r.fieldStr.length,e),e.write(r.fieldStr),e.write([Xx[r.kind]]),it.typeGenerators[r.kind](r.type,e)},function:(r,e=new Ht)=>(Xe.unsigned.write(r,e),e.buffer),table:it.typeGenerators.table,global:(r,e=new Ht)=>(it.typeGenerators.global(r.type,e),it.typeGenerators.initExpr(r.init,e),e),memory:it.typeGenerators.memory,export:(r,e=new Ht)=>{let t=uF.from(r.field_str),n=t.length;return Xe.unsigned.write(n,e),e.write(t),e.write([Xx[r.kind]]),Xe.unsigned.write(r.index,e),e},element:(r,e=new Ht)=>{Xe.unsigned.write(r.index,e),it.typeGenerators.initExpr(r.offset,e),Xe.unsigned.write(r.elements.length,e);for(let t of r.elements)Xe.unsigned.write(t,e);return e},code:(r,e=new Ht)=>{let t=new Ht;Xe.unsigned.write(r.locals.length,t);for(let n of r.locals)Xe.unsigned.write(n.count,t),t.write([ho[n.type]]);for(let n of r.code)it.generateOp(n,t);return Xe.unsigned.write(t.bytesWrote,e),e.write(t.buffer),e},data:(r,e=new Ht)=>(Xe.unsigned.write(r.index,e),it.typeGenerators.initExpr(r.offset,e),Xe.unsigned.write(r.data.length,e),e.write(r.data),e)};it.entryGenerators=Jx;it.generateSection=function(r,e=new Ht){let t=r.name,n=new Ht;if(e.write([hF[t]]),t==="custom")Xe.unsigned.write(r.sectionName.length,n),n.write(r.sectionName),n.write(r.payload);else if(t==="start")Xe.unsigned.write(r.index,n);else{Xe.unsigned.write(r.entries.length,n);for(let i of r.entries)Jx[t](i,n)}return Xe.unsigned.write(n.bytesWrote,e),e.write(n.buffer),e};it.generate=(r,e=new Ht)=>{let[t,...n]=r;it.generatePreramble(t,e);for(let i of n)it.generateSection(i,e);return e};it.generatePreramble=(r,e=new Ht)=>(e.write(r.magic),e.write(r.version),e);it.generateOp=(r,e=new Ht)=>{let t=r.name;r.return_type!==void 0&&(t=r.return_type+"."+t),e.write([dF[t]]);let n=lF[r.name==="const"?r.return_type:r.name];return n&&it.immediataryGenerators[n](r.immediates,e),e}});var Zx=X((yO,Qx)=>{var pF=Bu();Qx.exports=r=>{let e=[],t=r.split(/\s|\n/);for(;t.length;){let n=t.shift(),i={},[o,s]=n.split(".");s===void 0?s=o:i.return_type=o,i.name=s;let f=pF[i.name==="const"?i.return_type:i.name];f&&(i.immediates=gF(f,t)),e.push(i)}return e};function gF(r,e){let t={};switch(r){case"br_table":let n=[];for(;;){let i=e[0];if(isNaN(i))break;e.shift(),n.push(i)}return n;case"call_indirect":return t.index=e.shift(),t.reserved=0,t;case"memory_immediate":return t.flags=e.shift(),t.offset=e.shift(),t;default:return e.shift()}}});var t6=X((vO,e6)=>{var ff=bp().Buffer,Ou=Iu().unsigned,mF=yp(),wp=Cu(),yF=["custom","type","import","function","table","memory","global","export","start","element","code","data"];e6.exports=class{constructor(e){this._wasm=e,this._sections=[],this._modified=!1}get wasm(){return this._modified&&(this._wasm=ff.concat(this._sections.concat(this._pipe.buffer)),this._modified=!1),this._wasm}*[Symbol.iterator](){for(this._pipe=new wp(this._wasm),this._sections=[this._pipe.read(8)];!this._pipe.end;){let e=this._pipe.bytesRead,t=this._pipe.read(1)[0],n=Number(Ou.read(this._pipe)),i=this._pipe.read(n),o=this._pipe.bytesRead,s=this._wasm.slice(e,o),f=this._sections.push(s)-1;yield new xp(t,i,this,f)}}_update(e,t){this._modified=!0,this._sections[e]=t}};var xp=class{constructor(e,t,n,i){this._it=n,this._index=i,this.type=yF[e],this._type=e,this._section=t;let o=new wp(t);this.type!=="custom"&&(this.count=Number(Ou.read(o))),this._body=o.buffer}toJSON(){return mF.sectionParsers[this.type](new wp(this._section))}appendEntries(e){this.count+=e.length,this._body=ff.concat([this._body].concat(e));let t=ff.concat([Ou.encode(this.count),this._body]);this._it._update(this._index,ff.concat([ff.from([this._type]),Ou.encode(t.length),t]))}}});var r6=X(cf=>{cf.wasm2json=yp();cf.json2wasm=vp();cf.text2json=Zx();cf.Iterator=t6()});var n6=X((xO,bF)=>{bF.exports={start:0,type:{params:{DEFAULT:0},return_type:{DEFAULT:0}},import:0,code:{locals:{DEFAULT:1},code:{get_local:120,set_local:120,tee_local:120,get_global:120,set_global:120,load8_s:120,load8_u:120,load16_s:120,load16_u:120,load32_s:120,load32_u:120,load:120,store8:120,store16:120,store32:120,store:120,grow_memory:1e4,current_memory:100,nop:1,block:1,loop:1,if:1,then:90,else:90,br:90,br_if:90,br_table:120,return:90,call:90,call_indirect:1e4,const:1,add:45,sub:45,mul:45,div_s:36e3,div_u:36e3,rem_s:36e3,rem_u:36e3,and:45,or:45,xor:45,shl:67,shr_u:67,shr_s:67,rotl:90,rotr:90,eq:45,eqz:45,ne:45,lt_s:45,lt_u:45,le_s:45,le_u:45,gt_s:45,gt_u:45,ge_s:45,ge_u:45,clz:45,ctz:45,popcnt:45,drop:120,select:120,unreachable:1}},data:0}});var o6=X(Ru=>{var _p=r6(),vF=_p.text2json,i6=vp().SECTION_IDS,wF=n6();function Fs(r,e={},t=0){let n=0;if(t=e.DEFAULT!==void 0?e.DEFAULT:0,Array.isArray(r))r.forEach(i=>{n+=Fs(i,e)});else if(typeof r=="object")for(let i in r){let o=e[i];o&&(n+=Fs(r[i],o,t))}else e[r]===void 0?n=t:n=e[r];return n}function xF(r,e,t,n,i){function o(I,A){return vF(`${n}.const ${I} call ${A}`)}function s(I,A){I.name==="call"&&I.immediates>=A&&(I.immediates=(++I.immediates).toString())}function f(){return o(0,0).reduce((A,C)=>A+Fs(C.name,e.code),0)}let h=new Set(["grow_memory","end","br","br_table","br_if","if","else","return","loop"]),g=f(),x=r.code.slice(),T=[];for(i+=Fs(r.locals,e.local);x.length;){let I=0;for(;;){let A=x[I++];if(s(A,t),i+=Fs(A.name,e.code),h.has(A.name))break}i!==0&&(i+=g,T=T.concat(o(i,t))),T=T.concat(x.slice(0,I)),x=x.slice(I),i=0}return r.code=T,r}Ru.meterJSON=(r,e)=>{function t(A,C){return A.find(j=>j.name===C)}function n(A,C){let j=i6[C];for(let G in A){let $=A[G],Z=i6[$.name];if(Z&&j<Z){A.splice(G,0,{name:C,entries:[]});return}}}let i=0,o,s,{costTable:f,moduleStr:h,fieldStr:g,meterType:x}=e;f||(f=wF),h||(h="metering"),g||(g="usegas"),x||(x="i32"),t(r,"type")||n(r,"type"),t(r,"import")||n(r,"import");let T={moduleStr:h,fieldStr:g,kind:"function"},I={form:"func",params:[x]};r=r.slice(0);for(let A of r)switch(A=Object.assign(A),A.name){case"type":T.type=A.entries.push(I)-1,s=A;break;case"function":o=A;break;case"import":for(let C of A.entries){if(C.moduleStr===h&&C.fieldStr===g)throw new Error("importing metering function is not allowed");C.kind==="function"&&i++}A.entries.push(T);break;case"export":for(let C of A.entries)C.kind==="function"&&C.index>=i&&C.index++;break;case"element":for(let C of A.entries)C.elements=C.elements.map(j=>j>=i?++j:j);break;case"start":A.index>=i&&A.index++;break;case"code":for(let C in A.entries){let j=A.entries[C],G=o.entries[C],$=s.entries[G],Z=Fs($,f.type);xF(j,f.code,i,x,Z)}break}return r};Ru.meterWASM=(r,e={})=>{let t=_p.wasm2json(r);return t=Ru.meterJSON(t,e),_p.json2wasm(t)}});var s6=X(()=>{});var f6=X(()=>{});var c6=X(()=>{});var QF={};$6(QF,{AbstractContractHandler:()=>so,ArweaveGatewayInteractionsLoader:()=>yo,ArweaveWrapper:()=>Pr,Benchmark:()=>et,CacheKey:()=>xi,CacheableInteractionsLoader:()=>Is,CacheableStateEvaluator:()=>ef,ConsoleLogger:()=>qs,ConsoleLoggerFactory:()=>js,ContractCallRecord:()=>go,ContractDefinitionLoader:()=>wo,ContractError:()=>of,ContractMetadata:()=>Lp,DEFAULT_LEVEL_DB_LOCATION:()=>P6,DefaultCreateContract:()=>uf,DefaultEvaluationOptions:()=>ca,DefaultStateEvaluator:()=>Qa,EvalStateResult:()=>Rt,HandlerBasedContract:()=>mo,HandlerExecutorFactory:()=>af,InnerWritesEvaluator:()=>lf,InteractionCall:()=>Ts,InteractionInput:()=>Pu,InteractionOutput:()=>Sp,JsHandlerApi:()=>As,LevelDbCache:()=>Ui,LexicographicalInteractionsSorter:()=>io,LogLevelOrder:()=>Up,LoggerFactory:()=>Ae,MemCache:()=>qi,PstContractImpl:()=>hf,Signature:()=>An,SmartWeaveError:()=>Ha,SmartWeaveErrorType:()=>cd,SmartWeaveGlobal:()=>nf,SmartWeaveTags:()=>I1,SortKeyCacheResult:()=>_i,SourceImpl:()=>po,SourceType:()=>ax,TagsParser:()=>ir,WARP_GW_URL:()=>ri,Warp:()=>xo,WarpBuilder:()=>vf,WarpFactory:()=>Np,WarpGatewayContractDefinitionLoader:()=>bf,WarpGatewayInteractionsLoader:()=>Za,WasmHandlerApi:()=>sf,WasmSrc:()=>vo,arrayToHex:()=>Kd,asc:()=>C7,ascS:()=>B7,bufToBn:()=>md,bundledTxsFilter:()=>Fp,canBeCached:()=>_u,createDummyTx:()=>Ep,createInteractionTx:()=>Nu,deepCopy:()=>hs,defaultCacheOptions:()=>Os,defaultWarpGwOptions:()=>Hu,desc:()=>O7,descS:()=>R7,emptyTransfer:()=>ni,genesisSortKey:()=>Su,indent:()=>Ir,isomorphicRandomUUID:()=>yd,knownWarpPlugins:()=>Pp,lastPossibleKey:()=>qA,lvlToOrder:()=>wf,mapReplacer:()=>M7,mapReviver:()=>I7,normalizeContractSource:()=>ap,sleep:()=>Ka,sortingFirst:()=>fx,sortingLast:()=>Gd,stripTrailingSlash:()=>za,timeout:()=>gd});var Up={silly:0,trace:1,debug:2,info:3,warn:4,error:5,fatal:6,none:7};function wf(r){return Up[r]}var qs=class{constructor(e,t){this.moduleName=e;this.settings=t}trace(e,...t){this.shouldLog("trace")&&console.debug(this.message("trace",e),t)}error(e,...t){this.shouldLog("error")&&console.error(this.message("error",e),t)}info(e,...t){this.shouldLog("info")&&console.info(this.message("info",e),t)}silly(e,...t){this.shouldLog("silly")&&console.debug(this.message("silly",e),t)}debug(e,...t){this.shouldLog("debug")&&console.debug(this.message("debug",e),t)}warn(e,...t){this.shouldLog("warn")&&console.warn(this.message("warn",e),t)}log(e,...t){this.shouldLog("info")&&console.info(this.message("info",e),t)}fatal(e,...t){this.shouldLog("fatal")&&console.error(this.message("fatal",e),t)}shouldLog(e){return wf(e)>=wf(this.settings.minLevel)}setSettings(e){this.settings=e}message(e,t){return`${new Date().toISOString()} ${e.toUpperCase()} [${this.moduleName}] ${t}`}};var js=class{registeredLoggers={};registeredOptions={};defOptions={minLevel:"info"};constructor(){this.setOptions=this.setOptions.bind(this),this.getOptions=this.getOptions.bind(this),this.create=this.create.bind(this),this.logLevel=this.logLevel.bind(this)}setOptions(e,t){t?this.registeredLoggers[t]?this.registeredLoggers[t].setSettings({...this.registeredLoggers[t].settings,...e}):this.registeredOptions[t]={...this.defOptions,...e}:(this.defOptions=e,Object.keys(this.registeredLoggers).forEach(n=>{this.registeredLoggers[n].setSettings({...this.registeredLoggers[n].settings,...e})}))}getOptions(e){return e?this.registeredLoggers[e]?this.registeredLoggers[e].settings:this.registeredOptions[e]?this.registeredOptions[e]:this.defOptions:this.defOptions}logLevel(e,t){this.setOptions({minLevel:e},t)}create(e="SWC"){return Object.prototype.hasOwnProperty.call(this.registeredLoggers,e)||(this.registeredLoggers[e]=new qs(e,this.getOptions(e))),this.registeredLoggers[e]}};var wi=class{constructor(){}setOptions(e,t){wi.INST.setOptions(e,t)}getOptions(e){return wi.INST.getOptions(e)}logLevel(e,t){wi.INST.logLevel(e,t)}create(e){return wi.INST.create(e)}static use(e){wi.INST=e}},Ae=wi;Us(Ae,"INST",new js);var et=class{static measure(){return new et}constructor(){}start=Date.now();end=null;reset(){this.start=Date.now(),this.end=null}stop(){this.end=Date.now()}elapsed(e=!1){this.end===null&&(this.end=Date.now());let t=this.end-this.start;return e?t:`${(this.end-this.start).toFixed(0)}ms`}};var xi=class{constructor(e,t){this.contractTxId=e;this.sortKey=t}},_i=class{constructor(e,t){this.sortKey=e;this.cachedValue=t}};var T1=ct(b1()),M1=ct(F1());var Ui=class{logger=Ae.INST.create("LevelDbCache");db;constructor(e){if(e.inMemory)this.db=new M1.MemoryLevel({valueEncoding:"json"});else{if(!e.dbLocation)throw new Error("LevelDb cache configuration error - no db location specified");let t=e.dbLocation;this.logger.info(`Using location ${t}`),this.db=new T1.Level(t,{valueEncoding:"json"})}}async get(e,t,n){let i=this.db.sublevel(e,{valueEncoding:"json"});await i.open();try{let o=await i.get(t);return{sortKey:t,cachedValue:o}}catch(o){if(o.code=="LEVEL_NOT_FOUND")return null;throw o}}async getLast(e){let t=this.db.sublevel(e,{valueEncoding:"json"});await t.open();let n=await t.keys({reverse:!0,limit:1}).all();return n.length?{sortKey:n[0],cachedValue:await t.get(n[0])}:null}async getLessOrEqual(e,t){let n=this.db.sublevel(e,{valueEncoding:"json"});await n.open();let i=await n.keys({reverse:!0,lte:t,limit:1}).all();return i.length?{sortKey:i[0],cachedValue:await n.get(i[0])}:null}async put(e,t){let n=this.db.sublevel(e.contractTxId,{valueEncoding:"json"});await n.open(),await n.put(e.sortKey,t)}close(){return this.db.close()}async dump(){return await this.db.iterator().all()}async getLastSortKey(){let e="";await this.db.open();let t=await this.db.keys().all();for(let n of t){let i=n.substring(45);i.localeCompare(e)>0&&(e=i)}return e==""?null:e}async allContracts(){await this.db.open();let e=await this.db.keys().all(),t=new Set;return e.forEach(n=>t.add(n.substring(1,44))),Array.from(t)}storage(){return this.db}async prune(e=5){throw new Error("Not implemented yet")}};var qi=class{storage={};clearAll(){Object.keys(this.storage).forEach(e=>{delete this.storage[e]})}contains(e){return Object.prototype.hasOwnProperty.call(this.storage,e)}get(e){return this.storage[e]}put(e,t){this.storage[e]=t}remove(e){delete this.storage[e]}};var Rt=class{constructor(e,t,n){this.state=e;this.validity=t;this.errorMessages=n}},ca=class{ignoreExceptions=!0;waitForConfirmation=!1;updateCacheForEachInteraction=!1;internalWrites=!1;maxCallDepth=7;maxInteractionEvaluationTimeSeconds=60;stackTrace={saveState:!1};bundlerUrl="https://d1o5nlqr4okus2.cloudfront.net/";gasLimit=Number.MAX_SAFE_INTEGER;useVM2=!1;allowUnsafeClient=!1;allowBigInt=!1;walletBalanceUrl="http://nyc-1.dev.arweave.net:1984/";mineArLocalBlocks=!0;throwOnInternalWriteError=!0};var I1=($=>($.APP_NAME="App-Name",$.APP_VERSION="App-Version",$.CONTRACT_TX_ID="Contract",$.INPUT="Input",$.CONTENT_TYPE="Content-Type",$.CONTRACT_SRC_TX_ID="Contract-Src",$.SDK="SDK",$.MIN_FEE="Min-Fee",$.INIT_STATE="Init-State",$.INIT_STATE_TX="Init-State-TX",$.INTERACT_WRITE="Interact-Write",$.WASM_LANG="Wasm-Lang",$.WASM_LANG_VERSION="Wasm-Lang-Version",$.WASM_META="Wasm-Meta",$.REQUEST_VRF="Request-Vrf",$.SIGNATURE_TYPE="Signature-Type",$.WARP_TESTNET="Warp-Testnet",$))(I1||{});var N6=ct(A0()),k6=ct(cs()),kp=ct(ls());var $u=ct(A0());var tu=class{constructor(e,t,n){this.arweave=e;this.baseImplementation=t;this.cache=n}logger=Ae.INST.create("CacheableExecutorFactory");async create(e,t,n){return await this.baseImplementation.create(e,t,n)}};var cd=(e=>(e.CONTRACT_NOT_FOUND="CONTRACT_NOT_FOUND",e))(cd||{}),Ha=class extends Error{type;otherInfo;constructor(e,t={}){t.message?super(t.message):super(),this.type=e,this.otherInfo=t}getType(){return this.type}};function zE(r){if(!r)return!1;let e=hw(r);return r.evolve!==void 0||e.has("evolve")}var Gn=class{logger=Ae.INST.create("Evolve");constructor(){this.modify=this.modify.bind(this)}async modify(e,t){let{definitionLoader:n,executorFactory:i}=t.warp,o=t.contractDefinition.txId,s=Gn.evolvedSrcTxId(e),f=t.contractDefinition.srcTxId;if(s&&(this.logger.debug("Checking evolve:",{current:f,evolvedSrcTxId:s}),f!==s))try{this.logger.info("Evolving to: ",s);let h=await n.load(o,s),g=await i.create(h,t.evaluationOptions,t.warp);return t.contractDefinition=h,t.handler=g,t.handler.initState(e),this.logger.debug("evolved to:",{evolve:s,newSrcTxId:t.contractDefinition.srcTxId,current:f,txId:t.contractDefinition.txId}),t}catch(h){throw new Ha("CONTRACT_NOT_FOUND",{message:`Error while evolving ${o} from ${f} to ${s}: ${h}`,requestedTxId:o})}return t}static evolvedSrcTxId(e){if(!zE(e))return;let t=hw(e),n=e.evolve||t.get("evolve"),i=e.canEvolve||t.get("canEvolve");if(i==null&&(i=!0),n&&/[a-z0-9_-]{43}/i.test(n)&&i)return n}};function hw(r){let e=new Map;return r.settings&&(GE(r.settings)?e=new Map(r.settings):VE(r.settings)&&(e=new Map(Object.entries(r.settings)))),e}function GE(r){return r==null?!1:typeof r[Symbol.iterator]=="function"}function VE(r){return typeof r=="object"&&r!==null&&!Array.isArray(r)}var XE=Function.prototype.toString,ud=Object.create,JE=Object.prototype.toString,YE=function(){function r(){this._keys=[],this._values=[]}return r.prototype.has=function(e){return!!~this._keys.indexOf(e)},r.prototype.get=function(e){return this._values[this._keys.indexOf(e)]},r.prototype.set=function(e,t){this._keys.push(e),this._values.push(t)},r}();function QE(){return new YE}function ZE(){return new WeakMap}var e7=typeof WeakMap<"u"?ZE:QE;function hd(r){if(!r)return ud(null);var e=r.constructor;if(e===Object)return r===Object.prototype?{}:ud(r);if(~XE.call(e).indexOf("[native code]"))try{return new e}catch{}return ud(r)}function t7(r){var e="";return r.global&&(e+="g"),r.ignoreCase&&(e+="i"),r.multiline&&(e+="m"),r.unicode&&(e+="u"),r.sticky&&(e+="y"),e}function r7(r){return r.flags}var n7=/test/g.flags==="g"?r7:t7;function dw(r){var e=JE.call(r);return e.substring(8,e.length-1)}function i7(r){return r[Symbol.toStringTag]||dw(r)}var o7=typeof Symbol<"u"?i7:dw,s7=Object.defineProperty,a7=Object.getOwnPropertyDescriptor,pw=Object.getOwnPropertyNames,dd=Object.getOwnPropertySymbols,gw=Object.prototype,mw=gw.hasOwnProperty,f7=gw.propertyIsEnumerable,yw=typeof dd=="function";function c7(r){return pw(r).concat(dd(r))}var u7=yw?c7:pw;function nu(r,e,t){for(var n=u7(r),i=0,o=n.length,s=void 0,f=void 0;i<o;++i)if(s=n[i],!(s==="callee"||s==="caller")){if(f=a7(r,s),!f){e[s]=t.copier(r[s],t);continue}!f.get&&!f.set&&(f.value=t.copier(f.value,t));try{s7(e,s,f)}catch{e[s]=f.value}}return e}function l7(r,e){var t=new e.Constructor;e.cache.set(r,t);for(var n=0,i=r.length;n<i;++n)t[n]=e.copier(r[n],e);return t}function h7(r,e){var t=new e.Constructor;return e.cache.set(r,t),nu(r,t,e)}function bw(r,e){return r.slice(0)}function d7(r,e){return r.slice(0,r.size,r.type)}function p7(r,e){return new e.Constructor(bw(r.buffer))}function g7(r,e){return new e.Constructor(r.getTime())}function vw(r,e){var t=new e.Constructor;return e.cache.set(r,t),r.forEach(function(n,i){t.set(i,e.copier(n,e))}),t}function m7(r,e){return nu(r,vw(r,e),e)}function y7(r,e){var t=hd(e.prototype);e.cache.set(r,t);for(var n in r)mw.call(r,n)&&(t[n]=e.copier(r[n],e));return t}function b7(r,e){var t=hd(e.prototype);e.cache.set(r,t);for(var n in r)mw.call(r,n)&&(t[n]=e.copier(r[n],e));for(var i=dd(r),o=0,s=i.length,f=void 0;o<s;++o)f=i[o],f7.call(r,f)&&(t[f]=e.copier(r[f],e));return t}var v7=yw?b7:y7;function w7(r,e){var t=hd(e.prototype);return e.cache.set(r,t),nu(r,t,e)}function ld(r,e){return new e.Constructor(r.valueOf())}function x7(r,e){var t=new e.Constructor(r.source,n7(r));return t.lastIndex=r.lastIndex,t}function ru(r,e){return r}function ww(r,e){var t=new e.Constructor;return e.cache.set(r,t),r.forEach(function(n){t.add(e.copier(n,e))}),t}function _7(r,e){return nu(r,ww(r,e),e)}var S7=Array.isArray,pd=Object.assign,E7=Object.getPrototypeOf,xw={array:l7,arrayBuffer:bw,blob:d7,dataView:p7,date:g7,error:ru,map:vw,object:v7,regExp:x7,set:ww},A7=pd({},xw,{array:h7,map:m7,object:w7,set:_7});function F7(r){return{Arguments:r.object,Array:r.array,ArrayBuffer:r.arrayBuffer,Blob:r.blob,Boolean:ld,DataView:r.dataView,Date:r.date,Error:r.error,Float32Array:r.arrayBuffer,Float64Array:r.arrayBuffer,Int8Array:r.arrayBuffer,Int16Array:r.arrayBuffer,Int32Array:r.arrayBuffer,Map:r.map,Number:ld,Object:r.object,Promise:ru,RegExp:r.regExp,Set:r.set,String:ld,WeakMap:ru,WeakSet:ru,Uint8Array:r.arrayBuffer,Uint8ClampedArray:r.arrayBuffer,Uint16Array:r.arrayBuffer,Uint32Array:r.arrayBuffer,Uint64Array:r.arrayBuffer}}function _w(r){var e=pd({},xw,r),t=F7(e),n=t.Array,i=t.Object;function o(s,f){if(f.prototype=f.Constructor=void 0,!s||typeof s!="object")return s;if(f.cache.has(s))return f.cache.get(s);if(f.prototype=s.__proto__||E7(s),f.Constructor=f.prototype&&f.prototype.constructor,!f.Constructor||f.Constructor===Object)return i(s,f);if(S7(s))return n(s,f);var h=t[o7(s)];return h?h(s,f):typeof s.then=="function"?s:i(s,f)}return function(f){return o(f,{Constructor:void 0,cache:e7(),copier:o,prototype:void 0})}}function T7(r){return _w(pd({},A7,r))}var cC=T7({}),Sw=_w({});var Ew=ct(Oa()),Ka=r=>new Promise(e=>setTimeout(e,r)),hs=r=>Sw(r),M7=(r,e)=>e instanceof Map?{dataType:"Map",value:Array.from(e.entries())}:e,I7=(r,e)=>typeof e=="object"&&e!==null&&e.dataType==="Map"?new Map(e.value):e,C7=(r,e)=>r-e,B7=(r,e)=>+r-+e,O7=(r,e)=>e-r,R7=(r,e)=>+e-+r;function gd(r){let e=null,t=new Promise((n,i)=>{e=setTimeout(()=>{clearTimeout(e),i("timeout")},r*1e3)});return{timeoutId:e,timeoutPromise:t}}function za(r){return r.endsWith("/")?r.slice(0,-1):r}function Ir(r){return"".padEnd(r*2," ")}function md(r){let e=[];return Uint8Array.from(r).forEach(function(n){let i=n.toString(16);i.length%2&&(i="0"+i),e.push(i)}),BigInt("0x"+e.join(""))}function yd(){return P7()&&self.crypto?self.crypto.randomUUID():(0,Ew.randomUUID)()}var P7=new Function("try {return this===window;}catch(e){ return false;}");var ox=ct(Hd()),sx=ct(wu());function _u(r){return r.confirmationStatus===void 0?!0:r.confirmationStatus==="confirmed"}var ir=class{logger=Ae.INST.create("TagsParser");getInputTag(e,t){if(ir.hasMultipleInteractions(e)){this.logger.debug("Interaction transaction is using multiple input tx tag format.");let n=e.tags.findIndex(o=>o.name==="Contract"&&o.value===t);if(e.tags.length-1===n){this.logger.warn("Wrong tags format: 'Contract' is the last tag");return}let i=e.tags[n+1];if(i.name!=="Input"){this.logger.warn(`No 'Input' tag found after 'Contract' tag. Instead ${i.name} was found`);return}return i}else return e.tags.find(n=>n.name==="Input")}isInteractWrite(e,t){return e.tags.some(n=>n.name==="Interact-Write"&&n.value===t)}getInteractWritesContracts(e){return e.tags.filter(t=>t.name==="Interact-Write").map(t=>t.value)}getContractTag(e){return e.tags.find(t=>t.name==="Contract")?.value}getContractsWithInputs(e){let t=new Map;return e.tags.filter(i=>i.name==="Contract").forEach(i=>{t.set(i.value,this.getInputTag(e,i.value))}),t}isEvmSigned(e){return e.tags.some(t=>t.name==="Signature-Type"&&t.value==="ethereum")}static hasMultipleInteractions(e){return e.tags.filter(t=>t.name==="Contract").length>1}decodeTags(e){let t=e.get("tags"),n=[];for(let i of t)try{let o=i.get("name",{decode:!0,string:!0}),s=i.get("value",{decode:!0,string:!0});n.push({name:o,value:s})}catch{}return n}getTag(e,t){let n=e.get("tags");for(let i of n)try{if(i.get("name",{decode:!0,string:!0})===t)return i.get("value",{decode:!0,string:!0})}catch{}return!1}};var LA=new sx.default.ec("secp256k1"),Qa=class{constructor(e,t=[]){this.arweave=e;this.executionContextModifiers=t}logger=Ae.INST.create("DefaultStateEvaluator");tagsParser=new ir;async eval(e,t){return this.doReadState(e.sortedInteractions,new Rt(e.contractDefinition.initState,{},{}),e,t)}async doReadState(e,t,n,i){let{ignoreExceptions:o,stackTrace:s,internalWrites:f}=n.evaluationOptions,{contract:h,contractDefinition:g,sortedInteractions:x,warp:T}=n,I=t.state,A=null,C=t.validity,j=t.errorMessages;n?.handler.initState(I);let G=n.contract.callDepth();this.logger.info(`${Ir(G)}Evaluating state for ${g.txId} [${e.length} non-cached of ${x.length} all]`);let $=null,Z=null,ee=e.length;n.handler.initState(I);let se=T.hasPlugin("evm-signature-verification")?T.loadPlugin("evm-signature-verification"):null;for(let q=0;q<ee;q++){let z=e[q],J=et.measure();if(A=z.sortKey,z.vrf&&!this.verifyVrf(z.vrf,z.sortKey,this.arweave))throw new Error("Vrf verification failed.");if(se&&this.tagsParser.isEvmSigned(z))try{if(!await se.process(z)){this.logger.warn(`Interaction ${z.id} was not verified, skipping.`);continue}}catch(L){this.logger.error(L);continue}if(this.logger.debug(`${Ir(G)}[${g.txId}][${z.id}][${z.block.height}]: ${e.indexOf(z)+1}/${e.length} [of all:${x.length}]`),this.tagsParser.isInteractWrite(z,g.txId)&&f){let L=this.tagsParser.getContractTag(z);this.logger.debug(`${Ir(G)}Internal Write - Loading writing contract`,L);let l=h.getCallStack().addInteractionData({interaction:null,interactionTx:z,currentTx:i}),b=n.warp.contract(L,n.contract,{callingInteraction:z,callType:"read"});await this.onContractCall(z,n,new Rt(I,C,j)),this.logger.debug(`${Ir(G)}Reading state of the calling contract at`,z.sortKey),await b.readState(z.sortKey,[...i||[],{contractTxId:g.txId,interactionTxId:z.id}]);let d=await this.internalWriteState(g.txId,z.sortKey);if(d!==null){I=d.cachedValue.state,n?.handler.initState(I),C[z.id]=d.cachedValue.validity[z.id],d.cachedValue.errorMessages?.[z.id]&&(j[z.id]=d.cachedValue.errorMessages[z.id]);let a=new Rt(I,C,j);await this.onStateUpdate(z,n,a),_u(z)&&(Z={tx:z,state:a})}else C[z.id]=!1;l.update({cacheHit:!1,outputState:s.saveState?I:void 0,executionTime:J.elapsed(!0),valid:C[z.id],errorMessage:$,gasUsed:0})}else{let L=this.tagsParser.getInputTag(z,n.contractDefinition.txId);if(!L){this.logger.error(`${Ir(G)}Skipping tx - Input tag not found for ${z.id}`);continue}let l=this.parseInput(L);if(!l){this.logger.error(`${Ir(G)}Skipping tx - invalid Input tag - ${z.id}`);continue}let b={input:l,caller:z.owner.address},d={interaction:b,interactionTx:z,currentTx:i},a=h.getCallStack().addInteractionData(d),u=await n.handler.handle(n,new Rt(I,C,j),d);if($=u.errorMessage,u.type!=="ok"&&(j[z.id]=$),this.logResult(u,z,n),this.logger.debug(`${Ir(G)}Interaction evaluation`,J.elapsed()),a.update({cacheHit:!1,outputState:s.saveState?I:void 0,executionTime:J.elapsed(!0),valid:C[z.id],errorMessage:$,gasUsed:u.gasUsed}),u.type==="exception"&&o!==!0)throw new Error(`Exception while processing ${JSON.stringify(b)}:
${u.errorMessage}`);C[z.id]=u.type==="ok",I=u.state;let v=new Rt(I,C,j);_u(z)&&(Z={tx:z,state:v}),await this.onStateUpdate(z,n,v)}for(let{modify:L}of this.executionContextModifiers)n=await L(I,n)}let V=new Rt(I,C,j);return Z!==null&&await this.onStateEvaluated(Z.tx,n,Z.state),new _i(A,V)}verifyVrf(e,t,n){let i=LA.keyFromPublic(e.pubkey,"hex"),o;try{o=(0,ox.ProofHoHash)(i.getPublic(),n.utils.stringToBuffer(t),n.utils.b64UrlToBuffer(e.proof))}catch{return!1}return n.utils.bufferTob64Url(o)==e.index}logResult(e,t,n){e.type==="exception"&&this.logger.error(`Executing of interaction: [${n.contractDefinition.txId} -> ${t.id}] threw exception:`,`${e.errorMessage}`),e.type==="error"&&this.logger.warn(`Executing of interaction: [${n.contractDefinition.txId} -> ${t.id}] returned error:`,e.errorMessage)}parseInput(e){try{return JSON.parse(e.value)}catch(t){return this.logger.error(t),null}}};function Kd(r){let e="";for(let t of r)e+=("0"+t.toString(16)).slice(-2);return e}var fB=ct(ls());var ax=(t=>(t.ARWEAVE="arweave",t.WARP_SEQUENCER="redstone-sequencer",t))(ax||{}),Za=class{constructor(e,t=null,n=null){this.baseUrl=e;this.confirmationStatus=t;this.source=n;this.baseUrl=za(e),Object.assign(this,t),this.source=n}logger=Ae.INST.create("WarpGatewayInteractionsLoader");async load(e,t,n,i){this.logger.debug("Loading interactions: for ",{contractId:e,fromSortKey:t,toSortKey:n});let o=[],s=0,f=0,h=0,g=et.measure();do{let x=et.measure(),T=`${this.baseUrl}/gateway/v2/interactions-sort-key`,I=await fetch(`${T}?${new URLSearchParams({contractId:e,...t?{from:t}:"",...n?{to:n}:"",page:(++s).toString(),fromSdk:"true",...this.confirmationStatus&&this.confirmationStatus.confirmed?{confirmationStatus:"confirmed"}:"",...this.confirmationStatus&&this.confirmationStatus.notCorrupted?{confirmationStatus:"not_corrupted"}:"",...this.source?{source:this.source}:""})}`).then(A=>A.ok?A.json():Promise.reject(A)).catch(A=>{throw A.body?.message&&this.logger.error(A.body.message),new Error(`Unable to retrieve transactions. Warp gateway responded with status ${A.status}.`)});this.logger.debug(`Loading interactions: page ${s} loaded in ${x.elapsed()}`),o.push(...I.interactions),f=I.paging.limit,h=I.paging.items,this.logger.debug(`Loaded interactions length: ${o.length}, from: ${t}, to: ${n}`)}while(h==f);return this.logger.debug("All loaded interactions:",{from:t,to:n,loaded:o.length,time:g.elapsed()}),o}type(){return"warp"}clearCache(){}};var DA="".padEnd(13,"0"),zd="".padEnd(13,"9"),UA="".padEnd(13,"0"),fx="".padEnd(64,"0"),Gd="".padEnd(64,"z"),Su=`${"".padStart(12,"0")},${DA},${fx}`,qA=`${"".padStart(12,"9")},${zd},${Gd}`,io=class{constructor(e){this.arweave=e}logger=Ae.INST.create("LexicographicalInteractionsSorter");async sort(e){let t=[...e],n=t.map(i=>this.addSortKey(i));return await Promise.all(n),t.sort((i,o)=>i.node.sortKey.localeCompare(o.node.sortKey))}async createSortKey(e,t,n,i=!1){let o=this.arweave.utils.b64UrlToBuffer(e),s=this.arweave.utils.b64UrlToBuffer(t),f=this.arweave.utils.concatBuffers([o,s]),h=Kd(await this.arweave.crypto.hash(f));return`${`${n}`.padStart(12,"0")},${i?zd:UA},${h}`}extractBlockHeight(e){return e?parseInt(e.split(",")[0]):null}async addSortKey(e){let{node:t}=e;e.node.sortKey!==void 0&&e.node.source=="redstone-sequencer"?this.logger.debug("Using sortKey from sequencer",e.node.sortKey):e.node.sortKey=await this.createSortKey(t.block.id,t.id,t.block.height)}generateLastSortKey(e){return`${`${e}`.padStart(12,"0")},${zd},${Gd}`}};var ef=class extends Qa{constructor(t,n,i=[]){super(t,i);this.cache=n}cLogger=Ae.INST.create("CacheableStateEvaluator");async eval(t,n){let i=t.cachedState;if(i&&i.sortKey==t.requestedSortKey)return this.cLogger.info(`Exact cache hit for sortKey ${t?.contractDefinition?.txId}:${i.sortKey}`),t.handler?.initState(i.cachedValue.state),i;let o=t.sortedInteractions,s=t.contractDefinition.txId;if(!s)throw new Error("Contract tx id not set in the execution context");for(let x of n||[])if(x.contractTxId===t.contractDefinition.txId){let T=o.findIndex(I=>I.id===x.interactionTxId);T!==-1&&(this.cLogger.debug("Inf. Loop fix - removing interaction",{height:o[T].block.height,contractTxId:x.contractTxId,interactionTxId:x.interactionTxId,sortKey:o[T].sortKey}),o.splice(T))}if(o.length==0){if(this.cLogger.info(`No missing interactions ${s}`),i)return t.handler?.initState(i.cachedValue.state),i;{t.handler?.initState(t.contractDefinition.initState),this.cLogger.debug("Inserting initial state into cache");let x=new Rt(t.contractDefinition.initState,{},{});return await this.cache.put(new xi(s,Su),x),new _i(Su,x)}}let f=i==null?t.contractDefinition.initState:i.cachedValue.state,h=i==null?{}:i.cachedValue.validity,g=i==null?{}:i.cachedValue.errorMessages;return this.cLogger.debug("Base state",f),await this.doReadState(o,new Rt(f,h,g||{}),t,n)}async onStateEvaluated(t,n,i){let o=n.contractDefinition.txId;this.cLogger.debug(`${Ir(n.contract.callDepth())}onStateEvaluated: cache update for contract ${o} [${t.sortKey}]`),await this.putInCache(o,t,i)}async onStateUpdate(t,n,i,o=!1){(n.evaluationOptions.updateCacheForEachInteraction||o)&&(this.cLogger.debug(`onStateUpdate: cache update for contract ${n.contractDefinition.txId} [${t.sortKey}]`,{contract:n.contractDefinition.txId,state:i.state,sortKey:t.sortKey}),await this.putInCache(n.contractDefinition.txId,t,i))}async latestAvailableState(t,n){if(this.cLogger.debug("Searching for",{contractTxId:t,sortKey:n}),n){let i=await this.cache.getLessOrEqual(t,n);return i&&this.cLogger.debug(`Latest available state at ${t}: ${i.sortKey}`),i}else return await this.cache.getLast(t)}async onInternalWriteStateUpdate(t,n,i){this.cLogger.debug("Internal write state update:",{sortKey:t.sortKey,dry:t.dry,contractTxId:n,state:i.state}),await this.putInCache(n,t,i)}async onContractCall(t,n,i){if(n.sortedInteractions?.length==0)return;let o=n.sortedInteractions.indexOf(t);o<1||await this.putInCache(n.contractDefinition.txId,n.sortedInteractions[o-1],i)}async putInCache(t,n,i){if(n.dry||n.confirmationStatus!==void 0&&n.confirmationStatus!=="confirmed")return;let o=new Rt(i.state,i.validity,i.errorMessages||{});this.cLogger.debug("Putting into cache",{contractTxId:t,transaction:n.id,sortKey:n.sortKey,dry:n.dry}),await this.cache.put(new xi(t,n.sortKey),o)}async syncState(t,n,i,o){let s=new Rt(i,o,{});await this.cache.put(new xi(t,n),s)}async dumpCache(){return await this.cache.dump()}async internalWriteState(t,n){return await this.cache.get(t,n)}async hasContractCached(t){return await this.cache.getLast(t)!=null}async lastCachedSortKey(){return await this.cache.getLastSortKey()}async allCachedContracts(){return await this.cache.allContracts()}setCache(t){this.cache=t}getCache(){return this.cache}};var jA="Operation requires compiling with --exportTable",WA="Operation requires compiling with --exportRuntime",tf=()=>{throw Error(WA)},$A=typeof BigUint64Array<"u",rf=Symbol(),HA=192,cx=1024,KA=new TextDecoder("utf-16le",{fatal:!0});Object.hasOwn=Object.hasOwn||function(r,e){return Object.prototype.hasOwnProperty.call(r,e)};function ux(r,e){let t=new Uint32Array(r)[e+-4>>>2]>>>1,n=new Uint16Array(r,e,t);if(t<=HA)return String.fromCharCode(...n);try{return KA.decode(n)}catch{let i="",o=0;for(;t-o>cx;)i+=String.fromCharCode(...n.subarray(o,o+=cx));return i+String.fromCharCode(...n.subarray(o))}}function Vd(r){let e={};function t(i,o){return i?ux(i.buffer,o):"<yet unknown>"}let n=r.env=r.env||{};return n.abort=n.abort||function(o,s,f,h){let g=e.memory||n.memory;throw Error(`abort: ${t(g,o)} at ${t(g,s)}:${f}:${h}`)},n.trace=n.trace||function(o,s,...f){let h=e.memory||n.memory;console.log(`trace: ${t(h,o)}${s?" ":""}${f.slice(0,s).join(", ")}`)},n.seed=n.seed||Date.now,r.Math=r.Math||Math,r.Date=r.Date||Date,e}function Xd(r,e){let t=e.exports,n=t.memory,i=t.table,o=t.__new||tf,s=t.__pin||tf,f=t.__unpin||tf,h=t.__collect||tf,g=t.__rtti_base,x=g?b=>b[g>>>2]:tf;r.__new=o,r.__pin=s,r.__unpin=f,r.__collect=h;function T(b){let d=new Uint32Array(n.buffer);if((b>>>=0)>=x(d))throw Error(`invalid id: ${b}`);return d[(g+4>>>2)+(b<<1)]}function I(b){let d=new Uint32Array(n.buffer);if((b>>>=0)>=x(d))throw Error(`invalid id: ${b}`);return d[(g+4>>>2)+(b<<1)+1]}function A(b){let d=T(b);if(!(d&7))throw Error(`not an array: ${b}, flags=${d}`);return d}function C(b){return 31-Math.clz32(b>>>6&31)}function j(b){if(b==null)return 0;let d=b.length,a=o(d<<1,1),u=new Uint16Array(n.buffer);for(var v=0,F=a>>>1;v<d;++v)u[F+v]=b.charCodeAt(v);return a}r.__newString=j;function G(b){if(b==null)return 0;let d=new Uint8Array(b),a=o(d.length,0);return new Uint8Array(n.buffer).set(d,a),a}r.__newArrayBuffer=G;function $(b){if(!b)return null;let d=n.buffer;if(new Uint32Array(d)[b+-8>>>2]!==1)throw Error(`not a string: ${b}`);return ux(d,b)}r.__getString=$;function Z(b,d,a){let u=n.buffer;if(a)switch(b){case 2:return new Float32Array(u);case 3:return new Float64Array(u)}else switch(b){case 0:return new(d?Int8Array:Uint8Array)(u);case 1:return new(d?Int16Array:Uint16Array)(u);case 2:return new(d?Int32Array:Uint32Array)(u);case 3:return new(d?BigInt64Array:BigUint64Array)(u)}throw Error(`unsupported align: ${b}`)}function ee(b,d=0){let a=d,u=A(b),v=C(u),F=typeof a!="number",p=F?a.length:a,c=o(p<<v,u&4?b:0),E;if(u&4)E=c;else{s(c);let M=o(u&2?16:12,b);f(c);let y=new Uint32Array(n.buffer);y[M+0>>>2]=c,y[M+4>>>2]=c,y[M+8>>>2]=p<<v,u&2&&(y[M+12>>>2]=p),E=M}if(F){let M=Z(v,u&2048,u&4096),y=c>>>v;if(u&16384)for(let _=0;_<p;++_)M[y+_]=a[_];else M.set(a,y)}return E}r.__newArray=ee;function se(b){let d=new Uint32Array(n.buffer),a=d[b+-8>>>2],u=A(a),v=C(u),F=u&4?b:d[b+4>>>2],p=u&2?d[b+12>>>2]:d[F+-4>>>2]>>>v;return Z(v,u&2048,u&4096).subarray(F>>>=v,F+p)}r.__getArrayView=se;function V(b){let d=se(b),a=d.length,u=new Array(a);for(let v=0;v<a;v++)u[v]=d[v];return u}r.__getArray=V;function q(b){let d=n.buffer,a=new Uint32Array(d)[b+-4>>>2];return d.slice(b,b+a)}r.__getArrayBuffer=q;function z(b){if(!i)throw Error(jA);let d=new Uint32Array(n.buffer)[b>>>2];return i.get(d)}r.__getFunction=z;function J(b,d,a){return new b(H(b,d,a))}function H(b,d,a){let u=n.buffer,v=new Uint32Array(u);return new b(u,v[a+4>>>2],v[a+8>>>2]>>>d)}function L(b,d,a){r[`__get${d}`]=J.bind(null,b,a),r[`__get${d}View`]=H.bind(null,b,a)}[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array].forEach(b=>{L(b,b.name,31-Math.clz32(b.BYTES_PER_ELEMENT))}),$A&&[BigUint64Array,BigInt64Array].forEach(b=>{L(b,b.name.slice(3),3)});function l(b,d){let a=new Uint32Array(n.buffer),u=a[b+-8>>>2];if(u<=x(a))do{if(u==d)return!0;u=I(u)}while(u);return!1}return r.__instanceof=l,r.memory=r.memory||n,r.table=r.table||i,gx(t,r)}function lx(r){return typeof Response<"u"&&r instanceof Response}function hx(r){return r instanceof WebAssembly.Module}async function dx(r,e={}){if(lx(r=await r))return px(r,e);let t=hx(r)?r:await WebAssembly.compile(r),n=Vd(e),i=await WebAssembly.instantiate(t,e),o=Xd(n,i);return{module:t,instance:i,exports:o}}function zA(r,e={}){let t=hx(r)?r:new WebAssembly.Module(r),n=Vd(e),i=new WebAssembly.Instance(t,e),o=Xd(n,i);return{module:t,instance:i,exports:o}}async function px(r,e={}){if(!WebAssembly.instantiateStreaming)return dx(lx(r=await r)?r.arrayBuffer():r,e);let t=Vd(e),n=await WebAssembly.instantiateStreaming(r,e),i=Xd(t,n.instance);return{...n,exports:i}}function gx(r,e={}){let t=r.__argumentsLength?n=>{r.__argumentsLength.value=n}:r.__setArgumentsLength||r.__setargc||(()=>{});for(let n of Object.keys(r)){let i=r[n],o=n.split("."),s=e;for(;o.length>1;){let g=o.shift();Object.hasOwn(s,g)||(s[g]={}),s=s[g]}let f=o[0],h=f.indexOf("#");if(h>=0){let g=f.substring(0,h),x=s[g];if(typeof x>"u"||!x.prototype){let T=function(...I){return T.wrap(T.prototype.constructor(0,...I))};T.prototype={valueOf(){return this[rf]}},T.wrap=function(I){return Object.create(T.prototype,{[rf]:{value:I,writable:!1}})},x&&Object.getOwnPropertyNames(x).forEach(I=>Object.defineProperty(T,I,Object.getOwnPropertyDescriptor(x,I))),s[g]=T}if(f=f.substring(h+1),s=s[g].prototype,/^(get|set):/.test(f)){if(!Object.hasOwn(s,f=f.substring(4))){let T=r[n.replace("set:","get:")],I=r[n.replace("get:","set:")];Object.defineProperty(s,f,{get(){return T(this[rf])},set(A){I(this[rf],A)},enumerable:!0})}}else f==="constructor"?(s[f]=function(...T){return t(T.length),i(...T)}).original=i:(s[f]=function(...T){return t(T.length),i(this[rf],...T)}).original=i}else/^(get|set):/.test(f)?Object.hasOwn(s,f=f.substring(4))||Object.defineProperty(s,f,{get:r[n.replace("set:","get:")],set:r[n.replace("get:","set:")],enumerable:!0}):typeof i=="function"&&i!==t?(s[f]=(...g)=>(t(g.length),i(...g))).original=i:s[f]=i}return e}var mx={instantiate:dx,instantiateSync:zA,instantiateStreaming:px,demangle:gx};var yx=(r,e)=>{let t=Ae.INST.create("WASM:AS");return{metering:{usegas:r.useGas},console:{"console.log":function(i){t.debug(`${r.contract.id}: ${e.exports.__getString(i)}`)},"console.logO":function(i,o){t.debug(`${r.contract.id}: ${e.exports.__getString(i)}`,JSON.parse(e.exports.__getString(o)))}},block:{"Block.height":function(){return r.block.height},"Block.indep_hash":function(){return e.exports.__newString(r.block.indep_hash)},"Block.timestamp":function(){return r.block.timestamp}},transaction:{"Transaction.id":function(){return e.exports.__newString(r.transaction.id)},"Transaction.owner":function(){return e.exports.__newString(r.transaction.owner)},"Transaction.target":function(){return e.exports.__newString(r.transaction.target)}},contract:{"Contract.id":function(){return e.exports.__newString(r.contract.id)},"Contract.owner":function(){return e.exports.__newString(r.contract.owner)}},api:{_readContractState:(i,o)=>{let s=e.exports.__getString(o),f=n(i);return console.log("Simulating read state of",s),setTimeout(()=>{console.log("calling callback"),f(e.exports.__newString(JSON.stringify({contractTxId:s})))},1e3)},clearTimeout},env:{abort(i,o,s,f){let h=e.exports.__getString(i);throw t.error(`--------------------- Error message from AssemblyScript ----------------------
`),t.error("  "+h),t.error('    In file "'+e.exports.__getString(o)+'"'),t.error(`    on line ${s}, column ${f}.`),t.error(`------------------------------------------------------------------------------
`),new Error(h)}}};function n(i){return e.exports.table.get(i)}};var bx=(r,e,t,n)=>{let i=Ae.INST.create("WASM:Rust"),o={metering:{usegas:r.useGas},console:{log:function(p){i.debug(`${r.contract.id}: ${p}`)}},Block:{height:function(){return r.block.height},indep_hash:function(){return r.block.indep_hash},timestamp:function(){return r.block.timestamp}},Transaction:{id:function(){return r.transaction.id},owner:function(){return r.transaction.owner},target:function(){return r.transaction.target}},Contract:{id:function(){return r.contract.id},owner:function(){return r.contract.owner}},SmartWeave:{caller:function(){return r.caller},readContractState:async function(p){return await r.contracts.readContractState(p)},write:async function(p,c){return await r.contracts.write(p,c)}},Vrf:{value:function(){return r.vrf.value},randomInt:function(p){return r.vrf.randomInt(p)}}},s={__wbg_log_:function(p,c){o.console.log(A(p,c))},__wbindgen_json_parse:function(p,c){var E=JSON.parse(A(p,c));return G(E)},__wbindgen_json_serialize:function(p,c){let E=$(c);var M=JSON.stringify(E===void 0?null:E),y=V(M,t.exports.__wbindgen_malloc,t.exports.__wbindgen_realloc),_=Z;z()[p/4+1]=_,z()[p/4+0]=y},__wbindgen_object_drop_ref:function(p){H(p)},__wbindgen_cb_drop:function(p){let c=H(p).original;if(c.cnt--==1)return c.a=0,!0;var E=!1;return E},__wbg_readContractState:function(p,c){var E=o.SmartWeave.readContractState(A(p,c));return G(E)},__wbg_viewContractState:function(p,c){},__wbg_caller:function(p){var c=o.SmartWeave.caller(),E=V(c,t.exports.__wbindgen_malloc,t.exports.__wbindgen_realloc),M=Z;z()[p/4+1]=M,z()[p/4+0]=E},__wbg_write:function(p,c,E){var M=o.SmartWeave.write(A(p,c),H(E));return G(M)},__wbg_refreshState:function(p,c){},__wbg_indephash:function(p){var c=o.Block.indep_hash(),E=V(c,t.exports.__wbindgen_malloc,t.exports.__wbindgen_realloc),M=Z;z()[p/4+1]=M,z()[p/4+0]=E},__wbg_height:function(){var p=o.Block.height();return p},__wbg_timestamp:function(){var p=o.Block.timestamp();return p},__wbg_id:function(p){var c=o.Transaction.id(),E=V(c,t.exports.__wbindgen_malloc,t.exports.__wbindgen_realloc),M=Z;z()[p/4+1]=M,z()[p/4+0]=E},__wbg_contractOwner:function(p){var c=o.Contract.owner(),E=V(c,t.exports.__wbindgen_malloc,t.exports.__wbindgen_realloc),M=Z;z()[p/4+1]=M,z()[p/4+0]=E},__wbg_contractId:function(p){var c=o.Contract.id(),E=V(c,t.exports.__wbindgen_malloc,t.exports.__wbindgen_realloc),M=Z;z()[p/4+1]=M,z()[p/4+0]=E},__wbg_owner:function(p){var c=o.Transaction.owner(),E=V(c,t.exports.__wbindgen_malloc,t.exports.__wbindgen_realloc),M=Z;z()[p/4+1]=M,z()[p/4+0]=E},__wbg_target:function(p){var c=o.Transaction.target(),E=V(c,t.exports.__wbindgen_malloc,t.exports.__wbindgen_realloc),M=Z;z()[p/4+1]=M,z()[p/4+0]=E},__wbg_call:function(){return u(function(p,c,E){var M=$(p).call($(c),$(E));return G(M)},arguments)},__wbg_new:function(p,c){try{var E={a:p,b:c},M=(_,ne)=>{let ie=E.a;E.a=0;try{return v(ie,E.b,_,ne)}finally{E.a=ie}},y=new Promise(M);return G(y)}finally{E.a=E.b=0}},__wbg_resolve:function(p){var c=Promise.resolve($(p));return G(c)},__wbg_then_a:function(p,c){var E=$(p).then($(c));return G(E)},__wbg_then_5:function(p,c,E){var M=$(p).then($(c),$(E));return G(M)},__wbindgen_debug_string:function(p,c){var E=L($(c)),M=V(E,t.exports.__wbindgen_malloc,t.exports.__wbindgen_realloc),y=Z;z()[p/4+1]=y,z()[p/4+0]=M},__wbindgen_throw:function(p,c){throw new Error(A(p,c))},__wbindgen_closure_wrapper:function(p,c,E){var M=l(p,c,n,b);return G(M)},__wbindgen_string_new:function(p,c){var E=A(p,c);return G(E)},__wbg_value:function(p){var c=o.Vrf.value(),E=V(c,t.exports.__wbindgen_malloc,t.exports.__wbindgen_realloc),M=Z;z()[p/4+1]=M,z()[p/4+0]=E},__wbg_randomInt:function(p){var c=o.Vrf.randomInt(p);return c}},f=Object.keys(s),h=e.reduce((p,c)=>{let E=f.find(M=>c.startsWith(M));if(E===void 0)throw new Error(`Cannot find import mapping for ${c}`);return p[c]=s[E],p},{}),g={};g.__wbindgen_placeholder__=h;let x=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});x.decode();let T=null;function I(){return(T===null||T.buffer!==t.exports.memory.buffer)&&(T=new Uint8Array(t.exports.memory.buffer)),T}function A(p,c){return x.decode(I().subarray(p,p+c))}let C=new Array(32).fill(void 0);C.push(void 0,null,!0,!1);let j=C.length;function G(p){j===C.length&&C.push(C.length+1);let c=j;return j=C[c],C[c]=p,c}function $(p){return C[p]}let Z=0,ee=new TextEncoder("utf-8"),se=typeof ee.encodeInto=="function"?function(p,c){return ee.encodeInto(p,c)}:function(p,c){let E=ee.encode(p);return c.set(E),{read:p.length,written:E.length}};function V(p,c,E){if(E===void 0){let ie=ee.encode(p),ce=c(ie.length);return I().subarray(ce,ce+ie.length).set(ie),Z=ie.length,ce}let M=p.length,y=c(M),_=I(),ne=0;for(;ne<M;ne++){let ie=p.charCodeAt(ne);if(ie>127)break;_[y+ne]=ie}if(ne!==M){ne!==0&&(p=p.slice(ne)),y=E(y,M,M=ne+p.length*3);let ie=I().subarray(y+ne,y+M),ce=se(p,ie);ne+=ce.written}return Z=ne,y}let q=null;function z(){return(q===null||q.buffer!==t.exports.memory.buffer)&&(q=new Int32Array(t.exports.memory.buffer)),q}function J(p){p<36||(C[p]=j,j=p)}function H(p){let c=$(p);return J(p),c}function L(p){let c=typeof p;if(c=="number"||c=="boolean"||p==null)return`${p}`;if(c=="string")return`"${p}"`;if(c=="symbol"){let y=p.description;return y==null?"Symbol":`Symbol(${y})`}if(c=="function"){let y=p.name;return typeof y=="string"&&y.length>0?`Function(${y})`:"Function"}if(Array.isArray(p)){let y=p.length,_="[";y>0&&(_+=L(p[0]));for(let ne=1;ne<y;ne++)_+=", "+L(p[ne]);return _+="]",_}let E=/\[object ([^\]]+)\]/.exec(toString.call(p)),M;if(E.length>1)M=E[1];else return toString.call(p);if(M=="Object")try{return"Object("+JSON.stringify(p)+")"}catch{return"Object"}return p instanceof Error?`${p.name}: ${p.message}
${p.stack}`:M}function l(p,c,E,M){let y={a:p,b:c,cnt:1,dtor:E},_=(...ne)=>{y.cnt++;let ie=y.a;y.a=0;try{return M(ie,y.b,...ne)}finally{--y.cnt===0?t.exports.__wbindgen_export_2.get(y.dtor)(ie,y.b):y.a=ie}};return _.original=y,_}function b(p,c,E){t.modifiedExports._dyn_core__ops__function__FnMut__A____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__invoke__(p,c,G(E))}h.handle=function(p){var c=t.exports.handle(G(p));return H(c)};let d=32;function a(p){if(d==1)throw new Error("out of js stack");return C[--d]=p,d}h.initState=function(p){try{t.exports.initState(a(p))}finally{C[d++]=void 0}},h.currentState=function(){var p=t.exports.currentState();return H(p)},h.lang=function(){try{let E=t.exports.__wbindgen_add_to_stack_pointer(-16);t.exports.lang(E);var p=z()[E/4+0],c=z()[E/4+1];return A(p,c)}finally{t.exports.__wbindgen_add_to_stack_pointer(16),t.exports.__wbindgen_free(p,c)}},h.type=function(){var p=t.exports.type();return p};function u(p,c){try{return p.apply(this,c)}catch(E){t.exports.__wbindgen_exn_store(G(E))}}function v(p,c,E,M){t.modifiedExports.wasm_bindgen__convert__closures__invoke2_mut__(p,c,G(E),G(M))}class F{__destroy_into_raw(){let c=this.ptr;return this.ptr=0,c}free(){let c=this.__destroy_into_raw();t.exports.__wbg_statewrapper_free(c)}}return h.StateWrapper=F,g.metering=o.metering,{imports:g,exports:h}};var GA=new TextEncoder,vx=new TextDecoder("utf-8"),Jd=[],oo;(function(r){oo=r,oo.redstone={go:{}}}).call(void 0,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{});var Es=class{_callbackTimeouts;_nextCallbackTimeoutID;_inst;_values;_ids;_idPool;_goRefCounts;importObject;exited;_resolveCallbackPromise;_pendingEvent;_id;exports;constructor(e){this._callbackTimeouts=new Map,this._nextCallbackTimeoutID=1;let t=Ae.INST.create("WASM:Go"),n=this;oo.redstone.go={WasmModule:{registerWasmModule:function(A){n._id=A,n.exports=oo[A],delete oo[A],oo.redstone.go[A]={},oo.redstone.go[A].imports={console:{log:function(...C){t.debug(C[0],...C.slice(1))}},Transaction:{id:function(){return e.transaction.id},owner:function(){return e.transaction.owner},target:function(){return e.transaction.target}},Block:{indep_hash:function(){return e.block.indep_hash},height:function(){return e.block.height},timestamp:function(){return e.block.timestamp}},Contract:{id:function(){return e.contract.id},owner:function(){return e.contract.owner}},SmartWeave:{readContractState:async function(C){return await e.contracts.readContractState(C)}}}}}};let i=()=>new DataView(this._inst.exports.memory.buffer),o=(A,C)=>{i().setUint32(A+0,C,!0),i().setUint32(A+4,Math.floor(C/4294967296),!0)},s=A=>{let C=i().getUint32(A+0,!0),j=i().getInt32(A+4,!0);return C+j*4294967296},f=A=>{let C=i().getFloat64(A,!0);if(C===0)return;if(!isNaN(C))return C;let j=i().getUint32(A,!0);return this._values[j]},h=(A,C)=>{if(typeof C=="number"){if(isNaN(C)){i().setUint32(A+4,2146959360,!0),i().setUint32(A,0,!0);return}if(C===0){i().setUint32(A+4,2146959360,!0),i().setUint32(A,1,!0);return}i().setFloat64(A,C,!0);return}switch(C){case void 0:i().setFloat64(A,0,!0);return;case null:i().setUint32(A+4,2146959360,!0),i().setUint32(A,2,!0);return;case!0:i().setUint32(A+4,2146959360,!0),i().setUint32(A,3,!0);return;case!1:i().setUint32(A+4,2146959360,!0),i().setUint32(A,4,!0);return}let G=this._ids.get(C);G===void 0&&(G=this._idPool.pop(),G===void 0&&(G=this._values.length),this._values[G]=C,this._goRefCounts[G]=0,this._ids.set(C,G)),this._goRefCounts[G]++;let $=1;switch(typeof C){case"string":$=2;break;case"symbol":$=3;break;case"function":$=4;break}i().setUint32(A+4,2146959360|$,!0),i().setUint32(A,G,!0)},g=(A,C,j=null)=>new Uint8Array(this._inst.exports.memory.buffer,A,C),x=(A,C,j)=>{let G=new Array(C);for(let $=0;$<C;$++)G[$]=f(A+$*8);return G},T=(A,C)=>vx.decode(new DataView(this._inst.exports.memory.buffer,A,C)),I=Date.now()-performance.now();this.importObject={wasi_snapshot_preview1:{fd_write:function(A,C,j,G){let $=0;if(A==1)for(let Z=0;Z<j;Z++){let ee=C+Z*8,se=i().getUint32(ee+0,!0),V=i().getUint32(ee+4,!0);$+=V;for(let q=0;q<V;q++){let z=i().getUint8(se+q);if(z!=13)if(z==10){let J=vx.decode(new Uint8Array(Jd));Jd=[],console.log(J)}else Jd.push(z)}}else console.error("invalid file descriptor:",A);return i().setUint32(G,$,!0),0},fd_close:()=>0,fd_fdstat_get:()=>0,fd_seek:()=>0,proc_exit:A=>{if(global.process)process.exit(A);else throw"trying to exit with code "+A},random_get:(A,C)=>(crypto.getRandomValues(g(A,C,null)),0)},env:{"runtime.ticks":()=>I+performance.now(),"runtime.sleepTicks":A=>{setTimeout(this._inst.exports.go_scheduler,A)},"syscall/js.finalizeRef":A=>{let C=i().getUint32(A,!0);if(this._goRefCounts[C]--,this._goRefCounts[C]===0){let j=this._values[C];this._values[C]=null,this._ids.delete(j),this._idPool.push(C)}},"syscall/js.stringVal":(A,C,j)=>{let G=T(C,j);h(A,G)},"syscall/js.valueGet":(A,C,j,G)=>{let $=T(j,G),Z=f(C),ee=Reflect.get(Z,$);h(A,ee)},"syscall/js.valueSet":(A,C,j,G)=>{let $=f(A),Z=T(C,j),ee=f(G);Reflect.set($,Z,ee)},"syscall/js.valueDelete":(A,C,j)=>{let G=f(A),$=T(C,j);Reflect.deleteProperty(G,$)},"syscall/js.valueIndex":(A,C,j)=>{h(A,Reflect.get(f(C),j))},"syscall/js.valueSetIndex":(A,C,j)=>{Reflect.set(f(A),C,f(j))},"syscall/js.valueCall":(A,C,j,G,$,Z,ee)=>{let se=f(C),V=T(j,G),q=x($,Z,ee);try{let z=Reflect.get(se,V);h(A,Reflect.apply(z,se,q)),i().setUint8(A+8,1)}catch(z){h(A,z),i().setUint8(A+8,0)}},"syscall/js.valueInvoke":(A,C,j,G,$)=>{try{let Z=f(C),ee=x(j,G,$);h(A,Reflect.apply(Z,void 0,ee)),i().setUint8(A+8,1)}catch(Z){h(A,Z),i().setUint8(A+8,0)}},"syscall/js.valueNew":(A,C,j,G,$)=>{let Z=f(C),ee=x(j,G,$);try{h(A,Reflect.construct(Z,ee)),i().setUint8(A+8,1)}catch(se){h(A,se),i().setUint8(A+8,0)}},"syscall/js.valueLength":A=>f(A).length,"syscall/js.valuePrepareString":(A,C)=>{let j=String(f(C)),G=GA.encode(j);h(A,G),o(A+8,G.length)},"syscall/js.valueLoadString":(A,C,j,G)=>{let $=f(A);g(C,j,G).set($)},"syscall/js.valueInstanceOf":(A,C)=>f(A)instanceof f(C),"syscall/js.copyBytesToGo":(A,C,j,G,$)=>{let Z=A,ee=A+4,se=g(C,j),V=f($);if(!(V instanceof Uint8Array)){i().setUint8(ee,0);return}let q=V.subarray(0,se.length);se.set(q),o(Z,q.length),i().setUint8(ee,1)},"syscall/js.copyBytesToJS":(A,C,j,G,$)=>{let Z=A,ee=A+4,se=f(C),V=g(j,G);if(!(se instanceof Uint8Array)){i().setUint8(ee,0);return}let q=V.subarray(0,se.length);se.set(q),o(Z,q.length),i().setUint8(ee,1)}}}}async run(e){this._inst=e,this._values=[NaN,0,null,!0,!1,global,this],this._goRefCounts=[],this._ids=new Map,this._idPool=[],this.exited=!1;let t=new DataView(this._inst.exports.memory.buffer);for(;;){let n=new Promise(i=>{this._resolveCallbackPromise=()=>{if(this.exited)throw new Error("bad callback: Go program has already exited");setTimeout(i,0)}});if(this._inst.exports._start(),this.exited)break;await n}}_resume(){if(this.exited)throw new Error("Go program has already exited");this._inst.exports.resume(),this.exited&&this._resolveExitPromise()}_makeFuncWrapper(e){let t=this;return function(){let n={id:e,this:this,args:arguments};return t._pendingEvent=n,t._resume(),n.result}}_resolveExitPromise(){}};var Tu=ct(wx());var nf=class{gasUsed;gasLimit;transaction;block;vrf;evaluationOptions;arweave;contract;unsafeClient;contracts;extensions;_activeTx;caller;constructor(e,t,n){this.gasUsed=0,this.gasLimit=Number.MAX_SAFE_INTEGER,this.unsafeClient=e,this.arweave={ar:e.ar,utils:e.utils,wallets:e.wallets,crypto:e.crypto},this.evaluationOptions=n,this.contract=t,this.transaction=new Yd(this),this.block=new Qd(this),this.contracts={readContractState:(i,o,s)=>{throw new Error("Not implemented - should be set by HandlerApi implementor")},viewContractState:(i,o)=>{throw new Error("Not implemented - should be set by HandlerApi implementor")},write:(i,o,s)=>{throw new Error("Not implemented - should be set by HandlerApi implementor")},refreshState:()=>{throw new Error("Not implemented - should be set by HandlerApi implementor")}},this.vrf=new Zd(this),this.useGas=this.useGas.bind(this),this.getBalance=this.getBalance.bind(this),this.extensions={}}useGas(e){if(e<0)throw new Error("[RE:GNE] Gas number exception - gas < 0.");if(this.gasUsed+=e,this.gasUsed>this.gasLimit)throw new Error(`[RE:OOG] Out of gas! Used: ${this.gasUsed}, limit: ${this.gasLimit}`)}async getBalance(e,t){if(!this._activeTx)throw new Error("Cannot read balance - active tx is not set.");if(!this.block.height)throw new Error("Cannot read balance - block height not set.");let n=t||this.block.height;return await fetch(`${this.evaluationOptions.walletBalanceUrl}block/height/${n}/wallet/${e}/balance`).then(i=>i.ok?i.text():Promise.reject(i)).catch(i=>{throw new Error(`Unable to read wallet balance. ${i.status}. ${i.body?.message}`)})}},Yd=class{constructor(e){this.smartWeaveGlobal=e}get id(){if(!this.smartWeaveGlobal._activeTx)throw new Error("No current Tx");return this.smartWeaveGlobal._activeTx.id}get owner(){if(!this.smartWeaveGlobal._activeTx)throw new Error("No current Tx");return this.smartWeaveGlobal._activeTx.owner.address}get target(){if(!this.smartWeaveGlobal._activeTx)throw new Error("No current Tx");return this.smartWeaveGlobal._activeTx.recipient}get tags(){if(!this.smartWeaveGlobal._activeTx)throw new Error("No current Tx");return this.smartWeaveGlobal._activeTx.tags}get quantity(){if(!this.smartWeaveGlobal._activeTx)throw new Error("No current Tx");return this.smartWeaveGlobal._activeTx.quantity.winston}get reward(){if(!this.smartWeaveGlobal._activeTx)throw new Error("No current Tx");return this.smartWeaveGlobal._activeTx.fee.winston}},Qd=class{constructor(e){this.smartWeaveGlobal=e}get height(){if(!this.smartWeaveGlobal._activeTx)throw new Error("No current Tx");return this.smartWeaveGlobal._activeTx.block.height}get indep_hash(){if(!this.smartWeaveGlobal._activeTx)throw new Error("No current Tx");return this.smartWeaveGlobal._activeTx.block.id}get timestamp(){if(!this.smartWeaveGlobal._activeTx)throw new Error("No current tx");return this.smartWeaveGlobal._activeTx.block.timestamp}},Zd=class{constructor(e){this.smartWeaveGlobal=e}get data(){return this.smartWeaveGlobal._activeTx.vrf}get value(){return this.smartWeaveGlobal._activeTx.vrf.bigint}randomInt(e){if(!Number.isInteger(e))throw new Error("Integer max value required for random integer generation");let t=BigInt(this.smartWeaveGlobal._activeTx.vrf.bigint)%BigInt(e)+BigInt(1);if(t>Number.MAX_SAFE_INTEGER||t<Number.MIN_SAFE_INTEGER)throw new Error("Random int cannot be cast to number");return Number(t)}};var of=class extends Error{constructor(e){super(e),this.name="ContractError"}};var so=class{constructor(e,t){this.swGlobal=e;this.contractDefinition=t;this.assignReadContractState=this.assignReadContractState.bind(this),this.assignViewContractState=this.assignViewContractState.bind(this),this.assignWrite=this.assignWrite.bind(this),this.assignRefreshState=this.assignRefreshState.bind(this)}logger=Ae.INST.create("ContractHandler");async dispose(){}assignWrite(e,t){this.swGlobal.contracts.write=async(n,i,o)=>{if(!e.evaluationOptions.internalWrites)throw new Error("Internal writes feature switched off. Change EvaluationOptions.internalWrites flag to 'true'");let s=o??e.evaluationOptions.throwOnInternalWriteError,f={from:this.contractDefinition.txId,to:n,input:i};this.logger.debug("swGlobal.write call:",f);let g=await e.warp.contract(n,e.contract,{callingInteraction:this.swGlobal._activeTx,callType:"write"}).dryWriteFromTx(i,this.swGlobal._activeTx,[...t||[],{contractTxId:this.contractDefinition.txId,interactionTxId:this.swGlobal.transaction.id}]);this.logger.debug("Cache result?:",!this.swGlobal._activeTx.dry);let x=g.type!=="ok"&&s&&(!this.swGlobal._activeTx.dry||this.swGlobal._activeTx.dry&&this.swGlobal._activeTx.strict),T=x?`Internal write auto error for call [${JSON.stringify(f)}]: ${g.errorMessage}`:g.errorMessage;if(await e.warp.stateEvaluator.onInternalWriteStateUpdate(this.swGlobal._activeTx,n,{state:g.state,validity:{...g.originalValidity,[this.swGlobal._activeTx.id]:g.type=="ok"},errorMessages:{...g.originalErrorMessages,[this.swGlobal._activeTx.id]:T}}),x)throw new of(T);return g}}assignViewContractState(e){this.swGlobal.contracts.viewContractState=async(t,n)=>(this.logger.debug("swGlobal.viewContractState call:",{from:this.contractDefinition.txId,to:t,input:n}),await e.warp.contract(t,e.contract,{callingInteraction:this.swGlobal._activeTx,callType:"view"}).viewStateForTx(n,this.swGlobal._activeTx))}assignReadContractState(e,t,n,i){this.swGlobal.contracts.readContractState=async(o,s)=>{this.logger.debug("swGlobal.readContractState call:",{from:this.contractDefinition.txId,to:o,sortKey:i.sortKey,transaction:this.swGlobal.transaction.id});let{stateEvaluator:f}=e.warp,h=e.warp.contract(o,e.contract,{callingInteraction:i,callType:"read"});await f.onContractCall(i,e,n);let g=await h.readState(i.sortKey,[...t||[],{contractTxId:this.contractDefinition.txId,interactionTxId:this.swGlobal.transaction.id}]);return s?hs(g):hs(g.cachedValue.state)}}assignRefreshState(e){this.swGlobal.contracts.refreshState=async()=>(await e.warp.stateEvaluator.latestAvailableState(this.swGlobal.contract.id,this.swGlobal._activeTx.sortKey))?.cachedValue.state}};var As=class extends so{constructor(t,n,i){super(t,n);this.contractFunction=i}async handle(t,n,i){let{timeoutId:o,timeoutPromise:s}=gd(t.evaluationOptions.maxInteractionEvaluationTimeSeconds);try{let{interaction:f,interactionTx:h,currentTx:g}=i,x=hs(n.state);this.swGlobal._activeTx=h,this.swGlobal.caller=f.caller,this.assignReadContractState(t,g,n,h),this.assignViewContractState(t),this.assignWrite(t,g),this.assignRefreshState(t);let{warp:T}=t;T.hasPlugin("smartweave-extension")&&T.loadPlugin("smartweave-extension").process(this.swGlobal.extensions);let I=await Promise.race([s,this.contractFunction(x,f)]);if(I&&(I.state!==void 0||I.result!==void 0))return{type:"ok",result:I.result,state:I.state||n.state};throw new Error(`Unexpected result from contract: ${JSON.stringify(I)}`)}catch(f){switch(f.name){case"ContractError":return{type:"error",errorMessage:f.message,state:n.state,result:null};default:return{type:"exception",errorMessage:`${f&&f.stack||f&&f.message||f}`,state:n.state,result:null}}}finally{o!==null&&clearTimeout(o)}}initState(t){}};var sp=ct(Ax(),1),jB=sp.default.configure;var co=sp.default;var sf=class extends so{constructor(t,n,i){super(t,n);this.wasmExports=i}async handle(t,n,i){try{let{interaction:o,interactionTx:s,currentTx:f}=i;return this.swGlobal._activeTx=s,this.swGlobal.caller=o.caller,this.swGlobal.gasLimit=t.evaluationOptions.gasLimit,this.swGlobal.gasUsed=0,this.assignReadContractState(t,f,n,s),this.assignWrite(t,f),{type:"ok",result:await this.doHandle(o),state:this.doGetCurrentState(),gasUsed:this.swGlobal.gasUsed}}catch(o){let s={errorMessage:o.message,state:n.state,result:null};return o.message.startsWith("[RE:")?(this.logger.fatal(o),{...s,type:"exception"}):{...s,type:"error"}}}initState(t){switch(this.contractDefinition.srcWasmLang){case"assemblyscript":{let n=this.wasmExports.__newString(co(t));this.wasmExports.initState(n);break}case"rust":{this.wasmExports.initState(t);break}case"go":{this.wasmExports.initState(co(t));break}default:throw new Error(`Support for ${this.contractDefinition.srcWasmLang} not implemented yet.`)}}async doHandle(t){switch(this.contractDefinition.srcWasmLang){case"assemblyscript":{let n=this.wasmExports.__newString(co(t.input)),i=this.wasmExports.handle(n),o=this.wasmExports.__getString(i);return JSON.parse(o)}case"rust":{let n=await this.wasmExports.handle(t.input);if(!n)return;if(Object.prototype.hasOwnProperty.call(n,"Ok"))return n.Ok;{this.logger.debug("Error from rust",n.Err);let i,o="";throw typeof n.Err=="string"||n.Err instanceof String?i=n.Err:(i=Object.keys(n.Err)[0],o=" "+n.Err[i]),i=="RuntimeError"?new Error(`[RE:RE]${o}`):new Error(`[CE:${i}${o}]`)}}case"go":{let n=await this.wasmExports.handle(co(t.input));return JSON.parse(n)}default:throw new Error(`Support for ${this.contractDefinition.srcWasmLang} not implemented yet.`)}}doGetCurrentState(){switch(this.contractDefinition.srcWasmLang){case"assemblyscript":{let t=this.wasmExports.currentState();return JSON.parse(this.wasmExports.__getString(t))}case"rust":return this.wasmExports.currentState();case"go":{let t=this.wasmExports.currentState();return JSON.parse(t)}default:throw new Error(`Support for ${this.contractDefinition.srcWasmLang} not implemented yet.`)}}};function ap(r,e){let t=r.trim().split(`
`),n=t[0],i=t[t.length-1];return(/\(\s*\(\)\s*=>\s*{/g.test(n)||/\s*\(\s*function\s*\(\)\s*{/g.test(n))&&/}\s*\)\s*\(\)\s*;/g.test(i)&&(t.shift(),t.pop(),r=t.join(`
`)),r=r.replace(/export\s+async\s+function\s+handle/gmu,"async function handle").replace(/export\s+function\s+handle/gmu,"function handle"),e?`
    ${r}
    module.exports = handle;`:`
    const [SmartWeave, BigNumber, logger] = arguments;
    class ContractError extends Error { constructor(message) { super(message); this.name = 'ContractError' } };
    function ContractAssert(cond, message) { if (!cond) throw new ContractError(message) };
    ${r};
    return handle;
  `}var fp=ct(Tx()),Fu=class extends Error{constructor(e){super(e),this.name="ContractError"}},af=class{constructor(e){this.arweave=e}logger=Ae.INST.create("HandlerExecutorFactory");cache=new qi;async create(e,t,n){let i=new nf(this.arweave,{id:e.txId,owner:e.owner},t);if(e.contractType=="wasm"){this.logger.info("Creating handler for wasm contract",e.txId);let o=et.measure(),s,f=null,h=eF(e.srcBinary);switch(e.srcWasmLang){case"assemblyscript":{let g={exports:null};s=await mx.instantiateStreaming(h,yx(i,g)),g.exports=s.exports;break}case"rust":{let g={exports:null,modifiedExports:{wasm_bindgen__convert__closures__invoke2_mut__:null,_dyn_core__ops__function__FnMut__A____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__invoke__:null}},x=await Mx(h,e.srcBinary),I=WebAssembly.Module.imports(x).filter(G=>G.module==="__wbindgen_placeholder__").map(G=>G.name),{imports:A,exports:C}=bx(i,I,g,e.metadata.dtor);f=C,s=await WebAssembly.instantiate(x,A),g.exports=s.exports,Object.keys(s.exports).forEach(G=>{G.startsWith("wasm_bindgen__convert__closures__invoke2_mut__")&&(g.modifiedExports.wasm_bindgen__convert__closures__invoke2_mut__=s.exports[G]),G.startsWith("_dyn_core__ops__function__FnMut__A____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__invoke__")&&(g.modifiedExports._dyn_core__ops__function__FnMut__A____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__invoke__=s.exports[G])});break}case"go":{let g=new Es(i);g.importObject.metering={usegas:function(T){i.useGas(T)}};let x=await Mx(h,e.srcBinary);s=await WebAssembly.instantiate(x,g.importObject),g.run(s),f=g.exports;break}default:throw new Error(`Support for ${e.srcWasmLang} not implemented yet.`)}return this.logger.info(`WASM ${e.srcWasmLang} handler created in ${o.elapsed()}`),new sf(i,e,f||s.exports)}else{this.logger.info("Creating handler for js contract",e.txId);let o=ap(e.src,t.useVM2);if(!t.allowUnsafeClient&&o.includes("SmartWeave.unsafeClient"))throw new Error("Using unsafeClient is not allowed by default. Use EvaluationOptions.allowUnsafeClient flag.");if(!t.allowBigInt&&o.includes("BigInt"))throw new Error("Using BigInt is not allowed by default. Use EvaluationOptions.allowBigInt flag.");if(t.useVM2){let s=new Tu.VMScript(o),f=new Tu.NodeVM({console:"off",sandbox:{SmartWeave:i,BigNumber:fp.default,logger:this.logger,ContractError:Fu,ContractAssert:function(h,g){if(!h)throw new Fu(g)}},compiler:"javascript",eval:!1,wasm:!1,allowAsync:!0,wrapper:"commonjs"});return new As(i,e,f.run(s))}else{if(n.hasPlugin("ivm-handler-api"))return n.loadPlugin("ivm-handler-api").process({contractSource:e.src,evaluationOptions:t,arweave:this.arweave,swGlobal:i,contractDefinition:e});{let f=new Function(o)(i,fp.default,Ae.INST.create(i.contract.id));return new As(i,e,f)}}}}};function eF(r){let e={status:200,statusText:"OK",headers:{"Content-Type":"application/wasm"}};return new Response(r,e)}async function Mx(r,e){return WebAssembly.compileStreaming?await WebAssembly.compileStreaming(r):await WebAssembly.compile(e)}var An=class{signer;type;warp;constructor(e,t){if(this.warp=e,this.isSignatureType(t)){if(t.type!=="arweave"&&(this.warp.environment!="mainnet"||this.warp.interactionsLoader.type()!="warp"))throw new Error(`Unable to use signing function of type: ${t.type} when not in mainnet environment or bundling is disabled.`);this.signer=t.signer,this.type=t.type}else this.signer=async n=>{await this.warp.arweave.transactions.sign(n,t)},this.type="arweave"}checkNonArweaveSigningAvailability(e){if(this.type!=="arweave"&&!e)throw new Error(`Unable to use signing function of type: ${this.type} when bundling is disabled.`)}isSignatureType(e){return e.signer!==void 0}};var l6=ct(o6());var h6=ct(s6());function a6(r){let e=/(const|var) ret = makeMutClosure\(arg0, arg1, (\d+?), __wbg_adapter/;return r.match(e)[2]}var ti=ct(ls());var u6=new Map([[1,"assemblyscript"],[2,"rust"],[3,"go"]]),po=class{constructor(e){this.warp=e}logger=Ae.INST.create("Source");signature;async save(e,t,n,i=!1){this.logger.debug("Creating new contract source");let{src:o,wasmSrcCodeDir:s,wasmGlueCode:f}=e;this.signature=new An(this.warp,n);let h=this.signature.signer;this.signature.checkNonArweaveSigningAvailability(i);let g=o instanceof ti.Buffer?"wasm":"js",x,T=null,I=null,A={},C=[];if(g=="wasm"){let Z=l6.default.meterWASM(o,{meterType:"i32"});C.push(Z);let ee=await WebAssembly.compile(o),se=WebAssembly.Module.imports(ee),V;if(this.isGoModule(se)){let z=new Es(null),J=new WebAssembly.Instance(ee,z.importObject);z.run(J),V=z.exports.lang(),I=z.exports.version()}else{let z=await WebAssembly.instantiate(o,_F(se));if(!z.instance.exports.lang)throw new Error('No info about source type in wasm binary. Did you forget to export "lang" function?');if(V=z.instance.exports.lang(),I=z.instance.exports.version(),!u6.has(V))throw new Error(`Unknown wasm source type ${V}`)}if(T=u6.get(V),s==null)throw new Error("No path to original wasm contract source code");let q=await this.zipContents(s);if(C.push(q),T=="rust"){if(!f)throw new Error("No path to generated wasm-bindgen js code");let z=h6.default.readFileSync(f,"utf-8"),J=a6(z);A.dtor=parseInt(J),C.push(ti.Buffer.from(z))}}let j=g=="wasm"?this.joinBuffers(C):o;x=await this.warp.arweave.createTransaction({data:j}),x.addTag("App-Name","SmartWeaveContractSource"),x.addTag("App-Version","0.3.0"),x.addTag("SDK","Warp"),x.addTag("Content-Type",g=="js"?"application/javascript":"application/wasm"),g=="wasm"&&(x.addTag("Wasm-Lang",T),x.addTag("Wasm-Lang-Version",I),x.addTag("Wasm-Meta",JSON.stringify(A))),t==="testnet"&&x.addTag("Warp-Testnet","1.0.0"),await h(x),this.logger.debug("Posting transaction with source");let G=!0,$;if(i||($=await this.warp.arweave.transactions.post(x),G=$.status===200||$.status===208),G)return x;throw new Error(`Unable to write Contract Source. Arweave responded with status ${$.status}: ${$.statusText}`)}isGoModule(e){return e.some(t=>t.module=="env"&&t.name.startsWith("syscall/js"))}joinBuffers(e){let t=e.length,n=[];return n.push(ti.Buffer.from(t.toString())),n.push(ti.Buffer.from("|")),e.forEach(i=>{n.push(ti.Buffer.from(i.length.toString())),n.push(ti.Buffer.from("|"))}),n.push(...e),n.reduce((i,o)=>ti.Buffer.concat([i,o]))}async zipContents(e){let t=f6(),n=c6(),i=new n.WritableStreamBuffer({initialSize:1e3*1024,incrementAmount:1e3*1024}),o=t("zip",{zlib:{level:9}});return o.on("error",function(s){throw s}),o.pipe(i),o.directory(e.toString(),e.toString()),await o.finalize(),i.end(),i.getContents()}};function _F(r){let e={};return r.forEach(t=>{Object.prototype.hasOwnProperty.call(e,t.module)||(e[t.module]={}),e[t.module][t.name]=function(){}}),e}var uf=class{constructor(e,t){this.arweave=e;this.warp=t;this.deployFromSourceTx=this.deployFromSourceTx.bind(this)}logger=Ae.INST.create("DefaultCreateContract");signature;async deploy(e,t){let{wallet:n,initState:i,tags:o,transfer:s,data:f}=e,h=t==null?this.warp.definitionLoader.type()=="warp":!t,x=await new po(this.warp).save(e,this.warp.environment,n,h);return this.logger.debug("Creating new contract"),await this.deployFromSourceTx({srcTxId:x.id,wallet:n,initState:i,tags:o,transfer:s,data:f},!h,x)}async deployFromSourceTx(e,t,n=null){this.logger.debug("Creating new contract from src tx");let{wallet:i,srcTxId:o,initState:s,tags:f,transfer:h,data:g}=e;this.signature=new An(this.warp,i);let x=this.signature.signer,T=t==null?this.warp.definitionLoader.type()=="warp":!t;this.signature.checkNonArweaveSigningAvailability(T);let I=await this.arweave.createTransaction({data:g?.body||s});if(+h?.winstonQty>0&&h.target.length&&(this.logger.debug("Creating additional transaction with AR transfer",h),I=await this.arweave.createTransaction({data:g?.body||s,target:h.target,quantity:h.winstonQty})),f?.length)for(let j of f)I.addTag(j.name.toString(),j.value.toString());I.addTag("App-Name","SmartWeaveContract"),I.addTag("App-Version","0.3.0"),I.addTag("Contract-Src",o),I.addTag("SDK","RedStone"),g?(I.addTag("Content-Type",g["Content-Type"]),I.addTag("Init-State",s)):I.addTag("Content-Type","application/json"),this.warp.environment==="testnet"&&I.addTag("Warp-Testnet","1.0.0"),await x(I);let A,C;if(T){let j=await this.post(I,n);this.logger.debug(j),A=!0}else C=await this.arweave.transactions.post(I),A=C.status===200||C.status===208;if(A)return{contractTxId:I.id,srcTxId:o};throw new Error(`Unable to write Contract. Arweave responded with status ${C.status}: ${C.statusText}`)}async deployBundled(e){let t=await fetch(`${ri}/gateway/contracts/deploy-bundled`,{method:"POST",headers:{"Content-Type":"application/octet-stream",Accept:"application/json"},body:e});if(t.ok)return t.json();throw typeof t.json=="function"&&t.json().then(n=>{n.message&&this.logger.error(n.message)}),new Error(`Error while deploying data item. Warp Gateway responded with status ${t.status} ${t.statusText}`)}async post(e,t=null){let n={contractTx:e};t&&(n={...n,srcTx:t});let i=await fetch(`${ri}/gateway/contracts/deploy`,{method:"POST",body:JSON.stringify(n),headers:{"Accept-Encoding":"gzip, deflate, br","Content-Type":"application/json",Accept:"application/json"}});if(i.ok)return i.json();throw new Error(`Error while posting contract. Sequencer responded with status ${i.status} ${i.statusText}`)}};var m6=ct(Oa());var go=class{constructor(e,t,n=null){this.contractTxId=e;this.depth=t;this.innerCallType=n;this.id=yd()}interactions={};id;addInteractionData(e){let{interaction:t,interactionTx:n}=e,i=Ts.create(new Pu(n.id,n.sortKey,n.block.height,n.block.timestamp,t?.caller,t?.input.function,t?.input,n.dry,{}));return this.interactions[n.id]=i,i}getInteraction(e){return this.interactions[e]}print(){return JSON.stringify(this,null,2)}},Ts=class{constructor(e){this.interactionInput=e}interactionOutput;static create(e){return new Ts(e)}update(e){this.interactionOutput=e}},Pu=class{constructor(e,t,n,i,o,s,f,h,g={}){this.txId=e;this.sortKey=t;this.blockHeight=n;this.blockTimestamp=i;this.caller=o;this.functionName=s;this.functionArguments=f;this.dryWrite=h;this.foreignContractCalls=g}},Sp=class{constructor(e,t,n,i,o="",s){this.cacheHit=e;this.outputState=t;this.executionTime=n;this.valid=i;this.errorMessage=o;this.gasUsed=s}};async function Nu(r,e,t,n,i,o="",s="0",f=!1,h,g){let x={data:Math.random().toString().slice(-4)};o&&o.length&&(x.target=o.toString(),s&&+s>0&&(x.quantity=s.toString())),f&&(x.reward="72600854",x.last_tx="p7vc1iSP6bvH_fCeUFa9LqoV5qiyW-jdEKouAT0XMoSwrNraB9mgpi29Q10waEpO"),g&&g.length&&(x.reward=g);let T=await r.createTransaction(x);if(!n)throw new Error(`Input should be a truthy value: ${JSON.stringify(n)}`);if(i&&i.length)for(let I of i)T.addTag(I.name.toString(),I.value.toString());return T.addTag("App-Name","SmartWeaveAction"),T.addTag("App-Version","0.3.0"),T.addTag("SDK","Warp"),T.addTag("Contract",t),T.addTag("Input",JSON.stringify(n)),h&&T.addTag("Warp-Testnet","1.0.0"),e&&await e(T),T}function Ep(r,e,t){let i=new ir().decodeTags(r);return{id:r.id,owner:{address:e,key:""},recipient:r.target,tags:i,fee:{winston:r.reward,ar:""},quantity:{winston:r.quantity,ar:""},block:{id:t.indep_hash,height:t.height,timestamp:t.timestamp,previous:null},dry:!0,anchor:null,signature:null,data:null,parent:null,bundledIn:null}}var ni={target:"",winstonQty:"0"};var lf=class{eval(e){let t=[];return Object.keys(e.interactions).forEach(n=>{let i=e.interactions[n];this.evalForeignCalls(e.contractTxId,i,t)}),t}evalForeignCalls(e,t,n){Object.keys(t.interactionInput.foreignContractCalls).forEach(i=>{let o=t.interactionInput.foreignContractCalls[i];Object.keys(o.interactions).forEach(s=>{let f=o.interactions[s];f.interactionInput.dryWrite&&!n.includes(o.contractTxId)&&e!==o.contractTxId&&n.push(o.contractTxId),this.evalForeignCalls(e,f,n)})})}};var d6=ct(wu()),p6=ct(Hd());var SF=new d6.default.ec("secp256k1"),g6=SF.genKeyPair(),EF=g6.getPublic(!0,"hex");function ku(r,e){let t=e.utils.stringToBuffer(r),[n,i]=(0,p6.Evaluate)(g6.getPrivate().toArray(),t);return{index:e.utils.bufferTob64Url(n),proof:e.utils.bufferTob64Url(i),bigint:md(n).toString(),pubkey:EF}}var mo=class{constructor(e,t,n=null,i=null){this._contractTxId=e;this.warp=t;this._parentContract=n;this._innerCallData=i;if(this.waitForConfirmation=this.waitForConfirmation.bind(this),this._arweaveWrapper=new Pr(t.arweave),this._sorter=new io(t.arweave),n!=null){this._evaluationOptions=n.evaluationOptions(),this._callDepth=n.callDepth()+1;let o=n.getCallStack().getInteraction(i.callingInteraction.id);if(this._callDepth>this._evaluationOptions.maxCallDepth)throw Error(`Max call depth of ${this._evaluationOptions.maxCallDepth} has been exceeded for interaction ${JSON.stringify(o.interactionInput)}`);if(this.logger.debug("Calling interaction",{id:i.callingInteraction.id,sortKey:i.callingInteraction.sortKey,type:i.callType}),o.interactionInput?.foreignContractCalls[e]?.innerCallType==="write"&&i.callType==="read")throw new Error("Calling a readContractState after performing an inner write is wrong - instead use a state from the result of an internal write.");let s=new go(e,this._callDepth,i?.callType);o.interactionInput.foreignContractCalls[e]=s,this._callStack=s,this._rootSortKey=n.rootSortKey}else this._callDepth=0,this._callStack=new go(e,0),this._rootSortKey=null;this.getCallStack=this.getCallStack.bind(this)}logger=Ae.INST.create("HandlerBasedContract");_callStack;_evaluationOptions=new ca;_innerWritesEvaluator=new lf;_callDepth;_benchmarkStats=null;_arweaveWrapper;_sorter;_rootSortKey;signature;async readState(e,t,n){this.logger.info("Read state for",{contractTxId:this._contractTxId,currentTx:t,sortKeyOrBlockHeight:e});let i=et.measure();if(this.maybeResetRootContract(),this._parentContract!=null&&e==null)throw new Error("SortKey MUST be always set for non-root contract calls");let{stateEvaluator:o}=this.warp,s=typeof e=="number"?this._sorter.generateLastSortKey(e):e,f=await this.createExecutionContext(this._contractTxId,s,!1,n);this.logger.info("Execution Context",{srcTxId:f.contractDefinition?.srcTxId,missingInteractions:f.sortedInteractions?.length,cachedSortKey:f.cachedState?.sortKey}),i.stop();let h=et.measure(),g=await o.eval(f,t||[]);h.stop();let x=i.elapsed(!0)+h.elapsed(!0);return this._benchmarkStats={gatewayCommunication:i.elapsed(!0),stateEvaluation:h.elapsed(!0),total:x},this.logger.info("Benchmark",{"Gateway communication  ":i.elapsed(),"Contract evaluation    ":h.elapsed(),"Total:                 ":`${x.toFixed(0)}ms`}),g}async readStateFor(e){return this.readState(void 0,void 0,e)}async viewState(e,t=[],n=ni){return this.logger.info("View state for",this._contractTxId),await this.callContract(e,void 0,void 0,t,n)}async viewStateForTx(e,t){return this.logger.info(`View state for ${this._contractTxId}`,t),await this.callContractForTx(e,t)}async dryWrite(e,t,n,i){return this.logger.info("Dry-write for",this._contractTxId),await this.callContract(e,t,void 0,n,i)}async dryWriteFromTx(e,t,n){return this.logger.info(`Dry-write from transaction ${t.id} for ${this._contractTxId}`),await this.callContractForTx(e,t,n||[])}async writeInteraction(e,t){if(this.logger.info("Write interaction",{input:e,options:t}),!this.signature)throw new Error("Wallet not connected. Use 'connect' method first.");let{arweave:n,interactionsLoader:i,environment:o}=this.warp;await this.warp.definitionLoader.load(this._contractTxId);let s=t?.tags||[],f=t?.transfer||ni,h=t?.strict===!0,g=t?.vrf===!0,x=t?.disableBundling===!0,T=t?.reward,I=i.type()=="warp"&&!x;if(this.signature.checkNonArweaveSigningAvailability(I),I&&f.target!=ni.target&&f.winstonQty!=ni.winstonQty)throw new Error("Ar Transfers are not allowed for bundled interactions");if(g&&!I&&o==="mainnet")throw new Error("Vrf generation is only available for bundle interaction");if(I)return await this.bundleInteraction(e,{tags:s,strict:h,vrf:g});{let A=await this.createInteraction(e,s,f,h,!1,g&&o!=="mainnet",T),C=await n.transactions.post(A);if(C.status!==200)return this.logger.error("Error while posting transaction",C),null;if(this._evaluationOptions.waitForConfirmation){this.logger.info("Waiting for confirmation of",A.id);let j=et.measure();await this.waitForConfirmation(A.id),this.logger.info("Transaction confirmed after",j.elapsed())}return this.warp.environment=="local"&&this._evaluationOptions.mineArLocalBlocks&&await this.warp.testing.mineBlock(),{originalTxId:A.id}}}async bundleInteraction(e,t){this.logger.info("Bundle interaction input",e);let n=await this.createInteraction(e,t.tags,ni,t.strict,!0,t.vrf);return{bundlrResponse:await fetch(`${this._evaluationOptions.bundlerUrl}gateway/sequencer/register`,{method:"POST",body:JSON.stringify(n),headers:{"Accept-Encoding":"gzip, deflate, br","Content-Type":"application/json",Accept:"application/json"}}).then(o=>(this.logger.debug(o),o.ok?o.json():Promise.reject(o))).catch(o=>{throw this.logger.error(o),o.body?.message&&this.logger.error(o.body.message),new Error(`Unable to bundle interaction: ${JSON.stringify(o)}`)}),originalTxId:n.id}}async createInteraction(e,t,n,i,o=!1,s=!1,f){if(this._evaluationOptions.internalWrites){let g=await this.callContract(e,void 0,void 0,t,n,i,s);if(i&&g.type!=="ok")throw Error(`Cannot create interaction: ${g.errorMessage}`);let x=this.getCallStack(),T=this._innerWritesEvaluator.eval(x);this.logger.debug("Input",e),this.logger.debug("Callstack",x.print()),T.forEach(I=>{t.push({name:"Interact-Write",value:I})}),this.logger.debug("Tags with inner calls",t)}else if(i){let g=await this.callContract(e,void 0,void 0,t,n,i,s);if(g.type!=="ok")throw Error(`Cannot create interaction: ${g.errorMessage}`)}return s&&t.push({name:"Request-Vrf",value:"true"}),await Nu(this.warp.arweave,this.signature.signer,this._contractTxId,e,t,n.target,n.winstonQty,o,this.warp.environment==="testnet",f)}txId(){return this._contractTxId}getCallStack(){return this._callStack}connect(e){return this.signature=new An(this.warp,e),this}setEvaluationOptions(e){return this._evaluationOptions={...this._evaluationOptions,...e},this}async waitForConfirmation(e){let{arweave:t}=this.warp,n=await t.transactions.getStatus(e);if(n.confirmed===null)this.logger.info(`Transaction ${e} not yet confirmed. Waiting another 20 seconds before next check.`),await Ka(2e4),await this.waitForConfirmation(e);else return this.logger.info(`Transaction ${e} confirmed`,n),n}async createExecutionContext(e,t,n=!1,i){let{definitionLoader:o,interactionsLoader:s,executorFactory:f,stateEvaluator:h}=this.warp,g=et.measure(),x=await h.latestAvailableState(e,t);this.logger.debug("cache lookup",g.elapsed()),g.reset();let T=Gn.evolvedSrcTxId(x?.cachedValue?.state),I,A,C;return this.logger.debug("Cached state",x,t),x&&x.sortKey==t?(this.logger.debug("State fully cached, not loading interactions."),(n||T)&&(A=await o.load(e,T),I=await f.create(A,this._evaluationOptions,this.warp))):([A,C]=await Promise.all([o.load(e,T),i?Promise.resolve(i):await s.load(e,x?.sortKey,this.getToSortKey(t),this._evaluationOptions)]),x?.sortKey&&(C=C.filter(j=>j.sortKey.localeCompare(x?.sortKey)>0)),t&&(C=C.filter(j=>j.sortKey.localeCompare(t)<=0)),this.logger.debug("contract and interactions load",g.elapsed()),this._parentContract==null&&C.length&&(this._rootSortKey=C[C.length-1].sortKey),I=await f.create(A,this._evaluationOptions,this.warp)),{warp:this.warp,contract:this,contractDefinition:A,sortedInteractions:C,evaluationOptions:this._evaluationOptions,handler:I,cachedState:x,requestedSortKey:t}}getToSortKey(e){return this._parentContract?.rootSortKey?e?this._parentContract.rootSortKey.localeCompare(e)>0?this._parentContract.rootSortKey:e:this._parentContract.rootSortKey:e}async createExecutionContextFromTx(e,t){let n=t.owner.address,i=t.sortKey;return{...await this.createExecutionContext(e,i,!0),caller:n}}maybeResetRootContract(){this._parentContract==null&&(this.logger.debug("Clearing call stack for the root contract"),this._callStack=new go(this.txId(),0),this._rootSortKey=null,this.warp.interactionsLoader.clearCache())}async callContract(e,t,n,i=[],o=ni,s=!1,f=!1){this.logger.info("Call contract input",e),this.maybeResetRootContract(),this.signature||this.logger.warn("Wallet not set.");let{arweave:h,stateEvaluator:g}=this.warp,x=await this.createExecutionContext(this._contractTxId,n,!0),T=this.warp.environment=="mainnet"?await this._arweaveWrapper.warpGwBlock():await h.blocks.getCurrent(),I;if(t)I=t;else if(this.signature){let Z=await h.createTransaction({data:Math.random().toString().slice(-4),reward:"72600854",last_tx:"p7vc1iSP6bvH_fCeUFa9LqoV5qiyW-jdEKouAT0XMoSwrNraB9mgpi29Q10waEpO"});await this.signature.signer(Z),I=await h.wallets.ownerToAddress(Z.owner)}else I="";this.logger.info("effectiveCaller",I),x={...x,caller:I};let A=await g.eval(x,[]);this.logger.info("Current state",A.cachedValue.state);let C={input:e,caller:x.caller};this.logger.debug("interaction",C);let j=await Nu(h,this.signature?.signer,this._contractTxId,e,i,o.target,o.winstonQty,!0,this.warp.environment==="testnet"),G=Ep(j,x.caller,T);this.logger.debug("Creating sortKey for",{blockId:G.block.id,id:G.id,height:G.block.height}),G.sortKey=await this._sorter.createSortKey(G.block.id,G.id,G.block.height,!0),G.strict=s,f&&(G.vrf=ku(G.sortKey,h));let $=await this.evalInteraction({interaction:C,interactionTx:G,currentTx:[]},x,A.cachedValue);return $.type!=="ok"&&this.logger.fatal("Error while interacting with contract",{type:$.type,error:$.errorMessage}),$}async callContractForTx(e,t,n){this.maybeResetRootContract();let i=await this.createExecutionContextFromTx(this._contractTxId,t),o=await this.warp.stateEvaluator.eval(i,n);this.logger.debug("callContractForTx - evalStateResult",{result:o.cachedValue.state,txId:this._contractTxId});let f={interaction:{input:e,caller:this._parentContract.txId()},interactionTx:t,currentTx:n},h=await this.evalInteraction(f,i,o.cachedValue);return h.originalValidity=o.cachedValue.validity,h.originalErrorMessages=o.cachedValue.errorMessages,h}async evalInteraction(e,t,n){let i=this.getCallStack().addInteractionData(e),o=et.measure(),s=await t.handler.handle(t,n,e);return i.update({cacheHit:!1,outputState:this._evaluationOptions.stackTrace.saveState?s.state:void 0,executionTime:o.elapsed(!0),valid:s.type==="ok",errorMessage:s.errorMessage,gasUsed:s.gasUsed}),s}parent(){return this._parentContract}callDepth(){return this._callDepth}evaluationOptions(){return this._evaluationOptions}lastReadStateStats(){return this._benchmarkStats}stateHash(e){let t=co(e),n=m6.createHash("sha256");return n.update(t),n.digest("hex")}async syncState(e,t){let{stateEvaluator:n}=this.warp,i=await fetch(`${e}?${new URLSearchParams({id:this._contractTxId,...t})}`).then(o=>o.ok?o.json():Promise.reject(o)).catch(o=>{throw o.body?.message&&this.logger.error(o.body.message),new Error(`Unable to retrieve state. ${o.status}: ${o.body?.message}`)});return await n.syncState(this._contractTxId,i.sortKey,i.state,i.validity),this}async evolve(e,t){return await this.writeInteraction({function:"evolve",value:e},t)}async save(e){if(!this.signature)throw new Error("Wallet not connected. Use 'connect' method first.");return(await new po(this.warp).save(e,this.warp.environment,this.signature)).id}get rootSortKey(){return this._rootSortKey}};var hf=class extends mo{async currentBalance(e){let t=await this.viewState({function:"balance",target:e});if(t.type!=="ok")throw Error(t.errorMessage);return t.result}async currentState(){return(await super.readState()).cachedValue.state}async transfer(e,t){return await this.writeInteraction({function:"transfer",...e},t)}};var Lu=class{constructor(e){this.arweave=e}async mineBlock(){this.validateEnv(),await this.arweave.api.get("mine")}async addFunds(e){let t=await this.arweave.wallets.getAddress(e);await this.arweave.api.get(`/mint/${t}/1000000000000000`)}async isArlocal(){return(await fetch(`${this.arweave.api.config.protocol}://${this.arweave.api.config.host}:${this.arweave.api.config.port}/info`).then(t=>t.ok?t.json():Promise.reject()).catch(t=>{throw new Error(`Unable to get network info: ${t.message}`)})).network.includes("arlocal")}async validateEnv(){if(!await this.isArlocal())throw new Error("Testing features are not available in a non testing environment")}};var Du=class{constructor(e,t){this.baseImplementation=e;this.sourceCode=t}async create(e,t,n){return Object.prototype.hasOwnProperty.call(this.sourceCode,e.txId)&&(e={...e,src:this.sourceCode[e.txId]}),await this.baseImplementation.create(e,t,n)}};var Ap=100;function Fp(r){return!r.node.parent?.id&&!r.node.bundledIn?.id}var Ms=class{constructor(e,t){this.arweave=e;this.environment=t;this.arweaveWrapper=new Pr(e),this.sorter=new io(e)}logger=Ae.INST.create("ArweaveGatewayInteractionsLoader");arweaveWrapper;sorter;async load(e,t,n,i){this.logger.debug("Loading interactions for",{contractId:e,fromSortKey:t,toSortKey:n});let o=this.sorter.extractBlockHeight(t),s=this.sorter.extractBlockHeight(n),f={tags:[{name:"App-Name",values:["SmartWeaveAction"]},{name:"Contract",values:[e]}],blockFilter:{min:o,max:s},first:Ap},h=et.measure(),g=await this.loadPages(f);if(h.stop(),i.internalWrites){let I={tags:[{name:"Interact-Write",values:[e]}],blockFilter:{min:o,max:s},first:Ap},A=await this.loadPages(I);this.logger.debug("Inner writes interactions length:",A.length),g=g.concat(A)}g=g.filter(I=>I.node.block&&I.node.block.id&&I.node.block.height);let x=await this.sorter.sort(g);t&&n?x=x.filter(I=>I.node.sortKey.localeCompare(t)>0&&I.node.sortKey.localeCompare(n)<=0):t&&!n?x=x.filter(I=>I.node.sortKey.localeCompare(t)>0):!t&&n&&(x=x.filter(I=>I.node.sortKey.localeCompare(n)<=0)),this.logger.debug("All loaded interactions:",{from:t,to:n,loaded:x.length,time:h.elapsed()});let T=this.environment==="local"||this.environment==="testnet";return x.map(I=>{let A=I.node;return T&&A.tags.some(C=>C.name=="Request-Vrf"&&C.value==="true")&&(A.vrf=ku(A.sortKey,this.arweave)),A})}async loadPages(e){let t=await this.getNextPage(e),n=t.edges.filter(i=>Fp(i));for(;t.pageInfo.hasNextPage;){let i=t.edges[Ap-1].cursor;e={...e,after:i},t=await this.getNextPage(e),n.push(...t.edges.filter(o=>Fp(o)))}return n}async getNextPage(e){let t=et.measure(),n=await this.arweaveWrapper.gql(Ms.query,e);for(this.logger.debug("GQL page load:",t.elapsed());n.status===403;)this.logger.warn(`GQL rate limiting, waiting ${Ms._30seconds}ms before next try.`),await Ka(Ms._30seconds),n=await this.arweaveWrapper.gql(Ms.query,e);if(n.status!==200)throw new Error(`Unable to retrieve transactions. Arweave gateway responded with status ${n.status}.`);if(n.data.errors)throw this.logger.error(n.data.errors),new Error("Error while loading interaction transactions");return n.data.data.transactions}type(){return"arweave"}clearCache(){}},yo=Ms;Us(yo,"query",`query Transactions($tags: [TagFilter!]!, $blockFilter: BlockFilter!, $first: Int!, $after: String) {
    transactions(tags: $tags, block: $blockFilter, first: $first, sort: HEIGHT_ASC, after: $after) {
      pageInfo {
        hasNextPage
      }
      edges {
        node {
          id
          owner { address }
          recipient
          tags {
            name
            value
          }
          block {
            height
            id
            timestamp
          }
          fee { winston }
          quantity { winston }
          parent { id }
          bundledIn { id }
        }
        cursor
      }
    }
  }`),Us(yo,"_30seconds",30*1e3);var Is=class{constructor(e){this.delegate=e}logger=Ae.INST.create("CacheableInteractionsLoader");interactionsCache=new Map;async load(e,t,n,i){if(this.logger.debug("Loading interactions for",{contractTxId:e,fromSortKey:t,toSortKey:n}),this.interactionsCache.has(e)){let o=this.interactionsCache.get(e);if(o?.length){let s=o[o.length-1].sortKey;if(s.localeCompare(n)<0){let f=await this.delegate.load(e,s,n,i),h=o.concat(f);return this.interactionsCache.set(e,h),h}}return o}else{let o=await this.delegate.load(e,t,n,i);return o.length&&this.interactionsCache.set(e,o),o}}type(){return this.delegate.type()}clearCache(){this.interactionsCache.clear()}};var Wu=ct(ls()),R6=ct(cs());function _6(r){return r.arrayBuffer?r.arrayBuffer():new Promise((e,t)=>{let n=new FileReader;n.addEventListener("loadend",()=>{e(n.result)}),n.addEventListener("error",t),n.readAsArrayBuffer(r)})}async function AF(r){let e=await _6(r);return new Uint8Array(e)}function S6(r){return typeof Blob<"u"&&r instanceof Blob}function mf(r){return typeof SharedArrayBuffer<"u"&&r instanceof SharedArrayBuffer}var FF=typeof process<"u"&&process.versions&&typeof process.versions.node<"u"&&typeof process.versions.electron>"u";function TF(r){return r.byteOffset===0&&r.byteLength===r.buffer.byteLength}var qu=class{constructor(e){this.typedArray=e instanceof ArrayBuffer||mf(e)?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}async getLength(){return this.typedArray.byteLength}async read(e,t){return new Uint8Array(this.typedArray.buffer,this.typedArray.byteOffset+e,t)}},ju=class{constructor(e){this.blob=e}async getLength(){return this.blob.size}async read(e,t){let n=this.blob.slice(e,e+t),i=await _6(n);return new Uint8Array(i)}async sliceAsBlob(e,t,n=""){return this.blob.slice(e,e+t,n)}};function MF(r,e){var t=Uint8Array;if(r[0]==3&&r[1]==0)return e||new t(0);var n=CF,i=E6,o=IF,s=A6,f=e==null;f&&(e=new t(r.length>>>2<<3));for(var h=0,g=0,x=0,T=0,I=0,A=0,C=0,j=0,G=0,$,Z;h==0;){if(h=n(r,G,1),g=n(r,G+1,2),G+=3,g==0){(G&7)!=0&&(G+=8-(G&7));var ee=(G>>>3)+4,se=r[ee-4]|r[ee-3]<<8;f&&(e=Tp(e,j+se)),e.set(new t(r.buffer,r.byteOffset+ee,se),j),G=ee+se<<3,j+=se;continue}if(f&&(e=Tp(e,j+(1<<17))),g==1&&($=Ee.flmap,Z=Ee.fdmap,A=(1<<9)-1,C=(1<<5)-1),g==2){x=i(r,G,5)+257,T=i(r,G+5,5)+1,I=i(r,G+10,4)+4,G+=14;for(var V=0;V<38;V+=2)Ee.itree[V]=0,Ee.itree[V+1]=0;for(var q=1,V=0;V<I;V++){var z=i(r,G+V*3,3);Ee.itree[(Ee.ordr[V]<<1)+1]=z,z>q&&(q=z)}G+=3*I,df(Ee.itree,q),pf(Ee.itree,q,Ee.imap),$=Ee.lmap,Z=Ee.dmap,G=o(Ee.imap,(1<<q)-1,x+T,r,G,Ee.ttree);var J=y6(Ee.ttree,0,x,Ee.ltree);A=(1<<J)-1;var H=y6(Ee.ttree,x,T,Ee.dtree);C=(1<<H)-1,df(Ee.ltree,J),pf(Ee.ltree,J,$),df(Ee.dtree,H),pf(Ee.dtree,H,Z)}for(;;){var L=$[s(r,G)&A];G+=L&15;var l=L>>>4;if(l>>>8==0)e[j++]=l;else{if(l==256)break;var b=j+l-254;if(l>264){var d=Ee.ldef[l-257];b=j+(d>>>3)+i(r,G,d&7),G+=d&7}var a=Z[s(r,G)&C];G+=a&15;var u=a>>>4,v=Ee.ddef[u],F=(v>>>4)+n(r,G,v&15);for(G+=v&15,f&&(e=Tp(e,j+(1<<17)));j<b;)e[j]=e[j++-F],e[j]=e[j++-F],e[j]=e[j++-F],e[j]=e[j++-F];j=b}}}return e.length==j?e:e.slice(0,j)}function Tp(r,e){var t=r.length;if(e<=t)return r;var n=new Uint8Array(Math.max(t<<1,e));return n.set(r,0),n}function IF(r,e,t,n,i,o){for(var s=E6,f=A6,h=0;h<t;){var g=r[f(n,i)&e];i+=g&15;var x=g>>>4;if(x<=15)o[h]=x,h++;else{var T=0,I=0;x==16?(I=3+s(n,i,2),i+=2,T=o[h-1]):x==17?(I=3+s(n,i,3),i+=3):x==18&&(I=11+s(n,i,7),i+=7);for(var A=h+I;h<A;)o[h]=T,h++}}return i}function y6(r,e,t,n){for(var i=0,o=0,s=n.length>>>1;o<t;){var f=r[o+e];n[o<<1]=0,n[(o<<1)+1]=f,f>i&&(i=f),o++}for(;o<s;)n[o<<1]=0,n[(o<<1)+1]=0,o++;return i}function df(r,e){for(var t=r.length,n,i,o,s,f,h=Ee.bl_count,s=0;s<=e;s++)h[s]=0;for(s=1;s<t;s+=2)h[r[s]]++;var g=Ee.next_code;for(n=0,h[0]=0,i=1;i<=e;i++)n=n+h[i-1]<<1,g[i]=n;for(o=0;o<t;o+=2)f=r[o+1],f!=0&&(r[o]=g[f],g[f]++)}function pf(r,e,t){for(var n=r.length,i=Ee.rev15,o=0;o<n;o+=2)if(r[o+1]!=0)for(var s=o>>1,f=r[o+1],h=s<<4|f,g=e-f,x=r[o]<<g,T=x+(1<<g);x!=T;){var I=i[x]>>>15-e;t[I]=h,x++}}function b6(r,e){for(var t=Ee.rev15,n=15-e,i=0;i<r.length;i+=2){var o=r[i]<<e-r[i+1];r[i]=t[o]>>>n}}function E6(r,e,t){return(r[e>>>3]|r[(e>>>3)+1]<<8)>>>(e&7)&(1<<t)-1}function CF(r,e,t){return(r[e>>>3]|r[(e>>>3)+1]<<8|r[(e>>>3)+2]<<16)>>>(e&7)&(1<<t)-1}function A6(r,e){return(r[e>>>3]|r[(e>>>3)+1]<<8|r[(e>>>3)+2]<<16)>>>(e&7)}var Ee=function(){var r=Uint16Array,e=Uint32Array;return{next_code:new r(16),bl_count:new r(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new r(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new e(32),flmap:new r(512),fltree:[],fdmap:new r(32),fdtree:[],lmap:new r(32768),ltree:[],ttree:[],dmap:new r(32768),dtree:[],imap:new r(512),itree:[],rev15:new r(1<<15),lhst:new e(286),dhst:new e(30),ihst:new e(19),lits:new e(15e3),strt:new r(1<<16),prev:new r(1<<15)}}();(function(){for(var r=32768,e=0;e<r;e++){var t=e;t=(t&2863311530)>>>1|(t&1431655765)<<1,t=(t&3435973836)>>>2|(t&858993459)<<2,t=(t&4042322160)>>>4|(t&252645135)<<4,t=(t&4278255360)>>>8|(t&16711935)<<8,Ee.rev15[e]=(t>>>16|t<<16)>>>17}function n(i,o,s){for(;o--!=0;)i.push(0,s)}for(var e=0;e<32;e++)Ee.ldef[e]=Ee.of0[e]<<3|Ee.exb[e],Ee.ddef[e]=Ee.df0[e]<<4|Ee.dxb[e];n(Ee.fltree,144,8),n(Ee.fltree,255-143,9),n(Ee.fltree,279-255,7),n(Ee.fltree,287-279,8),df(Ee.fltree,9),pf(Ee.fltree,9,Ee.flmap),b6(Ee.fltree,9),n(Ee.fdtree,32,5),df(Ee.fdtree,5),pf(Ee.fdtree,5,Ee.fdmap),b6(Ee.fdtree,5),n(Ee.itree,19,0),n(Ee.ltree,286,0),n(Ee.dtree,30,0),n(Ee.ttree,320,0)})();var v6={table:function(){for(var r=new Uint32Array(256),e=0;e<256;e++){for(var t=e,n=0;n<8;n++)t&1?t=3988292384^t>>>1:t=t>>>1;r[e]=t}return r}(),update:function(r,e,t,n){for(var i=0;i<n;i++)r=v6.table[(r^e[t+i])&255]^r>>>8;return r},crc:function(r,e,t){return v6.update(4294967295,r,e,t)^4294967295}};function BF(r,e){return MF(r,e)}var yf={numWorkers:1,workerURL:"",useWorkers:!1},OF=0,w6=0,Cp=!0,RF=[],Uu=[],Cs=[],Bp=new Map;function PF(r){F6(r.target);let{id:e,error:t,data:n}=r.data,i=Bp.get(e);Bp.delete(e),t?i.reject(t):i.resolve(n)}function Mp(r){return new Promise((e,t)=>{let n=new Worker(r);n.onmessage=i=>{i.data==="start"?(n.onerror=void 0,n.onmessage=void 0,e(n)):t(new Error(`unexpected message: ${i.data}`))},n.onerror=t})}function NF(r,e){return r.require(e)}var x6=function(){if(FF){let{Worker:r}=NF(module,"worker_threads");return{async createWorker(e){return new r(e)},addEventListener(e,t){e.on("message",n=>{t({target:e,data:n})})},async terminate(e){await e.terminate()}}}else return{async createWorker(r){try{return await Mp(r)}catch{console.warn("could not load worker:",r)}let e;try{let t=await fetch(r,{mode:"cors"});if(!t.ok)throw new Error(`could not load: ${r}`);e=await t.text(),r=URL.createObjectURL(new Blob([e],{type:"application/javascript"}));let n=await Mp(r);return yf.workerURL=r,n}catch{console.warn("could not load worker via fetch:",r)}if(e!==void 0)try{r=`data:application/javascript;base64,${btoa(e)}`;let t=await Mp(r);return yf.workerURL=r,t}catch{console.warn("could not load worker via dataURI")}throw console.warn("workers will not be used"),new Error("can not start workers")},addEventListener(r,e){r.addEventListener("message",e)},async terminate(r){r.terminate()}}}();function F6(r){Uu.push(r),T6()}async function kF(){if(Uu.length===0&&w6<yf.numWorkers){++w6;try{let r=await x6.createWorker(yf.workerURL);RF.push(r),Uu.push(r),x6.addEventListener(r,PF)}catch{Cp=!1}}return Uu.pop()}function LF(r,e,t,n){let i=new Uint8Array(e);BF(r,i),n(t?new Blob([i],{type:t}):i.buffer)}async function T6(){if(Cs.length!==0){if(yf.useWorkers&&Cp){let r=await kF();if(Cp){if(r){if(Cs.length===0){F6(r);return}let{id:e,src:t,uncompressedSize:n,type:i,resolve:o,reject:s}=Cs.shift();Bp.set(e,{id:e,resolve:o,reject:s});let f=[];r.postMessage({type:"inflate",data:{id:e,type:i,src:t,uncompressedSize:n}},f)}return}}for(;Cs.length;){let{src:r,uncompressedSize:e,type:t,resolve:n}=Cs.shift(),i=r;S6(r)&&(i=await AF(r)),LF(i,e,t,n)}}}function M6(r,e,t){return new Promise((n,i)=>{Cs.push({src:r,uncompressedSize:e,type:t,resolve:n,reject:i,id:OF++}),T6()})}function DF(r,e){let t=r&31,n=(r>>5&15)-1,i=(r>>9&127)+1980,o=0,s=(e&31)*2,f=e>>5&63,h=e>>11&31;return new Date(i,n,t,h,f,s,o)}var Op=class{constructor(e,t){this._reader=e,this._rawEntry=t,this.name=t.name,this.nameBytes=t.nameBytes,this.size=t.uncompressedSize,this.compressedSize=t.compressedSize,this.comment=t.comment,this.commentBytes=t.commentBytes,this.compressionMethod=t.compressionMethod,this.lastModDate=DF(t.lastModFileDate,t.lastModFileTime),this.isDirectory=t.uncompressedSize===0&&t.name.endsWith("/"),this.encrypted=!!(t.generalPurposeBitFlag&1),this.externalFileAttributes=t.externalFileAttributes,this.versionMadeBy=t.versionMadeBy}async blob(e="application/octet-stream"){return await XF(this._reader,this._rawEntry,e)}async arrayBuffer(){return await VF(this._reader,this._rawEntry)}async text(){let e=await this.arrayBuffer();return gf(new Uint8Array(e))}async json(){let e=await this.text();return JSON.parse(e)}},Ip=22,UF=65535,qF=101010256,jF=101075792;async function Bs(r,e,t){return await r.read(e,t)}async function Rp(r,e,t,n){return r.sliceAsBlob?await r.sliceAsBlob(e,t,n):await r.read(e,t)}var WF={unsigned(){return 0}};function Mt(r,e){return r[e]+r[e+1]*256}function kt(r,e){return r[e]+r[e+1]*256+r[e+2]*65536+r[e+3]*16777216}function bo(r,e){return kt(r,e)+kt(r,e+4)*4294967296}var $F=new TextDecoder;function gf(r,e){return mf(r.buffer)&&(r=new Uint8Array(r)),$F.decode(r)}async function HF(r,e){let t=Math.min(Ip+UF,e),n=e-t,i=await Bs(r,n,t);for(let o=t-Ip;o>=0;--o){if(kt(i,o)!==qF)continue;let s=new Uint8Array(i.buffer,i.byteOffset+o,i.byteLength-o),f=Mt(s,4);if(f!==0)throw new Error(`multi-volume zip files are not supported. This is volume: ${f}`);let h=Mt(s,10),g=kt(s,12),x=kt(s,16),T=Mt(s,20),I=s.length-Ip;if(T!==I)throw new Error(`invalid comment length. expected: ${I}, actual: ${T}`);let A=new Uint8Array(s.buffer,s.byteOffset+22,T),C=gf(A);return h===65535||x===4294967295?await zF(r,n+o,C,A):await I6(r,x,g,h,C,A)}throw new Error("could not find end of central directory. maybe not zip file")}var KF=117853008;async function zF(r,e,t,n){let i=e-20,o=await Bs(r,i,20);if(kt(o,0)!==KF)throw new Error("invalid zip64 end of central directory locator signature");let s=bo(o,8),f=await Bs(r,s,56);if(kt(f,0)!==jF)throw new Error("invalid zip64 end of central directory record signature");let h=bo(f,32),g=bo(f,40),x=bo(f,48);return I6(r,x,g,h,t,n)}var GF=33639248;async function I6(r,e,t,n,i,o){let s=0,f=await Bs(r,e,t),h=[];for(let x=0;x<n;++x){let T=f.subarray(s,s+46),I=kt(T,0);if(I!==GF)throw new Error(`invalid central directory file header signature: 0x${I.toString(16)}`);let A={versionMadeBy:Mt(T,4),versionNeededToExtract:Mt(T,6),generalPurposeBitFlag:Mt(T,8),compressionMethod:Mt(T,10),lastModFileTime:Mt(T,12),lastModFileDate:Mt(T,14),crc32:kt(T,16),compressedSize:kt(T,20),uncompressedSize:kt(T,24),fileNameLength:Mt(T,28),extraFieldLength:Mt(T,30),fileCommentLength:Mt(T,32),internalFileAttributes:Mt(T,36),externalFileAttributes:kt(T,38),relativeOffsetOfLocalHeader:kt(T,42)};if(A.generalPurposeBitFlag&64)throw new Error("strong encryption is not supported");s+=46;let C=f.subarray(s,s+A.fileNameLength+A.extraFieldLength+A.fileCommentLength);A.nameBytes=C.slice(0,A.fileNameLength),A.name=gf(A.nameBytes);let j=A.fileNameLength+A.extraFieldLength,G=C.slice(A.fileNameLength,j);A.extraFields=[];let $=0;for(;$<G.length-3;){let ee=Mt(G,$+0),se=Mt(G,$+2),V=$+4,q=V+se;if(q>G.length)throw new Error("extra field length exceeds extra field buffer size");A.extraFields.push({id:ee,data:G.slice(V,q)}),$=q}if(A.commentBytes=C.slice(j,j+A.fileCommentLength),A.comment=gf(A.commentBytes),s+=C.length,A.uncompressedSize===4294967295||A.compressedSize===4294967295||A.relativeOffsetOfLocalHeader===4294967295){let ee=A.extraFields.find(q=>q.id===1);if(!ee)throw new Error("expected zip64 extended information extra field");let se=ee.data,V=0;if(A.uncompressedSize===4294967295){if(V+8>se.length)throw new Error("zip64 extended information extra field does not include uncompressed size");A.uncompressedSize=bo(se,V),V+=8}if(A.compressedSize===4294967295){if(V+8>se.length)throw new Error("zip64 extended information extra field does not include compressed size");A.compressedSize=bo(se,V),V+=8}if(A.relativeOffsetOfLocalHeader===4294967295){if(V+8>se.length)throw new Error("zip64 extended information extra field does not include relative header offset");A.relativeOffsetOfLocalHeader=bo(se,V),V+=8}}let Z=A.extraFields.find(ee=>ee.id===28789&&ee.data.length>=6&&ee.data[0]===1&&kt(ee.data,1),WF.unsigned(A.nameBytes));if(Z&&(A.fileName=gf(Z.data.slice(5))),A.compressionMethod===0){let ee=A.uncompressedSize;if((A.generalPurposeBitFlag&1)!==0&&(ee+=12),A.compressedSize!==ee)throw new Error(`compressed size mismatch for stored file: ${A.compressedSize} != ${ee}`)}h.push(A)}return{zip:{comment:i,commentBytes:o},entries:h.map(x=>new Op(r,x))}}async function C6(r,e){if(e.generalPurposeBitFlag&1)throw new Error("encrypted entries not supported");let t=await Bs(r,e.relativeOffsetOfLocalHeader,30),n=await r.getLength(),i=kt(t,0);if(i!==67324752)throw new Error(`invalid local file header signature: 0x${i.toString(16)}`);let o=Mt(t,26),s=Mt(t,28),f=e.relativeOffsetOfLocalHeader+t.length+o+s,h;if(e.compressionMethod===0)h=!1;else if(e.compressionMethod===8)h=!0;else throw new Error(`unsupported compression method: ${e.compressionMethod}`);let g=f,x=g+e.compressedSize;if(e.compressedSize!==0&&x>n)throw new Error(`file data overflows file bounds: ${g} +  ${e.compressedSize}  > ${n}`);return{decompress:h,fileDataStart:g}}async function VF(r,e){let{decompress:t,fileDataStart:n}=await C6(r,e);if(!t){let s=await Bs(r,n,e.compressedSize);return TF(s)?s.buffer:s.slice().buffer}let i=await Rp(r,n,e.compressedSize);return await M6(i,e.uncompressedSize)}async function XF(r,e,t){let{decompress:n,fileDataStart:i}=await C6(r,e);if(!n){let f=await Rp(r,i,e.compressedSize,t);return S6(f)?f:new Blob([mf(f.buffer)?new Uint8Array(f):f],{type:t})}let o=await Rp(r,i,e.compressedSize);return await M6(o,e.uncompressedSize,t)}async function JF(r){let e;if(typeof Blob<"u"&&r instanceof Blob)e=new ju(r);else if(r instanceof ArrayBuffer||r&&r.buffer&&r.buffer instanceof ArrayBuffer)e=new qu(r);else if(mf(r)||mf(r.buffer))e=new qu(r);else if(typeof r=="string"){let n=await fetch(r);if(!n.ok)throw new Error(`failed http request ${r}, status: ${n.status}: ${n.statusText}`);let i=await n.blob();e=new ju(i)}else if(typeof r.getLength=="function"&&typeof r.read=="function")e=r;else throw new Error("unsupported source type");let t=await e.getLength();if(t>Number.MAX_SAFE_INTEGER)throw new Error(`file too large. size: ${t}. Only file sizes up 4503599627370496 bytes are supported`);return await HF(e,t)}async function B6(r){let{zip:e,entries:t}=await JF(r);return{zip:e,entries:Object.fromEntries(t.map(n=>[n.name,n]))}}var O6=ct(ls());var vo=class{constructor(e){this.src=e;this.splitted=this.splitBuffer(e),this.logger.debug(`Buffer splitted into ${this.splitted.length} parts`)}logger=Ae.INST.create("WasmSrc");splitted;wasmBinary(){return this.splitted[0]}async sourceCode(){let{entries:e}=await B6(this.splitted[1]),t=new Map;for(let[n,i]of Object.entries(e)){if(i.isDirectory)continue;let o=await i.text();t.set(n,o)}return t}additionalCode(){return this.splitted.length==2?null:this.splitted[2].toString()}splitBuffer(e){let t="",n=parseInt(e.toString("utf8",0,1));this.logger.debug(`Number of elements: ${n}`);let i=e.length,o=0,s=0;for(let g=2;g<i;g++){let x=e.toString("utf8",g,g+1);if(x=="|"&&o++,o==n){s=g+1;break}t+=x}this.logger.debug("Parsed:",{header:t,dataStart:s});let f=t.split("|").map(g=>parseInt(g));this.logger.debug("Lengths",f);let h=[];for(let g of f){let x=O6.Buffer.alloc(g),T=s+g;e.copy(x,0,s,T),s=T,h.push(x)}return h}};var bf=class{constructor(e,t,n,i){this.baseUrl=e;this.cache=n;this.env=i;this.baseUrl=za(e),this.contractDefinitionLoader=new wo(t,i),this.arweaveWrapper=new Pr(t),this.tagsParser=new ir}rLogger=Ae.INST.create("WarpGatewayContractDefinitionLoader");contractDefinitionLoader;arweaveWrapper;tagsParser;async load(e,t){let n=e;t&&(n+=`_${t}`);let i=await this.cache.get(n,"cd");if(i){this.rLogger.debug("WarpGatewayContractDefinitionLoader: Hit from cache!");let f=i.cachedValue;return f.contractType=="wasm"&&f.srcBinary.data&&(f.srcBinary=Wu.Buffer.from(f.srcBinary.data)),this.verifyEnv(f),f}let o=et.measure(),s=await this.doLoad(e,t);return this.rLogger.info(`Contract definition loaded in: ${o.elapsed()}`),this.verifyEnv(s),await this.cache.put({contractTxId:n,sortKey:"cd"},s),s}async doLoad(e,t){try{let n=await fetch(`${this.baseUrl}/gateway/contract?txId=${e}${t?`&srcTxId=${t}`:""}`).then(i=>i.ok?i.json():Promise.reject(i)).catch(i=>{throw i.body?.message&&this.rLogger.error(i.body.message),new Error(`Unable to retrieve contract data. Warp gateway responded with status ${i.status}:${i.body?.message}`)});if(n.srcBinary!=null&&!(n.srcBinary instanceof Wu.Buffer)&&(n.srcBinary=Wu.Buffer.from(n.srcBinary.data)),n.srcBinary){let i=new vo(n.srcBinary);n.srcBinary=i.wasmBinary();let o;n.srcTx?o=new R6.default({...n.srcTx}):o=await this.arweaveWrapper.tx(n.srcTxId);let s=JSON.parse(this.tagsParser.getTag(o,"Wasm-Meta"));n.metadata=s}return n.contractType=n.src?"js":"wasm",n}catch(n){return this.rLogger.warn("Falling back to default contracts loader",n),await this.contractDefinitionLoader.doLoad(e,t)}}async loadContractSource(e){return await this.contractDefinitionLoader.loadContractSource(e)}type(){return"warp"}setCache(e){this.cache=e}getCache(){return this.cache}verifyEnv(e){if(e.testnet&&this.env!=="testnet")throw new Error('Trying to use testnet contract in a non-testnet env. Use the "forTestnet" factory method.');if(!e.testnet&&this.env==="testnet")throw new Error("Trying to use non-testnet contract in a testnet env.")}};var vf=class{constructor(e,t,n="custom"){this._arweave=e;this._stateCache=t;this._environment=n}_definitionLoader;_interactionsLoader;_executorFactory;_stateEvaluator;setDefinitionLoader(e){return this._definitionLoader=e,this}setInteractionsLoader(e){return this._interactionsLoader=e,this}setExecutorFactory(e){return this._executorFactory=e,this}setStateEvaluator(e){return this._stateEvaluator=e,this}overwriteSource(e){if(this._executorFactory==null)throw new Error("Set base ExecutorFactory first");return this._executorFactory=new Du(this._executorFactory,e),this.build()}useWarpGateway(e,t){this._interactionsLoader=new Is(new Za(e.address,e.confirmationStatus,e.source));let n=new Ui({...t,dbLocation:`${t.dbLocation}/contracts`});return this._definitionLoader=new bf(e.address,this._arweave,n,this._environment),this}useArweaveGateway(){return this._definitionLoader=new wo(this._arweave,this._environment),this._interactionsLoader=new Is(new yo(this._arweave,this._environment)),this}build(){return new xo(this._arweave,this._definitionLoader,this._interactionsLoader,this._executorFactory,this._stateEvaluator,this._environment)}};var Pp=["evm-signature-verification","smartweave-extension","subscription","ivm-handler-api"];var xo=class{constructor(e,t,n,i,o,s="custom"){this.arweave=e;this.definitionLoader=t;this.interactionsLoader=n;this.executorFactory=i;this.stateEvaluator=o;this.environment=s;this.createContract=new uf(e,this),this.testing=new Lu(e)}createContract;testing;plugins=new Map;static builder(e,t,n){return new vf(e,t,n)}contract(e,t,n){return new mo(e,this,t,n)}pst(e){return new hf(e,this)}useStateCache(e){return this.stateEvaluator.setCache(e),this}useContractCache(e){return this.definitionLoader.setCache(e),this}use(e){let t=e.type();if(!Pp.some(n=>n==t))throw new Error(`Unknown plugin type ${t}.`);return this.plugins.set(t,e),this}hasPlugin(e){return this.plugins.has(e)}loadPlugin(e){if(!this.hasPlugin(e))throw new Error(`Plugin ${e} not registered.`);return this.plugins.get(e)}async generateWallet(){let e=await this.arweave.wallets.generate();return await this.testing.isArlocal()&&await this.testing.addFunds(e),{jwk:e,address:await this.arweave.wallets.jwkToAddress(e)}}};var ri="https://d1o5nlqr4okus2.cloudfront.net",Hu={confirmationStatus:{notCorrupted:!0},source:null,address:ri},P6="./cache/warp",Os={inMemory:!1,dbLocation:P6},Np=class{stateCache;static forLocal(e=1984,t=$u.default.init({host:"localhost",port:e,protocol:"http"}),n={...Os,inMemory:!0}){return this.customArweaveGw(t,n,"local")}static forTestnet(e=Os,t=!1,n=$u.default.init({host:"arweave.net",port:443,protocol:"https"})){return t?this.customArweaveGw(n,e,"testnet"):this.customWarpGw(n,Hu,e,"testnet")}static forMainnet(e=Os,t=!1,n=$u.default.init({host:"arweave.net",port:443,protocol:"https"})){return t?this.customArweaveGw(n,e,"mainnet"):this.customWarpGw(n,Hu,e,"mainnet")}static custom(e,t,n){let i=new Ui({...t,dbLocation:`${t.dbLocation}/state`}),o=new tu(e,new af(e),new qi),s=new ef(e,i,[new Gn]);return xo.builder(e,i,n).setExecutorFactory(o).setStateEvaluator(s)}static customArweaveGw(e,t=Os,n){return this.custom(e,t,n).useArweaveGateway().build()}static customWarpGw(e,t=Hu,n=Os,i){return this.custom(e,n,i).useWarpGateway(t,n).build()}};var Pr=class{constructor(e){this.arweave=e;this.baseUrl=`${e.api.config.protocol}://${e.api.config.host}:${e.api.config.port}`,this.logger.debug("baseurl",this.baseUrl)}logger=Ae.INST.create("ArweaveWrapper");baseUrl;async warpGwInfo(){return await this.doFetchInfo(`${ri}/gateway/arweave/info`)}async warpGwBlock(){return this.logger.debug("Calling warp gw block info"),await this.doFetchInfo(`${ri}/gateway/arweave/block`)}async info(){return await this.doFetchInfo(`${this.baseUrl}/info`)}async gql(e,t){try{let n=JSON.stringify({query:e,variables:t});return{data:await fetch(`${this.baseUrl}/graphql`,{method:"POST",body:n,headers:{"Accept-Encoding":"gzip, deflate, br","Content-Type":"application/json",Accept:"application/json"}}).then(o=>o.ok?o.json():Promise.reject(o)).catch(o=>{throw o.body?.message&&this.logger.error(o.body.message),new Error(`Unable to retrieve gql page. ${o.status}: ${o.body?.message}`)}),status:200}}catch(n){throw this.logger.error("Error while loading gql",n),n}}async tx(e){let t=await fetch(`${this.baseUrl}/tx/${e}`).then(n=>n.ok?n.json():Promise.reject(n)).catch(n=>{throw n.body?.message&&this.logger.error(n.body.message),new Error(`Unable to retrieve tx ${e}. ${n.status}. ${n.body?.message}`)});return new k6.default({...t})}async txData(e){let t=await fetch(`${this.baseUrl}/${e}`);if(t.ok){let n=await t.arrayBuffer();return kp.Buffer.from(n)}else{this.logger.warn(`Unable to load data from arweave.net/${e} endpoint, falling back to arweave.js`);let n=await this.arweave.transactions.getData(e,{decode:!0});return kp.Buffer.from(n)}}async txDataString(e){let t=await this.txData(e);return N6.default.utils.bufferToString(t)}async doFetchInfo(e){try{return await fetch(e).then(n=>n.ok?n.json():Promise.reject(n)).catch(n=>{throw n.body?.message&&this.logger.error(n.body.message),new Error(`Unable to retrieve info. ${n.status}: ${n.body?.message}`)})}catch(t){throw this.logger.error("Error while loading info",t),t}}};var YF=["application/javascript","application/wasm"],wo=class{constructor(e,t){this.arweave=e;this.env=t;this.arweaveWrapper=new Pr(e),this.tagsParser=new ir}logger=Ae.INST.create("ContractDefinitionLoader");arweaveWrapper;tagsParser;async load(e,t){let n=et.measure(),i=await this.doLoad(e,t);return this.logger.info(`Contract definition loaded in: ${n.elapsed()}`),i}async doLoad(e,t){let n=et.measure(),i=await this.arweaveWrapper.tx(e),o=await this.arweave.wallets.ownerToAddress(i.owner);this.logger.debug("Contract tx and owner",n.elapsed()),n.reset();let s=t||this.tagsParser.getTag(i,"Contract-Src"),f=this.tagsParser.getTag(i,"Warp-Testnet")||null;if(f&&this.env!=="testnet")throw new Error('Trying to use testnet contract in a non-testnet env. Use the "forTestnet" factory method.');if(!f&&this.env==="testnet")throw new Error("Trying to use non-testnet contract in a testnet env.");let h=this.tagsParser.getTag(i,"Min-Fee");this.logger.debug("Tags decoding",n.elapsed()),n.reset();let g=await this.evalInitialState(i);this.logger.debug("init state",g);let x=JSON.parse(await this.evalInitialState(i));this.logger.debug("Parsing src and init state",n.elapsed());let{src:T,srcBinary:I,srcWasmLang:A,contractType:C,metadata:j,srcTx:G}=await this.loadContractSource(s);return{txId:e,srcTxId:s,src:T,srcBinary:I,srcWasmLang:A,initState:x,minFee:h,owner:o,contractType:C,metadata:j,contractTx:i.toJSON(),srcTx:G,testnet:f}}async loadContractSource(e){let t=et.measure(),n=await this.arweaveWrapper.tx(e),i=this.tagsParser.getTag(n,"Content-Type");if(!YF.includes(i))throw new Error(`Contract source content type ${i} not supported`);let o=i=="application/javascript"?"js":"wasm",s=o=="js"?await this.arweaveWrapper.txDataString(e):await this.arweaveWrapper.txData(e),f,h,g;if(o=="wasm"){if(h=new vo(s),f=this.tagsParser.getTag(n,"Wasm-Lang"),!f)throw new Error(`Wasm lang not set for wasm contract src ${e}`);g=JSON.parse(this.tagsParser.getTag(n,"Wasm-Meta"))}return this.logger.debug("Contract src tx load",t.elapsed()),t.reset(),{src:o=="js"?s:null,srcBinary:o=="wasm"?h.wasmBinary():null,srcWasmLang:f,contractType:o,metadata:g,srcTx:n.toJSON()}}async evalInitialState(e){if(this.tagsParser.getTag(e,"Init-State"))return this.tagsParser.getTag(e,"Init-State");if(this.tagsParser.getTag(e,"Init-State-TX")){let t=this.tagsParser.getTag(e,"Init-State-TX");return this.arweaveWrapper.txDataString(t)}else return this.arweaveWrapper.txDataString(e.id)}type(){return"arweave"}setCache(e){throw new Error("No cache implemented for this loader")}getCache(){throw new Error("No cache implemented for this loader")}};var Lp=class{dtor};return H6(QF);})();
/*
 * [js-sha512]{@link https://github.com/emn178/js-sha512}
 *
 * @version 0.8.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2018
 * @license MIT
 */
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
/*! run-parallel-limit. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
/**
 * [js-sha256]{@link https://github.com/emn178/js-sha256}
 *
 * @version 0.9.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2017
 * @license MIT
 */
